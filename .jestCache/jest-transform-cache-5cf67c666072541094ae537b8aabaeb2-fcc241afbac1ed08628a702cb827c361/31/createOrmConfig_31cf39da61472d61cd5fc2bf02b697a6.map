{"file":"/Users/davidwalsh/code-local/0x-rfq-api/src/createOrmConfig.ts","mappings":";;;AAEA,qCAAoE;AACpE,yCAqBoB;AACpB,kGAA8F;AAE9F,MAAM,QAAQ,GAAG;IACb,+BAAoB;IACpB,4BAAiB;IACjB,sCAA2B;IAC3B,4BAAiB;IACjB,yBAAc;IACd,kEAA+B;IAC/B,uCAA4B;IAC5B,mCAAwB;IACxB,0CAA+B;IAC/B,8BAAmB;IACnB,wCAA6B;IAC7B,oCAAyB;IACzB,0BAAe;IACf,wBAAa;IACb,0CAA+B;IAC/B,0BAAe;IACf,4BAAiB;IACjB,4CAAiC;IACjC,wCAA6B;IAC7B,mBAAQ;IACR,iCAAsB;CACzB,CAAC;AAEK,MAAM,YAAY,GAAG,CAAC,cAAsB,qBAAY,EAAqB,EAAE,CAAC,CAAC;IACpF,IAAI,EAAE,UAAU;IAChB,QAAQ;IACR,WAAW,EAAE,KAAK;IAClB,OAAO,EAAE,IAAI;IACb,MAAM,EAAE,OAAO;IACf,KAAK,EAAE;QACH,GAAG,EAAE,EAAE;QACP,iBAAiB,EAAE,KAAK;KAC3B;IACD,UAAU,EAAE,CAAC,uBAAuB,CAAC;IACrC,GAAG,CAAC,mCAA0B;QAC1B,CAAC,CAAC;YACI,WAAW,EAAE;gBACT,MAAM,EAAE,EAAE,GAAG,EAAE,WAAW,EAAE;gBAC5B,MAAM,EAAE,mCAA0B,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;aAC9D;SACJ;QACH,CAAC,CAAC,EAAE,GAAG,EAAE,WAAW,EAAE,CAAC;CAC9B,CAAC,CAAC;AAnBU,QAAA,YAAY,gBAmBtB","names":[],"sources":["/Users/davidwalsh/code-local/0x-rfq-api/src/createOrmConfig.ts"],"sourcesContent":["import { DataSourceOptions } from 'typeorm';\n\nimport { POSTGRES_READ_REPLICA_URIS, POSTGRES_URI } from './config';\nimport {\n    BlockedAddressEntity,\n    KeyValueEntity,\n    MakerBalanceChainCacheEntity,\n    MetaTransactionJobEntity,\n    MetaTransactionSubmissionEntity,\n    OrderWatcherSignedOrderEntity,\n    PersistentSignedOrderEntity,\n    PersistentSignedOrderV4Entity,\n    RfqMaker,\n    RfqMakerUpdateTimeHash,\n    RfqmJobEntity,\n    RfqmQuoteEntity,\n    RfqmTransactionSubmissionEntity,\n    RfqmV2JobEntity,\n    RfqmV2QuoteEntity,\n    RfqmV2TransactionSubmissionEntity,\n    RfqmWorkerHeartbeatEntity,\n    SignedOrderEntity,\n    SignedOrderV4Entity,\n    TransactionEntity,\n} from './entities';\nimport { LastLookRejectionCooldownEntity } from './entities/LastLookRejectionCooldownsEntity';\n\nconst entities = [\n    BlockedAddressEntity,\n    SignedOrderEntity,\n    PersistentSignedOrderEntity,\n    TransactionEntity,\n    KeyValueEntity,\n    LastLookRejectionCooldownEntity,\n    MakerBalanceChainCacheEntity,\n    MetaTransactionJobEntity,\n    MetaTransactionSubmissionEntity,\n    SignedOrderV4Entity,\n    PersistentSignedOrderV4Entity,\n    RfqmWorkerHeartbeatEntity,\n    RfqmQuoteEntity,\n    RfqmJobEntity,\n    RfqmTransactionSubmissionEntity,\n    RfqmV2JobEntity,\n    RfqmV2QuoteEntity,\n    RfqmV2TransactionSubmissionEntity,\n    OrderWatcherSignedOrderEntity,\n    RfqMaker,\n    RfqMakerUpdateTimeHash,\n];\n\nexport const createConfig = (postgresUri: string = POSTGRES_URI): DataSourceOptions => ({\n    type: 'postgres',\n    entities,\n    synchronize: false,\n    logging: true,\n    logger: 'debug',\n    extra: {\n        max: 15,\n        statement_timeout: 10000,\n    },\n    migrations: ['./lib/migrations/*.js'],\n    ...(POSTGRES_READ_REPLICA_URIS\n        ? {\n              replication: {\n                  master: { url: postgresUri },\n                  slaves: POSTGRES_READ_REPLICA_URIS.map((r) => ({ url: r })),\n              },\n          }\n        : { url: postgresUri }),\n});\n"],"version":3}
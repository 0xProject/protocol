{"file":"/Users/davidwalsh/code-local/0x-rfq-api/src/handlers/rfqm_handlers.ts","mappings":"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","names":[],"sources":["/Users/davidwalsh/code-local/0x-rfq-api/src/handlers/rfqm_handlers.ts"],"sourcesContent":["// tslint:disable:max-file-line-count\nimport { InvalidAPIKeyError, ValidationError, ValidationErrorCodes } from '@0x/api-utils';\nimport { OtcOrder } from '@0x/protocol-utils';\nimport { getTokenMetadataIfExists, isNativeSymbolOrAddress, nativeWrappedTokenSymbol } from '@0x/token-metadata';\nimport { addressUtils, BigNumber } from '@0x/utils';\nimport * as express from 'express';\nimport * as HttpStatus from 'http-status-codes';\nimport { Counter } from 'prom-client';\n\nimport { Integrator } from '../config';\nimport { schemas } from '../core/schemas';\nimport { RfqmService } from '../services/rfqm_service';\nimport {\n    FetchFirmQuoteParams,\n    FetchIndicativeQuoteParams,\n    FetchQuoteParamsBase,\n    OtcOrderRfqmQuoteResponse,\n    OtcOrderSubmitRfqmSignedQuoteParams,\n    SubmitRfqmSignedQuoteWithApprovalParams,\n} from '../services/types';\nimport {\n    ExecuteMetaTransactionEip712Context,\n    GaslessApprovalTypes,\n    GaslessTypes,\n    PermitEip712Context,\n} from '../core/types';\nimport { ConfigManager } from '../utils/config_manager';\nimport { HealthCheckResult, transformResultToShortResponse } from '../utils/rfqm_health_check';\nimport {\n    RawOtcOrderFields,\n    StringSignatureFields,\n    stringsToEIP712Context,\n    stringsToOtcOrderFields,\n    stringsToSignature,\n} from '../utils/rfqm_request_utils';\nimport { RfqmServices } from '../utils/rfqm_service_builder';\nimport { schemaUtils } from '../core/schema_utils';\n\nconst RFQM_INDICATIVE_QUOTE_REQUEST = new Counter({\n    name: 'rfqm_handler_indicative_quote_requested',\n    help: 'Request made to fetch rfqm indicative quote',\n    labelNames: ['integratorLabel', 'chainId'],\n});\n\nconst RFQM_INDICATIVE_QUOTE_NOT_FOUND = new Counter({\n    name: 'rfqm_handler_indicative_quote_not_found',\n    help: 'Request to fetch rfqm indicative quote returned no quote',\n    labelNames: ['integratorLabel', 'chainId'],\n});\n\nconst RFQM_INDICATIVE_QUOTE_ERROR = new Counter({\n    name: 'rfqm_handler_indicative_quote_error',\n    help: 'Request to fetch rfqm indicative quote resulted in error',\n    labelNames: ['integratorLabel', 'chainId'],\n});\n\nconst RFQM_FIRM_QUOTE_REQUEST = new Counter({\n    name: 'rfqm_handler_firm_quote_requested',\n    help: 'Request made to fetch rfqm firm quote',\n    labelNames: ['integratorLabel', 'chainId'],\n});\n\nconst RFQM_FIRM_QUOTE_NOT_FOUND = new Counter({\n    name: 'rfqm_handler_firm_quote_not_found',\n    help: 'Request to fetch rfqm firm quote returned no quote',\n    labelNames: ['integratorLabel', 'chainId'],\n});\n\nconst RFQM_FIRM_QUOTE_ERROR = new Counter({\n    name: 'rfqm_handler_firm_quote_error',\n    help: 'Request to fetch rfqm firm quote resulted in error',\n    labelNames: ['integratorLabel', 'chainId'],\n});\n\nconst RFQM_SIGNED_QUOTE_SUBMITTED = new Counter({\n    name: 'rfqm_handler_signed_quote_submitted',\n    help: 'Request received to submit a signed rfqm quote',\n    labelNames: ['integratorLabel', 'chainId'],\n});\n\n// If the cache is more milliseconds old than the value specified here, it will be refreshed.\nconst HEALTH_CHECK_RESULT_CACHE_DURATION_MS = 30000;\n\ntype RfqmHealthCheckResultCache = [HealthCheckResult, Date];\n\nexport class RfqmHandlers {\n    private readonly _cachedHealthCheckResultByChainId = new Map<number, RfqmHealthCheckResultCache>();\n    constructor(private readonly _rfqmServices: RfqmServices, private readonly _configManager: ConfigManager) {}\n\n    public async getIndicativeQuoteAsync(req: express.Request, res: express.Response): Promise<void> {\n        // Parse request\n        const { chainId, params } = await this._parseFetchIndicativeQuoteParamsAsync(req);\n        // NOTE: not all requests are emitted if they fail parsing\n        RFQM_INDICATIVE_QUOTE_REQUEST.inc({\n            integratorLabel: params.integrator.label,\n            chainId,\n        });\n\n        // Try to get indicative quote\n        let indicativeQuote;\n        try {\n            indicativeQuote = await this._getServiceForChain(chainId).fetchIndicativeQuoteAsync(params);\n        } catch (e) {\n            req.log.error(e, 'Encountered an error while fetching an rfqm indicative quote');\n            RFQM_INDICATIVE_QUOTE_ERROR.inc({\n                integratorLabel: params.integrator.label,\n                chainId,\n            });\n            throw e;\n        }\n\n        // Log no quote returned\n        if (indicativeQuote === null) {\n            RFQM_INDICATIVE_QUOTE_NOT_FOUND.inc({\n                integratorLabel: params.integrator.label,\n                chainId,\n            });\n        }\n\n        // Result\n        res.status(HttpStatus.OK).send({\n            liquidityAvailable: indicativeQuote !== null,\n            ...indicativeQuote,\n        });\n    }\n\n    public async getFirmQuoteAsync(req: express.Request, res: express.Response): Promise<void> {\n        // Parse request\n        const { chainId, params } = await this._parseFetchFirmQuoteParamsAsync(req);\n        // NOTE: not all requests are emitted if they fail parsing\n        RFQM_FIRM_QUOTE_REQUEST.inc({\n            integratorLabel: params.integrator.label,\n            chainId,\n        });\n\n        // Try to get firm quote\n        let firmQuote: OtcOrderRfqmQuoteResponse | null;\n        try {\n            const result = await this._getServiceForChain(chainId).fetchFirmQuoteAsync(params);\n            firmQuote = result.quote;\n        } catch (e) {\n            req.log.error(e, 'Encountered an error while fetching an rfqm firm quote');\n            RFQM_FIRM_QUOTE_ERROR.inc({\n                integratorLabel: params.integrator.label,\n                chainId,\n            });\n            throw e;\n        }\n\n        // Log no quote returned\n        if (firmQuote === null) {\n            RFQM_FIRM_QUOTE_NOT_FOUND.inc({\n                integratorLabel: params.integrator.label,\n                chainId,\n            });\n        }\n\n        // Result\n        res.status(HttpStatus.OK).send({\n            liquidityAvailable: firmQuote !== null,\n            ...firmQuote,\n        });\n    }\n\n    /**\n     * Handler for the `/rfqm/v1/healthz` endpoint.\n     */\n    public async getHealthAsync(req: express.Request, res: express.Response): Promise<void> {\n        const chainId = extractChainId(req);\n        const cachedResult = this._cachedHealthCheckResultByChainId.get(chainId);\n        let result: HealthCheckResult;\n        if (!cachedResult) {\n            result = await this._getServiceForChain(chainId).runHealthCheckAsync();\n            this._cachedHealthCheckResultByChainId.set(chainId, [result, new Date()]);\n        } else {\n            const cacheAgeMs = Date.now() - cachedResult[1].getTime();\n            if (cacheAgeMs >= HEALTH_CHECK_RESULT_CACHE_DURATION_MS) {\n                result = await this._getServiceForChain(chainId).runHealthCheckAsync();\n                this._cachedHealthCheckResultByChainId.set(chainId, [result, new Date()]);\n            } else {\n                result = cachedResult[0];\n            }\n        }\n\n        const response = transformResultToShortResponse(result);\n        res.status(HttpStatus.OK).send(response);\n    }\n\n    public async getStatusAsync(req: express.Request, res: express.Response): Promise<void> {\n        const chainId = extractChainId(req);\n        const { orderHash } = req.params;\n\n        const status = await this._getServiceForChain(chainId).getStatusAsync(orderHash);\n\n        status ? res.status(HttpStatus.OK).send(status) : res.status(HttpStatus.NOT_FOUND).send();\n    }\n\n    public async submitSignedQuoteAsync(req: express.Request, res: express.Response): Promise<void> {\n        const { chainId, integrator, params } = this._parseSubmitSignedQuoteParams(req);\n        RFQM_SIGNED_QUOTE_SUBMITTED.inc({\n            integratorLabel: integrator.label,\n            chainId,\n        });\n        try {\n            const response = await this._getServiceForChain(chainId).submitTakerSignedOtcOrderAsync(params);\n            res.status(HttpStatus.CREATED).send(response);\n        } catch (e) {\n            req.log.error(e, 'Encountered an error while queuing a signed quote');\n            throw e;\n        }\n    }\n\n    public async submitSignedQuoteWithApprovalAsync(req: express.Request, res: express.Response): Promise<void> {\n        const { chainId, integrator, params } = this._parseSubmitSignedQuoteWithApprovalParams(req);\n        RFQM_SIGNED_QUOTE_SUBMITTED.inc({\n            integratorLabel: integrator.label,\n            chainId,\n        });\n        try {\n            const response = await this._getServiceForChain(chainId).submitTakerSignedOtcOrderWithApprovalAsync(params);\n            res.status(HttpStatus.CREATED).send(response);\n        } catch (e) {\n            req.log.error(e, 'Encountered an error while queuing a signed quote with approval');\n            throw e;\n        }\n    }\n\n    private async _parseFetchFirmQuoteParamsAsync(\n        req: express.Request,\n    ): Promise<{ chainId: number; params: FetchFirmQuoteParams }> {\n        // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        schemaUtils.validateSchema(req.query, schemas.firmQuoteRequestSchema as any);\n        const takerAddress = req.query.takerAddress;\n        const shouldCheckApproval = req.query.checkApproval === 'true' ? true : false;\n        const { chainId, params } = await this._parseIndicativeAndFirmQuoteSharedParamsAsync(req);\n        if (!addressUtils.isAddress(takerAddress as string)) {\n            throw new ValidationError([\n                {\n                    field: 'takerAddress',\n                    code: ValidationErrorCodes.InvalidAddress,\n                    reason: `Must provide a valid takerAddress`,\n                },\n            ]);\n        }\n        return {\n            chainId,\n            params: {\n                ...params,\n                takerAddress: takerAddress as string,\n                checkApproval: shouldCheckApproval,\n            },\n        };\n    }\n\n    private _getServiceForChain(chainId: number): RfqmService {\n        const service = this._rfqmServices.get(chainId);\n\n        if (!service) {\n            throw new Error('No configuration exists for chain');\n        }\n        return service;\n    }\n\n    /**\n     * Examines the API key provided in the request, ensures it is valid for RFQM, and fetches the associated\n     * integrator ID.\n     */\n    private _validateApiKey(apiKey: string | undefined, chainId: number): { apiKey: string; integrator: Integrator } {\n        if (apiKey === undefined) {\n            throw new InvalidAPIKeyError('Must access with an API key');\n        }\n        if (!this._configManager.getRfqmApiKeyWhitelist().has(apiKey)) {\n            throw new InvalidAPIKeyError('API key not authorized for RFQM access');\n        }\n        const integratorId = this._configManager.getIntegratorIdForApiKey(apiKey);\n        if (!integratorId) {\n            // With a valid configuration this should never happen\n            throw new InvalidAPIKeyError('API key has no associated Integrator ID');\n        }\n        const integrator = this._configManager.getIntegratorByIdOrThrow(integratorId);\n        if (!integrator.allowedChainIds.includes(chainId)) {\n            throw new InvalidAPIKeyError(`API Key not authorized to access chain ${chainId}`);\n        }\n        return { apiKey, integrator };\n    }\n\n    private async _parseFetchIndicativeQuoteParamsAsync(\n        req: express.Request,\n    ): Promise<{ chainId: number; params: FetchIndicativeQuoteParams }> {\n        // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        schemaUtils.validateSchema(req.query, schemas.indicativeQuoteRequestSchema as any);\n        const { takerAddress } = req.query;\n        const { chainId, params } = await this._parseIndicativeAndFirmQuoteSharedParamsAsync(req);\n\n        return {\n            chainId,\n            params: {\n                ...params,\n                takerAddress: takerAddress as string,\n            },\n        };\n    }\n\n    /**\n     * Parse shared params of indicative and firm quotes.\n     *\n     * @param req The request object.\n     * @returns Chain ID and parsed shared params of indicative and firm quotes.\n     */\n    private async _parseIndicativeAndFirmQuoteSharedParamsAsync(\n        req: express.Request,\n    ): Promise<{ chainId: number; params: FetchQuoteParamsBase }> {\n        const chainId = extractChainId(req);\n        const { integrator } = this._validateApiKey(req.header('0x-api-key'), chainId);\n        const { affiliateAddress } = req.query;\n\n        // Parse tokens\n        const sellTokenRaw = req.query.sellToken as string;\n        const buyTokenRaw = req.query.buyToken as string;\n        validateNotNativeTokenOrThrow(sellTokenRaw, chainId, 'sellToken');\n\n        let buyTokenDecimals: number;\n        let sellTokenDecimals: number;\n        let buyTokenContractAddress: string;\n        let sellTokenContractAddress: string;\n\n        try {\n            buyTokenContractAddress = buyTokenRaw.toLocaleLowerCase().startsWith('0x')\n                ? buyTokenRaw\n                : contractAddressForSymbol(buyTokenRaw, chainId);\n            buyTokenDecimals = await this._getServiceForChain(chainId).getTokenDecimalsAsync(buyTokenRaw);\n        } catch {\n            throw new ValidationError([\n                {\n                    field: 'buyToken',\n                    code: ValidationErrorCodes.AddressNotSupported,\n                    reason: `Token ${buyTokenRaw} is currently unsupported`,\n                },\n            ]);\n        }\n\n        try {\n            sellTokenContractAddress = sellTokenRaw.toLocaleLowerCase().startsWith('0x')\n                ? sellTokenRaw\n                : contractAddressForSymbol(sellTokenRaw, chainId);\n            sellTokenDecimals = await this._getServiceForChain(chainId).getTokenDecimalsAsync(sellTokenRaw);\n        } catch {\n            throw new ValidationError([\n                {\n                    field: 'sellToken',\n                    code: ValidationErrorCodes.AddressNotSupported,\n                    reason: `Token ${sellTokenRaw} is currently unsupported`,\n                },\n            ]);\n        }\n\n        // Parse number params\n        const sellAmount =\n            req.query.sellAmount === undefined ? undefined : new BigNumber(req.query.sellAmount as string);\n        const buyAmount = req.query.buyAmount === undefined ? undefined : new BigNumber(req.query.buyAmount as string);\n\n        return {\n            chainId,\n            params: {\n                buyAmount,\n                buyToken: buyTokenContractAddress,\n                buyTokenDecimals,\n                integrator,\n                sellAmount,\n                sellToken: sellTokenContractAddress,\n                sellTokenDecimals,\n                affiliateAddress: affiliateAddress as string,\n            },\n        };\n    }\n\n    private _parseSubmitSignedQuoteParams(req: express.Request): {\n        chainId: number;\n        integrator: Integrator;\n        params: OtcOrderSubmitRfqmSignedQuoteParams;\n    } {\n        const type = req.body.type as GaslessTypes;\n        const chainId = extractChainId(req);\n        const { integrator } = this._validateApiKey(req.header('0x-api-key'), chainId);\n\n        if (type === GaslessTypes.OtcOrder) {\n            const order = new OtcOrder(stringsToOtcOrderFields(req.body.order as RawOtcOrderFields));\n            const signature = stringsToSignature(req.body.signature as StringSignatureFields);\n            return {\n                chainId,\n                integrator,\n                params: {\n                    type,\n                    order,\n                    signature,\n                },\n            };\n        } else {\n            throw new ValidationError([\n                {\n                    field: 'type',\n                    code: ValidationErrorCodes.FieldInvalid,\n                    reason: `${type} is an invalid value for 'type'`,\n                },\n            ]);\n        }\n    }\n\n    private _parseSubmitSignedQuoteWithApprovalParams<\n        T extends ExecuteMetaTransactionEip712Context | PermitEip712Context,\n    >(\n        req: express.Request,\n    ): {\n        chainId: number;\n        integrator: Integrator;\n        params: SubmitRfqmSignedQuoteWithApprovalParams<T>;\n    } {\n        const chainId = extractChainId(req);\n        const { integrator } = this._validateApiKey(req.header('0x-api-key'), chainId);\n\n        const { approval, trade } = req.body;\n\n        const parsedParams: Partial<SubmitRfqmSignedQuoteWithApprovalParams<T>> = {};\n\n        // Parse approval params\n        if (approval) {\n            if (\n                approval.type === GaslessApprovalTypes.ExecuteMetaTransaction ||\n                approval.type === GaslessApprovalTypes.Permit\n            ) {\n                const eip712 = stringsToEIP712Context(approval.eip712);\n                const signature = stringsToSignature(approval.signature as StringSignatureFields);\n                parsedParams.approval = {\n                    type: approval.type,\n                    // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    eip712: eip712 as any,\n                    signature,\n                };\n            } else {\n                throw new ValidationError([\n                    {\n                        field: 'approval',\n                        code: ValidationErrorCodes.FieldInvalid,\n                        reason: `${approval.type} is an invalid value for Approval 'type'`,\n                    },\n                ]);\n            }\n        }\n\n        // Parse trade params\n        const tradeType = trade.type;\n        let otcOrderSubmitRfqmSignedQuoteParams: OtcOrderSubmitRfqmSignedQuoteParams;\n        if (tradeType === GaslessTypes.OtcOrder) {\n            const order = new OtcOrder(stringsToOtcOrderFields(trade.order as RawOtcOrderFields));\n            const signature = stringsToSignature(trade.signature as StringSignatureFields);\n            otcOrderSubmitRfqmSignedQuoteParams = {\n                type: trade.type,\n                order,\n                signature,\n            };\n        } else {\n            throw new ValidationError([\n                {\n                    field: 'type',\n                    code: ValidationErrorCodes.FieldInvalid,\n                    reason: `${trade.type} is an invalid value for Trade 'type'`,\n                },\n            ]);\n        }\n\n        return {\n            chainId,\n            integrator,\n            params: {\n                ...parsedParams,\n                kind: GaslessTypes.OtcOrder, // Must be of type OtcOrder for this flow\n                trade: otcOrderSubmitRfqmSignedQuoteParams,\n            },\n        };\n    }\n}\n\n/**\n * Extracts the Chain Id from the request. If none is provided, assumes a Chain Id of 1 (for backwards compatibility)\n *\n * @param req - the Express Request object\n * @returns the chain Id for this request\n */\nconst extractChainId = (req: express.Request): number => {\n    const chainIdFromHeader = req.header('0x-chain-id');\n    if (chainIdFromHeader === undefined) {\n        return 1;\n    } else {\n        const parsedInt = parseInt(chainIdFromHeader, 10);\n        if (Number.isNaN(parsedInt)) {\n            throw new ValidationError([\n                {\n                    field: '0x-chain-id',\n                    code: ValidationErrorCodes.FieldInvalid,\n                    reason: 'Invalid chain id',\n                },\n            ]);\n        }\n        return parsedInt;\n    }\n};\n\n/**\n * Gets the token address for a given symbol.\n *\n * Throws if the symbol is not present in @0x/token-metadata\n */\nconst contractAddressForSymbol = (symbol: string, chainId: number): string => {\n    const address = getTokenMetadataIfExists(symbol, chainId)?.tokenAddress;\n    if (!address) {\n        throw new Error('Unsupported token');\n    }\n    return address;\n};\n\nconst validateNotNativeTokenOrThrow = (token: string, chainId: number, field: string): boolean => {\n    if (isNativeSymbolOrAddress(token, chainId)) {\n        const symbol = nativeWrappedTokenSymbol(chainId);\n        throw new ValidationError([\n            {\n                field,\n                code: ValidationErrorCodes.TokenNotSupported,\n                reason: `Unwrapped Native Asset is not supported. Use ${symbol} instead`,\n            },\n        ]);\n    }\n\n    return true;\n};\n"],"version":3}
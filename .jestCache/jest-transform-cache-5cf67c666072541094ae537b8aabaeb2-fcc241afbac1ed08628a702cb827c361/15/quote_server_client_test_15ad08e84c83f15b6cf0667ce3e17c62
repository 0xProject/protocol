920a6f2110cd3b9fb32ace7150effe95
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable:custom-no-magic-numbers
// tslint:disable:no-empty
// tslint:disable:max-file-line-count
const types_1 = require("@0x/asset-swapper/lib/src/types");
const protocol_utils_1 = require("@0x/protocol-utils");
const utils_1 = require("@0x/utils");
const axios_1 = require("axios");
const axios_mock_adapter_1 = require("axios-mock-adapter");
const HttpStatus = require("http-status-codes");
const quote_server_client_1 = require("../../src/utils/quote_server_client");
const constants_1 = require("../constants");
const makerUri = 'https://some-market-maker.xyz';
const integrator = {
    integratorId: 'some-integrator-id',
    apiKeys: [],
    allowedChainIds: [],
    label: 'integrator',
    plp: false,
    rfqm: true,
    rfqt: true,
};
// Maker
const makerAddress = '0xFDbEf5C1Ad7d173D191D565c14E28eBd5b50470e';
const makerPrivateKey = '0xf4559ca5152145f5e0b9762f12213c2e74020a4481953fb940413273051a89d3';
// Taker
const takerAddress = '0xdA9AC423442169588DE6b4305f4E820D708d0cE5';
const takerPrivateKey = '0x653fa328df81be180b58e42737bc4cef037a19a3b9673b15d20ee2eebb2e509d';
// Some tokens and amounts
const takerToken = '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2';
const makerToken = '0x6b175474e89094c44da98b954eedeac495271d0f';
const takerAmount = new utils_1.BigNumber(100);
const makerAmount = new utils_1.BigNumber(100000);
// An OtcOrder
const order = new protocol_utils_1.OtcOrder({
    maker: makerAddress,
    taker: takerAddress,
    makerAmount,
    takerAmount,
    makerToken,
    takerToken,
    expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(2634330177), new utils_1.BigNumber(1), new utils_1.BigNumber(1634330177)),
});
const orderHash = order.getHash();
// Signatures
const takerSignature = (0, protocol_utils_1.ethSignHashWithKey)(orderHash, takerPrivateKey);
const makerSignature = (0, protocol_utils_1.ethSignHashWithKey)(orderHash, makerPrivateKey);
describe('QuoteServerClient', () => {
    const axiosInstance = axios_1.default.create();
    const axiosMock = new axios_mock_adapter_1.default(axiosInstance);
    afterEach(() => {
        axiosMock.reset();
    });
    describe('makeQueryParameters', () => {
        it('should make RFQt request parameters', () => {
            // Given
            const marketOperation = types_1.MarketOperation.Sell;
            const input = {
                txOrigin: takerAddress,
                takerAddress: utils_1.NULL_ADDRESS,
                marketOperation,
                buyTokenAddress: makerToken,
                sellTokenAddress: takerToken,
                comparisonPrice: new utils_1.BigNumber('42'),
                assetFillAmount: new utils_1.BigNumber('100000'),
            };
            // When
            const params = quote_server_client_1.QuoteServerClient.makeQueryParameters(input);
            // Then
            expect(params).toEqual({
                buyTokenAddress: '0x6b175474e89094c44da98b954eedeac495271d0f',
                protocolVersion: '4',
                sellAmountBaseUnits: '100000',
                sellTokenAddress: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
                takerAddress: '0x0000000000000000000000000000000000000000',
                txOrigin: '0xdA9AC423442169588DE6b4305f4E820D708d0cE5',
                comparisonPrice: '42',
            });
        });
        it('should make RFQm request parameters', () => {
            // Given
            const txOrigin = '0x335e51687677C4f1389f3dEcA259af983529e82D';
            const feeAmount = '100';
            const otcOrderFee = {
                amount: new utils_1.BigNumber(feeAmount),
                token: constants_1.CONTRACT_ADDRESSES.etherToken,
                type: 'fixed',
            };
            const marketOperation = types_1.MarketOperation.Sell;
            // When
            const params = quote_server_client_1.QuoteServerClient.makeQueryParameters({
                txOrigin,
                takerAddress,
                marketOperation,
                buyTokenAddress: makerToken,
                sellTokenAddress: takerToken,
                assetFillAmount: new utils_1.BigNumber('100000'),
                isLastLook: true,
                fee: otcOrderFee,
            });
            // Then
            expect(params).toEqual({
                buyTokenAddress: '0x6b175474e89094c44da98b954eedeac495271d0f',
                feeAmount: '100',
                feeToken: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                feeType: 'fixed',
                isLastLook: 'true',
                protocolVersion: '4',
                sellAmountBaseUnits: '100000',
                sellTokenAddress: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
                takerAddress: '0xdA9AC423442169588DE6b4305f4E820D708d0cE5',
                txOrigin: '0x335e51687677C4f1389f3dEcA259af983529e82D',
            });
        });
        it('should make RFQm request parameters with chain id', () => {
            // Given
            const txOrigin = '0x335e51687677C4f1389f3dEcA259af983529e82D';
            const feeAmount = '100';
            const otcOrderFee = {
                amount: new utils_1.BigNumber(feeAmount),
                token: constants_1.CONTRACT_ADDRESSES.etherToken,
                type: 'fixed',
            };
            const marketOperation = types_1.MarketOperation.Sell;
            // When
            const params = quote_server_client_1.QuoteServerClient.makeQueryParameters({
                chainId: 10,
                txOrigin,
                takerAddress,
                marketOperation,
                buyTokenAddress: makerToken,
                sellTokenAddress: takerToken,
                assetFillAmount: new utils_1.BigNumber('100000'),
                isLastLook: true,
                fee: otcOrderFee,
            });
            // Then
            expect(params).toEqual({
                chainId: '10',
                buyTokenAddress: '0x6b175474e89094c44da98b954eedeac495271d0f',
                feeAmount: '100',
                feeToken: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                feeType: 'fixed',
                isLastLook: 'true',
                protocolVersion: '4',
                sellAmountBaseUnits: '100000',
                sellTokenAddress: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',
                takerAddress: '0xdA9AC423442169588DE6b4305f4E820D708d0cE5',
                txOrigin: '0x335e51687677C4f1389f3dEcA259af983529e82D',
            });
        });
    });
    describe('OtcOrder', () => {
        describe('getPriceV2Async', () => {
            it('should return a valid indicative quote', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    chainId: constants_1.CHAIN_ID.toString(),
                    sellTokenAddress: takerToken,
                    buyTokenAddress: makerToken,
                    takerAddress,
                    sellAmountBaseUnits: takerAmount.toString(),
                    protocolVersion: '4',
                    txOrigin: takerAddress,
                    isLastLook: 'true',
                    feeAmount: '100',
                    feeType: 'fixed',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    nonce: '1634322835',
                    nonceBucket: '1',
                };
                const response = {
                    maker: makerAddress,
                    makerAmount,
                    takerAmount,
                    makerToken,
                    takerToken,
                    expiry: new utils_1.BigNumber(9934322972),
                };
                axiosMock.onGet(`${makerUri}/rfqm/v2/price`).replyOnce(HttpStatus.OK, response);
                // When
                const indicativeQuote = await client.getPriceV2Async(makerUri, integrator, request, (uri) => `${uri}/rfqm/v2/price`);
                // Then
                const expectedResponse = {
                    ...response,
                    makerUri,
                };
                expect(indicativeQuote).toEqual(expectedResponse);
            });
            it('should return undefined for empty responses (not quoting)', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    chainId: constants_1.CHAIN_ID.toString(),
                    sellTokenAddress: takerToken,
                    buyTokenAddress: makerToken,
                    takerAddress,
                    sellAmountBaseUnits: takerAmount.toString(),
                    protocolVersion: '4',
                    txOrigin: takerAddress,
                    isLastLook: 'true',
                    feeAmount: '100',
                    feeType: 'fixed',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    nonce: '1634322835',
                    nonceBucket: '1',
                };
                const response = {}; // empty response
                // When
                axiosMock.onGet(`${makerUri}/rfqm/v2/price`).replyOnce(HttpStatus.OK, response);
                const result = await client.getPriceV2Async(makerUri, integrator, request, (uri) => `${uri}/rfqm/v2/price`);
                // Then
                expect(result).toBe(undefined);
            });
            it('should return undefined when returning a 400 from axios', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    chainId: constants_1.CHAIN_ID.toString(),
                    sellTokenAddress: takerToken,
                    buyTokenAddress: makerToken,
                    takerAddress,
                    sellAmountBaseUnits: takerAmount.toString(),
                    protocolVersion: '4',
                    txOrigin: takerAddress,
                    isLastLook: 'true',
                    feeAmount: '100',
                    feeType: 'fixed',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    nonce: '1634322835',
                    nonceBucket: '1',
                };
                const response = {}; // empty response
                axiosMock.onGet(`${makerUri}/rfqm/v2/price`).replyOnce(HttpStatus.BAD_REQUEST, response);
                // When
                const result = await client.getPriceV2Async(makerUri, integrator, request, (uri) => `${uri}/rfqm/v2/price`);
                // Then
                expect(result).toBe(undefined);
            });
            it('should throw an error for a malformed response', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    chainId: constants_1.CHAIN_ID.toString(),
                    sellTokenAddress: takerToken,
                    buyTokenAddress: makerToken,
                    takerAddress,
                    sellAmountBaseUnits: takerAmount.toString(),
                    protocolVersion: '4',
                    txOrigin: takerAddress,
                    isLastLook: 'true',
                    feeAmount: '100',
                    feeType: 'fixed',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    nonce: '1634322835',
                    nonceBucket: '1',
                };
                const response = {
                    asdf: 'malformed response',
                };
                axiosMock.onGet(`${makerUri}/rfqm/v2/price`).replyOnce(HttpStatus.OK, response);
                // When
                await expect(async () => {
                    await client.getPriceV2Async(makerUri, integrator, request, (uri) => `${uri}/rfqm/v2/price`);
                }).rejects.toThrow();
            });
        });
        describe('batchGetPriceV2Async', () => {
            it('should return the valid indicative qutoes and filter out errors', async () => {
                // Given
                const makerUri1 = 'https://some-market-maker1.xyz';
                const makerUri2 = 'https://some-market-maker2.xyz';
                const makerUri3 = 'https://some-market-maker3.xyz';
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    chainId: constants_1.CHAIN_ID.toString(),
                    sellTokenAddress: takerToken,
                    buyTokenAddress: makerToken,
                    takerAddress,
                    sellAmountBaseUnits: takerAmount.toString(),
                    protocolVersion: '4',
                    txOrigin: takerAddress,
                    isLastLook: 'true',
                    feeAmount: '100',
                    feeType: 'fixed',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    nonce: '1634322835',
                    nonceBucket: '1',
                };
                const response = {
                    maker: makerAddress,
                    makerAmount,
                    takerAmount,
                    makerToken,
                    takerToken,
                    expiry: new utils_1.BigNumber(9934322972),
                };
                axiosMock.onGet(`${makerUri1}/rfqm/v2/price`).replyOnce(HttpStatus.OK, response);
                axiosMock.onGet(`${makerUri2}/rfqm/v2/price`).replyOnce(HttpStatus.NO_CONTENT, {});
                axiosMock.onGet(`${makerUri3}/rfqm/v2/price`).replyOnce(HttpStatus.BAD_GATEWAY, {});
                // When
                const indicativeQuotes = await client.batchGetPriceV2Async([makerUri1, makerUri2, makerUri3], integrator, request);
                // Then
                // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                expect(indicativeQuotes.length).toEqual(1);
                expect(indicativeQuotes[0].makerAmount.toNumber()).toEqual(response.makerAmount.toNumber());
                expect(indicativeQuotes[0].maker).toEqual(makerAddress);
            });
        });
        describe('signV2Async', () => {
            it('should return a signature for valid response', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    order,
                    orderHash,
                    fee: {
                        amount: new utils_1.BigNumber('100'),
                        type: 'fixed',
                        token: constants_1.CONTRACT_ADDRESSES.etherToken,
                    },
                    expiry: order.expiry,
                    takerSignature,
                };
                const actualRequest = {
                    order,
                    orderHash,
                    feeAmount: '100',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    expiry: order.expiry,
                    takerSignature,
                };
                const response = {
                    feeAmount: '100',
                    proceedWithFill: true,
                    makerSignature,
                };
                axiosMock
                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))
                    .replyOnce(HttpStatus.OK, response);
                // When
                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);
                // Then
                expect(signature).toEqual(makerSignature);
            });
            it('should send takerSpecifiedSide when enabled and present in request', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    order,
                    orderHash,
                    fee: {
                        amount: new utils_1.BigNumber('100'),
                        type: 'fixed',
                        token: constants_1.CONTRACT_ADDRESSES.etherToken,
                    },
                    expiry: order.expiry,
                    takerSpecifiedSide: 'makerToken',
                    takerSignature,
                };
                const actualRequest = {
                    order,
                    orderHash,
                    feeAmount: '100',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    expiry: order.expiry,
                    takerSpecifiedSide: 'makerToken',
                    takerSignature,
                };
                const response = {
                    feeAmount: '100',
                    proceedWithFill: true,
                    makerSignature,
                };
                axiosMock
                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))
                    .replyOnce(HttpStatus.OK, response);
                // When
                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);
                // Then
                expect(signature).toEqual(makerSignature);
            });
            it('should return a signature for valid response even if the fee is higher than requested', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    order,
                    orderHash,
                    fee: {
                        amount: new utils_1.BigNumber('100'),
                        type: 'fixed',
                        token: constants_1.CONTRACT_ADDRESSES.etherToken,
                    },
                    expiry: order.expiry,
                    takerSignature,
                };
                const actualRequest = {
                    order,
                    orderHash,
                    feeAmount: '100',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    expiry: order.expiry,
                    takerSignature,
                };
                const response = {
                    feeAmount: '101',
                    proceedWithFill: true,
                    makerSignature,
                };
                axiosMock
                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))
                    .replyOnce(HttpStatus.OK, response);
                // When
                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);
                // Then
                expect(signature).toEqual(makerSignature);
            });
            it('should return a signature for valid response if the fee is 0 but no acknowledgement is returned', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    order,
                    orderHash,
                    fee: {
                        amount: new utils_1.BigNumber('0'),
                        type: 'fixed',
                        token: constants_1.CONTRACT_ADDRESSES.etherToken,
                    },
                    expiry: order.expiry,
                    takerSignature,
                };
                const actualRequest = {
                    order,
                    orderHash,
                    feeAmount: '0',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    expiry: order.expiry,
                    takerSignature,
                };
                const response = {
                    feeAmount: undefined,
                    proceedWithFill: true,
                    makerSignature,
                };
                axiosMock
                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))
                    .replyOnce(HttpStatus.OK, response);
                // When
                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);
                // Then
                expect(signature).toEqual(makerSignature);
            });
            it('should throw an error for a malformed response', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    order,
                    orderHash,
                    fee: {
                        amount: new utils_1.BigNumber('100'),
                        type: 'fixed',
                        token: constants_1.CONTRACT_ADDRESSES.etherToken,
                    },
                    expiry: order.expiry,
                    takerSignature,
                };
                const response = {
                    asdf: 'I am broken',
                };
                axiosMock
                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(request)))
                    .replyOnce(HttpStatus.OK, response);
                await expect(async () => {
                    await client.signV2Async(makerUri, 'dummy-integrator-id', request);
                }).rejects.toThrow();
            });
            it('should return undefined for an incorrect fee acknowledgement', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    order,
                    orderHash,
                    fee: {
                        amount: new utils_1.BigNumber('100'),
                        type: 'fixed',
                        token: constants_1.CONTRACT_ADDRESSES.etherToken,
                    },
                    expiry: order.expiry,
                    takerSignature,
                };
                const actualRequest = {
                    order,
                    orderHash,
                    feeAmount: '100',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    expiry: order.expiry,
                    takerSignature,
                };
                const response = {
                    feeAmount: '10',
                    proceedWithFill: true,
                    makerSignature,
                };
                axiosMock
                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))
                    .replyOnce(HttpStatus.OK, response);
                // When
                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);
                // Then
                expect(signature).toBe(undefined);
            });
            it('should return undefined for explicitly rejected responses', async () => {
                // Given
                const client = new quote_server_client_1.QuoteServerClient(axiosInstance);
                const request = {
                    order,
                    orderHash,
                    fee: {
                        amount: new utils_1.BigNumber('100'),
                        type: 'fixed',
                        token: constants_1.CONTRACT_ADDRESSES.etherToken,
                    },
                    expiry: order.expiry,
                    takerSignature,
                };
                const actualRequest = {
                    order,
                    orderHash,
                    feeAmount: '100',
                    feeToken: constants_1.CONTRACT_ADDRESSES.etherToken,
                    expiry: order.expiry,
                    takerSignature,
                };
                const response = {
                    proceedWithFill: false,
                };
                axiosMock
                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))
                    .replyOnce(HttpStatus.OK, response);
                // When
                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);
                // Then
                expect(signature).toBe(undefined);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3QvdXRpbHMvcXVvdGVfc2VydmVyX2NsaWVudF90ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEseUNBQXlDO0FBQ3pDLDBCQUEwQjtBQUMxQixxQ0FBcUM7QUFFckMsMkRBQWtFO0FBQ2xFLHVEQUFrRTtBQUNsRSxxQ0FBb0Q7QUFDcEQsaUNBQTBCO0FBQzFCLDJEQUFrRDtBQUNsRCxnREFBZ0Q7QUFLaEQsNkVBQXdFO0FBQ3hFLDRDQUE0RDtBQUU1RCxNQUFNLFFBQVEsR0FBRywrQkFBK0IsQ0FBQztBQUNqRCxNQUFNLFVBQVUsR0FBZTtJQUMzQixZQUFZLEVBQUUsb0JBQW9CO0lBQ2xDLE9BQU8sRUFBRSxFQUFFO0lBQ1gsZUFBZSxFQUFFLEVBQUU7SUFDbkIsS0FBSyxFQUFFLFlBQVk7SUFDbkIsR0FBRyxFQUFFLEtBQUs7SUFDVixJQUFJLEVBQUUsSUFBSTtJQUNWLElBQUksRUFBRSxJQUFJO0NBQ2IsQ0FBQztBQUVGLFFBQVE7QUFDUixNQUFNLFlBQVksR0FBRyw0Q0FBNEMsQ0FBQztBQUNsRSxNQUFNLGVBQWUsR0FBRyxvRUFBb0UsQ0FBQztBQUU3RixRQUFRO0FBQ1IsTUFBTSxZQUFZLEdBQUcsNENBQTRDLENBQUM7QUFDbEUsTUFBTSxlQUFlLEdBQUcsb0VBQW9FLENBQUM7QUFFN0YsMEJBQTBCO0FBQzFCLE1BQU0sVUFBVSxHQUFHLDRDQUE0QyxDQUFDO0FBQ2hFLE1BQU0sVUFBVSxHQUFHLDRDQUE0QyxDQUFDO0FBQ2hFLE1BQU0sV0FBVyxHQUFHLElBQUksaUJBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN2QyxNQUFNLFdBQVcsR0FBRyxJQUFJLGlCQUFTLENBQUMsTUFBTyxDQUFDLENBQUM7QUFFM0MsY0FBYztBQUNkLE1BQU0sS0FBSyxHQUFHLElBQUkseUJBQVEsQ0FBQztJQUN2QixLQUFLLEVBQUUsWUFBWTtJQUNuQixLQUFLLEVBQUUsWUFBWTtJQUNuQixXQUFXO0lBQ1gsV0FBVztJ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Q1AsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3QvdXRpbHMvcXVvdGVfc2VydmVyX2NsaWVudF90ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHRzbGludDpkaXNhYmxlOmN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbi8vIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5XHJcbi8vIHRzbGludDpkaXNhYmxlOm1heC1maWxlLWxpbmUtY291bnRcclxuXHJcbmltcG9ydCB7IE1hcmtldE9wZXJhdGlvbiB9IGZyb20gJ0AweC9hc3NldC1zd2FwcGVyL2xpYi9zcmMvdHlwZXMnO1xyXG5pbXBvcnQgeyBldGhTaWduSGFzaFdpdGhLZXksIE90Y09yZGVyIH0gZnJvbSAnQDB4L3Byb3RvY29sLXV0aWxzJztcclxuaW1wb3J0IHsgQmlnTnVtYmVyLCBOVUxMX0FERFJFU1MgfSBmcm9tICdAMHgvdXRpbHMnO1xyXG5pbXBvcnQgQXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgQXhpb3NNb2NrQWRhcHRlciBmcm9tICdheGlvcy1tb2NrLWFkYXB0ZXInO1xyXG5pbXBvcnQgKiBhcyBIdHRwU3RhdHVzIGZyb20gJ2h0dHAtc3RhdHVzLWNvZGVzJztcclxuXHJcbmltcG9ydCB7IEludGVncmF0b3IgfSBmcm9tICcuLi8uLi9zcmMvY29uZmlnJztcclxuaW1wb3J0IHsgU2lnblJlcXVlc3QgfSBmcm9tICcuLi8uLi9zcmMvcXVvdGUtc2VydmVyL3R5cGVzJztcclxuaW1wb3J0IHsgRmVlLCBRdW90ZVNlcnZlclByaWNlUGFyYW1zIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgeyBRdW90ZVNlcnZlckNsaWVudCB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9xdW90ZV9zZXJ2ZXJfY2xpZW50JztcclxuaW1wb3J0IHsgQ0hBSU5fSUQsIENPTlRSQUNUX0FERFJFU1NFUyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcblxyXG5jb25zdCBtYWtlclVyaSA9ICdodHRwczovL3NvbWUtbWFya2V0LW1ha2VyLnh5eic7XHJcbmNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICBpbnRlZ3JhdG9ySWQ6ICdzb21lLWludGVncmF0b3ItaWQnLFxyXG4gICAgYXBpS2V5czogW10sXHJcbiAgICBhbGxvd2VkQ2hhaW5JZHM6IFtdLFxyXG4gICAgbGFiZWw6ICdpbnRlZ3JhdG9yJyxcclxuICAgIHBscDogZmFsc2UsXHJcbiAgICByZnFtOiB0cnVlLFxyXG4gICAgcmZxdDogdHJ1ZSxcclxufTtcclxuXHJcbi8vIE1ha2VyXHJcbmNvbnN0IG1ha2VyQWRkcmVzcyA9ICcweEZEYkVmNUMxQWQ3ZDE3M0QxOTFENTY1YzE0RTI4ZUJkNWI1MDQ3MGUnO1xyXG5jb25zdCBtYWtlclByaXZhdGVLZXkgPSAnMHhmNDU1OWNhNTE1MjE0NWY1ZTBiOTc2MmYxMjIxM2MyZTc0MDIwYTQ0ODE5NTNmYjk0MDQxMzI3MzA1MWE4OWQzJztcclxuXHJcbi8vIFRha2VyXHJcbmNvbnN0IHRha2VyQWRkcmVzcyA9ICcweGRBOUFDNDIzNDQyMTY5NTg4REU2YjQzMDVmNEU4MjBENzA4ZDBjRTUnO1xyXG5jb25zdCB0YWtlclByaXZhdGVLZXkgPSAnMHg2NTNmYTMyOGRmODFiZTE4MGI1OGU0MjczN2JjNGNlZjAzN2ExOWEzYjk2NzNiMTVkMjBlZTJlZWJiMmU1MDlkJztcclxuXHJcbi8vIFNvbWUgdG9rZW5zIGFuZCBhbW91bnRzXHJcbmNvbnN0IHRha2VyVG9rZW4gPSAnMHhjMDJhYWEzOWIyMjNmZThkMGEwZTVjNGYyN2VhZDkwODNjNzU2Y2MyJztcclxuY29uc3QgbWFrZXJUb2tlbiA9ICcweDZiMTc1NDc0ZTg5MDk0YzQ0ZGE5OGI5NTRlZWRlYWM0OTUyNzFkMGYnO1xyXG5jb25zdCB0YWtlckFtb3VudCA9IG5ldyBCaWdOdW1iZXIoMTAwKTtcclxuY29uc3QgbWFrZXJBbW91bnQgPSBuZXcgQmlnTnVtYmVyKDEwMF8wMDApO1xyXG5cclxuLy8gQW4gT3RjT3JkZXJcclxuY29uc3Qgb3JkZXIgPSBuZXcgT3RjT3JkZXIoe1xyXG4gICAgbWFrZXI6IG1ha2VyQWRkcmVzcyxcclxuICAgIHRha2VyOiB0YWtlckFkZHJlc3MsXHJcbiAgICBtYWtlckFtb3VudCxcclxuICAgIHRha2VyQW1vdW50LFxyXG4gICAgbWFrZXJUb2tlbixcclxuICAgIHRha2VyVG9rZW4sXHJcbiAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgbmV3IEJpZ051bWJlcigyNjM0MzMwMTc3KSxcclxuICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgIG5ldyBCaWdOdW1iZXIoMTYzNDMzMDE3NyksXHJcbiAgICApLFxyXG59KTtcclxuY29uc3Qgb3JkZXJIYXNoID0gb3JkZXIuZ2V0SGFzaCgpO1xyXG5cclxuLy8gU2lnbmF0dXJlc1xyXG5jb25zdCB0YWtlclNpZ25hdHVyZSA9IGV0aFNpZ25IYXNoV2l0aEtleShvcmRlckhhc2gsIHRha2VyUHJpdmF0ZUtleSk7XHJcbmNvbnN0IG1ha2VyU2lnbmF0dXJlID0gZXRoU2lnbkhhc2hXaXRoS2V5KG9yZGVySGFzaCwgbWFrZXJQcml2YXRlS2V5KTtcclxuXHJcbmRlc2NyaWJlKCdRdW90ZVNlcnZlckNsaWVudCcsICgpID0+IHtcclxuICAgIGNvbnN0IGF4aW9zSW5zdGFuY2UgPSBBeGlvcy5jcmVhdGUoKTtcclxuICAgIGNvbnN0IGF4aW9zTW9jayA9IG5ldyBBeGlvc01vY2tBZGFwdGVyKGF4aW9zSW5zdGFuY2UpO1xyXG5cclxuICAgIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgYXhpb3NNb2NrLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnbWFrZVF1ZXJ5UGFyYW1ldGVycycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIG1ha2UgUkZRdCByZXF1ZXN0IHBhcmFtZXRlcnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEdpdmVuXHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmtldE9wZXJhdGlvbiA9IE1hcmtldE9wZXJhdGlvbi5TZWxsO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHtcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6IE5VTExfQUREUkVTUyxcclxuICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbixcclxuICAgICAgICAgICAgICAgIGJ1eVRva2VuQWRkcmVzczogbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbkFkZHJlc3M6IHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uUHJpY2U6IG5ldyBCaWdOdW1iZXIoJzQyJyksXHJcbiAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzEwMDAwMCcpLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gV2hlblxyXG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBRdW90ZVNlcnZlckNsaWVudC5tYWtlUXVlcnlQYXJhbWV0ZXJzKGlucHV0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZW5cclxuICAgICAgICAgICAgZXhwZWN0KHBhcmFtcykudG9FcXVhbCh7XHJcbiAgICAgICAgICAgICAgICBidXlUb2tlbkFkZHJlc3M6ICcweDZiMTc1NDc0ZTg5MDk0YzQ0ZGE5OGI5NTRlZWRlYWM0OTUyNzFkMGYnLFxyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2xWZXJzaW9uOiAnNCcsXHJcbiAgICAgICAgICAgICAgICBzZWxsQW1vdW50QmFzZVVuaXRzOiAnMTAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbkFkZHJlc3M6ICcweGMwMmFhYTM5YjIyM2ZlOGQwYTBlNWM0ZjI3ZWFkOTA4M2M3NTZjYzInLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHhkQTlBQzQyMzQ0MjE2OTU4OERFNmI0MzA1ZjRFODIwRDcwOGQwY0U1JyxcclxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb25QcmljZTogJzQyJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbWFrZSBSRlFtIHJlcXVlc3QgcGFyYW1ldGVycycsICgpID0+IHtcclxuICAgICAgICAgICAgLy8gR2l2ZW5cclxuICAgICAgICAgICAgY29uc3QgdHhPcmlnaW4gPSAnMHgzMzVlNTE2ODc2NzdDNGYxMzg5ZjNkRWNBMjU5YWY5ODM1MjllODJEJztcclxuICAgICAgICAgICAgY29uc3QgZmVlQW1vdW50ID0gJzEwMCc7XHJcbiAgICAgICAgICAgIGNvbnN0IG90Y09yZGVyRmVlOiBGZWUgPSB7XHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoZmVlQW1vdW50KSxcclxuICAgICAgICAgICAgICAgIHRva2VuOiBDT05UUkFDVF9BRERSRVNTRVMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmtldE9wZXJhdGlvbiA9IE1hcmtldE9wZXJhdGlvbi5TZWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gV2hlblxyXG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBRdW90ZVNlcnZlckNsaWVudC5tYWtlUXVlcnlQYXJhbWV0ZXJzKHtcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgbWFya2V0T3BlcmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgYnV5VG9rZW5BZGRyZXNzOiBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuQWRkcmVzczogdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcignMTAwMDAwJyksXHJcbiAgICAgICAgICAgICAgICBpc0xhc3RMb29rOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmVlOiBvdGNPcmRlckZlZSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUaGVuXHJcbiAgICAgICAgICAgIGV4cGVjdChwYXJhbXMpLnRvRXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgYnV5VG9rZW5BZGRyZXNzOiAnMHg2YjE3NTQ3NGU4OTA5NGM0NGRhOThiOTU0ZWVkZWFjNDk1MjcxZDBmJyxcclxuICAgICAgICAgICAgICAgIGZlZUFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgICAgICBmZWVUb2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXHJcbiAgICAgICAgICAgICAgICBmZWVUeXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgaXNMYXN0TG9vazogJ3RydWUnLFxyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2xWZXJzaW9uOiAnNCcsXHJcbiAgICAgICAgICAgICAgICBzZWxsQW1vdW50QmFzZVVuaXRzOiAnMTAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbkFkZHJlc3M6ICcweGMwMmFhYTM5YjIyM2ZlOGQwYTBlNWM0ZjI3ZWFkOTA4M2M3NTZjYzInLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHhkQTlBQzQyMzQ0MjE2OTU4OERFNmI0MzA1ZjRFODIwRDcwOGQwY0U1JyxcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHgzMzVlNTE2ODc2NzdDNGYxMzg5ZjNkRWNBMjU5YWY5ODM1MjllODJEJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbWFrZSBSRlFtIHJlcXVlc3QgcGFyYW1ldGVycyB3aXRoIGNoYWluIGlkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBHaXZlblxyXG4gICAgICAgICAgICBjb25zdCB0eE9yaWdpbiA9ICcweDMzNWU1MTY4NzY3N0M0ZjEzODlmM2RFY0EyNTlhZjk4MzUyOWU4MkQnO1xyXG4gICAgICAgICAgICBjb25zdCBmZWVBbW91bnQgPSAnMTAwJztcclxuICAgICAgICAgICAgY29uc3Qgb3RjT3JkZXJGZWU6IEZlZSA9IHtcclxuICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcihmZWVBbW91bnQpLFxyXG4gICAgICAgICAgICAgICAgdG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbWFya2V0T3BlcmF0aW9uID0gTWFya2V0T3BlcmF0aW9uLlNlbGw7XHJcblxyXG4gICAgICAgICAgICAvLyBXaGVuXHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IFF1b3RlU2VydmVyQ2xpZW50Lm1ha2VRdWVyeVBhcmFtZXRlcnMoe1xyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMTAsXHJcbiAgICAgICAgICAgICAgICB0eE9yaWdpbixcclxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbixcclxuICAgICAgICAgICAgICAgIGJ1eVRva2VuQWRkcmVzczogbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbkFkZHJlc3M6IHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzEwMDAwMCcpLFxyXG4gICAgICAgICAgICAgICAgaXNMYXN0TG9vazogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZlZTogb3RjT3JkZXJGZWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVGhlblxyXG4gICAgICAgICAgICBleHBlY3QocGFyYW1zKS50b0VxdWFsKHtcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxMCcsXHJcbiAgICAgICAgICAgICAgICBidXlUb2tlbkFkZHJlc3M6ICcweDZiMTc1NDc0ZTg5MDk0YzQ0ZGE5OGI5NTRlZWRlYWM0OTUyNzFkMGYnLFxyXG4gICAgICAgICAgICAgICAgZmVlQW1vdW50OiAnMTAwJyxcclxuICAgICAgICAgICAgICAgIGZlZVRva2VuOiAnMHgwYjFiYTBhZjgzMmQ3YzA1ZmQ2NDE2MWUwZGI3OGU4NTk3OGU4MDgyJyxcclxuICAgICAgICAgICAgICAgIGZlZVR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICBpc0xhc3RMb29rOiAndHJ1ZScsXHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbFZlcnNpb246ICc0JyxcclxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnRCYXNlVW5pdHM6ICcxMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuQWRkcmVzczogJzB4YzAyYWFhMzliMjIzZmU4ZDBhMGU1YzRmMjdlYWQ5MDgzYzc1NmNjMicsXHJcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweGRBOUFDNDIzNDQyMTY5NTg4REU2YjQzMDVmNEU4MjBENzA4ZDBjRTUnLFxyXG4gICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweDMzNWU1MTY4NzY3N0M0ZjEzODlmM2RFY0EyNTlhZjk4MzUyOWU4MkQnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdPdGNPcmRlcicsICgpID0+IHtcclxuICAgICAgICBkZXNjcmliZSgnZ2V0UHJpY2VWMkFzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBhIHZhbGlkIGluZGljYXRpdmUgcXVvdGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHaXZlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gbmV3IFF1b3RlU2VydmVyQ2xpZW50KGF4aW9zSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdDogUXVvdGVTZXJ2ZXJQcmljZVBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiBDSEFJTl9JRC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkFkZHJlc3M6IHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW5BZGRyZXNzOiBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsQW1vdW50QmFzZVVuaXRzOiB0YWtlckFtb3VudC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sVmVyc2lvbjogJzQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNMYXN0TG9vazogJ3RydWUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZUFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBmZWVUb2tlbjogQ09OVFJBQ1RfQUREUkVTU0VTLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6ICcxNjM0MzIyODM1JyxcclxuICAgICAgICAgICAgICAgICAgICBub25jZUJ1Y2tldDogJzEnLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogbWFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoOTkzNDMyMjk3MiksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF4aW9zTW9jay5vbkdldChgJHttYWtlclVyaX0vcmZxbS92Mi9wcmljZWApLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCByZXNwb25zZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gV2hlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kaWNhdGl2ZVF1b3RlID0gYXdhaXQgY2xpZW50LmdldFByaWNlVjJBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgKHVyaSkgPT4gYCR7dXJpfS9yZnFtL3YyL3ByaWNlYCxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGhlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5yZXNwb25zZSxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoaW5kaWNhdGl2ZVF1b3RlKS50b0VxdWFsKGV4cGVjdGVkUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCBmb3IgZW1wdHkgcmVzcG9uc2VzIChub3QgcXVvdGluZyknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHaXZlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gbmV3IFF1b3RlU2VydmVyQ2xpZW50KGF4aW9zSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdDogUXVvdGVTZXJ2ZXJQcmljZVBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiBDSEFJTl9JRC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkFkZHJlc3M6IHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW5BZGRyZXNzOiBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsQW1vdW50QmFzZVVuaXRzOiB0YWtlckFtb3VudC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sVmVyc2lvbjogJzQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNMYXN0TG9vazogJ3RydWUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZUFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBmZWVUb2tlbjogQ09OVFJBQ1RfQUREUkVTU0VTLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6ICcxNjM0MzIyODM1JyxcclxuICAgICAgICAgICAgICAgICAgICBub25jZUJ1Y2tldDogJzEnLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHt9OyAvLyBlbXB0eSByZXNwb25zZVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdoZW5cclxuICAgICAgICAgICAgICAgIGF4aW9zTW9jay5vbkdldChgJHttYWtlclVyaX0vcmZxbS92Mi9wcmljZWApLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQuZ2V0UHJpY2VWMkFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCxcclxuICAgICAgICAgICAgICAgICAgICAodXJpKSA9PiBgJHt1cml9L3JmcW0vdjIvcHJpY2VgLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGVuXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gdW5kZWZpbmVkIHdoZW4gcmV0dXJuaW5nIGEgNDAwIGZyb20gYXhpb3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHaXZlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gbmV3IFF1b3RlU2VydmVyQ2xpZW50KGF4aW9zSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdDogUXVvdGVTZXJ2ZXJQcmljZVBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiBDSEFJTl9JRC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkFkZHJlc3M6IHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW5BZGRyZXNzOiBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsQW1vdW50QmFzZVVuaXRzOiB0YWtlckFtb3VudC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sVmVyc2lvbjogJzQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNMYXN0TG9vazogJ3RydWUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZUFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBmZWVUb2tlbjogQ09OVFJBQ1RfQUREUkVTU0VTLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6ICcxNjM0MzIyODM1JyxcclxuICAgICAgICAgICAgICAgICAgICBub25jZUJ1Y2tldDogJzEnLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHt9OyAvLyBlbXB0eSByZXNwb25zZVxyXG5cclxuICAgICAgICAgICAgICAgIGF4aW9zTW9jay5vbkdldChgJHttYWtlclVyaX0vcmZxbS92Mi9wcmljZWApLnJlcGx5T25jZShIdHRwU3RhdHVzLkJBRF9SRVFVRVNULCByZXNwb25zZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gV2hlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LmdldFByaWNlVjJBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgKHVyaSkgPT4gYCR7dXJpfS9yZnFtL3YyL3ByaWNlYCxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGhlblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgZm9yIGEgbWFsZm9ybWVkIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gR2l2ZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBRdW90ZVNlcnZlckNsaWVudChheGlvc0luc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3Q6IFF1b3RlU2VydmVyUHJpY2VQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogQ0hBSU5fSUQudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5BZGRyZXNzOiB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuQWRkcmVzczogbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbEFtb3VudEJhc2VVbml0czogdGFrZXJBbW91bnQudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBwcm90b2NvbFZlcnNpb246ICc0JyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTGFzdExvb2s6ICd0cnVlJyxcclxuICAgICAgICAgICAgICAgICAgICBmZWVBbW91bnQ6ICcxMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZVR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAnMTYzNDMyMjgzNScsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2VCdWNrZXQ6ICcxJyxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNkZjogJ21hbGZvcm1lZCByZXNwb25zZScsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF4aW9zTW9jay5vbkdldChgJHttYWtlclVyaX0vcmZxbS92Mi9wcmljZWApLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCByZXNwb25zZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gV2hlblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgZXhwZWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGllbnQuZ2V0UHJpY2VWMkFzeW5jKG1ha2VyVXJpLCBpbnRlZ3JhdG9yLCByZXF1ZXN0LCAodXJpKSA9PiBgJHt1cml9L3JmcW0vdjIvcHJpY2VgKTtcclxuICAgICAgICAgICAgICAgIH0pLnJlamVjdHMudG9UaHJvdygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZGVzY3JpYmUoJ2JhdGNoR2V0UHJpY2VWMkFzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgdmFsaWQgaW5kaWNhdGl2ZSBxdXRvZXMgYW5kIGZpbHRlciBvdXQgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gR2l2ZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1ha2VyVXJpMSA9ICdodHRwczovL3NvbWUtbWFya2V0LW1ha2VyMS54eXonO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFrZXJVcmkyID0gJ2h0dHBzOi8vc29tZS1tYXJrZXQtbWFrZXIyLnh5eic7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYWtlclVyaTMgPSAnaHR0cHM6Ly9zb21lLW1hcmtldC1tYWtlcjMueHl6JztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBRdW90ZVNlcnZlckNsaWVudChheGlvc0luc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3Q6IFF1b3RlU2VydmVyUHJpY2VQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogQ0hBSU5fSUQudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5BZGRyZXNzOiB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuQWRkcmVzczogbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbEFtb3VudEJhc2VVbml0czogdGFrZXJBbW91bnQudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBwcm90b2NvbFZlcnNpb246ICc0JyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTGFzdExvb2s6ICd0cnVlJyxcclxuICAgICAgICAgICAgICAgICAgICBmZWVBbW91bnQ6ICcxMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZVR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAnMTYzNDMyMjgzNScsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2VCdWNrZXQ6ICcxJyxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6IG1ha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKDk5MzQzMjI5NzIpLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBheGlvc01vY2sub25HZXQoYCR7bWFrZXJVcmkxfS9yZnFtL3YyL3ByaWNlYCkucmVwbHlPbmNlKEh0dHBTdGF0dXMuT0ssIHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGF4aW9zTW9jay5vbkdldChgJHttYWtlclVyaTJ9L3JmcW0vdjIvcHJpY2VgKS5yZXBseU9uY2UoSHR0cFN0YXR1cy5OT19DT05URU5ULCB7fSk7XHJcbiAgICAgICAgICAgICAgICBheGlvc01vY2sub25HZXQoYCR7bWFrZXJVcmkzfS9yZnFtL3YyL3ByaWNlYCkucmVwbHlPbmNlKEh0dHBTdGF0dXMuQkFEX0dBVEVXQVksIHt9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBXaGVuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2F0aXZlUXVvdGVzID0gYXdhaXQgY2xpZW50LmJhdGNoR2V0UHJpY2VWMkFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgIFttYWtlclVyaTEsIG1ha2VyVXJpMiwgbWFrZXJVcmkzXSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRoZW5cclxuICAgICAgICAgICAgICAgIC8vICRlc2xpbnQtZml4LW1lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaGlub2RhdmlkL2VzbGludC1maXgtbWVcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXHJcbiAgICAgICAgICAgICAgICBleHBlY3QoaW5kaWNhdGl2ZVF1b3RlcyEubGVuZ3RoKS50b0VxdWFsKDEpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGluZGljYXRpdmVRdW90ZXNbMF0ubWFrZXJBbW91bnQudG9OdW1iZXIoKSkudG9FcXVhbChyZXNwb25zZS5tYWtlckFtb3VudC50b051bWJlcigpKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChpbmRpY2F0aXZlUXVvdGVzWzBdLm1ha2VyKS50b0VxdWFsKG1ha2VyQWRkcmVzcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkZXNjcmliZSgnc2lnblYyQXN5bmMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgc2lnbmF0dXJlIGZvciB2YWxpZCByZXNwb25zZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEdpdmVuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbGllbnQgPSBuZXcgUXVvdGVTZXJ2ZXJDbGllbnQoYXhpb3NJbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0OiBTaWduUmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcixcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcignMTAwJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBDT05UUkFDVF9BRERSRVNTRVMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogb3JkZXIuZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxSZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICBmZWVBbW91bnQ6ICcxMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZVRva2VuOiBDT05UUkFDVF9BRERSRVNTRVMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG9yZGVyLmV4cGlyeSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmVlQW1vdW50OiAnMTAwJyxcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZWVkV2l0aEZpbGw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF4aW9zTW9ja1xyXG4gICAgICAgICAgICAgICAgICAgIC5vblBvc3QoYCR7bWFrZXJVcml9L3JmcW0vdjIvc2lnbmAsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYWN0dWFsUmVxdWVzdCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywgcmVzcG9uc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdoZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IGNsaWVudC5zaWduVjJBc3luYyhtYWtlclVyaSwgJ2R1bW15LWludGVncmF0b3ItaWQnLCByZXF1ZXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGVuXHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2lnbmF0dXJlKS50b0VxdWFsKG1ha2VyU2lnbmF0dXJlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHNlbmQgdGFrZXJTcGVjaWZpZWRTaWRlIHdoZW4gZW5hYmxlZCBhbmQgcHJlc2VudCBpbiByZXF1ZXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gR2l2ZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBRdW90ZVNlcnZlckNsaWVudChheGlvc0luc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3Q6IFNpZ25SZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKCcxMDAnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBvcmRlci5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTcGVjaWZpZWRTaWRlOiAnbWFrZXJUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbFJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZUFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogb3JkZXIuZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU3BlY2lmaWVkU2lkZTogJ21ha2VyVG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVBbW91bnQ6ICcxMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2NlZWRXaXRoRmlsbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXhpb3NNb2NrXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uUG9zdChgJHttYWtlclVyaX0vcmZxbS92Mi9zaWduYCwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhY3R1YWxSZXF1ZXN0KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCByZXNwb25zZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gV2hlblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgY2xpZW50LnNpZ25WMkFzeW5jKG1ha2VyVXJpLCAnZHVtbXktaW50ZWdyYXRvci1pZCcsIHJlcXVlc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRoZW5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChzaWduYXR1cmUpLnRvRXF1YWwobWFrZXJTaWduYXR1cmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgc2lnbmF0dXJlIGZvciB2YWxpZCByZXNwb25zZSBldmVuIGlmIHRoZSBmZWUgaXMgaGlnaGVyIHRoYW4gcmVxdWVzdGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gR2l2ZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBRdW90ZVNlcnZlckNsaWVudChheGlvc0luc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3Q6IFNpZ25SZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKCcxMDAnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBvcmRlci5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbFJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZUFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogb3JkZXIuZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVBbW91bnQ6ICcxMDEnLCAvLyBoaWdoZXIgdGhhbiByZXF1ZXN0ZWRcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZWVkV2l0aEZpbGw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF4aW9zTW9ja1xyXG4gICAgICAgICAgICAgICAgICAgIC5vblBvc3QoYCR7bWFrZXJVcml9L3JmcW0vdjIvc2lnbmAsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYWN0dWFsUmVxdWVzdCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywgcmVzcG9uc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdoZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IGNsaWVudC5zaWduVjJBc3luYyhtYWtlclVyaSwgJ2R1bW15LWludGVncmF0b3ItaWQnLCByZXF1ZXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGVuXHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2lnbmF0dXJlKS50b0VxdWFsKG1ha2VyU2lnbmF0dXJlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBhIHNpZ25hdHVyZSBmb3IgdmFsaWQgcmVzcG9uc2UgaWYgdGhlIGZlZSBpcyAwIGJ1dCBubyBhY2tub3dsZWRnZW1lbnQgaXMgcmV0dXJuZWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHaXZlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gbmV3IFF1b3RlU2VydmVyQ2xpZW50KGF4aW9zSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdDogU2lnblJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzAnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBvcmRlci5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbFJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZUFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZVRva2VuOiBDT05UUkFDVF9BRERSRVNTRVMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG9yZGVyLmV4cGlyeSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmVlQW1vdW50OiB1bmRlZmluZWQsIC8vIG5vIGZlZSBhbW91bnQgYWNrbm93bGVkZ2VkXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2VlZFdpdGhGaWxsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBheGlvc01vY2tcclxuICAgICAgICAgICAgICAgICAgICAub25Qb3N0KGAke21ha2VyVXJpfS9yZnFtL3YyL3NpZ25gLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFjdHVhbFJlcXVlc3QpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbHlPbmNlKEh0dHBTdGF0dXMuT0ssIHJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBXaGVuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBjbGllbnQuc2lnblYyQXN5bmMobWFrZXJVcmksICdkdW1teS1pbnRlZ3JhdG9yLWlkJywgcmVxdWVzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGhlblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHNpZ25hdHVyZSkudG9FcXVhbChtYWtlclNpZ25hdHVyZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBmb3IgYSBtYWxmb3JtZWQgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHaXZlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gbmV3IFF1b3RlU2VydmVyQ2xpZW50KGF4aW9zSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdDogU2lnblJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzEwMCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogQ09OVFJBQ1RfQUREUkVTU0VTLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG9yZGVyLmV4cGlyeSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNkZjogJ0kgYW0gYnJva2VuJyxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgYXhpb3NNb2NrXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uUG9zdChgJHttYWtlclVyaX0vcmZxbS92Mi9zaWduYCwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCByZXNwb25zZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgZXhwZWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGllbnQuc2lnblYyQXN5bmMobWFrZXJVcmksICdkdW1teS1pbnRlZ3JhdG9yLWlkJywgcmVxdWVzdCk7XHJcbiAgICAgICAgICAgICAgICB9KS5yZWplY3RzLnRvVGhyb3coKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiB1bmRlZmluZWQgZm9yIGFuIGluY29ycmVjdCBmZWUgYWNrbm93bGVkZ2VtZW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gR2l2ZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBRdW90ZVNlcnZlckNsaWVudChheGlvc0luc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3Q6IFNpZ25SZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKCcxMDAnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBvcmRlci5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbFJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZUFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVG9rZW46IENPTlRSQUNUX0FERFJFU1NFUy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogb3JkZXIuZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVBbW91bnQ6ICcxMCcsIC8vIE5vdCB0aGUgcmlnaHQgZmVlXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2VlZFdpdGhGaWxsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBheGlvc01vY2tcclxuICAgICAgICAgICAgICAgICAgICAub25Qb3N0KGAke21ha2VyVXJpfS9yZnFtL3YyL3NpZ25gLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFjdHVhbFJlcXVlc3QpKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbHlPbmNlKEh0dHBTdGF0dXMuT0ssIHJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBXaGVuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSBhd2FpdCBjbGllbnQuc2lnblYyQXN5bmMobWFrZXJVcmksICdkdW1teS1pbnRlZ3JhdG9yLWlkJywgcmVxdWVzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGhlblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHNpZ25hdHVyZSkudG9CZSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHVuZGVmaW5lZCBmb3IgZXhwbGljaXRseSByZWplY3RlZCByZXNwb25zZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHaXZlblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gbmV3IFF1b3RlU2VydmVyQ2xpZW50KGF4aW9zSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdDogU2lnblJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzEwMCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogQ09OVFJBQ1RfQUREUkVTU0VTLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG9yZGVyLmV4cGlyeSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsUmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcixcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlQW1vdW50OiAnMTAwJyxcclxuICAgICAgICAgICAgICAgICAgICBmZWVUb2tlbjogQ09OVFJBQ1RfQUREUkVTU0VTLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBvcmRlci5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2NlZWRXaXRoRmlsbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF4aW9zTW9ja1xyXG4gICAgICAgICAgICAgICAgICAgIC5vblBvc3QoYCR7bWFrZXJVcml9L3JmcW0vdjIvc2lnbmAsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYWN0dWFsUmVxdWVzdCkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywgcmVzcG9uc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdoZW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IGNsaWVudC5zaWduVjJBc3luYyhtYWtlclVyaSwgJ2R1bW15LWludGVncmF0b3ItaWQnLCByZXF1ZXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGVuXHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoc2lnbmF0dXJlKS50b0JlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=
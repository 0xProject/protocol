4f7a6955da859a408c6795a924ae77b9
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
jest.mock('../../services/RfqtService', () => {
    return {
        RfqtService: jest.fn().mockImplementation(() => {
            return {
                getV1PricesAsync: jest.fn(),
                getV1QuotesAsync: jest.fn(),
                getV2PricesAsync: jest.fn(),
                getV2QuotesAsync: jest.fn(),
            };
        }),
    };
});
jest.mock('../../utils/config_manager', () => {
    return {
        ConfigManager: jest.fn().mockImplementation(() => {
            return {
                getIntegratorByIdOrThrow: jest.fn(),
            };
        }),
    };
});
const protocol_utils_1 = require("@0x/protocol-utils");
const signature_utils_1 = require("@0x/protocol-utils/lib/src/signature_utils");
const transformer_utils_1 = require("@0x/protocol-utils/lib/src/transformer_utils");
const utils_1 = require("@0x/utils");
const express = require("express");
const asyncHandler = require("express-async-handler");
const HttpStatus = require("http-status-codes");
const lodash_1 = require("lodash");
const supertest = require("supertest");
const RfqtService_1 = require("../../services/RfqtService");
const config_manager_1 = require("../../utils/config_manager");
const RfqtHandlers_1 = require("../RfqtHandlers");
const constants_1 = require("../../core/constants");
// tslint:disable: no-object-literal-type-assertion
const mockRfqtService = jest.mocked(new RfqtService_1.RfqtService(0, {}, {}, {}, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, {}, {}, {}, {}, 1, {}));
// Jest workaround for getter
mockRfqtService.feeModelVersion = 1;
mockRfqtService.getTokenDecimalsAsync = jest.fn().mockResolvedValue(18);
const mockConfigManager = jest.mocked(new config_manager_1.ConfigManager());
// tslint:enable: no-object-literal-type-assertion
// tslint:disable-next-line: custom-no-magic-numbers
const rfqtHandlers = new RfqtHandlers_1.RfqtHandlers(new Map([[1337, mockRfqtService]]), mockConfigManager);
/**
 * Verifies the proper response to a request using a mocked `RfqtService`.
 *
 * Each case sets up its own little Express app to avoid coupiling this
 * test to the upstream router.
 */
describe('RfqtHandlers', () => {
    describe('parameter verification with _parseV1RequestParameters', () => {
        it('throws if a required parameter is missing', async () => {
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set('Content-type', 'application/json')
                .send({ makerToken: '0xmakertoken' });
            expect(response.body.error).toContain('missing parameters');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
        it('throws if the chain ID is invalid', async () => {
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 'liger' })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 'liger',
                makerToken: '0xmakertoken',
                marketOperation: 'Trade',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-integrator-id',
            });
            expect(response.body.error).toContain('Chain ID is invalid');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
        it('throws with an invalid market operation', async () => {
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Trade',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-integrator-id',
            });
            expect(response.body.error).toContain('invalid market operation');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
        it('throws when the integrator does not exist', async () => {
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                throw new Error("explodes because the integrator doesn't exist");
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-ghost-integrator-id',
            });
            expect(response.body.error).toContain('No integrator found for integrator ID');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
        it('throws if there is no RFQt service for the chain id', async () => {
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 21 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 21,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.error).toContain('No configuration exists for chain');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
    });
    describe('getV1PriceAsync', () => {
        it('responds with an error if the underlying service call fails', async () => {
            mockRfqtService.getV1PricesAsync.mockRejectedValueOnce(new Error('The service blew up'));
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.error).toContain('blew up');
            expect(response.statusCode).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
        });
        it('passes calls on to RfqtService', async () => {
            mockRfqtService.getV1PricesAsync.mockResolvedValue([]);
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(mockRfqtService.getV1PricesAsync.mock.calls[0]).toMatchInlineSnapshot(`
                Array [
                  Object {
                    "altRfqAssetOfferings": Object {},
                    "assetFillAmount": "100",
                    "chainId": 1337,
                    "comparisonPrice": undefined,
                    "integrator": Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "uuid-integrator-id",
                      "label": "Polygon Swap Machine",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    "integratorId": "uuid-polygon-swap-machine",
                    "intentOnFilling": false,
                    "makerToken": "0xmakertoken",
                    "marketOperation": "Buy",
                    "takerAddress": "0xtakeraddress",
                    "takerToken": "0xtakertoken",
                    "txOrigin": "0xtxorigin",
                  },
                ]
            `);
        });
        it('returns prices from RFQt Service', async () => {
            const price = {
                makerUri: 'http://maker-uri',
                makerToken: '0xmakertoken',
                makerAmount: new utils_1.BigNumber(1234),
                takerToken: '0xtakertoken',
                takerAmount: new utils_1.BigNumber(9876),
                expiry: new utils_1.BigNumber(6969642069),
            };
            mockRfqtService.getV1PricesAsync.mockResolvedValue([price]);
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.prices[0]).toStrictEqual(convertBigNumbersToJson(price));
            expect(response.statusCode).toEqual(HttpStatus.OK);
        });
    });
    describe('getV1QuotesAsync', () => {
        it('responds with an error if the underlying service call fails', async () => {
            mockRfqtService.getV1QuotesAsync.mockRejectedValueOnce(new Error('The service blew up'));
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1QuotesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: true,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.error).toContain('blew up');
            expect(response.statusCode).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
        });
        it('passes calls on to RfqtService', async () => {
            mockRfqtService.getV1QuotesAsync.mockResolvedValue([]);
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1QuotesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: true,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(mockRfqtService.getV1QuotesAsync.mock.calls[0]).toMatchInlineSnapshot(`
                Array [
                  Object {
                    "altRfqAssetOfferings": Object {},
                    "assetFillAmount": "100",
                    "chainId": 1337,
                    "comparisonPrice": undefined,
                    "integrator": Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "uuid-integrator-id",
                      "label": "Polygon Swap Machine",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    "integratorId": "uuid-polygon-swap-machine",
                    "intentOnFilling": true,
                    "makerToken": "0xmakertoken",
                    "marketOperation": "Buy",
                    "takerAddress": "0xtakeraddress",
                    "takerToken": "0xtakertoken",
                    "txOrigin": "0xtxorigin",
                  },
                ]
            `);
        });
        it('returns quotes from RFQt Service', async () => {
            const quote = {
                order: {
                    txOrigin: '0xtxorigin',
                    pool: '0xswimmingpool',
                    salt: new utils_1.BigNumber(21),
                    makerToken: '0xmakertoken',
                    makerAmount: new utils_1.BigNumber(1234),
                    takerToken: '0xtakertoken',
                    takerAmount: new utils_1.BigNumber(9876),
                    expiry: new utils_1.BigNumber(6969642069),
                    maker: '0xmakeraddress',
                    taker: '0xtakeraddress',
                    chainId: 1337,
                    verifyingContract: '0xdef1',
                },
                type: transformer_utils_1.FillQuoteTransformerOrderType.Rfq,
                signature: {
                    v: 1,
                    r: '',
                    s: '',
                    signatureType: signature_utils_1.SignatureType.EthSign,
                },
            };
            mockRfqtService.getV1QuotesAsync.mockResolvedValue([quote]);
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV1QuotesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.quotes[0]).toStrictEqual(convertBigNumbersToJson(quote));
            expect(response.statusCode).toEqual(HttpStatus.OK);
        });
    });
    describe('parameter verification with _retrieveQuoteContext', () => {
        it('throws if a required parameter is missing', async () => {
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({ makerToken: '0xmakertoken' });
            expect(response.body.error).toContain('missing parameter');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
        it('throws if the chain ID is invalid', async () => {
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 'liger' })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 'liger',
                makerToken: '0xmakertoken',
                marketOperation: 'Trade',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-integrator-id',
            });
            expect(response.body.error).toContain('Chain ID is invalid');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
        it('throws with an invalid market operation', async () => {
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Trade',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-integrator-id',
            });
            expect(response.body.error).toContain('invalid market operation');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
        it('throws when the integrator does not exist', async () => {
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                throw new Error("explodes because the integrator doesn't exist");
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-ghost-integrator-id',
            });
            expect(response.body.error).toContain('No integrator found for integrator ID');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
        it('throws if there is no RFQt service for the chain id', async () => {
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 21 })
                .send({
                altRfqAssetOfferings: {},
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 21,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.error).toContain('No configuration exists for chain');
            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);
        });
    });
    describe('getV2PriceAsync', () => {
        it('responds with an error if the underlying service call fails', async () => {
            mockRfqtService.getV2PricesAsync.mockRejectedValueOnce(new Error('The service blew up'));
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.error).toContain('blew up');
            expect(response.statusCode).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
        });
        it('passes calls on to RfqtService', async () => {
            mockRfqtService.getV2PricesAsync.mockResolvedValue([]);
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(mockRfqtService.getV2PricesAsync.mock.calls[0]).toMatchInlineSnapshot(`
                Array [
                  Object {
                    "assetFillAmount": "100",
                    "chainId": 1337,
                    "feeModelVersion": 1,
                    "integrator": Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "uuid-integrator-id",
                      "label": "Polygon Swap Machine",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    "isFirm": false,
                    "isSelling": false,
                    "isUnwrap": false,
                    "makerAmount": "100",
                    "makerToken": "0xmakertoken",
                    "makerTokenDecimals": 18,
                    "originalMakerToken": "0xmakertoken",
                    "takerAddress": "0xtakeraddress",
                    "takerAmount": undefined,
                    "takerToken": "0xtakertoken",
                    "takerTokenDecimals": 18,
                    "trader": undefined,
                    "txOrigin": "0xtxorigin",
                    "workflow": "rfqt",
                  },
                ]
            `);
        });
        it('returns prices from RFQt Service', async () => {
            const prices = [
                {
                    makerId: 'maker1',
                    makerUri: 'http://maker-uri',
                    makerAddress: 'maker-address',
                    makerToken: '0xmakertoken',
                    makerAmount: new utils_1.BigNumber(1234),
                    takerToken: '0xtakertoken',
                    takerAmount: new utils_1.BigNumber(9876),
                    expiry: new utils_1.BigNumber(6969642069),
                },
            ];
            mockRfqtService.getV2PricesAsync.mockResolvedValue(prices);
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2PricesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.prices[0]).toStrictEqual(convertBigNumbersToJson(prices[0]));
            expect(response.statusCode).toEqual(HttpStatus.OK);
        });
    });
    describe('getV2QuotesAsync', () => {
        it('responds with an error if the underlying service call fails', async () => {
            mockRfqtService.getV2QuotesAsync.mockRejectedValueOnce(new Error('The service blew up'));
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2QuotesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: true,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.error).toContain('blew up');
            expect(response.statusCode).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);
        });
        it('passes calls on to RfqtService', async () => {
            mockRfqtService.getV2QuotesAsync.mockResolvedValue([]);
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2QuotesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: true,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(mockRfqtService.getV2QuotesAsync.mock.calls[0]).toMatchInlineSnapshot(`
                Array [
                  Object {
                    "assetFillAmount": "100",
                    "chainId": 1337,
                    "feeModelVersion": 1,
                    "integrator": Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "uuid-integrator-id",
                      "label": "Polygon Swap Machine",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    "isFirm": true,
                    "isSelling": false,
                    "isUnwrap": false,
                    "makerAmount": "100",
                    "makerToken": "0xmakertoken",
                    "makerTokenDecimals": 18,
                    "originalMakerToken": "0xmakertoken",
                    "takerAddress": "0xtakeraddress",
                    "takerAmount": undefined,
                    "takerToken": "0xtakertoken",
                    "takerTokenDecimals": 18,
                    "trader": undefined,
                    "txOrigin": "0xtxorigin",
                    "workflow": "rfqt",
                  },
                ]
            `);
        });
        it('returns quotes from RFQt Service', async () => {
            const quotes = [
                {
                    fillableMakerAmount: new utils_1.BigNumber(1234),
                    fillableTakerAmount: new utils_1.BigNumber(9876),
                    fillableTakerFeeAmount: new utils_1.BigNumber(0),
                    makerId: 'maker1',
                    makerUri: 'https://maker-uri',
                    order: new protocol_utils_1.OtcOrder({
                        txOrigin: '0xtxorigin',
                        makerToken: '0xmakertoken',
                        makerAmount: new utils_1.BigNumber(1234),
                        takerToken: '0xtakertoken',
                        takerAmount: new utils_1.BigNumber(9876),
                        expiryAndNonce: new utils_1.BigNumber(6969642069),
                        maker: '0xmakeraddress',
                        taker: '0xtakeraddress',
                        chainId: 1337,
                        verifyingContract: '0xdef1',
                    }),
                    signature: {
                        v: 1,
                        r: '',
                        s: '',
                        signatureType: signature_utils_1.SignatureType.EthSign,
                    },
                },
            ];
            mockRfqtService.getV2QuotesAsync.mockResolvedValue(quotes);
            mockConfigManager.getIntegratorByIdOrThrow.mockImplementationOnce(() => {
                const integrator = {
                    apiKeys: [],
                    integratorId: 'uuid-integrator-id',
                    // tslint:disable-next-line: custom-no-magic-numbers
                    allowedChainIds: [1337],
                    label: 'Polygon Swap Machine',
                    plp: false,
                    rfqm: false,
                    rfqt: true,
                };
                return integrator;
            });
            const response = await supertest(express()
                .use(express.json())
                .post('/', asyncHandler(rfqtHandlers.getV2QuotesAsync.bind(rfqtHandlers))))
                .post('/')
                .set({ 'Content-type': 'application/json', '0x-chain-id': 1337 })
                .send({
                assetFillAmount: new utils_1.BigNumber(100),
                chainId: 1337,
                makerToken: '0xmakertoken',
                marketOperation: 'Buy',
                takerToken: '0xtakertoken',
                takerAddress: '0xtakeraddress',
                txOrigin: '0xtxorigin',
                intentOnFilling: false,
                integratorId: 'uuid-polygon-swap-machine',
            });
            expect(response.body.quotes[0]).toStrictEqual(convertBigNumbersToJson(quotes[0]));
            expect(response.statusCode).toEqual(HttpStatus.OK);
        });
    });
});
/**
 * Deeply transforms object keys from BigNumber to JSON
 */
// $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
// eslint-disable-next-line @typescript-eslint/no-explicit-any
function convertBigNumbersToJson(x) {
    return (0, lodash_1.mapValues)(x, (v) => {
        if (v instanceof utils_1.BigNumber) {
            return v.toJSON();
        }
        if (v instanceof Object) {
            return convertBigNumbersToJson(v);
        }
        return v;
    });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3NyYy9oYW5kbGVycy9fX3Rlc3RzX18vUmZxdEhhbmRsZXJzLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUEyQkEsSUFBSSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7SUFDekMsT0FBTztRQUNILFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFO1lBQzNDLE9BQU87Z0JBQ0gsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDM0IsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDM0IsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDM0IsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTthQUM5QixDQUFDO1FBQ04sQ0FBQyxDQUFDO0tBQ0wsQ0FBQztBQUNOLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7SUFDekMsT0FBTztRQUNILGFBQWEsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFO1lBQzdDLE9BQU87Z0JBQ0gsd0JBQXdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTthQUN0QyxDQUFDO1FBQ04sQ0FBQyxDQUFDO0tBQ0wsQ0FBQztBQUNOLENBQUMsQ0FBQyxDQUFDO0FBN0NILHVEQUE4QztBQUM5QyxnRkFBMkU7QUFDM0Usb0ZBQTZGO0FBQzdGLHFDQUFzQztBQUN0QyxtQ0FBbUM7QUFDbkMsc0RBQXNEO0FBQ3RELGdEQUFnRDtBQUNoRCxtQ0FBbUM7QUFDbkMsdUNBQXVDO0FBS3ZDLDREQUF5RDtBQUd6RCwrREFBMkQ7QUFJM0Qsa0RBQStDO0FBRS9DLG9EQUFzRTtBQXlCdEUsbURBQW1EO0FBQ25ELE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQy9C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QUE2RDtBQUM3RCw4REFBOEQ7QUFDOUQsU0FBUyx1QkFBdUIsQ0FBQyxDQUFzQjtJQUNuRCxPQUFPLElBQUEsa0JBQVMsRUFBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRTtRQUN0QixJQUFJLENBQUMsWUFBWSxpQkFBUyxFQUFFO1lBQ3hCLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ3JCO1FBQ0QsSUFBSSxDQUFDLFlBQVksTUFBTSxFQUFFO1lBQ3JCLE9BQU8sdUJBQXVCLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDckM7UUFDRCxPQUFPLENBQUMsQ0FBQztJQUNiLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZGF2aWR3YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvc3JjL2hhbmRsZXJzL19fdGVzdHNfXy9SZnF0SGFuZGxlcnMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0c2xpbnQ6ZGlzYWJsZTogbWF4LWZpbGUtbGluZS1jb3VudFxyXG5pbXBvcnQgeyBTaWduZWROYXRpdmVPcmRlciB9IGZyb20gJ0AweC9hc3NldC1zd2FwcGVyL2xpYi9zcmMvdHlwZXMnO1xyXG5pbXBvcnQgeyBDb250cmFjdEFkZHJlc3NlcyB9IGZyb20gJ0AweC9jb250cmFjdC1hZGRyZXNzZXMnO1xyXG5pbXBvcnQgeyBPdGNPcmRlciB9IGZyb20gJ0AweC9wcm90b2NvbC11dGlscyc7XHJcbmltcG9ydCB7IFNpZ25hdHVyZVR5cGUgfSBmcm9tICdAMHgvcHJvdG9jb2wtdXRpbHMvbGliL3NyYy9zaWduYXR1cmVfdXRpbHMnO1xyXG5pbXBvcnQgeyBGaWxsUXVvdGVUcmFuc2Zvcm1lck9yZGVyVHlwZSB9IGZyb20gJ0AweC9wcm90b2NvbC11dGlscy9saWIvc3JjL3RyYW5zZm9ybWVyX3V0aWxzJztcclxuaW1wb3J0IHsgQmlnTnVtYmVyIH0gZnJvbSAnQDB4L3V0aWxzJztcclxuaW1wb3J0ICogYXMgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxuaW1wb3J0ICogYXMgYXN5bmNIYW5kbGVyIGZyb20gJ2V4cHJlc3MtYXN5bmMtaGFuZGxlcic7XHJcbmltcG9ydCAqIGFzIEh0dHBTdGF0dXMgZnJvbSAnaHR0cC1zdGF0dXMtY29kZXMnO1xyXG5pbXBvcnQgeyBtYXBWYWx1ZXMgfSBmcm9tICdsb2Rhc2gnO1xyXG5pbXBvcnQgKiBhcyBzdXBlcnRlc3QgZnJvbSAnc3VwZXJ0ZXN0JztcclxuXHJcbmltcG9ydCB7IEludGVncmF0b3IgfSBmcm9tICcuLi8uLi9jb25maWcnO1xyXG5pbXBvcnQgeyBRdW90ZVJlcXVlc3RvciwgVjRSRlFJbmRpY2F0aXZlUXVvdGVNTSB9IGZyb20gJy4uLy4uL3F1b3RlUmVxdWVzdG9yL1F1b3RlUmVxdWVzdG9yJztcclxuaW1wb3J0IHsgRmVlU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2ZlZV9zZXJ2aWNlJztcclxuaW1wb3J0IHsgUmZxdFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9SZnF0U2VydmljZSc7XHJcbmltcG9ydCB7IFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3JmcV9tYWtlcl9iYWxhbmNlX2NhY2hlX3NlcnZpY2UnO1xyXG5pbXBvcnQgeyBSZnF0VjJQcmljZSwgUmZxdFYyUXVvdGUgfSBmcm9tICcuLi8uLi9jb3JlL3R5cGVzJztcclxuaW1wb3J0IHsgQ29uZmlnTWFuYWdlciB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbmZpZ19tYW5hZ2VyJztcclxuaW1wb3J0IHsgUXVvdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICcuLi8uLi91dGlscy9xdW90ZV9zZXJ2ZXJfY2xpZW50JztcclxuaW1wb3J0IHsgUmZxTWFrZXJNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vdXRpbHMvcmZxX21ha2VyX21hbmFnZXInO1xyXG5pbXBvcnQgeyBUb2tlbk1ldGFkYXRhTWFuYWdlciB9IGZyb20gJy4uLy4uL3V0aWxzL1Rva2VuTWV0YWRhdGFNYW5hZ2VyJztcclxuaW1wb3J0IHsgUmZxdEhhbmRsZXJzIH0gZnJvbSAnLi4vUmZxdEhhbmRsZXJzJztcclxuaW1wb3J0IHsgUmZxQmxvY2tjaGFpblV0aWxzIH0gZnJvbSAnLi4vLi4vdXRpbHMvcmZxX2Jsb2NrY2hhaW5fdXRpbHMnO1xyXG5pbXBvcnQgeyBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMgfSBmcm9tICcuLi8uLi9jb3JlL2NvbnN0YW50cyc7XHJcblxyXG5qZXN0Lm1vY2soJy4uLy4uL3NlcnZpY2VzL1JmcXRTZXJ2aWNlJywgKCkgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBSZnF0U2VydmljZTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBnZXRWMVByaWNlc0FzeW5jOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgICAgICBnZXRWMVF1b3Rlc0FzeW5jOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgICAgICBnZXRWMlByaWNlc0FzeW5jOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgICAgICBnZXRWMlF1b3Rlc0FzeW5jOiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSksXHJcbiAgICB9O1xyXG59KTtcclxuXHJcbmplc3QubW9jaygnLi4vLi4vdXRpbHMvY29uZmlnX21hbmFnZXInLCAoKSA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIENvbmZpZ01hbmFnZXI6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZ2V0SW50ZWdyYXRvckJ5SWRPclRocm93OiBqZXN0LmZuKCksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSksXHJcbiAgICB9O1xyXG59KTtcclxuXHJcbi8vIHRzbGludDpkaXNhYmxlOiBuby1vYmplY3QtbGl0ZXJhbC10eXBlLWFzc2VydGlvblxyXG5jb25zdCBtb2NrUmZxdFNlcnZpY2UgPSBqZXN0Lm1vY2tlZChcclxuICAgIG5ldyBSZnF0U2VydmljZShcclxuICAgICAgICAwLFxyXG4gICAgICAgIHt9IGFzIFJmcU1ha2VyTWFuYWdlcixcclxuICAgICAgICB7fSBhcyBRdW90ZVJlcXVlc3RvcixcclxuICAgICAgICB7fSBhcyBRdW90ZVNlcnZlckNsaWVudCxcclxuICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXHJcbiAgICAgICAge30gYXMgUmZxQmxvY2tjaGFpblV0aWxzLFxyXG4gICAgICAgIHt9IGFzIFRva2VuTWV0YWRhdGFNYW5hZ2VyLFxyXG4gICAgICAgIHt9IGFzIENvbnRyYWN0QWRkcmVzc2VzLFxyXG4gICAgICAgIHt9IGFzIEZlZVNlcnZpY2UsXHJcbiAgICAgICAgMSxcclxuICAgICAgICB7fSBhcyBSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UsXHJcbiAgICApLFxyXG4pO1xyXG4vLyBKZXN0IHdvcmthcm91bmQgZm9yIGdldHRlclxyXG5tb2NrUmZxdFNlcnZpY2UuZmVlTW9kZWxWZXJzaW9uID0gMTtcclxubW9ja1JmcXRTZXJ2aWNlLmdldFRva2VuRGVjaW1hbHNBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgxOCk7XHJcblxyXG5jb25zdCBtb2NrQ29uZmlnTWFuYWdlciA9IGplc3QubW9ja2VkKG5ldyBDb25maWdNYW5hZ2VyKCkpO1xyXG4vLyB0c2xpbnQ6ZW5hYmxlOiBuby1vYmplY3QtbGl0ZXJhbC10eXBlLWFzc2VydGlvblxyXG5cclxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG5jb25zdCByZnF0SGFuZGxlcnMgPSBuZXcgUmZxdEhhbmRsZXJzKG5ldyBNYXAoW1sxMzM3LCBtb2NrUmZxdFNlcnZpY2VdXSksIG1vY2tDb25maWdNYW5hZ2VyKTtcclxuXHJcbi8qKlxyXG4gKiBWZXJpZmllcyB0aGUgcHJvcGVyIHJlc3BvbnNlIHRvIGEgcmVxdWVzdCB1c2luZyBhIG1vY2tlZCBgUmZxdFNlcnZpY2VgLlxyXG4gKlxyXG4gKiBFYWNoIGNhc2Ugc2V0cyB1cCBpdHMgb3duIGxpdHRsZSBFeHByZXNzIGFwcCB0byBhdm9pZCBjb3VwaWxpbmcgdGhpc1xyXG4gKiB0ZXN0IHRvIHRoZSB1cHN0cmVhbSByb3V0ZXIuXHJcbiAqL1xyXG5kZXNjcmliZSgnUmZxdEhhbmRsZXJzJywgKCkgPT4ge1xyXG4gICAgZGVzY3JpYmUoJ3BhcmFtZXRlciB2ZXJpZmljYXRpb24gd2l0aCBfcGFyc2VWMVJlcXVlc3RQYXJhbWV0ZXJzJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCd0aHJvd3MgaWYgYSByZXF1aXJlZCBwYXJhbWV0ZXIgaXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdXBlcnRlc3QoXHJcbiAgICAgICAgICAgICAgICBleHByZXNzKClcclxuICAgICAgICAgICAgICAgICAgICAudXNlKGV4cHJlc3MuanNvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KCcvJywgYXN5bmNIYW5kbGVyKHJmcXRIYW5kbGVycy5nZXRWMVByaWNlc0FzeW5jLmJpbmQocmZxdEhhbmRsZXJzKSkpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAucG9zdCgnLycpXHJcbiAgICAgICAgICAgICAgICAuc2V0KCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpXHJcbiAgICAgICAgICAgICAgICAuc2VuZCh7IG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignbWlzc2luZyBwYXJhbWV0ZXJzJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXNDb2RlKS50b0VxdWFsKEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgndGhyb3dzIGlmIHRoZSBjaGFpbiBJRCBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVydGVzdChcclxuICAgICAgICAgICAgICAgIGV4cHJlc3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIC51c2UoZXhwcmVzcy5qc29uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy8nLCBhc3luY0hhbmRsZXIocmZxdEhhbmRsZXJzLmdldFYxUHJpY2VzQXN5bmMuYmluZChyZnF0SGFuZGxlcnMpKSksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5wb3N0KCcvJylcclxuICAgICAgICAgICAgICAgIC5zZXQoeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnMHgtY2hhaW4taWQnOiAnbGlnZXInIH0pXHJcbiAgICAgICAgICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWx0UmZxQXNzZXRPZmZlcmluZ3M6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICdsaWdlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0T3BlcmF0aW9uOiAnVHJhZGUnLCAvLyBJbnZhbGlkXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLWludGVncmF0b3ItaWQnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCdDaGFpbiBJRCBpcyBpbnZhbGlkJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXNDb2RlKS50b0VxdWFsKEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgndGhyb3dzIHdpdGggYW4gaW52YWxpZCBtYXJrZXQgb3BlcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVydGVzdChcclxuICAgICAgICAgICAgICAgIGV4cHJlc3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIC51c2UoZXhwcmVzcy5qc29uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy8nLCBhc3luY0hhbmRsZXIocmZxdEhhbmRsZXJzLmdldFYxUHJpY2VzQXN5bmMuYmluZChyZnF0SGFuZGxlcnMpKSksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5wb3N0KCcvJylcclxuICAgICAgICAgICAgICAgIC5zZXQoeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnMHgtY2hhaW4taWQnOiAxMzM3IH0pXHJcbiAgICAgICAgICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWx0UmZxQXNzZXRPZmZlcmluZ3M6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0T3BlcmF0aW9uOiAnVHJhZGUnLCAvLyBJbnZhbGlkXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLWludGVncmF0b3ItaWQnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCdpbnZhbGlkIG1hcmtldCBvcGVyYXRpb24nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1c0NvZGUpLnRvRXF1YWwoSHR0cFN0YXR1cy5CQURfUkVRVUVTVCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCd0aHJvd3Mgd2hlbiB0aGUgaW50ZWdyYXRvciBkb2VzIG5vdCBleGlzdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja0NvbmZpZ01hbmFnZXIuZ2V0SW50ZWdyYXRvckJ5SWRPclRocm93Lm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZXhwbG9kZXMgYmVjYXVzZSB0aGUgaW50ZWdyYXRvciBkb2Vzbid0IGV4aXN0XCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjFQcmljZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdCdXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dHhvcmlnaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1naG9zdC1pbnRlZ3JhdG9yLWlkJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignTm8gaW50ZWdyYXRvciBmb3VuZCBmb3IgaW50ZWdyYXRvciBJRCcpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzQ29kZSkudG9FcXVhbChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Rocm93cyBpZiB0aGVyZSBpcyBubyBSRlF0IHNlcnZpY2UgZm9yIHRoZSBjaGFpbiBpZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja0NvbmZpZ01hbmFnZXIuZ2V0SW50ZWdyYXRvckJ5SWRPclRocm93Lm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZWdyYXRvcjogSW50ZWdyYXRvciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLWludGVncmF0b3ItaWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkQ2hhaW5JZHM6IFsxMzM3XSxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1BvbHlnb24gU3dhcCBNYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgICAgICBwbHA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcW06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVncmF0b3I7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdXBlcnRlc3QoXHJcbiAgICAgICAgICAgICAgICBleHByZXNzKClcclxuICAgICAgICAgICAgICAgICAgICAudXNlKGV4cHJlc3MuanNvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KCcvJywgYXN5bmNIYW5kbGVyKHJmcXRIYW5kbGVycy5nZXRWMVByaWNlc0FzeW5jLmJpbmQocmZxdEhhbmRsZXJzKSkpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAucG9zdCgnLycpXHJcbiAgICAgICAgICAgICAgICAuc2V0KHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgJzB4LWNoYWluLWlkJzogMjEgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMjEsIC8vIE5vIFJGUXQgc2VydmljZSBleGlzdHMgZm9yIDIxXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0T3BlcmF0aW9uOiAnQnV5JyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHR4b3JpZ2luJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtcG9seWdvbi1zd2FwLW1hY2hpbmUnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCdObyBjb25maWd1cmF0aW9uIGV4aXN0cyBmb3IgY2hhaW4nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1c0NvZGUpLnRvRXF1YWwoSHR0cFN0YXR1cy5CQURfUkVRVUVTVCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0VjFQcmljZUFzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdyZXNwb25kcyB3aXRoIGFuIGVycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHNlcnZpY2UgY2FsbCBmYWlscycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja1JmcXRTZXJ2aWNlLmdldFYxUHJpY2VzQXN5bmMubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignVGhlIHNlcnZpY2UgYmxldyB1cCcpKTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tDb25maWdNYW5hZ2VyLmdldEludGVncmF0b3JCeUlkT3JUaHJvdy5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yLWlkJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbMTMzN10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdQb2x5Z29uIFN3YXAgTWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnFtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlZ3JhdG9yO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjFQcmljZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdCdXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dHhvcmlnaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1wb2x5Z29uLXN3YXAtbWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignYmxldyB1cCcpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzQ29kZSkudG9FcXVhbChIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdwYXNzZXMgY2FsbHMgb24gdG8gUmZxdFNlcnZpY2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1vY2tSZnF0U2VydmljZS5nZXRWMVByaWNlc0FzeW5jLm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tDb25maWdNYW5hZ2VyLmdldEludGVncmF0b3JCeUlkT3JUaHJvdy5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yLWlkJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbMTMzN10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdQb2x5Z29uIFN3YXAgTWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnFtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlZ3JhdG9yO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHN1cGVydGVzdChcclxuICAgICAgICAgICAgICAgIGV4cHJlc3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIC51c2UoZXhwcmVzcy5qc29uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy8nLCBhc3luY0hhbmRsZXIocmZxdEhhbmRsZXJzLmdldFYxUHJpY2VzQXN5bmMuYmluZChyZnF0SGFuZGxlcnMpKSksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5wb3N0KCcvJylcclxuICAgICAgICAgICAgICAgIC5zZXQoeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnMHgtY2hhaW4taWQnOiAxMzM3IH0pXHJcbiAgICAgICAgICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWx0UmZxQXNzZXRPZmZlcmluZ3M6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0T3BlcmF0aW9uOiAnQnV5JyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHR4b3JpZ2luJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtcG9seWdvbi1zd2FwLW1hY2hpbmUnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QobW9ja1JmcXRTZXJ2aWNlLmdldFYxUHJpY2VzQXN5bmMubW9jay5jYWxsc1swXSkudG9NYXRjaElubGluZVNuYXBzaG90KGBcclxuICAgICAgICAgICAgICAgIEFycmF5IFtcclxuICAgICAgICAgICAgICAgICAgT2JqZWN0IHtcclxuICAgICAgICAgICAgICAgICAgICBcImFsdFJmcUFzc2V0T2ZmZXJpbmdzXCI6IE9iamVjdCB7fSxcclxuICAgICAgICAgICAgICAgICAgICBcImFzc2V0RmlsbEFtb3VudFwiOiBcIjEwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2hhaW5JZFwiOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29tcGFyaXNvblByaWNlXCI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JcIjogT2JqZWN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgIFwiYWxsb3dlZENoYWluSWRzXCI6IEFycmF5IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImFwaUtleXNcIjogQXJyYXkgW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JJZFwiOiBcInV1aWQtaW50ZWdyYXRvci1pZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJsYWJlbFwiOiBcIlBvbHlnb24gU3dhcCBNYWNoaW5lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInBscFwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxbVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxdFwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpbnRlZ3JhdG9ySWRcIjogXCJ1dWlkLXBvbHlnb24tc3dhcC1tYWNoaW5lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpbnRlbnRPbkZpbGxpbmdcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlclRva2VuXCI6IFwiMHhtYWtlcnRva2VuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRPcGVyYXRpb25cIjogXCJCdXlcIixcclxuICAgICAgICAgICAgICAgICAgICBcInRha2VyQWRkcmVzc1wiOiBcIjB4dGFrZXJhZGRyZXNzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0YWtlclRva2VuXCI6IFwiMHh0YWtlcnRva2VuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0eE9yaWdpblwiOiBcIjB4dHhvcmlnaW5cIixcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdyZXR1cm5zIHByaWNlcyBmcm9tIFJGUXQgU2VydmljZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJpY2U6IFY0UkZRSW5kaWNhdGl2ZVF1b3RlTU0gPSB7XHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9tYWtlci11cmknLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMjM0KSxcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoOTg3NiksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoNjk2OTY0MjA2OSksXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBtb2NrUmZxdFNlcnZpY2UuZ2V0VjFQcmljZXNBc3luYy5tb2NrUmVzb2x2ZWRWYWx1ZShbcHJpY2VdKTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tDb25maWdNYW5hZ2VyLmdldEludGVncmF0b3JCeUlkT3JUaHJvdy5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yLWlkJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbMTMzN10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdQb2x5Z29uIFN3YXAgTWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnFtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlZ3JhdG9yO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjFQcmljZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdCdXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dHhvcmlnaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1wb2x5Z29uLXN3YXAtbWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnByaWNlc1swXSkudG9TdHJpY3RFcXVhbChjb252ZXJ0QmlnTnVtYmVyc1RvSnNvbihwcmljZSkpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzQ29kZSkudG9FcXVhbChIdHRwU3RhdHVzLk9LKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRWMVF1b3Rlc0FzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdyZXNwb25kcyB3aXRoIGFuIGVycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHNlcnZpY2UgY2FsbCBmYWlscycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja1JmcXRTZXJ2aWNlLmdldFYxUXVvdGVzQXN5bmMubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignVGhlIHNlcnZpY2UgYmxldyB1cCcpKTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tDb25maWdNYW5hZ2VyLmdldEludGVncmF0b3JCeUlkT3JUaHJvdy5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yLWlkJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbMTMzN10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdQb2x5Z29uIFN3YXAgTWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnFtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlZ3JhdG9yO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjFRdW90ZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdCdXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dHhvcmlnaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLXBvbHlnb24tc3dhcC1tYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCdibGV3IHVwJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXNDb2RlKS50b0VxdWFsKEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Bhc3NlcyBjYWxscyBvbiB0byBSZnF0U2VydmljZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja1JmcXRTZXJ2aWNlLmdldFYxUXVvdGVzQXN5bmMubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xyXG5cclxuICAgICAgICAgICAgbW9ja0NvbmZpZ01hbmFnZXIuZ2V0SW50ZWdyYXRvckJ5SWRPclRocm93Lm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZWdyYXRvcjogSW50ZWdyYXRvciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLWludGVncmF0b3ItaWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkQ2hhaW5JZHM6IFsxMzM3XSxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1BvbHlnb24gU3dhcCBNYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgICAgICBwbHA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcW06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVncmF0b3I7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjFRdW90ZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdCdXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dHhvcmlnaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLXBvbHlnb24tc3dhcC1tYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tSZnF0U2VydmljZS5nZXRWMVF1b3Rlc0FzeW5jLm1vY2suY2FsbHNbMF0pLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChgXHJcbiAgICAgICAgICAgICAgICBBcnJheSBbXHJcbiAgICAgICAgICAgICAgICAgIE9iamVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJhbHRSZnFBc3NldE9mZmVyaW5nc1wiOiBPYmplY3Qge30sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldEZpbGxBbW91bnRcIjogXCIxMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBcImNoYWluSWRcIjogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbXBhcmlzb25QcmljZVwiOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpbnRlZ3JhdG9yXCI6IE9iamVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBcImFsbG93ZWRDaGFpbklkc1wiOiBBcnJheSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJhcGlLZXlzXCI6IEFycmF5IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJpbnRlZ3JhdG9ySWRcIjogXCJ1dWlkLWludGVncmF0b3ItaWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwibGFiZWxcIjogXCJQb2x5Z29uIFN3YXAgTWFjaGluZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJwbHBcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInJmcW1cIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInJmcXRcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvcklkXCI6IFwidXVpZC1wb2x5Z29uLXN3YXAtbWFjaGluZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaW50ZW50T25GaWxsaW5nXCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlclRva2VuXCI6IFwiMHhtYWtlcnRva2VuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYXJrZXRPcGVyYXRpb25cIjogXCJCdXlcIixcclxuICAgICAgICAgICAgICAgICAgICBcInRha2VyQWRkcmVzc1wiOiBcIjB4dGFrZXJhZGRyZXNzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0YWtlclRva2VuXCI6IFwiMHh0YWtlcnRva2VuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0eE9yaWdpblwiOiBcIjB4dHhvcmlnaW5cIixcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdyZXR1cm5zIHF1b3RlcyBmcm9tIFJGUXQgU2VydmljZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcXVvdGU6IFNpZ25lZE5hdGl2ZU9yZGVyID0ge1xyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dHhvcmlnaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvb2w6ICcweHN3aW1taW5ncG9vbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc2FsdDogbmV3IEJpZ051bWJlcigyMSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTIzNCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoOTg3NiksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKDY5Njk2NDIwNjkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcweGRlZjEnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IEZpbGxRdW90ZVRyYW5zZm9ybWVyT3JkZXJUeXBlLlJmcSxcclxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tSZnF0U2VydmljZS5nZXRWMVF1b3Rlc0FzeW5jLm1vY2tSZXNvbHZlZFZhbHVlKFtxdW90ZV0pO1xyXG5cclxuICAgICAgICAgICAgbW9ja0NvbmZpZ01hbmFnZXIuZ2V0SW50ZWdyYXRvckJ5SWRPclRocm93Lm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZWdyYXRvcjogSW50ZWdyYXRvciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLWludGVncmF0b3ItaWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkQ2hhaW5JZHM6IFsxMzM3XSxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1BvbHlnb24gU3dhcCBNYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgICAgICBwbHA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcW06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVncmF0b3I7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdXBlcnRlc3QoXHJcbiAgICAgICAgICAgICAgICBleHByZXNzKClcclxuICAgICAgICAgICAgICAgICAgICAudXNlKGV4cHJlc3MuanNvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KCcvJywgYXN5bmNIYW5kbGVyKHJmcXRIYW5kbGVycy5nZXRWMVF1b3Rlc0FzeW5jLmJpbmQocmZxdEhhbmRsZXJzKSkpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAucG9zdCgnLycpXHJcbiAgICAgICAgICAgICAgICAuc2V0KHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgJzB4LWNoYWluLWlkJzogMTMzNyB9KVxyXG4gICAgICAgICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFsdFJmcUFzc2V0T2ZmZXJpbmdzOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbjogJ0J1eScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLXBvbHlnb24tc3dhcC1tYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkucXVvdGVzWzBdKS50b1N0cmljdEVxdWFsKGNvbnZlcnRCaWdOdW1iZXJzVG9Kc29uKHF1b3RlKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXNDb2RlKS50b0VxdWFsKEh0dHBTdGF0dXMuT0spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3BhcmFtZXRlciB2ZXJpZmljYXRpb24gd2l0aCBfcmV0cmlldmVRdW90ZUNvbnRleHQnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Rocm93cyBpZiBhIHJlcXVpcmVkIHBhcmFtZXRlciBpcyBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVydGVzdChcclxuICAgICAgICAgICAgICAgIGV4cHJlc3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIC51c2UoZXhwcmVzcy5qc29uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy8nLCBhc3luY0hhbmRsZXIocmZxdEhhbmRsZXJzLmdldFYyUHJpY2VzQXN5bmMuYmluZChyZnF0SGFuZGxlcnMpKSksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5wb3N0KCcvJylcclxuICAgICAgICAgICAgICAgIC5zZXQoeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnMHgtY2hhaW4taWQnOiAxMzM3IH0pXHJcbiAgICAgICAgICAgICAgICAuc2VuZCh7IG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignbWlzc2luZyBwYXJhbWV0ZXInKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1c0NvZGUpLnRvRXF1YWwoSHR0cFN0YXR1cy5CQURfUkVRVUVTVCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCd0aHJvd3MgaWYgdGhlIGNoYWluIElEIGlzIGludmFsaWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjJQcmljZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6ICdsaWdlcicgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJ2xpZ2VyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdUcmFkZScsIC8vIEludmFsaWRcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHR4b3JpZ2luJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtaW50ZWdyYXRvci1pZCcsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ0NoYWluIElEIGlzIGludmFsaWQnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1c0NvZGUpLnRvRXF1YWwoSHR0cFN0YXR1cy5CQURfUkVRVUVTVCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCd0aHJvd3Mgd2l0aCBhbiBpbnZhbGlkIG1hcmtldCBvcGVyYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjJQcmljZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdUcmFkZScsIC8vIEludmFsaWRcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHR4b3JpZ2luJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtaW50ZWdyYXRvci1pZCcsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ2ludmFsaWQgbWFya2V0IG9wZXJhdGlvbicpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzQ29kZSkudG9FcXVhbChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Rocm93cyB3aGVuIHRoZSBpbnRlZ3JhdG9yIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQ29uZmlnTWFuYWdlci5nZXRJbnRlZ3JhdG9yQnlJZE9yVGhyb3cubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJleHBsb2RlcyBiZWNhdXNlIHRoZSBpbnRlZ3JhdG9yIGRvZXNuJ3QgZXhpc3RcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdXBlcnRlc3QoXHJcbiAgICAgICAgICAgICAgICBleHByZXNzKClcclxuICAgICAgICAgICAgICAgICAgICAudXNlKGV4cHJlc3MuanNvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KCcvJywgYXN5bmNIYW5kbGVyKHJmcXRIYW5kbGVycy5nZXRWMlByaWNlc0FzeW5jLmJpbmQocmZxdEhhbmRsZXJzKSkpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAucG9zdCgnLycpXHJcbiAgICAgICAgICAgICAgICAuc2V0KHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgJzB4LWNoYWluLWlkJzogMTMzNyB9KVxyXG4gICAgICAgICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFsdFJmcUFzc2V0T2ZmZXJpbmdzOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbjogJ0J1eScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLWdob3N0LWludGVncmF0b3ItaWQnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCdObyBpbnRlZ3JhdG9yIGZvdW5kIGZvciBpbnRlZ3JhdG9yIElEJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXNDb2RlKS50b0VxdWFsKEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgndGhyb3dzIGlmIHRoZXJlIGlzIG5vIFJGUXQgc2VydmljZSBmb3IgdGhlIGNoYWluIGlkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrQ29uZmlnTWFuYWdlci5nZXRJbnRlZ3JhdG9yQnlJZE9yVGhyb3cubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlZ3JhdG9yOiBJbnRlZ3JhdG9yID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtaW50ZWdyYXRvci1pZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93ZWRDaGFpbklkczogWzEzMzddLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnUG9seWdvbiBTd2FwIE1hY2hpbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBscDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxbTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW50ZWdyYXRvcjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVydGVzdChcclxuICAgICAgICAgICAgICAgIGV4cHJlc3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIC51c2UoZXhwcmVzcy5qc29uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy8nLCBhc3luY0hhbmRsZXIocmZxdEhhbmRsZXJzLmdldFYyUHJpY2VzQXN5bmMuYmluZChyZnF0SGFuZGxlcnMpKSksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5wb3N0KCcvJylcclxuICAgICAgICAgICAgICAgIC5zZXQoeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnMHgtY2hhaW4taWQnOiAyMSB9KVxyXG4gICAgICAgICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFsdFJmcUFzc2V0T2ZmZXJpbmdzOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAyMSwgLy8gTm8gUkZRdCBzZXJ2aWNlIGV4aXN0cyBmb3IgMjFcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdCdXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dHhvcmlnaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1wb2x5Z29uLXN3YXAtbWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ05vIGNvbmZpZ3VyYXRpb24gZXhpc3RzIGZvciBjaGFpbicpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzQ29kZSkudG9FcXVhbChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRWMlByaWNlQXN5bmMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Jlc3BvbmRzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHVuZGVybHlpbmcgc2VydmljZSBjYWxsIGZhaWxzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrUmZxdFNlcnZpY2UuZ2V0VjJQcmljZXNBc3luYy5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdUaGUgc2VydmljZSBibGV3IHVwJykpO1xyXG4gICAgICAgICAgICBtb2NrQ29uZmlnTWFuYWdlci5nZXRJbnRlZ3JhdG9yQnlJZE9yVGhyb3cubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlZ3JhdG9yOiBJbnRlZ3JhdG9yID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtaW50ZWdyYXRvci1pZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93ZWRDaGFpbklkczogWzEzMzddLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnUG9seWdvbiBTd2FwIE1hY2hpbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBscDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxbTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW50ZWdyYXRvcjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN1cGVydGVzdChcclxuICAgICAgICAgICAgICAgIGV4cHJlc3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIC51c2UoZXhwcmVzcy5qc29uKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy8nLCBhc3luY0hhbmRsZXIocmZxdEhhbmRsZXJzLmdldFYyUHJpY2VzQXN5bmMuYmluZChyZnF0SGFuZGxlcnMpKSksXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5wb3N0KCcvJylcclxuICAgICAgICAgICAgICAgIC5zZXQoeyAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnMHgtY2hhaW4taWQnOiAxMzM3IH0pXHJcbiAgICAgICAgICAgICAgICAuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246ICdCdXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dHhvcmlnaW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1wb2x5Z29uLXN3YXAtbWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignYmxldyB1cCcpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzQ29kZSkudG9FcXVhbChIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdwYXNzZXMgY2FsbHMgb24gdG8gUmZxdFNlcnZpY2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1vY2tSZnF0U2VydmljZS5nZXRWMlByaWNlc0FzeW5jLm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcclxuICAgICAgICAgICAgbW9ja0NvbmZpZ01hbmFnZXIuZ2V0SW50ZWdyYXRvckJ5SWRPclRocm93Lm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZWdyYXRvcjogSW50ZWdyYXRvciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBhcGlLZXlzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLWludGVncmF0b3ItaWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkQ2hhaW5JZHM6IFsxMzM3XSxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1BvbHlnb24gU3dhcCBNYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgICAgICBwbHA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcW06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludGVncmF0b3I7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjJQcmljZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbjogJ0J1eScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLXBvbHlnb24tc3dhcC1tYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KG1vY2tSZnF0U2VydmljZS5nZXRWMlByaWNlc0FzeW5jLm1vY2suY2FsbHNbMF0pLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChgXHJcbiAgICAgICAgICAgICAgICBBcnJheSBbXHJcbiAgICAgICAgICAgICAgICAgIE9iamVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJhc3NldEZpbGxBbW91bnRcIjogXCIxMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBcImNoYWluSWRcIjogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBcImZlZU1vZGVsVmVyc2lvblwiOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvclwiOiBPYmplY3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgXCJhbGxvd2VkQ2hhaW5JZHNcIjogQXJyYXkgW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwiYXBpS2V5c1wiOiBBcnJheSBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvcklkXCI6IFwidXVpZC1pbnRlZ3JhdG9yLWlkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCI6IFwiUG9seWdvbiBTd2FwIE1hY2hpbmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwicGxwXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJyZnFtXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJyZnF0XCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcImlzRmlybVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBcImlzU2VsbGluZ1wiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBcImlzVW53cmFwXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWFrZXJBbW91bnRcIjogXCIxMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VyVG9rZW5cIjogXCIweG1ha2VydG9rZW5cIixcclxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VyVG9rZW5EZWNpbWFsc1wiOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBcIm9yaWdpbmFsTWFrZXJUb2tlblwiOiBcIjB4bWFrZXJ0b2tlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGFrZXJBZGRyZXNzXCI6IFwiMHh0YWtlcmFkZHJlc3NcIixcclxuICAgICAgICAgICAgICAgICAgICBcInRha2VyQW1vdW50XCI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBcInRha2VyVG9rZW5cIjogXCIweHRha2VydG9rZW5cIixcclxuICAgICAgICAgICAgICAgICAgICBcInRha2VyVG9rZW5EZWNpbWFsc1wiOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBcInRyYWRlclwiOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0eE9yaWdpblwiOiBcIjB4dHhvcmlnaW5cIixcclxuICAgICAgICAgICAgICAgICAgICBcIndvcmtmbG93XCI6IFwicmZxdFwiLFxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICBgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3JldHVybnMgcHJpY2VzIGZyb20gUkZRdCBTZXJ2aWNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcmljZXM6IFJmcXRWMlByaWNlW10gPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJJZDogJ21ha2VyMScsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vbWFrZXItdXJpJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFkZHJlc3M6ICdtYWtlci1hZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMjM0KSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcig5ODc2KSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoNjk2OTY0MjA2OSksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgbW9ja1JmcXRTZXJ2aWNlLmdldFYyUHJpY2VzQXN5bmMubW9ja1Jlc29sdmVkVmFsdWUocHJpY2VzKTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tDb25maWdNYW5hZ2VyLmdldEludGVncmF0b3JCeUlkT3JUaHJvdy5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yLWlkJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbMTMzN10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdQb2x5Z29uIFN3YXAgTWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnFtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlZ3JhdG9yO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjJQcmljZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbjogJ0J1eScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLXBvbHlnb24tc3dhcC1tYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkucHJpY2VzWzBdKS50b1N0cmljdEVxdWFsKGNvbnZlcnRCaWdOdW1iZXJzVG9Kc29uKHByaWNlc1swXSkpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzQ29kZSkudG9FcXVhbChIdHRwU3RhdHVzLk9LKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdnZXRWMlF1b3Rlc0FzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdyZXNwb25kcyB3aXRoIGFuIGVycm9yIGlmIHRoZSB1bmRlcmx5aW5nIHNlcnZpY2UgY2FsbCBmYWlscycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbW9ja1JmcXRTZXJ2aWNlLmdldFYyUXVvdGVzQXN5bmMubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignVGhlIHNlcnZpY2UgYmxldyB1cCcpKTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tDb25maWdNYW5hZ2VyLmdldEludGVncmF0b3JCeUlkT3JUaHJvdy5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yLWlkJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbMTMzN10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdQb2x5Z29uIFN3YXAgTWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnFtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlZ3JhdG9yO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjJRdW90ZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbjogJ0J1eScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtcG9seWdvbi1zd2FwLW1hY2hpbmUnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ2JsZXcgdXAnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1c0NvZGUpLnRvRXF1YWwoSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgncGFzc2VzIGNhbGxzIG9uIHRvIFJmcXRTZXJ2aWNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2NrUmZxdFNlcnZpY2UuZ2V0VjJRdW90ZXNBc3luYy5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XHJcblxyXG4gICAgICAgICAgICBtb2NrQ29uZmlnTWFuYWdlci5nZXRJbnRlZ3JhdG9yQnlJZE9yVGhyb3cubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlZ3JhdG9yOiBJbnRlZ3JhdG9yID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaUtleXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtaW50ZWdyYXRvci1pZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93ZWRDaGFpbklkczogWzEzMzddLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnUG9seWdvbiBTd2FwIE1hY2hpbmUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBscDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxbTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW50ZWdyYXRvcjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBzdXBlcnRlc3QoXHJcbiAgICAgICAgICAgICAgICBleHByZXNzKClcclxuICAgICAgICAgICAgICAgICAgICAudXNlKGV4cHJlc3MuanNvbigpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KCcvJywgYXN5bmNIYW5kbGVyKHJmcXRIYW5kbGVycy5nZXRWMlF1b3Rlc0FzeW5jLmJpbmQocmZxdEhhbmRsZXJzKSkpLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAucG9zdCgnLycpXHJcbiAgICAgICAgICAgICAgICAuc2V0KHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgJzB4LWNoYWluLWlkJzogMTMzNyB9KVxyXG4gICAgICAgICAgICAgICAgLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0T3BlcmF0aW9uOiAnQnV5JyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHR4b3JpZ2luJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1wb2x5Z29uLXN3YXAtbWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChtb2NrUmZxdFNlcnZpY2UuZ2V0VjJRdW90ZXNBc3luYy5tb2NrLmNhbGxzWzBdKS50b01hdGNoSW5saW5lU25hcHNob3QoYFxyXG4gICAgICAgICAgICAgICAgQXJyYXkgW1xyXG4gICAgICAgICAgICAgICAgICBPYmplY3Qge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYXNzZXRGaWxsQW1vdW50XCI6IFwiMTAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjaGFpbklkXCI6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJmZWVNb2RlbFZlcnNpb25cIjogMSxcclxuICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JcIjogT2JqZWN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgIFwiYWxsb3dlZENoYWluSWRzXCI6IEFycmF5IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImFwaUtleXNcIjogQXJyYXkgW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JJZFwiOiBcInV1aWQtaW50ZWdyYXRvci1pZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJsYWJlbFwiOiBcIlBvbHlnb24gU3dhcCBNYWNoaW5lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInBscFwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxbVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxdFwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpc0Zpcm1cIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBcImlzU2VsbGluZ1wiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBcImlzVW53cmFwXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWFrZXJBbW91bnRcIjogXCIxMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VyVG9rZW5cIjogXCIweG1ha2VydG9rZW5cIixcclxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VyVG9rZW5EZWNpbWFsc1wiOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBcIm9yaWdpbmFsTWFrZXJUb2tlblwiOiBcIjB4bWFrZXJ0b2tlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGFrZXJBZGRyZXNzXCI6IFwiMHh0YWtlcmFkZHJlc3NcIixcclxuICAgICAgICAgICAgICAgICAgICBcInRha2VyQW1vdW50XCI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBcInRha2VyVG9rZW5cIjogXCIweHRha2VydG9rZW5cIixcclxuICAgICAgICAgICAgICAgICAgICBcInRha2VyVG9rZW5EZWNpbWFsc1wiOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBcInRyYWRlclwiOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0eE9yaWdpblwiOiBcIjB4dHhvcmlnaW5cIixcclxuICAgICAgICAgICAgICAgICAgICBcIndvcmtmbG93XCI6IFwicmZxdFwiLFxyXG4gICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICBgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3JldHVybnMgcXVvdGVzIGZyb20gUkZRdCBTZXJ2aWNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBxdW90ZXM6IFJmcXRWMlF1b3RlW10gPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbGFibGVNYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMjM0KSxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZVRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDk4NzYpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlVGFrZXJGZWVBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJJZDogJ21ha2VyMScsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwczovL21ha2VyLXVyaScsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IG5ldyBPdGNPcmRlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMjM0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDk4NzYpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogbmV3IEJpZ051bWJlcig2OTY5NjQyMDY5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJzB4ZGVmMScsXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgbW9ja1JmcXRTZXJ2aWNlLmdldFYyUXVvdGVzQXN5bmMubW9ja1Jlc29sdmVkVmFsdWUocXVvdGVzKTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tDb25maWdNYW5hZ2VyLmdldEludGVncmF0b3JCeUlkT3JUaHJvdy5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpS2V5czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yLWlkJyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbMTMzN10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdQb2x5Z29uIFN3YXAgTWFjaGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnFtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlZ3JhdG9yO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3VwZXJ0ZXN0KFxyXG4gICAgICAgICAgICAgICAgZXhwcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnVzZShleHByZXNzLmpzb24oKSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zdCgnLycsIGFzeW5jSGFuZGxlcihyZnF0SGFuZGxlcnMuZ2V0VjJRdW90ZXNBc3luYy5iaW5kKHJmcXRIYW5kbGVycykpKSxcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnBvc3QoJy8nKVxyXG4gICAgICAgICAgICAgICAgLnNldCh7ICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICcweC1jaGFpbi1pZCc6IDEzMzcgfSlcclxuICAgICAgICAgICAgICAgIC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbjogJ0J1eScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICd1dWlkLXBvbHlnb24tc3dhcC1tYWNoaW5lJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkucXVvdGVzWzBdKS50b1N0cmljdEVxdWFsKGNvbnZlcnRCaWdOdW1iZXJzVG9Kc29uKHF1b3Rlc1swXSkpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzQ29kZSkudG9FcXVhbChIdHRwU3RhdHVzLk9LKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBEZWVwbHkgdHJhbnNmb3JtcyBvYmplY3Qga2V5cyBmcm9tIEJpZ051bWJlciB0byBKU09OXHJcbiAqL1xyXG4vLyAkZXNsaW50LWZpeC1tZSBodHRwczovL2dpdGh1Yi5jb20vcmhpbm9kYXZpZC9lc2xpbnQtZml4LW1lXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmZ1bmN0aW9uIGNvbnZlcnRCaWdOdW1iZXJzVG9Kc29uKHg6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcclxuICAgIHJldHVybiBtYXBWYWx1ZXMoeCwgKHYpID0+IHtcclxuICAgICAgICBpZiAodiBpbnN0YW5jZW9mIEJpZ051bWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdi50b0pTT04oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRCaWdOdW1iZXJzVG9Kc29uKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdjtcclxuICAgIH0pO1xyXG59XHJcbiJdLCJ2ZXJzaW9uIjozfQ==
8ba7ddaf95d3b81195032689ab025525
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.bigNumberToProto = exports.protoToBigNumber = void 0;
const utils_1 = require("@0x/utils");
/**
 * Converts a BigNumberJs proto to an instance of bignumber.js `BigNumber`.
 * See: https://mikemcl.github.io/bignumber.js/#instance-properties
 */
function protoToBigNumber(proto) {
    var _a;
    // Proto uses an `int64` which is generated to a `bigint`, but bignumber.js uses
    // `number`. This probably masks some big problems with bignumber.js, but we'll
    // let that sleeping dog lie.
    const c = proto.c.map((x) => Number(x));
    const result = new utils_1.BigNumber({
        c,
        e: (_a = proto.e) !== null && _a !== void 0 ? _a : null,
        s: proto.s ? 1 : proto.s === false ? -1 : null,
        _isBigNumber: true,
    });
    if (!utils_1.BigNumber.isBigNumber(result)) {
        throw new Error(`Unable to create BigNumber from proto: ${JSON.stringify(proto)}`);
    }
    return result;
}
exports.protoToBigNumber = protoToBigNumber;
/**
 * Converts a bignumber.js to its proto representation.
 * See: https://mikemcl.github.io/bignumber.js/#instance-properties
 */
function bigNumberToProto(n) {
    var _a, _b;
    const c = (_b = (_a = n.c) === null || _a === void 0 ? void 0 : _a.map((n) => BigInt(n))) !== null && _b !== void 0 ? _b : [];
    const s = n.s === 1 ? true : n.s === -1 ? false : null;
    const e = n.e;
    return { c, e, s };
}
exports.bigNumberToProto = bigNumberToProto;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3NyYy91dGlscy9Qcm90b1V0aWxzLnRzIiwibWFwcGluZ3MiOiI7OztBQUFBLHFDQUFzQztBQUd0Qzs7O0dBR0c7QUFDSCxTQUFnQixnQkFBZ0IsQ0FBQyxLQUFrQjs7SUFDL0MsZ0ZBQWdGO0lBQ2hGLCtFQUErRTtJQUMvRSw2QkFBNkI7SUFDN0IsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sTUFBTSxHQUFHLElBQUksaUJBQVMsQ0FBQztRQUN6QixDQUFDO1FBQ0QsQ0FBQyxFQUFFLE1BQUEsS0FBSyxDQUFDLENBQUMsbUNBQUksSUFBSTtRQUNsQixDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDOUMsWUFBWSxFQUFFLElBQUk7S0FDckIsQ0FBQyxDQUFDO0lBQ0gsSUFBSSxDQUFDLGlCQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ2hDLE1BQU0sSUFBSSxLQUFLLENBQUMsMENBQTBDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ3RGO0lBQ0QsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQztBQWZELDRDQWVDO0FBRUQ7OztHQUdHO0FBQ0gsU0FBZ0IsZ0JBQWdCLENBQUMsQ0FBWTs7SUFDekMsTUFBTSxDQUFDLEdBQUcsTUFBQSxNQUFBLENBQUMsQ0FBQyxDQUFDLDBDQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLG1DQUFJLEVBQUUsQ0FBQztJQUMzQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUN2RCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2QsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7QUFDdkIsQ0FBQztBQUxELDRDQUtDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZHdhbHNoL2NvZGUtbG9jYWwvMHgtcmZxLWFwaS9zcmMvdXRpbHMvUHJvdG9VdGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCaWdOdW1iZXIgfSBmcm9tICdAMHgvdXRpbHMnO1xuaW1wb3J0IHsgQmlnTnVtYmVySnMgfSBmcm9tICcuLi9wcm90by10cy9iaWdfbnVtYmVyX2pzLnBiJztcblxuLyoqXG4gKiBDb252ZXJ0cyBhIEJpZ051bWJlckpzIHByb3RvIHRvIGFuIGluc3RhbmNlIG9mIGJpZ251bWJlci5qcyBgQmlnTnVtYmVyYC5cbiAqIFNlZTogaHR0cHM6Ly9taWtlbWNsLmdpdGh1Yi5pby9iaWdudW1iZXIuanMvI2luc3RhbmNlLXByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb3RvVG9CaWdOdW1iZXIocHJvdG86IEJpZ051bWJlckpzKTogQmlnTnVtYmVyIHtcbiAgICAvLyBQcm90byB1c2VzIGFuIGBpbnQ2NGAgd2hpY2ggaXMgZ2VuZXJhdGVkIHRvIGEgYGJpZ2ludGAsIGJ1dCBiaWdudW1iZXIuanMgdXNlc1xuICAgIC8vIGBudW1iZXJgLiBUaGlzIHByb2JhYmx5IG1hc2tzIHNvbWUgYmlnIHByb2JsZW1zIHdpdGggYmlnbnVtYmVyLmpzLCBidXQgd2UnbGxcbiAgICAvLyBsZXQgdGhhdCBzbGVlcGluZyBkb2cgbGllLlxuICAgIGNvbnN0IGMgPSBwcm90by5jLm1hcCgoeCkgPT4gTnVtYmVyKHgpKTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgQmlnTnVtYmVyKHtcbiAgICAgICAgYyxcbiAgICAgICAgZTogcHJvdG8uZSA/PyBudWxsLFxuICAgICAgICBzOiBwcm90by5zID8gMSA6IHByb3RvLnMgPT09IGZhbHNlID8gLTEgOiBudWxsLFxuICAgICAgICBfaXNCaWdOdW1iZXI6IHRydWUsXG4gICAgfSk7XG4gICAgaWYgKCFCaWdOdW1iZXIuaXNCaWdOdW1iZXIocmVzdWx0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBjcmVhdGUgQmlnTnVtYmVyIGZyb20gcHJvdG86ICR7SlNPTi5zdHJpbmdpZnkocHJvdG8pfWApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYmlnbnVtYmVyLmpzIHRvIGl0cyBwcm90byByZXByZXNlbnRhdGlvbi5cbiAqIFNlZTogaHR0cHM6Ly9taWtlbWNsLmdpdGh1Yi5pby9iaWdudW1iZXIuanMvI2luc3RhbmNlLXByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpZ051bWJlclRvUHJvdG8objogQmlnTnVtYmVyKTogQmlnTnVtYmVySnMge1xuICAgIGNvbnN0IGMgPSBuLmM/Lm1hcCgobikgPT4gQmlnSW50KG4pKSA/PyBbXTtcbiAgICBjb25zdCBzID0gbi5zID09PSAxID8gdHJ1ZSA6IG4ucyA9PT0gLTEgPyBmYWxzZSA6IG51bGw7XG4gICAgY29uc3QgZSA9IG4uZTtcbiAgICByZXR1cm4geyBjLCBlLCBzIH07XG59XG4iXSwidmVyc2lvbiI6M30=
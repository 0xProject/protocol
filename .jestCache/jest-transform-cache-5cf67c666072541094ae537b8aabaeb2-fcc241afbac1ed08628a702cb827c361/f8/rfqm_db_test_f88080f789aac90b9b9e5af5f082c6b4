e0ef0418af56ab0b228fc80c7cc6f1c1
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protocol_utils_1 = require("@0x/protocol-utils");
const utils_1 = require("@0x/utils");
const chai_1 = require("chai");
const uuid = require("uuid");
const constants_1 = require("../src/core/constants");
const fee_utils_1 = require("../src/core/fee_utils");
const types_1 = require("../src/entities/types");
const types_2 = require("../src/core/types");
const rfqm_db_utils_1 = require("../src/utils/rfqm_db_utils");
const constants_2 = require("./constants");
const deployment_1 = require("./test_utils/deployment");
const initDbDataSourceAsync_1 = require("./test_utils/initDbDataSourceAsync");
let dbUtils;
const createdAt = new Date();
// it's expired if it's over 9000
const expiry = new utils_1.BigNumber(9000);
const chainId = 1;
const makerUri = 'https://marketmaking.over9000.io';
const fee = {
    token: '0xatoken',
    amount: new utils_1.BigNumber(5),
    type: 'fixed',
};
const otcOrderNonce = new utils_1.BigNumber(1637085289);
const otcOrder = new protocol_utils_1.OtcOrder({
    txOrigin: '0x0000000000000000000000000000000000000000',
    taker: '0x1111111111111111111111111111111111111111',
    maker: '0x2222222222222222222222222222222222222222',
    makerToken: '0x3333333333333333333333333333333333333333',
    takerToken: '0x4444444444444444444444444444444444444444',
    expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, otcOrderNonce),
    chainId,
    verifyingContract: '0x0000000000000000000000000000000000000000',
});
const otcOrderHash = otcOrder.getHash();
const takerSignature = {
    v: 27,
    r: '0xd00d00',
    s: '0xcaca',
    signatureType: 1,
};
const approval = {
    kind: types_2.GaslessApprovalTypes.ExecuteMetaTransaction,
    eip712: {
        types: {
            EIP712Domain: [
                { name: 'name', type: 'string' },
                { name: 'version', type: 'string' },
                { name: 'verifyingContract', type: 'address' },
                { name: 'salt', type: 'bytes32' },
            ],
            ...constants_1.EXECUTE_META_TRANSACTION_EIP_712_TYPES,
        },
        primaryType: 'MetaTransaction',
        domain: {
            name: 'Balancer (PoS)',
            version: '1',
            verifyingContract: '0x9a71012b13ca4d3d0cdc72a177df3ef03b0e76a3',
            salt: '0x0000000000000000000000000000000000000000000000000000000000000089',
        },
        message: {
            nonce: 1,
            from: '0x1111111111111111111111111111111111111111',
            functionSignature: '0x095ea7b3000000000000000000000000def1c0ded9bec7f1a1670819833240f027b25effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff',
        },
    },
};
// tx properties
const transactionHash = '0x5678';
const from = '0xanRfqmWorker';
const to = '0xexchangeProxyAddress';
const gasPrice = new utils_1.BigNumber('100');
const gasUsed = null;
const blockMined = null;
const nonce = 0;
// meta-transaction
const inputToken = '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48';
const outputToken = '0xdAC17F958D2ee523a2206206994597C13D831ec7';
const inputTokenAmount = new utils_1.BigNumber(100);
const minOutputTokenAmount = new utils_1.BigNumber(99);
function creatMockMetaTransaction(opts = {}) {
    return new protocol_utils_1.MetaTransaction({
        ...constants_2.MOCK_META_TRANSACTION,
        ...opts,
    });
}
// tslint:disable-next-line: custom-no-magic-numbers
jest.setTimeout(constants_1.ONE_MINUTE_MS * 3);
let teardownDependencies;
let dataSource;
describe('RFQM Database', () => {
    beforeAll(async () => {
        teardownDependencies = await (0, deployment_1.setupDependenciesAsync)(['postgres']);
        dataSource = await (0, initDbDataSourceAsync_1.initDbDataSourceAsync)();
        dbUtils = new rfqm_db_utils_1.RfqmDbUtils(dataSource);
    });
    afterAll(async () => {
        if (!teardownDependencies()) {
            throw new Error('Failed to tear down dependencies');
        }
    });
    afterEach(async () => {
        await dataSource.query('TRUNCATE TABLE rfqm_quotes CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_jobs CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_transaction_submissions CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_v2_quotes CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_v2_jobs CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_v2_transaction_submissions CASCADE;');
        await dataSource.query('TRUNCATE TABLE meta_transaction_submissions CASCADE;');
        await dataSource.query('TRUNCATE TABLE meta_transaction_jobs CASCADE;');
    });
    describe('v2 tables', () => {
        it('should be able to write to and read from the rfqm_v2_quote table', async () => {
            await dbUtils.writeV2QuoteAsync({
                chainId,
                makerUri,
                isUnwrap: false,
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(otcOrder),
                orderHash: otcOrderHash,
                fee: (0, fee_utils_1.feeToStoredFee)(fee),
                takerSpecifiedSide: 'takerToken',
            });
            const storedQuote = await dbUtils.findV2QuoteByOrderHashAsync(otcOrderHash);
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-non-null-asserted-optional-chain
            (0, chai_1.expect)(otcOrder).to.deep.eq((0, rfqm_db_utils_1.storedOtcOrderToOtcOrder)(storedQuote === null || storedQuote === void 0 ? void 0 : storedQuote.order));
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-non-null-asserted-optional-chain
            (0, chai_1.expect)(fee).to.deep.eq((0, fee_utils_1.storedFeeToFee)(storedQuote === null || storedQuote === void 0 ? void 0 : storedQuote.fee));
            (0, chai_1.expect)(storedQuote === null || storedQuote === void 0 ? void 0 : storedQuote.takerSpecifiedSide).to.equal('takerToken');
        });
        it('should be able to write, update, and read the rfqm_v2_job table', async () => {
            // Write
            await dbUtils.writeV2JobAsync({
                approval,
                chainId,
                status: types_1.RfqmJobStatus.PendingProcessing,
                expiry: otcOrder.expiry,
                makerUri,
                isUnwrap: false,
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(otcOrder),
                takerSignature,
                orderHash: otcOrderHash,
                fee: (0, fee_utils_1.feeToStoredFee)(fee),
                takerSpecifiedSide: 'makerToken',
            });
            // First Read
            const storedJob = await dbUtils.findV2JobByOrderHashAsync(otcOrderHash);
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-non-null-asserted-optional-chain
            (0, chai_1.expect)((0, rfqm_db_utils_1.storedOtcOrderToOtcOrder)(storedJob === null || storedJob === void 0 ? void 0 : storedJob.order)).to.deep.eq(otcOrder);
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-non-null-asserted-optional-chain
            (0, chai_1.expect)((0, fee_utils_1.storedFeeToFee)(storedJob === null || storedJob === void 0 ? void 0 : storedJob.fee)).to.deep.eq(fee);
            (0, chai_1.expect)(storedJob === null || storedJob === void 0 ? void 0 : storedJob.status).to.equal(types_1.RfqmJobStatus.PendingProcessing);
            (0, chai_1.expect)(storedJob === null || storedJob === void 0 ? void 0 : storedJob.takerSignature).to.deep.eq(takerSignature);
            (0, chai_1.expect)(storedJob === null || storedJob === void 0 ? void 0 : storedJob.approval).to.deep.eq(approval);
            // Update
            await dbUtils.updateV2JobAsync(otcOrderHash, true, { status: types_1.RfqmJobStatus.SucceededConfirmed });
            // Second Read
            const updatedJob = await dbUtils.findV2JobByOrderHashAsync(otcOrderHash);
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-non-null-asserted-optional-chain
            (0, chai_1.expect)((0, rfqm_db_utils_1.storedOtcOrderToOtcOrder)(updatedJob === null || updatedJob === void 0 ? void 0 : updatedJob.order)).to.deep.eq(otcOrder);
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-non-null-asserted-optional-chain
            (0, chai_1.expect)((0, fee_utils_1.storedFeeToFee)(updatedJob === null || updatedJob === void 0 ? void 0 : updatedJob.fee)).to.deep.eq(fee);
            (0, chai_1.expect)(updatedJob === null || updatedJob === void 0 ? void 0 : updatedJob.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
            (0, chai_1.expect)(updatedJob === null || updatedJob === void 0 ? void 0 : updatedJob.takerSpecifiedSide).to.equal('makerToken');
        });
        it('should be able to find by status across the rfqm_v2_job table', async () => {
            // Write job with failed status
            await dbUtils.writeV2JobAsync({
                chainId,
                status: types_1.RfqmJobStatus.FailedEthCallFailed,
                expiry: otcOrder.expiry,
                makerUri,
                isUnwrap: false,
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(otcOrder),
                orderHash: otcOrderHash,
                fee: (0, fee_utils_1.feeToStoredFee)(fee),
                takerSpecifiedSide: 'makerToken',
            });
            // Get jobs with that status
            const storedJobs = await dbUtils.findV2JobsWithStatusesAsync([types_1.RfqmJobStatus.FailedEthCallFailed]);
            (0, chai_1.expect)(storedJobs.length).to.equal(1);
            // Confirm correctness
            const storedJob = storedJobs[0];
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-non-null-asserted-optional-chain
            (0, chai_1.expect)((0, rfqm_db_utils_1.storedOtcOrderToOtcOrder)(storedJob === null || storedJob === void 0 ? void 0 : storedJob.order)).to.deep.eq(otcOrder);
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-non-null-asserted-optional-chain
            (0, chai_1.expect)((0, fee_utils_1.storedFeeToFee)(storedJob === null || storedJob === void 0 ? void 0 : storedJob.fee)).to.deep.eq(fee);
            (0, chai_1.expect)(storedJob === null || storedJob === void 0 ? void 0 : storedJob.status).to.equal(types_1.RfqmJobStatus.FailedEthCallFailed);
        });
        it('should be able to write to and read from the last_look_rejection_cooldowns table', async () => {
            const makerId = 'makerId1';
            const nowMs = Date.now();
            const startTime = new Date(nowMs);
            const endTime = new Date(nowMs + constants_1.ONE_MINUTE_MS);
            await dbUtils.writeV2LastLookRejectionCooldownAsync(makerId, chainId, otcOrder.makerToken, otcOrder.takerToken, startTime, endTime, otcOrderHash);
            const storedCooldown = await dbUtils.findV2LastLookRejectionCooldownAsync(makerId, chainId, otcOrder.makerToken, otcOrder.takerToken, startTime);
            (0, chai_1.expect)(storedCooldown === null || storedCooldown === void 0 ? void 0 : storedCooldown.endTime).to.deep.eq(endTime);
            (0, chai_1.expect)(storedCooldown === null || storedCooldown === void 0 ? void 0 : storedCooldown.orderHash).to.deep.eq(otcOrderHash);
        });
        it('should be able to write, update, and read the rfqm_v2_transaction_submission table', async () => {
            // Write
            const rfqmTransactionSubmissionEntityOpts = {
                transactionHash,
                orderHash: otcOrderHash,
                createdAt,
                from,
                to,
                gasPrice,
                gasUsed,
                blockMined,
                nonce,
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
                type: types_1.RfqmTransactionSubmissionType.Trade,
            };
            await dbUtils.writeV2TransactionSubmissionAsync(rfqmTransactionSubmissionEntityOpts);
            // First Read
            const transactionSubmissions = await dbUtils.findV2TransactionSubmissionsByOrderHashAsync(otcOrderHash);
            (0, chai_1.expect)(transactionSubmissions.length).to.equal(1);
            const transactionSubmission = transactionSubmissions[0];
            (0, chai_1.expect)(transactionSubmission.transactionHash).to.equal(transactionHash);
            (0, chai_1.expect)(transactionSubmission.status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
            // Update
            await dbUtils.updateV2TransactionSubmissionsAsync([
                {
                    ...transactionSubmission,
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed,
                },
            ]);
            // Second Read
            const updatedTransactionSubmissions = await dbUtils.findV2TransactionSubmissionsByOrderHashAsync(otcOrderHash);
            (0, chai_1.expect)(updatedTransactionSubmissions.length).to.equal(1);
            const updatedTransactionSubmission = updatedTransactionSubmissions[0];
            (0, chai_1.expect)(updatedTransactionSubmission.transactionHash).to.equal(transactionHash);
            (0, chai_1.expect)(updatedTransactionSubmission.status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
        });
        it('should not run into duplicate key issues if attempting to write to the same hash', async () => {
            // Write
            const rfqmTransactionSubmissionEntityOpts = {
                transactionHash,
                orderHash: otcOrderHash,
                createdAt,
                from,
                to,
                gasPrice,
                gasUsed,
                blockMined,
                nonce,
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
                type: types_1.RfqmTransactionSubmissionType.Trade,
            };
            await dbUtils.writeV2TransactionSubmissionAsync(rfqmTransactionSubmissionEntityOpts);
            // Write again - should not error
            await dbUtils.writeV2TransactionSubmissionAsync(rfqmTransactionSubmissionEntityOpts);
            // Read
            const transactionSubmissions = await dbUtils.findV2TransactionSubmissionsByOrderHashAsync(otcOrderHash);
            (0, chai_1.expect)(transactionSubmissions.length).to.equal(1);
            const transactionSubmission = transactionSubmissions[0];
            (0, chai_1.expect)(transactionSubmission.transactionHash).to.equal(transactionHash);
            (0, chai_1.expect)(transactionSubmission.status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
        });
    });
    describe('meta transaction tables', () => {
        it('should be able to write to, update, and read from the `meta_transaction_jobs` table', async () => {
            const metaTransaction = creatMockMetaTransaction();
            const metaTransactionHash = metaTransaction.getHash();
            // Write
            const savedJob = await dbUtils.writeMetaTransactionJobAsync({
                approval,
                chainId: 1,
                expiry: new utils_1.BigNumber(2),
                fee: constants_2.MOCK_FEE,
                inputToken,
                inputTokenAmount,
                integratorId: 'integrator',
                metaTransaction,
                metaTransactionHash,
                minOutputTokenAmount,
                outputToken,
                takerAddress: '0xaddress',
                takerSignature,
            });
            (0, chai_1.expect)(savedJob.id).to.not.equal(null);
            // Read
            const job = await dbUtils.findMetaTransactionJobByMetaTransactionHashAsync(metaTransactionHash);
            if (!job) {
                throw new Error('job should exist');
            }
            (0, chai_1.expect)(job.metaTransaction).to.eql(metaTransaction);
            (0, chai_1.expect)(job.fee).to.eql(constants_2.MOCK_FEE);
            (0, chai_1.expect)(job.status).to.eql(types_1.RfqmJobStatus.PendingEnqueued);
            (0, chai_1.expect)(job.approval).to.eql(approval);
            (0, chai_1.expect)(job.workerAddress).to.eql(null);
            // Update
            job.chainId = 1;
            await dbUtils.updateRfqmJobAsync(job);
            // Read
            const updatedJob = await dbUtils.findMetaTransactionJobByIdAsync(job.id);
            if (!updatedJob) {
                throw new Error('job should exist');
            }
            (0, chai_1.expect)(updatedJob.metaTransaction).to.eql(metaTransaction);
            (0, chai_1.expect)(updatedJob.fee).to.eql(constants_2.MOCK_FEE);
            (0, chai_1.expect)(updatedJob.status).to.eql(types_1.RfqmJobStatus.PendingEnqueued);
            (0, chai_1.expect)(updatedJob.approval).to.eql(approval);
            (0, chai_1.expect)(updatedJob.workerAddress).to.eql(null);
            (0, chai_1.expect)(updatedJob.chainId).to.eql(1);
        });
        it('should be able to find by status across the `meta_transaction_jobs` table', async () => {
            const metaTransaction = creatMockMetaTransaction();
            const metaTransactionHash = metaTransaction.getHash();
            // Write
            const savedJob = await dbUtils.writeMetaTransactionJobAsync({
                approval,
                chainId: 1,
                expiry: new utils_1.BigNumber(2),
                fee: constants_2.MOCK_FEE,
                inputToken,
                inputTokenAmount,
                integratorId: 'integrator',
                metaTransaction,
                metaTransactionHash,
                minOutputTokenAmount,
                outputToken,
                takerAddress: '0xaddress',
                takerSignature,
                status: types_1.RfqmJobStatus.FailedExpired,
            });
            (0, chai_1.expect)(savedJob.id).to.not.equal(null);
            // Read
            const jobs = await dbUtils.findMetaTransactionJobsWithStatusesAsync([types_1.RfqmJobStatus.FailedExpired]);
            (0, chai_1.expect)(jobs.length).to.equal(1);
            (0, chai_1.expect)(jobs[0].metaTransaction).to.eql(metaTransaction);
            (0, chai_1.expect)(jobs[0].fee).to.eql(constants_2.MOCK_FEE);
            (0, chai_1.expect)(jobs[0].status).to.eql(types_1.RfqmJobStatus.FailedExpired);
            (0, chai_1.expect)(jobs[0].approval).to.eql(approval);
            (0, chai_1.expect)(jobs[0].workerAddress).to.eql(null);
        });
        it('should be able to find unsolved meta transaction jobs in the `meta_transaction_jobs` table', async () => {
            const mockMetaTransaction1 = creatMockMetaTransaction();
            const savedJob = await dbUtils.writeMetaTransactionJobAsync({
                approval,
                chainId: 1,
                expiry: new utils_1.BigNumber(2),
                fee: constants_2.MOCK_FEE,
                id: '1',
                integratorId: 'integrator',
                inputToken,
                inputTokenAmount,
                metaTransaction: mockMetaTransaction1,
                metaTransactionHash: mockMetaTransaction1.getHash(),
                minOutputTokenAmount,
                outputToken,
                takerAddress: '0xaddress',
                takerSignature,
                status: types_1.RfqmJobStatus.PendingEnqueued,
            });
            (0, chai_1.expect)(savedJob.id).to.not.equal(null);
            const mockMetaTransaction2 = creatMockMetaTransaction({ signer: '0xabcdef2' });
            await dbUtils.writeMetaTransactionJobAsync({
                approval,
                chainId: 2,
                expiry: new utils_1.BigNumber(2),
                fee: constants_2.MOCK_FEE,
                inputToken,
                inputTokenAmount,
                integratorId: 'integrator',
                metaTransaction: mockMetaTransaction2,
                metaTransactionHash: mockMetaTransaction2.getHash(),
                minOutputTokenAmount,
                outputToken,
                takerAddress: '0xaddress',
                takerSignature,
                status: types_1.RfqmJobStatus.PendingProcessing,
                workerAddress: '0xworkerAddress',
            });
            const mockMetaTransaction3 = creatMockMetaTransaction({ signer: '0xabcdef3' });
            await dbUtils.writeMetaTransactionJobAsync({
                approval,
                chainId: 3,
                expiry: new utils_1.BigNumber(2),
                fee: constants_2.MOCK_FEE,
                inputToken,
                inputTokenAmount,
                integratorId: 'integrator',
                metaTransaction: mockMetaTransaction3,
                metaTransactionHash: mockMetaTransaction3.getHash(),
                minOutputTokenAmount,
                outputToken,
                takerAddress: '0xaddress',
                takerSignature,
                status: types_1.RfqmJobStatus.FailedExpired,
            });
            const jobs = await dbUtils.findUnresolvedMetaTransactionJobsAsync('0xworkerAddress', 2);
            (0, chai_1.expect)(jobs.length).to.equal(1);
            (0, chai_1.expect)(jobs[0].status).to.eql(types_1.RfqmJobStatus.PendingProcessing);
        });
        it('should be able to write, update, and read the `meta_transaction_submissions` table', async () => {
            const metaTransactionJobId = uuid.v4();
            // Write
            const metaTransactionSubmissionEntityOpts = {
                from,
                metaTransactionJobId,
                nonce,
                to,
                transactionHash,
                type: types_1.RfqmTransactionSubmissionType.Trade,
                status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
            };
            const savedSubmission = await dbUtils.writeMetaTransactionSubmissionAsync(metaTransactionSubmissionEntityOpts);
            (0, chai_1.expect)(savedSubmission.id).not.equal(null);
            // First Read
            let transactionSubmissions = await dbUtils.findMetaTransactionSubmissionsByTransactionHashAsync(transactionHash, types_1.RfqmTransactionSubmissionType.Trade);
            (0, chai_1.expect)(transactionSubmissions.length).to.equal(1);
            let transactionSubmission = transactionSubmissions[0];
            (0, chai_1.expect)(transactionSubmission.transactionHash).to.equal(transactionHash);
            (0, chai_1.expect)(transactionSubmission.status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed);
            // Update
            await dbUtils.updateRfqmTransactionSubmissionsAsync([
                {
                    ...transactionSubmission,
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed,
                },
            ]);
            // Second Read
            const updatedTransactionSubmissionOrNull = await dbUtils.findMetaTransactionSubmissionByIdAsync(transactionSubmission.id);
            if (!updatedTransactionSubmissionOrNull) {
                chai_1.expect.fail('result should not be null');
            }
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            (0, chai_1.expect)(updatedTransactionSubmissionOrNull.transactionHash).to.equal(transactionHash);
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            (0, chai_1.expect)(updatedTransactionSubmissionOrNull.status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
            // Third read
            transactionSubmissions = await dbUtils.findMetaTransactionSubmissionsByJobIdAsync(metaTransactionJobId);
            (0, chai_1.expect)(transactionSubmissions.length).to.equal(1);
            transactionSubmission = transactionSubmissions[0];
            (0, chai_1.expect)(transactionSubmission.transactionHash).to.equal(transactionHash);
            (0, chai_1.expect)(transactionSubmission.status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3QvcmZxbV9kYl90ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsdURBQWlHO0FBQ2pHLHFDQUFzQztBQUN0QywrQkFBOEI7QUFFOUIsNkJBQTZCO0FBRTdCLHFEQUFvRztBQUNwRyxxREFBdUU7QUFHdkUsaURBQXNIO0FBQ3RILDZDQUE4RjtBQUM5Riw4REFBNkc7QUFFN0csMkNBQThEO0FBQzlELHdEQUFxRztBQUNyRyw4RUFBMkU7QUFFM0UsSUFBSSxPQUFvQixDQUFDO0FBRXpCLE1BQU0sU0FBUyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7QUFDN0IsaUNBQWlDO0FBQ2pDLE1BQU0sTUFBTSxHQUFHLElBQUksaUJBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNuQyxNQUFNLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFDbEIsTUFBTSxRQUFRLEdBQUcsa0NBQWtDLENBQUM7QUFDcEQsTUFBTSxHQUFHLEdBQVE7SUFDYixLQUFLLEVBQUUsVUFBVTtJQUNqQixNQUFNLEVBQUUsSUFBSSxpQkFBUyxDQUFDLENBQUMsQ0FBQztJQUN4QixJQUFJLEVBQUUsT0FBTztDQUNoQixDQUFDO0FBRUYsTUFBTSxhQUFhLEdBQUcsSUFBSSxpQkFBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2hELE1BQU0sUUFBUSxHQUFHLElBQUkseUJBQVEsQ0FBQztJQUMxQixRQUFRLEVBQUUsNENBQTRDO0lBQ3RELEtBQUssRUFBRSw0Q0FBNEM7SUFDbkQsS0FBSyxFQUFFLDRDQUE0QztJQUNuRCxVQUFVLEVBQUUsNENBQTRDO0lBQ3hELFVBQVUsRUFBRSw0Q0FBNEM7SUFDeEQsY0FBYyxFQUFFLHlCQUFRLENBQUMsb0JBQW9CLENBQUMsTUFBTSxFQUFFLGdCQUFJLEVBQUUsYUFBYSxDQUFDO0lBQzFFLE9BQU87SUFDUCxpQkFBaUIsRUFBRSw0Q0FBNEM7Q0FDbEUsQ0FBQyxDQUFDO0FBRUgsTUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFD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YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvdGVzdC9yZnFtX2RiX3Rlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWV0YVRyYW5zYWN0aW9uLCBNZXRhVHJhbnNhY3Rpb25GaWVsZHMsIE90Y09yZGVyLCBTaWduYXR1cmUgfSBmcm9tICdAMHgvcHJvdG9jb2wtdXRpbHMnO1xyXG5pbXBvcnQgeyBCaWdOdW1iZXIgfSBmcm9tICdAMHgvdXRpbHMnO1xyXG5pbXBvcnQgeyBleHBlY3QgfSBmcm9tICdjaGFpJztcclxuaW1wb3J0IHsgRGF0YVNvdXJjZSB9IGZyb20gJ3R5cGVvcm0nO1xyXG5pbXBvcnQgKiBhcyB1dWlkIGZyb20gJ3V1aWQnO1xyXG5cclxuaW1wb3J0IHsgRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0VJUF83MTJfVFlQRVMsIE9ORV9NSU5VVEVfTVMsIFpFUk8gfSBmcm9tICcuLi9zcmMvY29yZS9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBmZWVUb1N0b3JlZEZlZSwgc3RvcmVkRmVlVG9GZWUgfSBmcm9tICcuLi9zcmMvY29yZS9mZWVfdXRpbHMnO1xyXG5pbXBvcnQgeyBNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5Q29uc3RydWN0b3JPcHRzIH0gZnJvbSAnLi4vc3JjL2VudGl0aWVzL01ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHknO1xyXG5pbXBvcnQgeyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlDb25zdHJ1Y3Rvck9wdHMgfSBmcm9tICcuLi9zcmMvZW50aXRpZXMvUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5JztcclxuaW1wb3J0IHsgUmZxbUpvYlN0YXR1cywgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cywgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUgfSBmcm9tICcuLi9zcmMvZW50aXRpZXMvdHlwZXMnO1xyXG5pbXBvcnQgeyBFeGVjdXRlTWV0YVRyYW5zYWN0aW9uQXBwcm92YWwsIEZlZSwgR2FzbGVzc0FwcHJvdmFsVHlwZXMgfSBmcm9tICcuLi9zcmMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IG90Y09yZGVyVG9TdG9yZWRPdGNPcmRlciwgUmZxbURiVXRpbHMsIHN0b3JlZE90Y09yZGVyVG9PdGNPcmRlciB9IGZyb20gJy4uL3NyYy91dGlscy9yZnFtX2RiX3V0aWxzJztcclxuXHJcbmltcG9ydCB7IE1PQ0tfRkVFLCBNT0NLX01FVEFfVFJBTlNBQ1RJT04gfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IHNldHVwRGVwZW5kZW5jaWVzQXN5bmMsIFRlYXJkb3duRGVwZW5kZW5jaWVzRnVuY3Rpb25IYW5kbGUgfSBmcm9tICcuL3Rlc3RfdXRpbHMvZGVwbG95bWVudCc7XHJcbmltcG9ydCB7IGluaXREYkRhdGFTb3VyY2VBc3luYyB9IGZyb20gJy4vdGVzdF91dGlscy9pbml0RGJEYXRhU291cmNlQXN5bmMnO1xyXG5cclxubGV0IGRiVXRpbHM6IFJmcW1EYlV0aWxzO1xyXG5cclxuY29uc3QgY3JlYXRlZEF0ID0gbmV3IERhdGUoKTtcclxuLy8gaXQncyBleHBpcmVkIGlmIGl0J3Mgb3ZlciA5MDAwXHJcbmNvbnN0IGV4cGlyeSA9IG5ldyBCaWdOdW1iZXIoOTAwMCk7XHJcbmNvbnN0IGNoYWluSWQgPSAxO1xyXG5jb25zdCBtYWtlclVyaSA9ICdodHRwczovL21hcmtldG1ha2luZy5vdmVyOTAwMC5pbyc7XHJcbmNvbnN0IGZlZTogRmVlID0ge1xyXG4gICAgdG9rZW46ICcweGF0b2tlbicsXHJcbiAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICB0eXBlOiAnZml4ZWQnLFxyXG59O1xyXG5cclxuY29uc3Qgb3RjT3JkZXJOb25jZSA9IG5ldyBCaWdOdW1iZXIoMTYzNzA4NTI4OSk7XHJcbmNvbnN0IG90Y09yZGVyID0gbmV3IE90Y09yZGVyKHtcclxuICAgIHR4T3JpZ2luOiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgIHRha2VyOiAnMHgxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExJyxcclxuICAgIG1ha2VyOiAnMHgyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyJyxcclxuICAgIG1ha2VyVG9rZW46ICcweDMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMnLFxyXG4gICAgdGFrZXJUb2tlbjogJzB4NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NCcsXHJcbiAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoZXhwaXJ5LCBaRVJPLCBvdGNPcmRlck5vbmNlKSxcclxuICAgIGNoYWluSWQsXHJcbiAgICB2ZXJpZnlpbmdDb250cmFjdDogJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXHJcbn0pO1xyXG5cclxuY29uc3Qgb3RjT3JkZXJIYXNoID0gb3RjT3JkZXIuZ2V0SGFzaCgpO1xyXG5cclxuY29uc3QgdGFrZXJTaWduYXR1cmU6IFNpZ25hdHVyZSA9IHtcclxuICAgIHY6IDI3LFxyXG4gICAgcjogJzB4ZDAwZDAwJyxcclxuICAgIHM6ICcweGNhY2EnLFxyXG4gICAgc2lnbmF0dXJlVHlwZTogMSxcclxufTtcclxuXHJcbmNvbnN0IGFwcHJvdmFsOiBFeGVjdXRlTWV0YVRyYW5zYWN0aW9uQXBwcm92YWwgPSB7XHJcbiAgICBraW5kOiBHYXNsZXNzQXBwcm92YWxUeXBlcy5FeGVjdXRlTWV0YVRyYW5zYWN0aW9uLFxyXG4gICAgZWlwNzEyOiB7XHJcbiAgICAgICAgdHlwZXM6IHtcclxuICAgICAgICAgICAgRUlQNzEyRG9tYWluOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICduYW1lJywgdHlwZTogJ3N0cmluZycgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ3ZlcnNpb24nLCB0eXBlOiAnc3RyaW5nJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAndmVyaWZ5aW5nQ29udHJhY3QnLCB0eXBlOiAnYWRkcmVzcycgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ3NhbHQnLCB0eXBlOiAnYnl0ZXMzMicgfSxcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgLi4uRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0VJUF83MTJfVFlQRVMsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmltYXJ5VHlwZTogJ01ldGFUcmFuc2FjdGlvbicsXHJcbiAgICAgICAgZG9tYWluOiB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdCYWxhbmNlciAoUG9TKScsXHJcbiAgICAgICAgICAgIHZlcnNpb246ICcxJyxcclxuICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcweDlhNzEwMTJiMTNjYTRkM2QwY2RjNzJhMTc3ZGYzZWYwM2IwZTc2YTMnLFxyXG4gICAgICAgICAgICBzYWx0OiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDg5JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1lc3NhZ2U6IHtcclxuICAgICAgICAgICAgbm9uY2U6IDEsXHJcbiAgICAgICAgICAgIGZyb206ICcweDExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEnLFxyXG4gICAgICAgICAgICBmdW5jdGlvblNpZ25hdHVyZTpcclxuICAgICAgICAgICAgICAgICcweDA5NWVhN2IzMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwZGVmMWMwZGVkOWJlYzdmMWExNjcwODE5ODMzMjQwZjAyN2IyNWVmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYnLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG59O1xyXG5cclxuLy8gdHggcHJvcGVydGllc1xyXG5jb25zdCB0cmFuc2FjdGlvbkhhc2ggPSAnMHg1Njc4JztcclxuY29uc3QgZnJvbSA9ICcweGFuUmZxbVdvcmtlcic7XHJcbmNvbnN0IHRvID0gJzB4ZXhjaGFuZ2VQcm94eUFkZHJlc3MnO1xyXG5jb25zdCBnYXNQcmljZSA9IG5ldyBCaWdOdW1iZXIoJzEwMCcpO1xyXG5jb25zdCBnYXNVc2VkID0gbnVsbDtcclxuY29uc3QgYmxvY2tNaW5lZCA9IG51bGw7XHJcbmNvbnN0IG5vbmNlID0gMDtcclxuXHJcbi8vIG1ldGEtdHJhbnNhY3Rpb25cclxuY29uc3QgaW5wdXRUb2tlbiA9ICcweGEwYjg2OTkxYzYyMThiMzZjMWQxOWQ0YTJlOWViMGNlMzYwNmViNDgnO1xyXG5jb25zdCBvdXRwdXRUb2tlbiA9ICcweGRBQzE3Rjk1OEQyZWU1MjNhMjIwNjIwNjk5NDU5N0MxM0Q4MzFlYzcnO1xyXG5jb25zdCBpbnB1dFRva2VuQW1vdW50ID0gbmV3IEJpZ051bWJlcigxMDApO1xyXG5jb25zdCBtaW5PdXRwdXRUb2tlbkFtb3VudCA9IG5ldyBCaWdOdW1iZXIoOTkpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRNb2NrTWV0YVRyYW5zYWN0aW9uKG9wdHM6IFBhcnRpYWw8TWV0YVRyYW5zYWN0aW9uRmllbGRzPiA9IHt9KTogTWV0YVRyYW5zYWN0aW9uIHtcclxuICAgIHJldHVybiBuZXcgTWV0YVRyYW5zYWN0aW9uKHtcclxuICAgICAgICAuLi5NT0NLX01FVEFfVFJBTlNBQ1RJT04sXHJcbiAgICAgICAgLi4ub3B0cyxcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbmplc3Quc2V0VGltZW91dChPTkVfTUlOVVRFX01TICogMyk7XHJcbmxldCB0ZWFyZG93bkRlcGVuZGVuY2llczogVGVhcmRvd25EZXBlbmRlbmNpZXNGdW5jdGlvbkhhbmRsZTtcclxubGV0IGRhdGFTb3VyY2U6IERhdGFTb3VyY2U7XHJcblxyXG5kZXNjcmliZSgnUkZRTSBEYXRhYmFzZScsICgpID0+IHtcclxuICAgIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdGVhcmRvd25EZXBlbmRlbmNpZXMgPSBhd2FpdCBzZXR1cERlcGVuZGVuY2llc0FzeW5jKFsncG9zdGdyZXMnXSk7XHJcbiAgICAgICAgZGF0YVNvdXJjZSA9IGF3YWl0IGluaXREYkRhdGFTb3VyY2VBc3luYygpO1xyXG4gICAgICAgIGRiVXRpbHMgPSBuZXcgUmZxbURiVXRpbHMoZGF0YVNvdXJjZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhZnRlckFsbChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0ZWFyZG93bkRlcGVuZGVuY2llcygpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHRlYXIgZG93biBkZXBlbmRlbmNpZXMnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IGRhdGFTb3VyY2UucXVlcnkoJ1RSVU5DQVRFIFRBQkxFIHJmcW1fcXVvdGVzIENBU0NBREU7Jyk7XHJcbiAgICAgICAgYXdhaXQgZGF0YVNvdXJjZS5xdWVyeSgnVFJVTkNBVEUgVEFCTEUgcmZxbV9qb2JzIENBU0NBREU7Jyk7XHJcbiAgICAgICAgYXdhaXQgZGF0YVNvdXJjZS5xdWVyeSgnVFJVTkNBVEUgVEFCTEUgcmZxbV90cmFuc2FjdGlvbl9zdWJtaXNzaW9ucyBDQVNDQURFOycpO1xyXG4gICAgICAgIGF3YWl0IGRhdGFTb3VyY2UucXVlcnkoJ1RSVU5DQVRFIFRBQkxFIHJmcW1fdjJfcXVvdGVzIENBU0NBREU7Jyk7XHJcbiAgICAgICAgYXdhaXQgZGF0YVNvdXJjZS5xdWVyeSgnVFJVTkNBVEUgVEFCTEUgcmZxbV92Ml9qb2JzIENBU0NBREU7Jyk7XHJcbiAgICAgICAgYXdhaXQgZGF0YVNvdXJjZS5xdWVyeSgnVFJVTkNBVEUgVEFCTEUgcmZxbV92Ml90cmFuc2FjdGlvbl9zdWJtaXNzaW9ucyBDQVNDQURFOycpO1xyXG4gICAgICAgIGF3YWl0IGRhdGFTb3VyY2UucXVlcnkoJ1RSVU5DQVRFIFRBQkxFIG1ldGFfdHJhbnNhY3Rpb25fc3VibWlzc2lvbnMgQ0FTQ0FERTsnKTtcclxuICAgICAgICBhd2FpdCBkYXRhU291cmNlLnF1ZXJ5KCdUUlVOQ0FURSBUQUJMRSBtZXRhX3RyYW5zYWN0aW9uX2pvYnMgQ0FTQ0FERTsnKTtcclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoJ3YyIHRhYmxlcycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gd3JpdGUgdG8gYW5kIHJlYWQgZnJvbSB0aGUgcmZxbV92Ml9xdW90ZSB0YWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgZGJVdGlscy53cml0ZVYyUXVvdGVBc3luYyh7XHJcbiAgICAgICAgICAgICAgICBjaGFpbklkLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmksXHJcbiAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjogb3RjT3JkZXJUb1N0b3JlZE90Y09yZGVyKG90Y09yZGVyKSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogb3RjT3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgZmVlOiBmZWVUb1N0b3JlZEZlZShmZWUpLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTcGVjaWZpZWRTaWRlOiAndGFrZXJUb2tlbicsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkUXVvdGUgPSBhd2FpdCBkYlV0aWxzLmZpbmRWMlF1b3RlQnlPcmRlckhhc2hBc3luYyhvdGNPcmRlckhhc2gpO1xyXG4gICAgICAgICAgICAvLyAkZXNsaW50LWZpeC1tZSBodHRwczovL2dpdGh1Yi5jb20vcmhpbm9kYXZpZC9lc2xpbnQtZml4LW1lXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uLEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRlZC1vcHRpb25hbC1jaGFpblxyXG4gICAgICAgICAgICBleHBlY3Qob3RjT3JkZXIpLnRvLmRlZXAuZXEoc3RvcmVkT3RjT3JkZXJUb090Y09yZGVyKHN0b3JlZFF1b3RlPy5vcmRlciEpKTtcclxuICAgICAgICAgICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbixAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0ZWQtb3B0aW9uYWwtY2hhaW5cclxuICAgICAgICAgICAgZXhwZWN0KGZlZSkudG8uZGVlcC5lcShzdG9yZWRGZWVUb0ZlZShzdG9yZWRRdW90ZT8uZmVlISkpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZFF1b3RlPy50YWtlclNwZWNpZmllZFNpZGUpLnRvLmVxdWFsKCd0YWtlclRva2VuJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgYWJsZSB0byB3cml0ZSwgdXBkYXRlLCBhbmQgcmVhZCB0aGUgcmZxbV92Ml9qb2IgdGFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdyaXRlXHJcbiAgICAgICAgICAgIGF3YWl0IGRiVXRpbHMud3JpdGVWMkpvYkFzeW5jKHtcclxuICAgICAgICAgICAgICAgIGFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogb3RjT3JkZXIuZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmksXHJcbiAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjogb3RjT3JkZXJUb1N0b3JlZE90Y09yZGVyKG90Y09yZGVyKSxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBvdGNPcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICBmZWU6IGZlZVRvU3RvcmVkRmVlKGZlZSksXHJcbiAgICAgICAgICAgICAgICB0YWtlclNwZWNpZmllZFNpZGU6ICdtYWtlclRva2VuJyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBGaXJzdCBSZWFkXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEpvYiA9IGF3YWl0IGRiVXRpbHMuZmluZFYySm9iQnlPcmRlckhhc2hBc3luYyhvdGNPcmRlckhhc2gpO1xyXG4gICAgICAgICAgICAvLyAkZXNsaW50LWZpeC1tZSBodHRwczovL2dpdGh1Yi5jb20vcmhpbm9kYXZpZC9lc2xpbnQtZml4LW1lXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uLEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRlZC1vcHRpb25hbC1jaGFpblxyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkT3RjT3JkZXJUb090Y09yZGVyKHN0b3JlZEpvYj8ub3JkZXIhKSkudG8uZGVlcC5lcShvdGNPcmRlcik7XHJcbiAgICAgICAgICAgIC8vICRlc2xpbnQtZml4LW1lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaGlub2RhdmlkL2VzbGludC1maXgtbWVcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24sQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGVkLW9wdGlvbmFsLWNoYWluXHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWVUb0ZlZShzdG9yZWRKb2I/LmZlZSEpKS50by5kZWVwLmVxKGZlZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRKb2I/LnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRKb2I/LnRha2VyU2lnbmF0dXJlKS50by5kZWVwLmVxKHRha2VyU2lnbmF0dXJlKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEpvYj8uYXBwcm92YWwpLnRvLmRlZXAuZXEoYXBwcm92YWwpO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlXHJcbiAgICAgICAgICAgIGF3YWl0IGRiVXRpbHMudXBkYXRlVjJKb2JBc3luYyhvdGNPcmRlckhhc2gsIHRydWUsIHsgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlY29uZCBSZWFkXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRKb2IgPSBhd2FpdCBkYlV0aWxzLmZpbmRWMkpvYkJ5T3JkZXJIYXNoQXN5bmMob3RjT3JkZXJIYXNoKTtcclxuICAgICAgICAgICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbixAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0ZWQtb3B0aW9uYWwtY2hhaW5cclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZE90Y09yZGVyVG9PdGNPcmRlcih1cGRhdGVkSm9iPy5vcmRlciEpKS50by5kZWVwLmVxKG90Y09yZGVyKTtcclxuICAgICAgICAgICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbixAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0ZWQtb3B0aW9uYWwtY2hhaW5cclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZVRvRmVlKHVwZGF0ZWRKb2I/LmZlZSEpKS50by5kZWVwLmVxKGZlZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVkSm9iPy5zdGF0dXMpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZWRKb2I/LnRha2VyU3BlY2lmaWVkU2lkZSkudG8uZXF1YWwoJ21ha2VyVG9rZW4nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGZpbmQgYnkgc3RhdHVzIGFjcm9zcyB0aGUgcmZxbV92Ml9qb2IgdGFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdyaXRlIGpvYiB3aXRoIGZhaWxlZCBzdGF0dXNcclxuICAgICAgICAgICAgYXdhaXQgZGJVdGlscy53cml0ZVYySm9iQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgY2hhaW5JZCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRFdGhDYWxsRmFpbGVkLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBvdGNPcmRlci5leHBpcnksXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaSxcclxuICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiBvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXIob3RjT3JkZXIpLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBvdGNPcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICBmZWU6IGZlZVRvU3RvcmVkRmVlKGZlZSksXHJcbiAgICAgICAgICAgICAgICB0YWtlclNwZWNpZmllZFNpZGU6ICdtYWtlclRva2VuJyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgam9icyB3aXRoIHRoYXQgc3RhdHVzXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEpvYnMgPSBhd2FpdCBkYlV0aWxzLmZpbmRWMkpvYnNXaXRoU3RhdHVzZXNBc3luYyhbUmZxbUpvYlN0YXR1cy5GYWlsZWRFdGhDYWxsRmFpbGVkXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRKb2JzLmxlbmd0aCkudG8uZXF1YWwoMSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDb25maXJtIGNvcnJlY3RuZXNzXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEpvYiA9IHN0b3JlZEpvYnNbMF07XHJcbiAgICAgICAgICAgIC8vICRlc2xpbnQtZml4LW1lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaGlub2RhdmlkL2VzbGludC1maXgtbWVcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24sQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGVkLW9wdGlvbmFsLWNoYWluXHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRPdGNPcmRlclRvT3RjT3JkZXIoc3RvcmVkSm9iPy5vcmRlciEpKS50by5kZWVwLmVxKG90Y09yZGVyKTtcclxuICAgICAgICAgICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvbixAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0ZWQtb3B0aW9uYWwtY2hhaW5cclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZVRvRmVlKHN0b3JlZEpvYj8uZmVlISkpLnRvLmRlZXAuZXEoZmVlKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEpvYj8uc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLkZhaWxlZEV0aENhbGxGYWlsZWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gd3JpdGUgdG8gYW5kIHJlYWQgZnJvbSB0aGUgbGFzdF9sb29rX3JlamVjdGlvbl9jb29sZG93bnMgdGFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ha2VySWQgPSAnbWFrZXJJZDEnO1xyXG4gICAgICAgICAgICBjb25zdCBub3dNcyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKG5vd01zKTtcclxuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKG5vd01zICsgT05FX01JTlVURV9NUyk7XHJcbiAgICAgICAgICAgIGF3YWl0IGRiVXRpbHMud3JpdGVWMkxhc3RMb29rUmVqZWN0aW9uQ29vbGRvd25Bc3luYyhcclxuICAgICAgICAgICAgICAgIG1ha2VySWQsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkLFxyXG4gICAgICAgICAgICAgICAgb3RjT3JkZXIubWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIG90Y09yZGVyLnRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUsXHJcbiAgICAgICAgICAgICAgICBlbmRUaW1lLFxyXG4gICAgICAgICAgICAgICAgb3RjT3JkZXJIYXNoLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkQ29vbGRvd24gPSBhd2FpdCBkYlV0aWxzLmZpbmRWMkxhc3RMb29rUmVqZWN0aW9uQ29vbGRvd25Bc3luYyhcclxuICAgICAgICAgICAgICAgIG1ha2VySWQsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkLFxyXG4gICAgICAgICAgICAgICAgb3RjT3JkZXIubWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIG90Y09yZGVyLnRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRDb29sZG93bj8uZW5kVGltZSkudG8uZGVlcC5lcShlbmRUaW1lKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZENvb2xkb3duPy5vcmRlckhhc2gpLnRvLmRlZXAuZXEob3RjT3JkZXJIYXNoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIHdyaXRlLCB1cGRhdGUsIGFuZCByZWFkIHRoZSByZnFtX3YyX3RyYW5zYWN0aW9uX3N1Ym1pc3Npb24gdGFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdyaXRlXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlPcHRzOiBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlDb25zdHJ1Y3Rvck9wdHMgPSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2gsXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6IG90Y09yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgICAgIGZyb20sXHJcbiAgICAgICAgICAgICAgICB0byxcclxuICAgICAgICAgICAgICAgIGdhc1ByaWNlLFxyXG4gICAgICAgICAgICAgICAgZ2FzVXNlZCxcclxuICAgICAgICAgICAgICAgIGJsb2NrTWluZWQsXHJcbiAgICAgICAgICAgICAgICBub25jZSxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWJtaXR0ZWQsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYXdhaXQgZGJVdGlscy53cml0ZVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uQXN5bmMocmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eU9wdHMpO1xyXG5cclxuICAgICAgICAgICAgLy8gRmlyc3QgUmVhZFxyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvblN1Ym1pc3Npb25zID0gYXdhaXQgZGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhvdGNPcmRlckhhc2gpO1xyXG4gICAgICAgICAgICBleHBlY3QodHJhbnNhY3Rpb25TdWJtaXNzaW9ucy5sZW5ndGgpLnRvLmVxdWFsKDEpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25TdWJtaXNzaW9uID0gdHJhbnNhY3Rpb25TdWJtaXNzaW9uc1swXTtcclxuICAgICAgICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uU3VibWlzc2lvbi50cmFuc2FjdGlvbkhhc2gpLnRvLmVxdWFsKHRyYW5zYWN0aW9uSGFzaCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0cmFuc2FjdGlvblN1Ym1pc3Npb24uc3RhdHVzKS50by5lcXVhbChSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGVcclxuICAgICAgICAgICAgYXdhaXQgZGJVdGlscy51cGRhdGVWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNBc3luYyhbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4udHJhbnNhY3Rpb25TdWJtaXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlY29uZCBSZWFkXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRUcmFuc2FjdGlvblN1Ym1pc3Npb25zID0gYXdhaXQgZGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgIG90Y09yZGVySGFzaCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZWRUcmFuc2FjdGlvblN1Ym1pc3Npb25zLmxlbmd0aCkudG8uZXF1YWwoMSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkVHJhbnNhY3Rpb25TdWJtaXNzaW9uID0gdXBkYXRlZFRyYW5zYWN0aW9uU3VibWlzc2lvbnNbMF07XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVkVHJhbnNhY3Rpb25TdWJtaXNzaW9uLnRyYW5zYWN0aW9uSGFzaCkudG8uZXF1YWwodHJhbnNhY3Rpb25IYXNoKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZWRUcmFuc2FjdGlvblN1Ym1pc3Npb24uc3RhdHVzKS50by5lcXVhbChSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbm90IHJ1biBpbnRvIGR1cGxpY2F0ZSBrZXkgaXNzdWVzIGlmIGF0dGVtcHRpbmcgdG8gd3JpdGUgdG8gdGhlIHNhbWUgaGFzaCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgLy8gV3JpdGVcclxuICAgICAgICAgICAgY29uc3QgcmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eU9wdHM6IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eUNvbnN0cnVjdG9yT3B0cyA9IHtcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaCxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogb3RjT3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICAgICAgZnJvbSxcclxuICAgICAgICAgICAgICAgIHRvLFxyXG4gICAgICAgICAgICAgICAgZ2FzUHJpY2UsXHJcbiAgICAgICAgICAgICAgICBnYXNVc2VkLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tNaW5lZCxcclxuICAgICAgICAgICAgICAgIG5vbmNlLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhd2FpdCBkYlV0aWxzLndyaXRlVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25Bc3luYyhyZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5T3B0cyk7XHJcblxyXG4gICAgICAgICAgICAvLyBXcml0ZSBhZ2FpbiAtIHNob3VsZCBub3QgZXJyb3JcclxuICAgICAgICAgICAgYXdhaXQgZGJVdGlscy53cml0ZVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uQXN5bmMocmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eU9wdHMpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVhZFxyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvblN1Ym1pc3Npb25zID0gYXdhaXQgZGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhvdGNPcmRlckhhc2gpO1xyXG4gICAgICAgICAgICBleHBlY3QodHJhbnNhY3Rpb25TdWJtaXNzaW9ucy5sZW5ndGgpLnRvLmVxdWFsKDEpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25TdWJtaXNzaW9uID0gdHJhbnNhY3Rpb25TdWJtaXNzaW9uc1swXTtcclxuICAgICAgICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uU3VibWlzc2lvbi50cmFuc2FjdGlvbkhhc2gpLnRvLmVxdWFsKHRyYW5zYWN0aW9uSGFzaCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0cmFuc2FjdGlvblN1Ym1pc3Npb24uc3RhdHVzKS50by5lcXVhbChSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnbWV0YSB0cmFuc2FjdGlvbiB0YWJsZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIHdyaXRlIHRvLCB1cGRhdGUsIGFuZCByZWFkIGZyb20gdGhlIGBtZXRhX3RyYW5zYWN0aW9uX2pvYnNgIHRhYmxlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZXRhVHJhbnNhY3Rpb24gPSBjcmVhdE1vY2tNZXRhVHJhbnNhY3Rpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgbWV0YVRyYW5zYWN0aW9uSGFzaCA9IG1ldGFUcmFuc2FjdGlvbi5nZXRIYXNoKCk7XHJcbiAgICAgICAgICAgIC8vIFdyaXRlXHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkSm9iID0gYXdhaXQgZGJVdGlscy53cml0ZU1ldGFUcmFuc2FjdGlvbkpvYkFzeW5jKHtcclxuICAgICAgICAgICAgICAgIGFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcigyKSxcclxuICAgICAgICAgICAgICAgIGZlZTogTU9DS19GRUUsXHJcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VuLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudCxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ2ludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSGFzaCxcclxuICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW4sXHJcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweGFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2F2ZWRKb2IuaWQpLnRvLm5vdC5lcXVhbChudWxsKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlYWRcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gYXdhaXQgZGJVdGlscy5maW5kTWV0YVRyYW5zYWN0aW9uSm9iQnlNZXRhVHJhbnNhY3Rpb25IYXNoQXN5bmMobWV0YVRyYW5zYWN0aW9uSGFzaCk7XHJcbiAgICAgICAgICAgIGlmICgham9iKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2pvYiBzaG91bGQgZXhpc3QnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBleHBlY3Qoam9iLm1ldGFUcmFuc2FjdGlvbikudG8uZXFsKG1ldGFUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2IuZmVlKS50by5lcWwoTU9DS19GRUUpO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZXFsKFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KGpvYi5hcHByb3ZhbCkudG8uZXFsKGFwcHJvdmFsKTtcclxuICAgICAgICAgICAgZXhwZWN0KGpvYi53b3JrZXJBZGRyZXNzKS50by5lcWwobnVsbCk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGVcclxuICAgICAgICAgICAgam9iLmNoYWluSWQgPSAxO1xyXG4gICAgICAgICAgICBhd2FpdCBkYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhqb2IpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVhZFxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkSm9iID0gYXdhaXQgZGJVdGlscy5maW5kTWV0YVRyYW5zYWN0aW9uSm9iQnlJZEFzeW5jKGpvYi5pZCk7XHJcbiAgICAgICAgICAgIGlmICghdXBkYXRlZEpvYikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdqb2Igc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZWRKb2IubWV0YVRyYW5zYWN0aW9uKS50by5lcWwobWV0YVRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZWRKb2IuZmVlKS50by5lcWwoTU9DS19GRUUpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlZEpvYi5zdGF0dXMpLnRvLmVxbChSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVkSm9iLmFwcHJvdmFsKS50by5lcWwoYXBwcm92YWwpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlZEpvYi53b3JrZXJBZGRyZXNzKS50by5lcWwobnVsbCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVkSm9iLmNoYWluSWQpLnRvLmVxbCgxKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGZpbmQgYnkgc3RhdHVzIGFjcm9zcyB0aGUgYG1ldGFfdHJhbnNhY3Rpb25fam9ic2AgdGFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGFUcmFuc2FjdGlvbiA9IGNyZWF0TW9ja01ldGFUcmFuc2FjdGlvbigpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXRhVHJhbnNhY3Rpb25IYXNoID0gbWV0YVRyYW5zYWN0aW9uLmdldEhhc2goKTtcclxuICAgICAgICAgICAgLy8gV3JpdGVcclxuICAgICAgICAgICAgY29uc3Qgc2F2ZWRKb2IgPSBhd2FpdCBkYlV0aWxzLndyaXRlTWV0YVRyYW5zYWN0aW9uSm9iQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgYXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKDIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiBNT0NLX0ZFRSxcclxuICAgICAgICAgICAgICAgIGlucHV0VG9rZW4sXHJcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnaW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoLFxyXG4gICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQsXHJcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbixcclxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZSxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRFeHBpcmVkLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KHNhdmVkSm9iLmlkKS50by5ub3QuZXF1YWwobnVsbCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZWFkXHJcbiAgICAgICAgICAgIGNvbnN0IGpvYnMgPSBhd2FpdCBkYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25Kb2JzV2l0aFN0YXR1c2VzQXN5bmMoW1JmcW1Kb2JTdGF0dXMuRmFpbGVkRXhwaXJlZF0pO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9icy5sZW5ndGgpLnRvLmVxdWFsKDEpO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9ic1swXS5tZXRhVHJhbnNhY3Rpb24pLnRvLmVxbChtZXRhVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9ic1swXS5mZWUpLnRvLmVxbChNT0NLX0ZFRSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2JzWzBdLnN0YXR1cykudG8uZXFsKFJmcW1Kb2JTdGF0dXMuRmFpbGVkRXhwaXJlZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2JzWzBdLmFwcHJvdmFsKS50by5lcWwoYXBwcm92YWwpO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9ic1swXS53b3JrZXJBZGRyZXNzKS50by5lcWwobnVsbCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgYWJsZSB0byBmaW5kIHVuc29sdmVkIG1ldGEgdHJhbnNhY3Rpb24gam9icyBpbiB0aGUgYG1ldGFfdHJhbnNhY3Rpb25fam9ic2AgdGFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tNZXRhVHJhbnNhY3Rpb24xID0gY3JlYXRNb2NrTWV0YVRyYW5zYWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkSm9iID0gYXdhaXQgZGJVdGlscy53cml0ZU1ldGFUcmFuc2FjdGlvbkpvYkFzeW5jKHtcclxuICAgICAgICAgICAgICAgIGFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcigyKSxcclxuICAgICAgICAgICAgICAgIGZlZTogTU9DS19GRUUsXHJcbiAgICAgICAgICAgICAgICBpZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnaW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VuLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudCxcclxuICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbjogbW9ja01ldGFUcmFuc2FjdGlvbjEsXHJcbiAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoOiBtb2NrTWV0YVRyYW5zYWN0aW9uMS5nZXRIYXNoKCksXHJcbiAgICAgICAgICAgICAgICBtaW5PdXRwdXRUb2tlbkFtb3VudCxcclxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VuLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHhhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzYXZlZEpvYi5pZCkudG8ubm90LmVxdWFsKG51bGwpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja01ldGFUcmFuc2FjdGlvbjIgPSBjcmVhdE1vY2tNZXRhVHJhbnNhY3Rpb24oeyBzaWduZXI6ICcweGFiY2RlZjInIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCBkYlV0aWxzLndyaXRlTWV0YVRyYW5zYWN0aW9uSm9iQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgYXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAyLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKDIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiBNT0NLX0ZFRSxcclxuICAgICAgICAgICAgICAgIGlucHV0VG9rZW4sXHJcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnaW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb246IG1vY2tNZXRhVHJhbnNhY3Rpb24yLFxyXG4gICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSGFzaDogbW9ja01ldGFUcmFuc2FjdGlvbjIuZ2V0SGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQsXHJcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbixcclxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZSxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlckFkZHJlc3MnLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tNZXRhVHJhbnNhY3Rpb24zID0gY3JlYXRNb2NrTWV0YVRyYW5zYWN0aW9uKHsgc2lnbmVyOiAnMHhhYmNkZWYzJyB9KTtcclxuICAgICAgICAgICAgYXdhaXQgZGJVdGlscy53cml0ZU1ldGFUcmFuc2FjdGlvbkpvYkFzeW5jKHtcclxuICAgICAgICAgICAgICAgIGFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMyxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcigyKSxcclxuICAgICAgICAgICAgICAgIGZlZTogTU9DS19GRUUsXHJcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VuLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudCxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ2ludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uOiBtb2NrTWV0YVRyYW5zYWN0aW9uMyxcclxuICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkhhc2g6IG1vY2tNZXRhVHJhbnNhY3Rpb24zLmdldEhhc2goKSxcclxuICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW4sXHJcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweGFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuRmFpbGVkRXhwaXJlZCxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBqb2JzID0gYXdhaXQgZGJVdGlscy5maW5kVW5yZXNvbHZlZE1ldGFUcmFuc2FjdGlvbkpvYnNBc3luYygnMHh3b3JrZXJBZGRyZXNzJywgMik7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2JzLmxlbmd0aCkudG8uZXF1YWwoMSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2JzWzBdLnN0YXR1cykudG8uZXFsKFJmcW1Kb2JTdGF0dXMuUGVuZGluZ1Byb2Nlc3NpbmcpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gd3JpdGUsIHVwZGF0ZSwgYW5kIHJlYWQgdGhlIGBtZXRhX3RyYW5zYWN0aW9uX3N1Ym1pc3Npb25zYCB0YWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWV0YVRyYW5zYWN0aW9uSm9iSWQgPSB1dWlkLnY0KCk7XHJcbiAgICAgICAgICAgIC8vIFdyaXRlXHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlPcHRzOiBNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5Q29uc3RydWN0b3JPcHRzID0ge1xyXG4gICAgICAgICAgICAgICAgZnJvbSxcclxuICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkpvYklkLFxyXG4gICAgICAgICAgICAgICAgbm9uY2UsXHJcbiAgICAgICAgICAgICAgICB0byxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZFVuY29uZmlybWVkLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZFN1Ym1pc3Npb24gPSBhd2FpdCBkYlV0aWxzLndyaXRlTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbkFzeW5jKFxyXG4gICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eU9wdHMsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzYXZlZFN1Ym1pc3Npb24uaWQpLm5vdC5lcXVhbChudWxsKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEZpcnN0IFJlYWRcclxuICAgICAgICAgICAgbGV0IHRyYW5zYWN0aW9uU3VibWlzc2lvbnMgPSBhd2FpdCBkYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5VHJhbnNhY3Rpb25IYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2gsXHJcbiAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uU3VibWlzc2lvbnMubGVuZ3RoKS50by5lcXVhbCgxKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0cmFuc2FjdGlvblN1Ym1pc3Npb24gPSB0cmFuc2FjdGlvblN1Ym1pc3Npb25zWzBdO1xyXG4gICAgICAgICAgICBleHBlY3QodHJhbnNhY3Rpb25TdWJtaXNzaW9uLnRyYW5zYWN0aW9uSGFzaCkudG8uZXF1YWwodHJhbnNhY3Rpb25IYXNoKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uU3VibWlzc2lvbi5zdGF0dXMpLnRvLmVxdWFsKFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VjY2VlZGVkVW5jb25maXJtZWQpO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlXHJcbiAgICAgICAgICAgIGF3YWl0IGRiVXRpbHMudXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNBc3luYyhbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4udHJhbnNhY3Rpb25TdWJtaXNzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlY29uZCBSZWFkXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRUcmFuc2FjdGlvblN1Ym1pc3Npb25Pck51bGwgPSBhd2FpdCBkYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uQnlJZEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25TdWJtaXNzaW9uLmlkLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAoIXVwZGF0ZWRUcmFuc2FjdGlvblN1Ym1pc3Npb25Pck51bGwpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdyZXN1bHQgc2hvdWxkIG5vdCBiZSBudWxsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlZFRyYW5zYWN0aW9uU3VibWlzc2lvbk9yTnVsbCEudHJhbnNhY3Rpb25IYXNoKS50by5lcXVhbCh0cmFuc2FjdGlvbkhhc2gpO1xyXG4gICAgICAgICAgICAvLyAkZXNsaW50LWZpeC1tZSBodHRwczovL2dpdGh1Yi5jb20vcmhpbm9kYXZpZC9lc2xpbnQtZml4LW1lXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVkVHJhbnNhY3Rpb25TdWJtaXNzaW9uT3JOdWxsIS5zdGF0dXMpLnRvLmVxdWFsKFxyXG4gICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyBUaGlyZCByZWFkXHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3VibWlzc2lvbnMgPSBhd2FpdCBkYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5Sm9iSWRBc3luYyhtZXRhVHJhbnNhY3Rpb25Kb2JJZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh0cmFuc2FjdGlvblN1Ym1pc3Npb25zLmxlbmd0aCkudG8uZXF1YWwoMSk7XHJcblxyXG4gICAgICAgICAgICB0cmFuc2FjdGlvblN1Ym1pc3Npb24gPSB0cmFuc2FjdGlvblN1Ym1pc3Npb25zWzBdO1xyXG4gICAgICAgICAgICBleHBlY3QodHJhbnNhY3Rpb25TdWJtaXNzaW9uLnRyYW5zYWN0aW9uSGFzaCkudG8uZXF1YWwodHJhbnNhY3Rpb25IYXNoKTtcclxuICAgICAgICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uU3VibWlzc2lvbi5zdGF0dXMpLnRvLmVxdWFsKFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuLy8gdHNsaW50OmRpc2FibGUtbGluZTptYXgtZmlsZS1saW5lLWNvdW50XHJcbiJdLCJ2ZXJzaW9uIjozfQ==
05ca235d79780ab0109ce093547205ce
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable:custom-no-magic-numbers
const protocol_utils_1 = require("@0x/protocol-utils");
const utils_1 = require("@0x/utils");
const constants_1 = require("../../src/core/constants");
const fee_utils_1 = require("../../src/core/fee_utils");
const rfqm_db_utils_1 = require("../../src/utils/rfqm_db_utils");
describe('RFQM DB utils', () => {
    describe('storedOtcOrderToOtcOrder and otcOrderToStoredOtcOrder', () => {
        it('should map there and back without data corruption', () => {
            // it's expired if it's over 9000
            const expiry = new utils_1.BigNumber(9000);
            const nonce = new utils_1.BigNumber(1637085289);
            const chainId = 1;
            const order = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: '0x1111111111111111111111111111111111111111',
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, nonce),
                chainId,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const processedOrder = (0, rfqm_db_utils_1.storedOtcOrderToOtcOrder)((0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(order));
            expect(processedOrder).toEqual(order);
        });
    });
    describe('feeToStoredFee', () => {
        it('should convert Fee without details correctly', () => {
            // Given
            const fee = {
                token: '0xatoken',
                amount: new utils_1.BigNumber(5),
                type: 'fixed',
            };
            // When
            const storedFee = (0, fee_utils_1.feeToStoredFee)(fee);
            // Expect
            expect(storedFee.type).toEqual(fee.type);
            expect(storedFee.token).toEqual(fee.token);
            expect(storedFee.amount).toEqual(fee.amount.toString());
            expect(storedFee.details).toEqual(undefined);
            expect(storedFee.breakdown).toEqual(undefined);
            expect(storedFee.conversionRates).toEqual(undefined);
        });
        it('should convert Fee with gasOnly details correctly', () => {
            var _a, _b, _c;
            // Given
            const fee = {
                token: '0xatoken',
                amount: new utils_1.BigNumber(5),
                type: 'fixed',
                details: {
                    kind: 'gasOnly',
                    feeModelVersion: 0,
                    gasFeeAmount: new utils_1.BigNumber(5),
                    gasPrice: new utils_1.BigNumber(50),
                },
                breakdown: {
                    gas: {
                        amount: new utils_1.BigNumber(100),
                        details: {
                            gasPrice: new utils_1.BigNumber(50),
                            estimatedGas: new utils_1.BigNumber(1),
                        },
                    },
                },
                conversionRates: {
                    nativeTokenBaseUnitPriceUsd: null,
                    feeTokenBaseUnitPriceUsd: null,
                    takerTokenBaseUnitPriceUsd: null,
                    makerTokenBaseUnitPriceUsd: null,
                },
            };
            // When
            const storedFee = (0, fee_utils_1.feeToStoredFee)(fee);
            // Expect
            expect(storedFee.type).toEqual(fee.type);
            expect(storedFee.token).toEqual(fee.token);
            expect(storedFee.amount).toEqual(fee.amount.toString());
            expect(storedFee.details.kind).toEqual(fee.details.kind);
            expect(storedFee.details.feeModelVersion).toEqual(fee.details.feeModelVersion);
            expect(storedFee.details.gasFeeAmount).toEqual(fee.details.gasFeeAmount.toString());
            expect(storedFee.details.gasPrice).toEqual(fee.details.gasPrice.toString());
            expect(storedFee.breakdown.gas.amount).toEqual((_a = fee.breakdown.gas) === null || _a === void 0 ? void 0 : _a.amount.toString());
            expect(storedFee.breakdown.gas.details.gasPrice).toEqual((_b = fee.breakdown.gas) === null || _b === void 0 ? void 0 : _b.details.gasPrice.toString());
            expect(storedFee.breakdown.gas.details.estimatedGas).toEqual((_c = fee.breakdown.gas) === null || _c === void 0 ? void 0 : _c.details.estimatedGas.toString());
            expect(storedFee.breakdown.zeroEx).toEqual(undefined);
            expect(storedFee.conversionRates.nativeTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.conversionRates.feeTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.conversionRates.takerTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.conversionRates.makerTokenBaseUnitPriceUsd).toEqual(undefined);
        });
        it('should convert Fee with default details correctly', () => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
            // Given
            const fee = {
                token: '0xatoken',
                amount: new utils_1.BigNumber(5),
                type: 'fixed',
                details: {
                    kind: 'default',
                    feeModelVersion: 1,
                    gasFeeAmount: new utils_1.BigNumber(5),
                    gasPrice: new utils_1.BigNumber(50),
                    tradeSizeBps: 4,
                    zeroExFeeAmount: new utils_1.BigNumber(10),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    takerTokenBaseUnitPriceUsd: null,
                    makerTokenBaseUnitPriceUsd: new utils_1.BigNumber(1e-18),
                },
                breakdown: {
                    gas: {
                        amount: new utils_1.BigNumber(5),
                        details: {
                            gasPrice: new utils_1.BigNumber(50),
                            estimatedGas: new utils_1.BigNumber(1),
                        },
                    },
                    zeroEx: {
                        amount: new utils_1.BigNumber(10),
                        details: {
                            kind: 'volume',
                            tradeSizeBps: 4,
                        },
                    },
                },
                conversionRates: {
                    nativeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    takerTokenBaseUnitPriceUsd: null,
                    makerTokenBaseUnitPriceUsd: new utils_1.BigNumber(1e-18),
                },
            };
            // When
            const storedFee = (0, fee_utils_1.feeToStoredFee)(fee);
            // Expect
            expect(storedFee.type).toEqual(fee.type);
            expect(storedFee.token).toEqual(fee.token);
            expect(storedFee.amount).toEqual(fee.amount.toString());
            expect(storedFee.details.kind).toEqual(fee.details.kind);
            expect(storedFee.details.feeModelVersion).toEqual(fee.details.feeModelVersion);
            expect(storedFee.details.gasFeeAmount).toEqual(fee.details.gasFeeAmount.toString());
            expect(storedFee.details.gasPrice).toEqual(fee.details.gasPrice.toString());
            expect(storedFee.details.tradeSizeBps).toEqual(fee.details.tradeSizeBps);
            expect(storedFee.details.zeroExFeeAmount).toEqual(fee.details.zeroExFeeAmount.toString());
            expect(storedFee.details.feeTokenBaseUnitPriceUsd).toEqual((_a = fee.details.feeTokenBaseUnitPriceUsd) === null || _a === void 0 ? void 0 : _a.toString());
            expect(storedFee.details.takerTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.details.makerTokenBaseUnitPriceUsd).toEqual((_b = fee.details.makerTokenBaseUnitPriceUsd) === null || _b === void 0 ? void 0 : _b.toString());
            expect(storedFee.breakdown.gas.amount).toEqual((_c = fee.breakdown.gas) === null || _c === void 0 ? void 0 : _c.amount.toString());
            expect(storedFee.breakdown.gas.details.gasPrice).toEqual((_d = fee.breakdown.gas) === null || _d === void 0 ? void 0 : _d.details.gasPrice.toString());
            expect(storedFee.breakdown.gas.details.estimatedGas).toEqual((_e = fee.breakdown.gas) === null || _e === void 0 ? void 0 : _e.details.estimatedGas.toString());
            expect(storedFee.breakdown.zeroEx.amount).toEqual((_f = fee.breakdown.zeroEx) === null || _f === void 0 ? void 0 : _f.amount.toString());
            expect(storedFee.breakdown.zeroEx.details.kind).toEqual((_g = fee.breakdown.zeroEx) === null || _g === void 0 ? void 0 : _g.details.kind);
            expect(storedFee.breakdown.zeroEx.details.tradeSizeBps).toEqual(4);
            expect(storedFee.conversionRates.nativeTokenBaseUnitPriceUsd).toEqual((_h = fee.conversionRates.nativeTokenBaseUnitPriceUsd) === null || _h === void 0 ? void 0 : _h.toString());
            expect(storedFee.conversionRates.feeTokenBaseUnitPriceUsd).toEqual((_j = fee.conversionRates.feeTokenBaseUnitPriceUsd) === null || _j === void 0 ? void 0 : _j.toString());
            expect(storedFee.conversionRates.takerTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.conversionRates.makerTokenBaseUnitPriceUsd).toEqual((_k = fee.conversionRates.makerTokenBaseUnitPriceUsd) === null || _k === void 0 ? void 0 : _k.toString());
        });
        it('should convert Fee with margin based details correctly', () => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
            // Given
            const fee = {
                token: '0xatoken',
                amount: new utils_1.BigNumber(5),
                type: 'fixed',
                details: {
                    kind: 'margin',
                    feeModelVersion: 1,
                    gasFeeAmount: new utils_1.BigNumber(5),
                    gasPrice: new utils_1.BigNumber(50),
                    margin: new utils_1.BigNumber(4570),
                    marginRakeRatio: 0.35,
                    zeroExFeeAmount: new utils_1.BigNumber(10),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    takerTokenBaseUnitPriceUsd: new utils_1.BigNumber(1e-18),
                    makerTokenBaseUnitPriceUsd: null,
                },
                breakdown: {
                    gas: {
                        amount: new utils_1.BigNumber(5),
                        details: {
                            gasPrice: new utils_1.BigNumber(50),
                            estimatedGas: new utils_1.BigNumber(1),
                        },
                    },
                    zeroEx: {
                        amount: new utils_1.BigNumber(10),
                        details: {
                            kind: 'price_improvement',
                            priceImprovement: new utils_1.BigNumber(4570),
                            rakeRatio: 0.35,
                        },
                    },
                },
                conversionRates: {
                    nativeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    takerTokenBaseUnitPriceUsd: new utils_1.BigNumber(1e-18),
                    makerTokenBaseUnitPriceUsd: null,
                },
            };
            // When
            const storedFee = (0, fee_utils_1.feeToStoredFee)(fee);
            // Expect
            expect(storedFee.type).toEqual(fee.type);
            expect(storedFee.token).toEqual(fee.token);
            expect(storedFee.amount).toEqual(fee.amount.toString());
            expect(storedFee.details.kind).toEqual(fee.details.kind);
            expect(storedFee.details.feeModelVersion).toEqual(fee.details.feeModelVersion);
            expect(storedFee.details.gasFeeAmount).toEqual(fee.details.gasFeeAmount.toString());
            expect(storedFee.details.gasPrice).toEqual(fee.details.gasPrice.toString());
            expect(storedFee.details.margin).toEqual(fee.details.margin.toString());
            expect(storedFee.details.marginRakeRatio).toEqual(fee.details.marginRakeRatio);
            expect(storedFee.details.zeroExFeeAmount).toEqual(fee.details.zeroExFeeAmount.toString());
            expect(storedFee.details.feeTokenBaseUnitPriceUsd).toEqual((_a = fee.details.feeTokenBaseUnitPriceUsd) === null || _a === void 0 ? void 0 : _a.toString());
            expect(storedFee.details.takerTokenBaseUnitPriceUsd).toEqual((_b = fee.details.takerTokenBaseUnitPriceUsd) === null || _b === void 0 ? void 0 : _b.toString());
            expect(storedFee.details.makerTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.breakdown.gas.amount).toEqual((_c = fee.breakdown.gas) === null || _c === void 0 ? void 0 : _c.amount.toString());
            expect(storedFee.breakdown.gas.details.gasPrice).toEqual((_d = fee.breakdown.gas) === null || _d === void 0 ? void 0 : _d.details.gasPrice.toString());
            expect(storedFee.breakdown.gas.details.estimatedGas).toEqual((_e = fee.breakdown.gas) === null || _e === void 0 ? void 0 : _e.details.estimatedGas.toString());
            expect(storedFee.breakdown.zeroEx.amount).toEqual((_f = fee.breakdown.zeroEx) === null || _f === void 0 ? void 0 : _f.amount.toString());
            expect(storedFee.breakdown.zeroEx.details.kind).toEqual((_g = fee.breakdown.zeroEx) === null || _g === void 0 ? void 0 : _g.details.kind);
            expect(storedFee.breakdown.zeroEx.details.priceImprovement).toEqual('4570');
            expect(storedFee.breakdown.zeroEx.details.rakeRatio).toEqual(0.35);
            expect(storedFee.conversionRates.nativeTokenBaseUnitPriceUsd).toEqual((_h = fee.conversionRates.nativeTokenBaseUnitPriceUsd) === null || _h === void 0 ? void 0 : _h.toString());
            expect(storedFee.conversionRates.feeTokenBaseUnitPriceUsd).toEqual((_j = fee.conversionRates.feeTokenBaseUnitPriceUsd) === null || _j === void 0 ? void 0 : _j.toString());
            expect(storedFee.conversionRates.takerTokenBaseUnitPriceUsd).toEqual((_k = fee.conversionRates.takerTokenBaseUnitPriceUsd) === null || _k === void 0 ? void 0 : _k.toString());
            expect(storedFee.conversionRates.makerTokenBaseUnitPriceUsd).toEqual(undefined);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3QvdXRpbHMvcmZxbV9kYl91dGlsc190ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEseUNBQXlDO0FBRXpDLHVEQUE4QztBQUM5QyxxQ0FBc0M7QUFFdEMsd0RBQWdEO0FBQ2hELHdEQUEwRDtBQVExRCxpRUFBbUc7QUFFbkcsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7SUFDM0IsUUFBUSxDQUFDLHVEQUF1RCxFQUFFLEdBQUcsRUFBRTtRQUNuRSxFQUFFLENBQUMsbURBQW1ELEVBQUUsR0FBRyxFQUFFO1lBQ3pELGlDQUFpQztZQUNqQyxNQUFNLE1BQU0sR0FBRyxJQUFJLGlCQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxpQkFBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sT0FBTyxHQUFHLENBQUMsQ0FBQztZQUNsQixNQUFNLEtBQUssR0FBRyxJQUFJLHlCQUFRLENBQUM7Z0JBQ3ZCLFFBQVEsRUFBRSw0Q0FBNEM7Z0JBQ3RELEtBQUssRUFBRSw0Q0FBNEM7Z0JBQ25ELEtBQUssRUFBRSw0Q0FBNEM7Z0JBQ25ELFVBQVUsRUFBRSw0Q0FBNEM7Z0JBQ3hELFVBQVUsRUFBRSw0Q0FBNEM7Z0JBQ3hELGNBQWMsRUFBRSx5QkFBUSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sRUFBRSxnQkFBSSxFQUFFLEtBQUssQ0FBQztnQkFDbEUsT0FBTztnQkFDUCxpQkFBaUIsRUFBRSw0Q0FBNEM7YUFDbEUsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxjQUFjLEdBQUcsSUFBQSx3Q0FBd0IsRUFBQyxJQUFBLHdDQUF3QixFQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDakYsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ0gsUUFBUSxDQUFD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LENBQUMsZUFBZSxDQUFDLDJCQUEyQixDQUFDLENBQUMsT0FBTyxDQUNqRSxNQUFBLEdBQUcsQ0FBQyxlQUFlLENBQUMsMkJBQTJCLDBDQUFFLFFBQVEsRUFBRSxDQUM5RCxDQUFDO1lBQ0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxPQUFPLENBQzlELE1BQUEsR0FBRyxDQUFDLGVBQWUsQ0FBQyx3QkFBd0IsMENBQUUsUUFBUSxFQUFFLENBQzNELENBQUM7WUFDRixNQUFNLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLE9BQU8sQ0FDaEUsTUFBQSxHQUFHLENBQUMsZUFBZSxDQUFDLDBCQUEwQiwwQ0FBRSxRQUFRLEVBQUUsQ0FDN0QsQ0FBQztZQUNGLE1BQU0sQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLDBCQUEwQixDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3BGLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZGF2aWR3YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvdGVzdC91dGlscy9yZnFtX2RiX3V0aWxzX3Rlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGU6Y3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcblxuaW1wb3J0IHsgT3RjT3JkZXIgfSBmcm9tICdAMHgvcHJvdG9jb2wtdXRpbHMnO1xuaW1wb3J0IHsgQmlnTnVtYmVyIH0gZnJvbSAnQDB4L3V0aWxzJztcblxuaW1wb3J0IHsgWkVSTyB9IGZyb20gJy4uLy4uL3NyYy9jb3JlL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBmZWVUb1N0b3JlZEZlZSB9IGZyb20gJy4uLy4uL3NyYy9jb3JlL2ZlZV91dGlscyc7XG5pbXBvcnQge1xuICAgIERlZmF1bHRGZWVEZXRhaWxzRGVwcmVjYXRlZCxcbiAgICBGZWUsXG4gICAgRmVlV2l0aERldGFpbHMsXG4gICAgR2FzT25seUZlZURldGFpbHNEZXByZWNhdGVkLFxuICAgIE1hcmdpbkJhc2VkRmVlRGV0YWlsc0RlcHJlY2F0ZWQsXG59IGZyb20gJy4uLy4uL3NyYy9jb3JlL3R5cGVzJztcbmltcG9ydCB7IG90Y09yZGVyVG9TdG9yZWRPdGNPcmRlciwgc3RvcmVkT3RjT3JkZXJUb090Y09yZGVyIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL3JmcW1fZGJfdXRpbHMnO1xuXG5kZXNjcmliZSgnUkZRTSBEQiB1dGlscycsICgpID0+IHtcbiAgICBkZXNjcmliZSgnc3RvcmVkT3RjT3JkZXJUb090Y09yZGVyIGFuZCBvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXInLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgbWFwIHRoZXJlIGFuZCBiYWNrIHdpdGhvdXQgZGF0YSBjb3JydXB0aW9uJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaXQncyBleHBpcmVkIGlmIGl0J3Mgb3ZlciA5MDAwXG4gICAgICAgICAgICBjb25zdCBleHBpcnkgPSBuZXcgQmlnTnVtYmVyKDkwMDApO1xuICAgICAgICAgICAgY29uc3Qgbm9uY2UgPSBuZXcgQmlnTnVtYmVyKDE2MzcwODUyODkpO1xuICAgICAgICAgICAgY29uc3QgY2hhaW5JZCA9IDE7XG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IG5ldyBPdGNPcmRlcih7XG4gICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLFxuICAgICAgICAgICAgICAgIHRha2VyOiAnMHgxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExJyxcbiAgICAgICAgICAgICAgICBtYWtlcjogJzB4MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMicsXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMycsXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NCcsXG4gICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKGV4cGlyeSwgWkVSTywgbm9uY2UpLFxuICAgICAgICAgICAgICAgIGNoYWluSWQsXG4gICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRPcmRlciA9IHN0b3JlZE90Y09yZGVyVG9PdGNPcmRlcihvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXIob3JkZXIpKTtcbiAgICAgICAgICAgIGV4cGVjdChwcm9jZXNzZWRPcmRlcikudG9FcXVhbChvcmRlcik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKCdmZWVUb1N0b3JlZEZlZScsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBjb252ZXJ0IEZlZSB3aXRob3V0IGRldGFpbHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gR2l2ZW5cbiAgICAgICAgICAgIGNvbnN0IGZlZTogRmVlID0ge1xuICAgICAgICAgICAgICAgIHRva2VuOiAnMHhhdG9rZW4nLFxuICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gV2hlblxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkRmVlID0gZmVlVG9TdG9yZWRGZWUoZmVlKTtcblxuICAgICAgICAgICAgLy8gRXhwZWN0XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLnR5cGUpLnRvRXF1YWwoZmVlLnR5cGUpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS50b2tlbikudG9FcXVhbChmZWUudG9rZW4pO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5hbW91bnQpLnRvRXF1YWwoZmVlLmFtb3VudC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscykudG9FcXVhbCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24pLnRvRXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzKS50b0VxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgY29udmVydCBGZWUgd2l0aCBnYXNPbmx5IGRldGFpbHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gR2l2ZW5cbiAgICAgICAgICAgIGNvbnN0IGZlZTogRmVlV2l0aERldGFpbHMgJiB7IGRldGFpbHM6IEdhc09ubHlGZWVEZXRhaWxzRGVwcmVjYXRlZCB9ID0ge1xuICAgICAgICAgICAgICAgIHRva2VuOiAnMHhhdG9rZW4nLFxuICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogJ2dhc09ubHknLFxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIGdhc0ZlZUFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcbiAgICAgICAgICAgICAgICAgICAgZ2FzUHJpY2U6IG5ldyBCaWdOdW1iZXIoNTApLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnJlYWtkb3duOiB7XG4gICAgICAgICAgICAgICAgICAgIGdhczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FzUHJpY2U6IG5ldyBCaWdOdW1iZXIoNTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdGltYXRlZEdhczogbmV3IEJpZ051bWJlcigxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb252ZXJzaW9uUmF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgbmF0aXZlVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBmZWVUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuQmFzZVVuaXRQcmljZVVzZDogbnVsbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gV2hlblxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkRmVlID0gZmVlVG9TdG9yZWRGZWUoZmVlKTtcblxuICAgICAgICAgICAgLy8gRXhwZWN0XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLnR5cGUpLnRvRXF1YWwoZmVlLnR5cGUpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS50b2tlbikudG9FcXVhbChmZWUudG9rZW4pO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5hbW91bnQpLnRvRXF1YWwoZmVlLmFtb3VudC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5raW5kKS50b0VxdWFsKGZlZS5kZXRhaWxzLmtpbmQpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLmZlZU1vZGVsVmVyc2lvbikudG9FcXVhbChmZWUuZGV0YWlscy5mZWVNb2RlbFZlcnNpb24pO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLmdhc0ZlZUFtb3VudCkudG9FcXVhbChmZWUuZGV0YWlscy5nYXNGZWVBbW91bnQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMuZ2FzUHJpY2UpLnRvRXF1YWwoZmVlLmRldGFpbHMuZ2FzUHJpY2UudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5hbW91bnQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmFtb3VudC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5kZXRhaWxzLmdhc1ByaWNlKS50b0VxdWFsKGZlZS5icmVha2Rvd24uZ2FzPy5kZXRhaWxzLmdhc1ByaWNlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uZ2FzLmRldGFpbHMuZXN0aW1hdGVkR2FzKS50b0VxdWFsKFxuICAgICAgICAgICAgICAgIGZlZS5icmVha2Rvd24uZ2FzPy5kZXRhaWxzLmVzdGltYXRlZEdhcy50b1N0cmluZygpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeCkudG9FcXVhbCh1bmRlZmluZWQpO1xuXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmNvbnZlcnNpb25SYXRlcy5uYXRpdmVUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLmZlZVRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbCh1bmRlZmluZWQpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMudGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLm1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkKS50b0VxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgY29udmVydCBGZWUgd2l0aCBkZWZhdWx0IGRldGFpbHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gR2l2ZW5cbiAgICAgICAgICAgIGNvbnN0IGZlZTogRmVlV2l0aERldGFpbHMgJiB7IGRldGFpbHM6IERlZmF1bHRGZWVEZXRhaWxzRGVwcmVjYXRlZCB9ID0ge1xuICAgICAgICAgICAgICAgIHRva2VuOiAnMHhhdG9rZW4nLFxuICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogJ2RlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXG4gICAgICAgICAgICAgICAgICAgIGdhc0ZlZUFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcbiAgICAgICAgICAgICAgICAgICAgZ2FzUHJpY2U6IG5ldyBCaWdOdW1iZXIoNTApLFxuICAgICAgICAgICAgICAgICAgICB0cmFkZVNpemVCcHM6IDQsXG4gICAgICAgICAgICAgICAgICAgIHplcm9FeEZlZUFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXG4gICAgICAgICAgICAgICAgICAgIGZlZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzZS0xNSksXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigxZS0xOCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBicmVha2Rvd246IHtcbiAgICAgICAgICAgICAgICAgICAgZ2FzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FzUHJpY2U6IG5ldyBCaWdOdW1iZXIoNTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdGltYXRlZEdhczogbmV3IEJpZ051bWJlcigxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHplcm9FeDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiAndm9sdW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFkZVNpemVCcHM6IDQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udmVyc2lvblJhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzZS0xNSksXG4gICAgICAgICAgICAgICAgICAgIGZlZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzZS0xNSksXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigxZS0xOCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIFdoZW5cbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEZlZSA9IGZlZVRvU3RvcmVkRmVlKGZlZSk7XG5cbiAgICAgICAgICAgIC8vIEV4cGVjdFxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS50eXBlKS50b0VxdWFsKGZlZS50eXBlKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUudG9rZW4pLnRvRXF1YWwoZmVlLnRva2VuKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYW1vdW50KS50b0VxdWFsKGZlZS5hbW91bnQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMua2luZCkudG9FcXVhbChmZWUuZGV0YWlscy5raW5kKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5mZWVNb2RlbFZlcnNpb24pLnRvRXF1YWwoZmVlLmRldGFpbHMuZmVlTW9kZWxWZXJzaW9uKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5nYXNGZWVBbW91bnQpLnRvRXF1YWwoZmVlLmRldGFpbHMuZ2FzRmVlQW1vdW50LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLmdhc1ByaWNlKS50b0VxdWFsKGZlZS5kZXRhaWxzLmdhc1ByaWNlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLnRyYWRlU2l6ZUJwcykudG9FcXVhbChmZWUuZGV0YWlscy50cmFkZVNpemVCcHMpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLnplcm9FeEZlZUFtb3VudCkudG9FcXVhbChmZWUuZGV0YWlscy56ZXJvRXhGZWVBbW91bnQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMuZmVlVG9rZW5CYXNlVW5pdFByaWNlVXNkKS50b0VxdWFsKFxuICAgICAgICAgICAgICAgIGZlZS5kZXRhaWxzLmZlZVRva2VuQmFzZVVuaXRQcmljZVVzZD8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMudGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5tYWtlclRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcbiAgICAgICAgICAgICAgICBmZWUuZGV0YWlscy5tYWtlclRva2VuQmFzZVVuaXRQcmljZVVzZD8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5hbW91bnQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmFtb3VudC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5kZXRhaWxzLmdhc1ByaWNlKS50b0VxdWFsKGZlZS5icmVha2Rvd24uZ2FzPy5kZXRhaWxzLmdhc1ByaWNlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uZ2FzLmRldGFpbHMuZXN0aW1hdGVkR2FzKS50b0VxdWFsKFxuICAgICAgICAgICAgICAgIGZlZS5icmVha2Rvd24uZ2FzPy5kZXRhaWxzLmVzdGltYXRlZEdhcy50b1N0cmluZygpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeC5hbW91bnQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi56ZXJvRXg/LmFtb3VudC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeC5kZXRhaWxzLmtpbmQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi56ZXJvRXg/LmRldGFpbHMua2luZCk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmJyZWFrZG93bi56ZXJvRXguZGV0YWlscy50cmFkZVNpemVCcHMpLnRvRXF1YWwoNCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLm5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcbiAgICAgICAgICAgICAgICBmZWUuY29udmVyc2lvblJhdGVzLm5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZD8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmNvbnZlcnNpb25SYXRlcy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwoXG4gICAgICAgICAgICAgICAgZmVlLmNvbnZlcnNpb25SYXRlcy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2Q/LnRvU3RyaW5nKCksXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMudGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLm1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkKS50b0VxdWFsKFxuICAgICAgICAgICAgICAgIGZlZS5jb252ZXJzaW9uUmF0ZXMubWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q/LnRvU3RyaW5nKCksXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNvbnZlcnQgRmVlIHdpdGggbWFyZ2luIGJhc2VkIGRldGFpbHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gR2l2ZW5cbiAgICAgICAgICAgIGNvbnN0IGZlZTogRmVlV2l0aERldGFpbHMgJiB7IGRldGFpbHM6IE1hcmdpbkJhc2VkRmVlRGV0YWlsc0RlcHJlY2F0ZWQgfSA9IHtcbiAgICAgICAgICAgICAgICB0b2tlbjogJzB4YXRva2VuJyxcbiAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdtYXJnaW4nLFxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXG4gICAgICAgICAgICAgICAgICAgIGdhc0ZlZUFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcbiAgICAgICAgICAgICAgICAgICAgZ2FzUHJpY2U6IG5ldyBCaWdOdW1iZXIoNTApLFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IG5ldyBCaWdOdW1iZXIoNDU3MCksXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpblJha2VSYXRpbzogMC4zNSxcbiAgICAgICAgICAgICAgICAgICAgemVyb0V4RmVlQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcbiAgICAgICAgICAgICAgICAgICAgZmVlVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDNlLTE1KSxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG5ldyBCaWdOdW1iZXIoMWUtMTgpLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuQmFzZVVuaXRQcmljZVVzZDogbnVsbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJyZWFrZG93bjoge1xuICAgICAgICAgICAgICAgICAgICBnYXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXNQcmljZTogbmV3IEJpZ051bWJlcig1MCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXN0aW1hdGVkR2FzOiBuZXcgQmlnTnVtYmVyKDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgemVyb0V4OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdwcmljZV9pbXByb3ZlbWVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VJbXByb3ZlbWVudDogbmV3IEJpZ051bWJlcig0NTcwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWtlUmF0aW86IDAuMzUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udmVyc2lvblJhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzZS0xNSksXG4gICAgICAgICAgICAgICAgICAgIGZlZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzZS0xNSksXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDFlLTE4KSxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIFdoZW5cbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEZlZSA9IGZlZVRvU3RvcmVkRmVlKGZlZSk7XG5cbiAgICAgICAgICAgIC8vIEV4cGVjdFxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS50eXBlKS50b0VxdWFsKGZlZS50eXBlKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUudG9rZW4pLnRvRXF1YWwoZmVlLnRva2VuKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYW1vdW50KS50b0VxdWFsKGZlZS5hbW91bnQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMua2luZCkudG9FcXVhbChmZWUuZGV0YWlscy5raW5kKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5mZWVNb2RlbFZlcnNpb24pLnRvRXF1YWwoZmVlLmRldGFpbHMuZmVlTW9kZWxWZXJzaW9uKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5nYXNGZWVBbW91bnQpLnRvRXF1YWwoZmVlLmRldGFpbHMuZ2FzRmVlQW1vdW50LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLmdhc1ByaWNlKS50b0VxdWFsKGZlZS5kZXRhaWxzLmdhc1ByaWNlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLm1hcmdpbikudG9FcXVhbChmZWUuZGV0YWlscy5tYXJnaW4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMubWFyZ2luUmFrZVJhdGlvKS50b0VxdWFsKGZlZS5kZXRhaWxzLm1hcmdpblJha2VSYXRpbyk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMuemVyb0V4RmVlQW1vdW50KS50b0VxdWFsKGZlZS5kZXRhaWxzLnplcm9FeEZlZUFtb3VudC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwoXG4gICAgICAgICAgICAgICAgZmVlLmRldGFpbHMuZmVlVG9rZW5CYXNlVW5pdFByaWNlVXNkPy50b1N0cmluZygpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy50YWtlclRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcbiAgICAgICAgICAgICAgICBmZWUuZGV0YWlscy50YWtlclRva2VuQmFzZVVuaXRQcmljZVVzZD8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMubWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcblxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uZ2FzLmFtb3VudCkudG9FcXVhbChmZWUuYnJlYWtkb3duLmdhcz8uYW1vdW50LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uZ2FzLmRldGFpbHMuZ2FzUHJpY2UpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmRldGFpbHMuZ2FzUHJpY2UudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmJyZWFrZG93bi5nYXMuZGV0YWlscy5lc3RpbWF0ZWRHYXMpLnRvRXF1YWwoXG4gICAgICAgICAgICAgICAgZmVlLmJyZWFrZG93bi5nYXM/LmRldGFpbHMuZXN0aW1hdGVkR2FzLnRvU3RyaW5nKCksXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uemVyb0V4LmFtb3VudCkudG9FcXVhbChmZWUuYnJlYWtkb3duLnplcm9FeD8uYW1vdW50LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uemVyb0V4LmRldGFpbHMua2luZCkudG9FcXVhbChmZWUuYnJlYWtkb3duLnplcm9FeD8uZGV0YWlscy5raW5kKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeC5kZXRhaWxzLnByaWNlSW1wcm92ZW1lbnQpLnRvRXF1YWwoJzQ1NzAnKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeC5kZXRhaWxzLnJha2VSYXRpbykudG9FcXVhbCgwLjM1KTtcblxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMubmF0aXZlVG9rZW5CYXNlVW5pdFByaWNlVXNkKS50b0VxdWFsKFxuICAgICAgICAgICAgICAgIGZlZS5jb252ZXJzaW9uUmF0ZXMubmF0aXZlVG9rZW5CYXNlVW5pdFByaWNlVXNkPy50b1N0cmluZygpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLmZlZVRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcbiAgICAgICAgICAgICAgICBmZWUuY29udmVyc2lvblJhdGVzLmZlZVRva2VuQmFzZVVuaXRQcmljZVVzZD8udG9TdHJpbmcoKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmNvbnZlcnNpb25SYXRlcy50YWtlclRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcbiAgICAgICAgICAgICAgICBmZWUuY29udmVyc2lvblJhdGVzLnRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkPy50b1N0cmluZygpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLm1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkKS50b0VxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=
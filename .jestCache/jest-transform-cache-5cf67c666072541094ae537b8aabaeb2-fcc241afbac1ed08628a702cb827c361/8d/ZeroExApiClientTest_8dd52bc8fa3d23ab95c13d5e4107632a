40390218a135fa7c343b228c2b3cf90d
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable: custom-no-magic-numbers
const utils_1 = require("@0x/utils");
const axios_1 = require("axios");
const axios_mock_adapter_1 = require("axios-mock-adapter");
const HttpStatus = require("http-status-codes");
const ZeroExApiClient_1 = require("../../src/utils/ZeroExApiClient");
let axiosClient;
let axiosMock;
describe('ZeroExApiClient', () => {
    beforeAll(() => {
        axiosClient = axios_1.default.create();
        axiosMock = new axios_mock_adapter_1.default(axiosClient);
    });
    afterEach(() => {
        axiosMock.reset();
    });
    describe('fetchAmmQuoteAsync', () => {
        it('returns the AMM quote from 0x API', async () => {
            const zeroExApiClient = new ZeroExApiClient_1.ZeroExApiClient(axiosClient, 'api-key-for-rfq', {
                chainId: 1,
                zeroExClientBaseUrl: 'http://0x-chain-id-1',
            });
            axiosMock.onGet('http://0x-chain-id-1/swap/v1/quote').replyOnce(HttpStatus.OK, {
                buyAmount: '2040568023',
                sellAmount: '1000000000000000000',
                estimatedGas: '126183',
                gasPrice: '73000000000',
                expectedSlippage: '-0.0004065694347781162427479482993648',
                decodedUniqueId: 'a-quoteid-with-timestamp',
            });
            const ammQuote = await zeroExApiClient.fetchAmmQuoteAsync({
                makerToken: 'tokenB',
                takerToken: 'tokenA',
                takerAmount: new utils_1.BigNumber('1000000000000000000'),
                affiliateAddress: 'rfq-affiliate-address',
            });
            expect(axiosMock.history.get[0].headers['0x-api-key']).toBe('api-key-for-rfq');
            expect(axiosMock.history.get[0].params).toEqual({
                buyToken: 'tokenB',
                sellToken: 'tokenA',
                sellAmount: '1000000000000000000',
                affiliateAddress: 'rfq-affiliate-address',
                excludedSources: '0x',
            });
            expect(ammQuote === null || ammQuote === void 0 ? void 0 : ammQuote.makerAmount.toString()).toEqual('2040568023');
            expect(ammQuote === null || ammQuote === void 0 ? void 0 : ammQuote.takerAmount.toString()).toEqual('1000000000000000000');
            expect(ammQuote === null || ammQuote === void 0 ? void 0 : ammQuote.estimatedGasFeeWei.toString()).toEqual('9211359000000000');
            expect(ammQuote === null || ammQuote === void 0 ? void 0 : ammQuote.expectedSlippage.toString()).toEqual('-0.0004065694347781162427479482993648');
            expect(ammQuote === null || ammQuote === void 0 ? void 0 : ammQuote.decodedUniqueId).toEqual('a-quoteid-with-timestamp');
        });
        it('returns null when 0x API returns an error', async () => {
            const zeroExApiClient = new ZeroExApiClient_1.ZeroExApiClient(axiosClient, 'api-key-for-rfq', {
                chainId: 1,
                zeroExClientBaseUrl: 'http://0x-chain-id-1',
            });
            axiosMock.onGet('http://0x-chain-id-1/swap/v1/quote').replyOnce(HttpStatus.INTERNAL_SERVER_ERROR);
            const ammQuote = await zeroExApiClient.fetchAmmQuoteAsync({
                makerToken: 'tokenB',
                takerToken: 'tokenA',
                takerAmount: new utils_1.BigNumber('1000000000000000000'),
            });
            expect(ammQuote).toEqual(null);
        });
        it('returns null when 0x API returns unexpected response body', async () => {
            const zeroExApiClient = new ZeroExApiClient_1.ZeroExApiClient(axiosClient, 'api-key-for-rfq', {
                chainId: 1,
                zeroExClientBaseUrl: 'http://0x-chain-id-1',
            });
            axiosMock.onGet('http://0x-chain-id-1/swap/v1/quote').replyOnce(HttpStatus.OK, {
                // Missing buyAmount
                sellAmount: '1000000000000000000',
                estimatedGas: '126183',
                gasPrice: '73000000000',
                expectedSlippage: '-0.0004065694347781162427479482993648',
                decodedUniqueId: 'a-quoteid-with-timestamp',
            });
            const ammQuote = await zeroExApiClient.fetchAmmQuoteAsync({
                makerToken: 'tokenB',
                takerToken: 'tokenA',
                takerAmount: new utils_1.BigNumber('1000000000000000000'),
            });
            expect(ammQuote).toEqual(null);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3QvdXRpbHMvWmVyb0V4QXBpQ2xpZW50VGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDBDQUEwQztBQUMxQyxxQ0FBc0M7QUFDdEMsaUNBQTZDO0FBQzdDLDJEQUFrRDtBQUNsRCxnREFBZ0Q7QUFFaEQscUVBQWtFO0FBRWxFLElBQUksV0FBMEIsQ0FBQztBQUMvQixJQUFJLFNBQTJCLENBQUM7QUFFaEMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUM3QixTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ1gsV0FBVyxHQUFHLGVBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUM3QixTQUFTLEdBQUcsSUFBSSw0QkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDWCxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDdEIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO1FBQ2hDLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMvQyxNQUFNLGVBQWUsR0FBRyxJQUFJLGlDQUFlLENBQUMsV0FBVyxFQUFFLGlCQUFpQixFQUFFO2dCQUN4RSxPQUFPLEVBQUUsQ0FBQztnQkFDVixtQkFBbUIsRUFBRSxzQkFBc0I7YUFDOUMsQ0FBQyxDQUFDO1lBRUgsU0FBUyxDQUFDLEtBQUssQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFO2dCQUMzRSxTQUFTLEVBQUUsWUFBWTtnQkFDdkIsVUFBVSxFQUFFLHFCQUFxQjtnQkFDakMsWUFBWSxFQUFFLFFBQVE7Z0JBQ3RCLFFBQVEsRUFBRSxhQUFhO2dCQUN2QixnQkFBZ0IsRUFBRSx1Q0FBdUM7Z0JBQ3pELGVBQWUsRUFBRSwwQkFBMEI7YUFDOUMsQ0FBQyxDQUFDO1lB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LFFBQVE7Z0JBQ3RCLFFBQVEsRUFBRSxhQUFhO2dCQUN2QixnQkFBZ0IsRUFBRSx1Q0FBdUM7Z0JBQ3pELGVBQWUsRUFBRSwwQkFBMEI7YUFDOUMsQ0FBQyxDQUFDO1lBRUgsTUFBTSxRQUFRLEdBQUcsTUFBTSxlQUFlLENBQUMsa0JBQWtCLENBQUM7Z0JBQ3RELFVBQVUsRUFBRSxRQUFRO2dCQUNwQixVQUFVLEVBQUUsUUFBUTtnQkFDcEIsV0FBVyxFQUFFLElBQUksaUJBQVMsQ0FBQyxxQkFBcUIsQ0FBQzthQUNwRCxDQUFDLENBQUM7WUFDSCxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZGF2aWR3YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvdGVzdC91dGlscy9aZXJvRXhBcGlDbGllbnRUZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHRzbGludDpkaXNhYmxlOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xuaW1wb3J0IHsgQmlnTnVtYmVyIH0gZnJvbSAnQDB4L3V0aWxzJztcbmltcG9ydCBBeGlvcywgeyBBeGlvc0luc3RhbmNlIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IEF4aW9zTW9ja0FkYXB0ZXIgZnJvbSAnYXhpb3MtbW9jay1hZGFwdGVyJztcbmltcG9ydCAqIGFzIEh0dHBTdGF0dXMgZnJvbSAnaHR0cC1zdGF0dXMtY29kZXMnO1xuXG5pbXBvcnQgeyBaZXJvRXhBcGlDbGllbnQgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvWmVyb0V4QXBpQ2xpZW50JztcblxubGV0IGF4aW9zQ2xpZW50OiBBeGlvc0luc3RhbmNlO1xubGV0IGF4aW9zTW9jazogQXhpb3NNb2NrQWRhcHRlcjtcblxuZGVzY3JpYmUoJ1plcm9FeEFwaUNsaWVudCcsICgpID0+IHtcbiAgICBiZWZvcmVBbGwoKCkgPT4ge1xuICAgICAgICBheGlvc0NsaWVudCA9IEF4aW9zLmNyZWF0ZSgpO1xuICAgICAgICBheGlvc01vY2sgPSBuZXcgQXhpb3NNb2NrQWRhcHRlcihheGlvc0NsaWVudCk7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgICBheGlvc01vY2sucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdmZXRjaEFtbVF1b3RlQXN5bmMnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdyZXR1cm5zIHRoZSBBTU0gcXVvdGUgZnJvbSAweCBBUEknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB6ZXJvRXhBcGlDbGllbnQgPSBuZXcgWmVyb0V4QXBpQ2xpZW50KGF4aW9zQ2xpZW50LCAnYXBpLWtleS1mb3ItcmZxJywge1xuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXG4gICAgICAgICAgICAgICAgemVyb0V4Q2xpZW50QmFzZVVybDogJ2h0dHA6Ly8weC1jaGFpbi1pZC0xJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBheGlvc01vY2sub25HZXQoJ2h0dHA6Ly8weC1jaGFpbi1pZC0xL3N3YXAvdjEvcXVvdGUnKS5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywge1xuICAgICAgICAgICAgICAgIGJ1eUFtb3VudDogJzIwNDA1NjgwMjMnLFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6ICcxMDAwMDAwMDAwMDAwMDAwMDAwJyxcbiAgICAgICAgICAgICAgICBlc3RpbWF0ZWRHYXM6ICcxMjYxODMnLFxuICAgICAgICAgICAgICAgIGdhc1ByaWNlOiAnNzMwMDAwMDAwMDAnLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkU2xpcHBhZ2U6ICctMC4wMDA0MDY1Njk0MzQ3NzgxMTYyNDI3NDc5NDgyOTkzNjQ4JyxcbiAgICAgICAgICAgICAgICBkZWNvZGVkVW5pcXVlSWQ6ICdhLXF1b3RlaWQtd2l0aC10aW1lc3RhbXAnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFtbVF1b3RlID0gYXdhaXQgemVyb0V4QXBpQ2xpZW50LmZldGNoQW1tUXVvdGVBc3luYyh7XG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJ3Rva2VuQicsXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJ3Rva2VuQScsXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzEwMDAwMDAwMDAwMDAwMDAwMDAnKSxcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAncmZxLWFmZmlsaWF0ZS1hZGRyZXNzJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBleHBlY3QoYXhpb3NNb2NrLmhpc3RvcnkuZ2V0WzBdLmhlYWRlcnNbJzB4LWFwaS1rZXknXSkudG9CZSgnYXBpLWtleS1mb3ItcmZxJyk7XG4gICAgICAgICAgICBleHBlY3QoYXhpb3NNb2NrLmhpc3RvcnkuZ2V0WzBdLnBhcmFtcykudG9FcXVhbCh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICd0b2tlbkInLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ3Rva2VuQScsXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudDogJzEwMDAwMDAwMDAwMDAwMDAwMDAnLFxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICdyZnEtYWZmaWxpYXRlLWFkZHJlc3MnLFxuICAgICAgICAgICAgICAgIGV4Y2x1ZGVkU291cmNlczogJzB4JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXhwZWN0KGFtbVF1b3RlPy5tYWtlckFtb3VudC50b1N0cmluZygpKS50b0VxdWFsKCcyMDQwNTY4MDIzJyk7XG4gICAgICAgICAgICBleHBlY3QoYW1tUXVvdGU/LnRha2VyQW1vdW50LnRvU3RyaW5nKCkpLnRvRXF1YWwoJzEwMDAwMDAwMDAwMDAwMDAwMDAnKTtcbiAgICAgICAgICAgIGV4cGVjdChhbW1RdW90ZT8uZXN0aW1hdGVkR2FzRmVlV2VpLnRvU3RyaW5nKCkpLnRvRXF1YWwoJzkyMTEzNTkwMDAwMDAwMDAnKTtcbiAgICAgICAgICAgIGV4cGVjdChhbW1RdW90ZT8uZXhwZWN0ZWRTbGlwcGFnZS50b1N0cmluZygpKS50b0VxdWFsKCctMC4wMDA0MDY1Njk0MzQ3NzgxMTYyNDI3NDc5NDgyOTkzNjQ4Jyk7XG4gICAgICAgICAgICBleHBlY3QoYW1tUXVvdGU/LmRlY29kZWRVbmlxdWVJZCkudG9FcXVhbCgnYS1xdW90ZWlkLXdpdGgtdGltZXN0YW1wJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdyZXR1cm5zIG51bGwgd2hlbiAweCBBUEkgcmV0dXJucyBhbiBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHplcm9FeEFwaUNsaWVudCA9IG5ldyBaZXJvRXhBcGlDbGllbnQoYXhpb3NDbGllbnQsICdhcGkta2V5LWZvci1yZnEnLCB7XG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcbiAgICAgICAgICAgICAgICB6ZXJvRXhDbGllbnRCYXNlVXJsOiAnaHR0cDovLzB4LWNoYWluLWlkLTEnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGF4aW9zTW9jay5vbkdldCgnaHR0cDovLzB4LWNoYWluLWlkLTEvc3dhcC92MS9xdW90ZScpLnJlcGx5T25jZShIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUik7XG5cbiAgICAgICAgICAgIGNvbnN0IGFtbVF1b3RlID0gYXdhaXQgemVyb0V4QXBpQ2xpZW50LmZldGNoQW1tUXVvdGVBc3luYyh7XG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJ3Rva2VuQicsXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJ3Rva2VuQScsXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzEwMDAwMDAwMDAwMDAwMDAwMDAnKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXhwZWN0KGFtbVF1b3RlKS50b0VxdWFsKG51bGwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgncmV0dXJucyBudWxsIHdoZW4gMHggQVBJIHJldHVybnMgdW5leHBlY3RlZCByZXNwb25zZSBib2R5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgemVyb0V4QXBpQ2xpZW50ID0gbmV3IFplcm9FeEFwaUNsaWVudChheGlvc0NsaWVudCwgJ2FwaS1rZXktZm9yLXJmcScsIHtcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxuICAgICAgICAgICAgICAgIHplcm9FeENsaWVudEJhc2VVcmw6ICdodHRwOi8vMHgtY2hhaW4taWQtMScsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXhpb3NNb2NrLm9uR2V0KCdodHRwOi8vMHgtY2hhaW4taWQtMS9zd2FwL3YxL3F1b3RlJykucmVwbHlPbmNlKEh0dHBTdGF0dXMuT0ssIHtcbiAgICAgICAgICAgICAgICAvLyBNaXNzaW5nIGJ1eUFtb3VudFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6ICcxMDAwMDAwMDAwMDAwMDAwMDAwJyxcbiAgICAgICAgICAgICAgICBlc3RpbWF0ZWRHYXM6ICcxMjYxODMnLFxuICAgICAgICAgICAgICAgIGdhc1ByaWNlOiAnNzMwMDAwMDAwMDAnLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkU2xpcHBhZ2U6ICctMC4wMDA0MDY1Njk0MzQ3NzgxMTYyNDI3NDc5NDgyOTkzNjQ4JyxcbiAgICAgICAgICAgICAgICBkZWNvZGVkVW5pcXVlSWQ6ICdhLXF1b3RlaWQtd2l0aC10aW1lc3RhbXAnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFtbVF1b3RlID0gYXdhaXQgemVyb0V4QXBpQ2xpZW50LmZldGNoQW1tUXVvdGVBc3luYyh7XG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJ3Rva2VuQicsXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJ3Rva2VuQScsXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzEwMDAwMDAwMDAwMDAwMDAwMDAnKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXhwZWN0KGFtbVF1b3RlKS50b0VxdWFsKG51bGwpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9
{"file":"/Users/davidwalsh/code-local/0x-rfq-api/test/test_utils/initDbDataSourceAsync.ts","mappings":";;;AAEA,yEAAsE;AAEtE;;;GAGG;AACH,6DAA6D;AAC7D,kEAAkE;AAC3D,KAAK,UAAU,qBAAqB,CAAC,OAAe,IAAI;IAC3D,MAAM,UAAU,GAAG,MAAM,IAAA,2CAAoB,EAAC,gCAAgC,IAAI,MAAM,CAAC,CAAC;IAC1F,MAAM,UAAU,CAAC,KAAK,CAAC,yCAAyC,CAAC,CAAC,CAAC,oDAAoD;IACvH,MAAM,UAAU,CAAC,KAAK,CAAC,4CAA4C,CAAC,CAAC,CAAC,mDAAmD;IACzH,MAAM,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IACnC,OAAO,UAAU,CAAC;AACtB,CAAC;AAND,sDAMC","names":[],"sources":["/Users/davidwalsh/code-local/0x-rfq-api/test/test_utils/initDbDataSourceAsync.ts"],"sourcesContent":["import { DataSource } from 'typeorm';\n\nimport { getDbDataSourceAsync } from '../../src/getDbDataSourceAsync';\n\n/**\n * Get the DB connection and initialize it by installing extension and synchronize schemas\n * @returns db connection\n */\n// $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me\n// eslint-disable-next-line @typescript-eslint/no-inferrable-types\nexport async function initDbDataSourceAsync(port: number = 5432): Promise<DataSource> {\n    const dataSource = await getDbDataSourceAsync(`postgres://api:api@localhost:${port}/api`);\n    await dataSource.query(`CREATE EXTENSION IF NOT EXISTS pgcrypto`); // used by view `rfq_maker_pairs_update_time_hashes`\n    await dataSource.query(`CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\"`); // used by `meta_transaction_jobs` to generate uuid\n    await dataSource.synchronize(true);\n    return dataSource;\n}\n"],"version":3}
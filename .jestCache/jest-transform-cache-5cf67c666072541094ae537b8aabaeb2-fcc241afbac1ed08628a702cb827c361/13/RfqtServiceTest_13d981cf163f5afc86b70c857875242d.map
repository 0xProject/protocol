{"file":"/Users/davidwalsh/code-local/0x-rfq-api/test/services/RfqtServiceTest.ts","mappings":"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","names":[],"sources":["/Users/davidwalsh/code-local/0x-rfq-api/test/services/RfqtServiceTest.ts"],"sourcesContent":["// tslint:disable custom-no-magic-numbers max-file-line-count\nimport { getContractAddressesForChainOrThrow } from '@0x/contract-addresses';\nimport { OtcOrder } from '@0x/protocol-utils';\nimport { Signature, SignatureType } from '@0x/protocol-utils/lib/src/signature_utils';\nimport { TokenMetadata } from '@0x/token-metadata';\nimport { MarketOperation } from '@0x/types';\nimport { BigNumber } from '@0x/utils';\nimport { AxiosInstance } from 'axios';\n\nimport { Integrator } from '../../src/config';\nimport { DEFAULT_MIN_EXPIRY_DURATION_MS, NULL_ADDRESS, ONE_SECOND_MS } from '../../src/core/constants';\nimport { RfqMaker } from '../../src/entities';\nimport { QuoteRequestor } from '../../src/quoteRequestor/QuoteRequestor';\nimport { FeeService } from '../../src/services/fee_service';\nimport { RfqtService } from '../../src/services/RfqtService';\nimport { RfqMakerBalanceCacheService } from '../../src/services/rfq_maker_balance_cache_service';\nimport { FirmQuoteContext, QuoteContext } from '../../src/services/types';\nimport { IndicativeQuote } from '../../src/core/types';\nimport { CacheClient } from '../../src/utils/cache_client';\nimport { ConfigManager } from '../../src/utils/config_manager';\nimport { GasStationAttendant } from '../../src/utils/GasStationAttendant';\nimport { QuoteServerClient } from '../../src/utils/quote_server_client';\nimport { RfqBalanceCheckUtils, RfqBlockchainUtils } from '../../src/utils/rfq_blockchain_utils';\nimport { RfqMakerDbUtils } from '../../src/utils/rfq_maker_db_utils';\nimport { RfqMakerAssetOfferings, RfqMakerManager } from '../../src/utils/rfq_maker_manager';\nimport { TokenMetadataManager } from '../../src/utils/TokenMetadataManager';\nimport { TokenPriceOracle } from '../../src/utils/TokenPriceOracle';\nimport { ZeroExApiClient } from '../../src/utils/ZeroExApiClient';\n\njest.mock('../../src/utils/rfq_maker_manager', () => ({\n    RfqMakerManager: jest.fn().mockImplementation(() => {\n        return {\n            getRfqtV2MakersForPair: jest.fn(),\n        };\n    }),\n}));\n\njest.mock('../../src/quoteRequestor/QuoteRequestor', () => ({\n    QuoteRequestor: jest.fn().mockImplementation(() => {\n        return {\n            requestRfqtIndicativeQuotesAsync: jest.fn().mockResolvedValue([]),\n            requestRfqtFirmQuotesAsync: jest.fn().mockResolvedValue([]),\n        };\n    }),\n}));\n\njest.mock('../../src/utils/quote_server_client', () => ({\n    QuoteServerClient: jest.fn().mockImplementation(() => {\n        return {\n            batchGetPriceV2Async: jest.fn().mockResolvedValue([]),\n        };\n    }),\n}));\n\njest.mock('../../src/services/rfq_maker_balance_cache_service', () => ({\n    RfqMakerBalanceCacheService: jest.fn().mockImplementation(() => {\n        return {\n            getERC20OwnerBalancesAsync: jest.fn().mockResolvedValue([]),\n        };\n    }),\n}));\n\n// TODO (rhinodavid): Find a better way to initialize mocked classes\nconst mockQuoteRequestor = jest.mocked(new QuoteRequestor({} as RfqMakerAssetOfferings, {} as AxiosInstance));\nconst mockRfqMakerManager = jest.mocked(new RfqMakerManager({} as ConfigManager, {} as RfqMakerDbUtils, 0));\nconst mockQuoteServerClient = jest.mocked(new QuoteServerClient({} as AxiosInstance));\nconst mockFeeService = jest.mocked(\n    new FeeService(\n        1337,\n        {} as TokenMetadata,\n        {} as ConfigManager,\n        {} as GasStationAttendant,\n        {} as TokenPriceOracle,\n        {} as ZeroExApiClient,\n        DEFAULT_MIN_EXPIRY_DURATION_MS,\n    ),\n);\nconst mockRfqBlockchainUtils = jest.mocked({} as RfqBlockchainUtils);\nconst mockTokenMetadataManager = jest.mocked(new TokenMetadataManager(1337, {} as RfqBlockchainUtils));\n// tslint:enable: no-object-literal-type-assertion\nconst mockContractAddresses = getContractAddressesForChainOrThrow(1337);\nconst mockRfqMakerBalanceCacheService = jest.mocked(\n    new RfqMakerBalanceCacheService({} as CacheClient, {} as RfqBalanceCheckUtils),\n);\nconst mockCacheClient = jest.mocked({} as CacheClient);\n\ndescribe('Rfqt Service', () => {\n    beforeEach(() => {\n        mockQuoteRequestor.requestRfqtFirmQuotesAsync.mockClear();\n        mockQuoteRequestor.requestRfqtIndicativeQuotesAsync.mockClear();\n        mockQuoteServerClient.batchGetPriceV2Async.mockClear();\n        mockRfqMakerManager.getRfqtV2MakersForPair.mockClear();\n        mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync.mockClear();\n    });\n    describe('v1', () => {\n        describe('getV1PricesAsync', () => {\n            it('passes through calls to QuoteRequestor::requestRfqtIndicativeQuotesAsync', async () => {\n                const rfqtService = new RfqtService(\n                    0,\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                await rfqtService.getV1PricesAsync({\n                    altRfqAssetOfferings: {\n                        'alt-mm': [\n                            {\n                                id: 'id',\n                                baseAsset: '0xbaseasset',\n                                quoteAsset: '0xquoteasset',\n                                baseAssetDecimals: 420,\n                                quoteAssetDecimals: 69,\n                            },\n                        ],\n                    },\n                    assetFillAmount: new BigNumber(111),\n                    comparisonPrice: new BigNumber(666),\n                    makerToken: '0xmakertoken',\n                    marketOperation: MarketOperation.Buy,\n                    takerAddress: '0xtakeraddress',\n                    takerToken: '0xtakertoken',\n                    intentOnFilling: false,\n                    integrator: {\n                        apiKeys: [],\n                        allowedChainIds: [],\n                        integratorId: 'uuid-integrator',\n                        plp: false,\n                        rfqm: false,\n                        rfqt: true,\n                        label: 'Scam Integrator 1',\n                    },\n                    txOrigin: '0xtxorigin',\n                });\n\n                const args = mockQuoteRequestor.requestRfqtIndicativeQuotesAsync.mock.calls[0];\n                expect(args).toMatchInlineSnapshot(`\n                    Array [\n                      \"0xmakertoken\",\n                      \"0xtakertoken\",\n                      \"111\",\n                      \"Buy\",\n                      \"666\",\n                      Object {\n                        \"altRfqAssetOfferings\": Object {\n                          \"alt-mm\": Array [\n                            Object {\n                              \"baseAsset\": \"0xbaseasset\",\n                              \"baseAssetDecimals\": 420,\n                              \"id\": \"id\",\n                              \"quoteAsset\": \"0xquoteasset\",\n                              \"quoteAssetDecimals\": 69,\n                            },\n                          ],\n                        },\n                        \"integrator\": Object {\n                          \"allowedChainIds\": Array [],\n                          \"apiKeys\": Array [],\n                          \"integratorId\": \"uuid-integrator\",\n                          \"label\": \"Scam Integrator 1\",\n                          \"plp\": false,\n                          \"rfqm\": false,\n                          \"rfqt\": true,\n                        },\n                        \"intentOnFilling\": false,\n                        \"isIndicative\": true,\n                        \"isLastLook\": false,\n                        \"makerEndpointMaxResponseTimeMs\": 600,\n                        \"takerAddress\": \"0xtakeraddress\",\n                        \"txOrigin\": \"0xtxorigin\",\n                      },\n                    ]\n                `);\n            });\n        });\n        describe('getV1QuotesAsync', () => {\n            it('passes through calls to QuoteRequestor::requestRfqtFirmQuotesAsync', async () => {\n                mockQuoteRequestor.requestRfqtFirmQuotesAsync.mockResolvedValue([]);\n                const rfqtService = new RfqtService(\n                    0,\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                await rfqtService.getV1QuotesAsync({\n                    altRfqAssetOfferings: {\n                        'alt-mm': [\n                            {\n                                id: 'id',\n                                baseAsset: '0xbaseasset',\n                                quoteAsset: '0xquoteasset',\n                                baseAssetDecimals: 420,\n                                quoteAssetDecimals: 69,\n                            },\n                        ],\n                    },\n                    assetFillAmount: new BigNumber(111),\n                    comparisonPrice: new BigNumber(666),\n                    makerToken: '0xmakertoken',\n                    marketOperation: MarketOperation.Buy,\n                    takerAddress: '0xtakeraddress',\n                    takerToken: '0xtakertoken',\n                    intentOnFilling: false,\n                    integrator: {\n                        allowedChainIds: [],\n                        apiKeys: [],\n                        integratorId: 'uuid-integrator',\n                        plp: false,\n                        rfqm: false,\n                        rfqt: true,\n                        label: 'Scam Integrator 1',\n                    },\n                    txOrigin: '0xtxorigin',\n                });\n\n                const args = mockQuoteRequestor.requestRfqtFirmQuotesAsync.mock.calls[0];\n                expect(args).toMatchInlineSnapshot(`\n                    Array [\n                      \"0xmakertoken\",\n                      \"0xtakertoken\",\n                      \"111\",\n                      \"Buy\",\n                      \"666\",\n                      Object {\n                        \"altRfqAssetOfferings\": Object {\n                          \"alt-mm\": Array [\n                            Object {\n                              \"baseAsset\": \"0xbaseasset\",\n                              \"baseAssetDecimals\": 420,\n                              \"id\": \"id\",\n                              \"quoteAsset\": \"0xquoteasset\",\n                              \"quoteAssetDecimals\": 69,\n                            },\n                          ],\n                        },\n                        \"integrator\": Object {\n                          \"allowedChainIds\": Array [],\n                          \"apiKeys\": Array [],\n                          \"integratorId\": \"uuid-integrator\",\n                          \"label\": \"Scam Integrator 1\",\n                          \"plp\": false,\n                          \"rfqm\": false,\n                          \"rfqt\": true,\n                        },\n                        \"intentOnFilling\": false,\n                        \"isIndicative\": false,\n                        \"isLastLook\": false,\n                        \"makerEndpointMaxResponseTimeMs\": 600,\n                        \"takerAddress\": \"0xtakeraddress\",\n                        \"txOrigin\": \"0xtxorigin\",\n                      },\n                    ]\n                `);\n            });\n        });\n    });\n    describe('v2', () => {\n        const maker = new RfqMaker({\n            makerId: 'maker-id',\n            chainId: 1337,\n            updatedAt: new Date(),\n            pairs: [['0x1', '0x2']],\n            rfqmUri: null,\n            rfqtUri: 'maker.uri',\n        });\n        const integrator: Integrator = {\n            allowedChainIds: [1337], // tslint:disable-line: custom-no-magic-numbers\n            apiKeys: [],\n            integratorId: 'integrator-id',\n            label: 'test integrator',\n            plp: false,\n            rfqm: false,\n            rfqt: true,\n        };\n        describe('getV2PricesAsync', () => {\n            it('transforms the API request into a quote server client request for buys', async () => {\n                const quoteContext: QuoteContext = {\n                    isFirm: false,\n                    workflow: 'rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken: '0x1',\n                    isSelling: false,\n                    takerAddress: '0x0',\n                    takerToken: '0x2',\n                    txOrigin: '0xtakeraddress',\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                await rfqtService.getV2PricesAsync(quoteContext);\n\n                expect(mockQuoteServerClient.batchGetPriceV2Async.mock.calls[0]).toMatchInlineSnapshot(`\n                  Array [\n                    Array [\n                      \"maker.uri\",\n                    ],\n                    Object {\n                      \"allowedChainIds\": Array [\n                        1337,\n                      ],\n                      \"apiKeys\": Array [],\n                      \"integratorId\": \"integrator-id\",\n                      \"label\": \"test integrator\",\n                      \"plp\": false,\n                      \"rfqm\": false,\n                      \"rfqt\": true,\n                    },\n                    Object {\n                      \"buyAmountBaseUnits\": \"1000\",\n                      \"buyTokenAddress\": \"0x1\",\n                      \"chainId\": \"1337\",\n                      \"feeAmount\": \"100\",\n                      \"feeToken\": \"0x0b1ba0af832d7c05fd64161e0db78e85978e8082\",\n                      \"integratorId\": \"integrator-id\",\n                      \"protocolVersion\": \"4\",\n                      \"sellTokenAddress\": \"0x2\",\n                      \"takerAddress\": \"0x0\",\n                      \"txOrigin\": \"0xtakeraddress\",\n                    },\n                    [Function],\n                  ]\n                `);\n            });\n            it('[workflow: gasless-rfqt] transforms the API request into a quote server client request for buys', async () => {\n                const quoteContext: QuoteContext = {\n                    isFirm: false,\n                    workflow: 'gasless-rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken: '0x1',\n                    isSelling: false,\n                    takerAddress: '0x0',\n                    takerToken: '0x2',\n                    txOrigin: '0xtakeraddress',\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                await rfqtService.getV2PricesAsync(quoteContext);\n\n                expect(mockQuoteServerClient.batchGetPriceV2Async.mock.calls[0]).toMatchInlineSnapshot(`\n                  Array [\n                    Array [\n                      \"maker.uri\",\n                    ],\n                    Object {\n                      \"allowedChainIds\": Array [\n                        1337,\n                      ],\n                      \"apiKeys\": Array [],\n                      \"integratorId\": \"integrator-id\",\n                      \"label\": \"test integrator\",\n                      \"plp\": false,\n                      \"rfqm\": false,\n                      \"rfqt\": true,\n                    },\n                    Object {\n                      \"buyAmountBaseUnits\": \"1000\",\n                      \"buyTokenAddress\": \"0x1\",\n                      \"chainId\": \"1337\",\n                      \"feeAmount\": \"100\",\n                      \"feeToken\": \"0x0b1ba0af832d7c05fd64161e0db78e85978e8082\",\n                      \"integratorId\": \"integrator-id\",\n                      \"protocolVersion\": \"4\",\n                      \"sellTokenAddress\": \"0x2\",\n                      \"takerAddress\": \"0x0\",\n                      \"txOrigin\": \"0xtakeraddress\",\n                    },\n                    [Function],\n                  ]\n                `);\n            });\n            it('transforms the API request into a quote server client request for sells', async () => {\n                const quoteContext: QuoteContext = {\n                    isFirm: false,\n                    workflow: 'rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken: '0x1',\n                    isSelling: true,\n                    takerAddress: '0x0',\n                    takerToken: '0x2',\n                    txOrigin: '0xtakeraddress',\n                };\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                await rfqtService.getV2PricesAsync(quoteContext);\n\n                expect(mockQuoteServerClient.batchGetPriceV2Async.mock.calls[0]).toMatchInlineSnapshot(`\n                  Array [\n                    Array [\n                      \"maker.uri\",\n                    ],\n                    Object {\n                      \"allowedChainIds\": Array [\n                        1337,\n                      ],\n                      \"apiKeys\": Array [],\n                      \"integratorId\": \"integrator-id\",\n                      \"label\": \"test integrator\",\n                      \"plp\": false,\n                      \"rfqm\": false,\n                      \"rfqt\": true,\n                    },\n                    Object {\n                      \"buyTokenAddress\": \"0x1\",\n                      \"chainId\": \"1337\",\n                      \"feeAmount\": \"100\",\n                      \"feeToken\": \"0x0b1ba0af832d7c05fd64161e0db78e85978e8082\",\n                      \"integratorId\": \"integrator-id\",\n                      \"protocolVersion\": \"4\",\n                      \"sellAmountBaseUnits\": \"1000\",\n                      \"sellTokenAddress\": \"0x2\",\n                      \"takerAddress\": \"0x0\",\n                      \"txOrigin\": \"0xtakeraddress\",\n                    },\n                    [Function],\n                  ]\n              `);\n            });\n            it('gets prices', async () => {\n                const quoteContext: QuoteContext = {\n                    isFirm: false,\n                    workflow: 'rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken: '0x1',\n                    isSelling: true,\n                    takerAddress: '0x0',\n                    takerToken: '0x2',\n                    txOrigin: '0xtakeraddress',\n                };\n\n                const price: IndicativeQuote = {\n                    // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me\n                    // eslint-disable-next-line @typescript-eslint/no-loss-of-precision\n                    expiry: new BigNumber(9999999999999999),\n                    maker: '0xmakeraddress',\n                    makerAmount: new BigNumber(1000),\n                    makerToken: '0x1',\n                    makerUri: 'maker.uri',\n                    takerAmount: new BigNumber(1001),\n                    takerToken: '0x2',\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([price]);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                const result = await rfqtService.getV2PricesAsync(quoteContext);\n                expect(result.length).toEqual(1);\n                expect(result[0].makerId).toEqual('maker-id');\n                expect(result[0]).toMatchInlineSnapshot(`\n                  Object {\n                    \"expiry\": \"10000000000000000\",\n                    \"makerAddress\": \"0xmakeraddress\",\n                    \"makerAmount\": \"1000\",\n                    \"makerId\": \"maker-id\",\n                    \"makerToken\": \"0x1\",\n                    \"makerUri\": \"maker.uri\",\n                    \"takerAmount\": \"1001\",\n                    \"takerToken\": \"0x2\",\n                  }\n                `);\n            });\n            it('gets prices from whitelisted makers only', async () => {\n                const quoteContext: QuoteContext = {\n                    isFirm: false,\n                    workflow: 'rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator: {\n                        ...integrator,\n                        whitelistMakerIds: ['maker1'],\n                    },\n                    makerToken: '0x1',\n                    isSelling: true,\n                    takerAddress: '0x0',\n                    takerToken: '0x2',\n                    txOrigin: '0xtakeraddress',\n                };\n\n                const price: IndicativeQuote = {\n                    // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me\n                    // eslint-disable-next-line @typescript-eslint/no-loss-of-precision\n                    expiry: new BigNumber(9999999999999999),\n                    maker: '0xmakeraddress',\n                    makerAmount: new BigNumber(1000),\n                    makerToken: '0x1',\n                    makerUri: 'maker.uri',\n                    takerAmount: new BigNumber(1001),\n                    takerToken: '0x2',\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([\n                    {\n                        ...maker,\n                        makerId: 'maker1',\n                    },\n                    {\n                        ...maker,\n                        makerId: 'maker2',\n                    },\n                ]);\n                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([price]);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                const result = await rfqtService.getV2PricesAsync(quoteContext);\n                expect(result.length).toEqual(1);\n                expect(result[0].makerId).toEqual('maker1');\n                expect(result[0]).toMatchInlineSnapshot(`\n                  Object {\n                    \"expiry\": \"10000000000000000\",\n                    \"makerAddress\": \"0xmakeraddress\",\n                    \"makerAmount\": \"1000\",\n                    \"makerId\": \"maker1\",\n                    \"makerToken\": \"0x1\",\n                    \"makerUri\": \"maker.uri\",\n                    \"takerAmount\": \"1001\",\n                    \"takerToken\": \"0x2\",\n                  }\n                `);\n            });\n        });\n        describe('getV2QuotesAsync', () => {\n            const makerToken = '0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE';\n            const makerAddress = '0x79b7a69d90c82E014Bf0315e164208119B510FA0';\n            const takerToken = '0x42d6622deCe394b54999Fbd73D108123806f6a18';\n            const takerAddress = '0xE06fFA8146bBdECcBaaF72B6043b29091071AEB8';\n            const fakeNow = new Date(1657069278103);\n            const expiry = new BigNumber(fakeNow.getTime() + 1_000_000).dividedBy(ONE_SECOND_MS).decimalPlaces(0);\n\n            mockRfqBlockchainUtils.isValidOrderSignerAsync = jest.fn().mockResolvedValue(true);\n            it('filters out quotes with no signatures', async () => {\n                const quoteContext: FirmQuoteContext = {\n                    isFirm: true,\n                    workflow: 'rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken,\n                    isSelling: false,\n                    takerAddress,\n                    trader: takerAddress,\n                    takerToken,\n                    txOrigin: takerAddress,\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([\n                    {\n                        maker: makerAddress,\n                        makerUri: maker.rfqtUri,\n                        makerToken,\n                        takerToken,\n                        makerAmount: new BigNumber(999),\n                        takerAmount: new BigNumber(1000),\n                        expiry,\n                    },\n                ]);\n                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(undefined);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                const result = await rfqtService.getV2QuotesAsync(quoteContext);\n\n                expect(result.length).toEqual(0);\n            });\n\n            it(\"doesn't blow up if a sign request fails\", async () => {\n                const quoteContext: FirmQuoteContext = {\n                    isFirm: true,\n                    workflow: 'rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken,\n                    isSelling: false,\n                    takerAddress,\n                    trader: takerAddress,\n                    takerToken,\n                    txOrigin: takerAddress,\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([\n                    {\n                        maker: makerAddress,\n                        makerUri: maker.rfqtUri,\n                        makerToken,\n                        takerToken,\n                        makerAmount: new BigNumber(999),\n                        takerAmount: new BigNumber(1000),\n                        expiry,\n                    },\n                ]);\n                mockQuoteServerClient.signV2Async = jest.fn().mockRejectedValue(new Error('EXPLODE'));\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                const result = await rfqtService.getV2QuotesAsync(quoteContext);\n\n                expect(result.length).toEqual(0);\n            });\n\n            it('[workflow: rfqt] creates orders with unique nonces', async () => {\n                const quoteContext: FirmQuoteContext = {\n                    isFirm: true,\n                    workflow: 'rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken,\n                    isSelling: false,\n                    takerAddress,\n                    trader: takerAddress,\n                    takerToken,\n                    txOrigin: takerAddress,\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([\n                    {\n                        maker: makerAddress,\n                        makerUri: maker.rfqtUri,\n                        makerToken,\n                        takerToken,\n                        makerAmount: new BigNumber(999),\n                        takerAmount: new BigNumber(1000),\n                        expiry,\n                    },\n                    {\n                        maker: makerAddress,\n                        makerUri: maker.rfqtUri,\n                        makerToken,\n                        takerToken,\n                        makerAmount: new BigNumber(900),\n                        takerAmount: new BigNumber(1000),\n                        expiry,\n                    },\n                ]);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n                mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync = jest\n                    .fn()\n                    .mockResolvedValue([new BigNumber(10000), new BigNumber(10000)]);\n\n                const signature: Signature = { r: 'r', v: 21, s: 's', signatureType: SignatureType.EIP712 };\n                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(signature);\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                const result = await rfqtService.getV2QuotesAsync(quoteContext, fakeNow);\n\n                const [{ nonce: nonce1 }, { nonce: nonce2 }] = [\n                    OtcOrder.parseExpiryAndNonce(result[0].order.expiryAndNonce),\n                    OtcOrder.parseExpiryAndNonce(result[1].order.expiryAndNonce),\n                ];\n\n                expect(nonce1.toString()).not.toEqual(nonce2.toString());\n            });\n\n            it('[workflow: gasless-rfqt] creates orders with unique buckets', async () => {\n                const quoteContext: FirmQuoteContext = {\n                    isFirm: true,\n                    workflow: 'gasless-rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken,\n                    isSelling: false,\n                    takerAddress,\n                    trader: takerAddress,\n                    takerToken,\n                    txOrigin: takerAddress,\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([\n                    {\n                        maker: makerAddress,\n                        makerUri: maker.rfqtUri,\n                        makerToken,\n                        takerToken,\n                        makerAmount: new BigNumber(999),\n                        takerAmount: new BigNumber(1000),\n                        expiry,\n                    },\n                    {\n                        maker: makerAddress,\n                        makerUri: maker.rfqtUri,\n                        makerToken,\n                        takerToken,\n                        makerAmount: new BigNumber(900),\n                        takerAmount: new BigNumber(1000),\n                        expiry,\n                    },\n                ]);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n                mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync = jest\n                    .fn()\n                    .mockResolvedValue([new BigNumber(10000), new BigNumber(10000)]);\n\n                const signature: Signature = { r: 'r', v: 21, s: 's', signatureType: SignatureType.EIP712 };\n                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(signature);\n\n                // 0 is a special return value since this will trigger a wrap around\n                mockCacheClient.getNextNOtcOrderBucketsAsync = jest.fn().mockResolvedValue(0);\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                const result = await rfqtService.getV2QuotesAsync(quoteContext, fakeNow);\n                console.log('result', result);\n\n                const [{ nonceBucket: bucket1 }, { nonceBucket: bucket2 }] = [\n                    OtcOrder.parseExpiryAndNonce(result[0].order.expiryAndNonce),\n                    OtcOrder.parseExpiryAndNonce(result[1].order.expiryAndNonce),\n                ];\n\n                expect(bucket1.toString()).not.toEqual(bucket2.toString());\n                // check that buckets are greater than zero (successfully wrapped around for negative numbers)\n                expect(bucket1.toNumber()).toBeGreaterThanOrEqual(0);\n                expect(bucket2.toNumber()).toBeGreaterThanOrEqual(0);\n            });\n\n            it('gets a signed quote', async () => {\n                const quoteContext: FirmQuoteContext = {\n                    isFirm: true,\n                    workflow: 'rfqt',\n                    isUnwrap: false,\n                    originalMakerToken: '0x1',\n                    takerTokenDecimals: 18,\n                    makerTokenDecimals: 18,\n                    feeModelVersion: 1,\n                    assetFillAmount: new BigNumber(1000),\n                    chainId: 1337,\n                    integrator,\n                    makerToken,\n                    isSelling: false,\n                    takerAddress: NULL_ADDRESS,\n                    trader: takerAddress,\n                    takerToken,\n                    txOrigin: takerAddress,\n                };\n\n                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);\n                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([\n                    {\n                        maker: makerAddress,\n                        makerUri: maker.rfqtUri,\n                        makerToken,\n                        takerToken,\n                        makerAmount: new BigNumber(999),\n                        takerAmount: new BigNumber(1000),\n                        expiry,\n                    },\n                ]);\n                const signature: Signature = { r: 'r', v: 21, s: 's', signatureType: SignatureType.EIP712 };\n                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(signature);\n                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({\n                    feeWithDetails: {\n                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                        amount: new BigNumber(100),\n                        type: 'fixed',\n                    },\n                });\n                mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync = jest\n                    .fn()\n                    .mockResolvedValue([new BigNumber(10000)]);\n\n                const rfqtService = new RfqtService(\n                    1337, // tslint:disable-line: custom-no-magic-numbers\n                    mockRfqMakerManager,\n                    mockQuoteRequestor,\n                    mockQuoteServerClient,\n                    DEFAULT_MIN_EXPIRY_DURATION_MS,\n                    mockRfqBlockchainUtils,\n                    mockTokenMetadataManager,\n                    mockContractAddresses,\n                    mockFeeService,\n                    1,\n                    mockRfqMakerBalanceCacheService,\n                    mockCacheClient,\n                );\n\n                const result = await rfqtService.getV2QuotesAsync(quoteContext, fakeNow);\n\n                expect(result.length).toEqual(1);\n                expect(result[0]).toMatchObject({\n                    fillableMakerAmount: new BigNumber(999),\n                    fillableTakerAmount: new BigNumber(1000),\n                    fillableTakerFeeAmount: new BigNumber(0),\n                    makerId: maker.makerId,\n                    makerUri: maker.rfqtUri,\n                    signature,\n                });\n                expect(result[0].order).toMatchInlineSnapshot(`\n                OtcOrder {\n                  \"chainId\": 1337,\n                  \"expiry\": \"1657070278\",\n                  \"expiryAndNonce\": \"10401598717691489530826623925864187439861993812812831231287826374366\",\n                  \"maker\": \"0x79b7a69d90c82E014Bf0315e164208119B510FA0\",\n                  \"makerAmount\": \"999\",\n                  \"makerToken\": \"0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE\",\n                  \"nonce\": \"1657069278\",\n                  \"nonceBucket\": \"0\",\n                  \"taker\": \"0x0000000000000000000000000000000000000000\",\n                  \"takerAmount\": \"1000\",\n                  \"takerToken\": \"0x42d6622deCe394b54999Fbd73D108123806f6a18\",\n                  \"txOrigin\": \"0xE06fFA8146bBdECcBaaF72B6043b29091071AEB8\",\n                  \"verifyingContract\": \"0x5315e44798395d4a952530d131249fe00f554565\",\n                }\n              `);\n            });\n        });\n    });\n});\n"],"version":3}
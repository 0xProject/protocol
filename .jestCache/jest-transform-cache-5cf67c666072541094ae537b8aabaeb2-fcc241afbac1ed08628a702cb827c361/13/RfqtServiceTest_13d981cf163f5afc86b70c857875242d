f7f68749f4d489d634d04482f2012730
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
jest.mock('../../src/utils/rfq_maker_manager', () => ({
    RfqMakerManager: jest.fn().mockImplementation(() => {
        return {
            getRfqtV2MakersForPair: jest.fn(),
        };
    }),
}));
jest.mock('../../src/quoteRequestor/QuoteRequestor', () => ({
    QuoteRequestor: jest.fn().mockImplementation(() => {
        return {
            requestRfqtIndicativeQuotesAsync: jest.fn().mockResolvedValue([]),
            requestRfqtFirmQuotesAsync: jest.fn().mockResolvedValue([]),
        };
    }),
}));
jest.mock('../../src/utils/quote_server_client', () => ({
    QuoteServerClient: jest.fn().mockImplementation(() => {
        return {
            batchGetPriceV2Async: jest.fn().mockResolvedValue([]),
        };
    }),
}));
jest.mock('../../src/services/rfq_maker_balance_cache_service', () => ({
    RfqMakerBalanceCacheService: jest.fn().mockImplementation(() => {
        return {
            getERC20OwnerBalancesAsync: jest.fn().mockResolvedValue([]),
        };
    }),
}));
// tslint:disable custom-no-magic-numbers max-file-line-count
const contract_addresses_1 = require("@0x/contract-addresses");
const protocol_utils_1 = require("@0x/protocol-utils");
const signature_utils_1 = require("@0x/protocol-utils/lib/src/signature_utils");
const types_1 = require("@0x/types");
const utils_1 = require("@0x/utils");
const constants_1 = require("../../src/core/constants");
const entities_1 = require("../../src/entities");
const QuoteRequestor_1 = require("../../src/quoteRequestor/QuoteRequestor");
const fee_service_1 = require("../../src/services/fee_service");
const RfqtService_1 = require("../../src/services/RfqtService");
const rfq_maker_balance_cache_service_1 = require("../../src/services/rfq_maker_balance_cache_service");
const quote_server_client_1 = require("../../src/utils/quote_server_client");
const rfq_maker_manager_1 = require("../../src/utils/rfq_maker_manager");
const TokenMetadataManager_1 = require("../../src/utils/TokenMetadataManager");
// TODO (rhinodavid): Find a better way to initialize mocked classes
const mockQuoteRequestor = jest.mocked(new QuoteRequestor_1.QuoteRequestor({}, {}));
const mockRfqMakerManager = jest.mocked(new rfq_maker_manager_1.RfqMakerManager({}, {}, 0));
const mockQuoteServerClient = jest.mocked(new quote_server_client_1.QuoteServerClient({}));
const mockFeeService = jest.mocked(new fee_service_1.FeeService(1337, {}, {}, {}, {}, {}, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS));
const mockRfqBlockchainUtils = jest.mocked({});
const mockTokenMetadataManager = jest.mocked(new TokenMetadataManager_1.TokenMetadataManager(1337, {}));
// tslint:enable: no-object-literal-type-assertion
const mockContractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1337);
const mockRfqMakerBalanceCacheService = jest.mocked(new rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService({}, {}));
const mockCacheClient = jest.mocked({});
describe('Rfqt Service', () => {
    beforeEach(() => {
        mockQuoteRequestor.requestRfqtFirmQuotesAsync.mockClear();
        mockQuoteRequestor.requestRfqtIndicativeQuotesAsync.mockClear();
        mockQuoteServerClient.batchGetPriceV2Async.mockClear();
        mockRfqMakerManager.getRfqtV2MakersForPair.mockClear();
        mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync.mockClear();
    });
    describe('v1', () => {
        describe('getV1PricesAsync', () => {
            it('passes through calls to QuoteRequestor::requestRfqtIndicativeQuotesAsync', async () => {
                const rfqtService = new RfqtService_1.RfqtService(0, mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                await rfqtService.getV1PricesAsync({
                    altRfqAssetOfferings: {
                        'alt-mm': [
                            {
                                id: 'id',
                                baseAsset: '0xbaseasset',
                                quoteAsset: '0xquoteasset',
                                baseAssetDecimals: 420,
                                quoteAssetDecimals: 69,
                            },
                        ],
                    },
                    assetFillAmount: new utils_1.BigNumber(111),
                    comparisonPrice: new utils_1.BigNumber(666),
                    makerToken: '0xmakertoken',
                    marketOperation: types_1.MarketOperation.Buy,
                    takerAddress: '0xtakeraddress',
                    takerToken: '0xtakertoken',
                    intentOnFilling: false,
                    integrator: {
                        apiKeys: [],
                        allowedChainIds: [],
                        integratorId: 'uuid-integrator',
                        plp: false,
                        rfqm: false,
                        rfqt: true,
                        label: 'Scam Integrator 1',
                    },
                    txOrigin: '0xtxorigin',
                });
                const args = mockQuoteRequestor.requestRfqtIndicativeQuotesAsync.mock.calls[0];
                expect(args).toMatchInlineSnapshot(`
                    Array [
                      "0xmakertoken",
                      "0xtakertoken",
                      "111",
                      "Buy",
                      "666",
                      Object {
                        "altRfqAssetOfferings": Object {
                          "alt-mm": Array [
                            Object {
                              "baseAsset": "0xbaseasset",
                              "baseAssetDecimals": 420,
                              "id": "id",
                              "quoteAsset": "0xquoteasset",
                              "quoteAssetDecimals": 69,
                            },
                          ],
                        },
                        "integrator": Object {
                          "allowedChainIds": Array [],
                          "apiKeys": Array [],
                          "integratorId": "uuid-integrator",
                          "label": "Scam Integrator 1",
                          "plp": false,
                          "rfqm": false,
                          "rfqt": true,
                        },
                        "intentOnFilling": false,
                        "isIndicative": true,
                        "isLastLook": false,
                        "makerEndpointMaxResponseTimeMs": 600,
                        "takerAddress": "0xtakeraddress",
                        "txOrigin": "0xtxorigin",
                      },
                    ]
                `);
            });
        });
        describe('getV1QuotesAsync', () => {
            it('passes through calls to QuoteRequestor::requestRfqtFirmQuotesAsync', async () => {
                mockQuoteRequestor.requestRfqtFirmQuotesAsync.mockResolvedValue([]);
                const rfqtService = new RfqtService_1.RfqtService(0, mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                await rfqtService.getV1QuotesAsync({
                    altRfqAssetOfferings: {
                        'alt-mm': [
                            {
                                id: 'id',
                                baseAsset: '0xbaseasset',
                                quoteAsset: '0xquoteasset',
                                baseAssetDecimals: 420,
                                quoteAssetDecimals: 69,
                            },
                        ],
                    },
                    assetFillAmount: new utils_1.BigNumber(111),
                    comparisonPrice: new utils_1.BigNumber(666),
                    makerToken: '0xmakertoken',
                    marketOperation: types_1.MarketOperation.Buy,
                    takerAddress: '0xtakeraddress',
                    takerToken: '0xtakertoken',
                    intentOnFilling: false,
                    integrator: {
                        allowedChainIds: [],
                        apiKeys: [],
                        integratorId: 'uuid-integrator',
                        plp: false,
                        rfqm: false,
                        rfqt: true,
                        label: 'Scam Integrator 1',
                    },
                    txOrigin: '0xtxorigin',
                });
                const args = mockQuoteRequestor.requestRfqtFirmQuotesAsync.mock.calls[0];
                expect(args).toMatchInlineSnapshot(`
                    Array [
                      "0xmakertoken",
                      "0xtakertoken",
                      "111",
                      "Buy",
                      "666",
                      Object {
                        "altRfqAssetOfferings": Object {
                          "alt-mm": Array [
                            Object {
                              "baseAsset": "0xbaseasset",
                              "baseAssetDecimals": 420,
                              "id": "id",
                              "quoteAsset": "0xquoteasset",
                              "quoteAssetDecimals": 69,
                            },
                          ],
                        },
                        "integrator": Object {
                          "allowedChainIds": Array [],
                          "apiKeys": Array [],
                          "integratorId": "uuid-integrator",
                          "label": "Scam Integrator 1",
                          "plp": false,
                          "rfqm": false,
                          "rfqt": true,
                        },
                        "intentOnFilling": false,
                        "isIndicative": false,
                        "isLastLook": false,
                        "makerEndpointMaxResponseTimeMs": 600,
                        "takerAddress": "0xtakeraddress",
                        "txOrigin": "0xtxorigin",
                      },
                    ]
                `);
            });
        });
    });
    describe('v2', () => {
        const maker = new entities_1.RfqMaker({
            makerId: 'maker-id',
            chainId: 1337,
            updatedAt: new Date(),
            pairs: [['0x1', '0x2']],
            rfqmUri: null,
            rfqtUri: 'maker.uri',
        });
        const integrator = {
            allowedChainIds: [1337],
            apiKeys: [],
            integratorId: 'integrator-id',
            label: 'test integrator',
            plp: false,
            rfqm: false,
            rfqt: true,
        };
        describe('getV2PricesAsync', () => {
            it('transforms the API request into a quote server client request for buys', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken: '0x1',
                    isSelling: false,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                await rfqtService.getV2PricesAsync(quoteContext);
                expect(mockQuoteServerClient.batchGetPriceV2Async.mock.calls[0]).toMatchInlineSnapshot(`
                  Array [
                    Array [
                      "maker.uri",
                    ],
                    Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "integrator-id",
                      "label": "test integrator",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    Object {
                      "buyAmountBaseUnits": "1000",
                      "buyTokenAddress": "0x1",
                      "chainId": "1337",
                      "feeAmount": "100",
                      "feeToken": "0x0b1ba0af832d7c05fd64161e0db78e85978e8082",
                      "integratorId": "integrator-id",
                      "protocolVersion": "4",
                      "sellTokenAddress": "0x2",
                      "takerAddress": "0x0",
                      "txOrigin": "0xtakeraddress",
                    },
                    [Function],
                  ]
                `);
            });
            it('[workflow: gasless-rfqt] transforms the API request into a quote server client request for buys', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'gasless-rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken: '0x1',
                    isSelling: false,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                await rfqtService.getV2PricesAsync(quoteContext);
                expect(mockQuoteServerClient.batchGetPriceV2Async.mock.calls[0]).toMatchInlineSnapshot(`
                  Array [
                    Array [
                      "maker.uri",
                    ],
                    Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "integrator-id",
                      "label": "test integrator",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    Object {
                      "buyAmountBaseUnits": "1000",
                      "buyTokenAddress": "0x1",
                      "chainId": "1337",
                      "feeAmount": "100",
                      "feeToken": "0x0b1ba0af832d7c05fd64161e0db78e85978e8082",
                      "integratorId": "integrator-id",
                      "protocolVersion": "4",
                      "sellTokenAddress": "0x2",
                      "takerAddress": "0x0",
                      "txOrigin": "0xtakeraddress",
                    },
                    [Function],
                  ]
                `);
            });
            it('transforms the API request into a quote server client request for sells', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken: '0x1',
                    isSelling: true,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                await rfqtService.getV2PricesAsync(quoteContext);
                expect(mockQuoteServerClient.batchGetPriceV2Async.mock.calls[0]).toMatchInlineSnapshot(`
                  Array [
                    Array [
                      "maker.uri",
                    ],
                    Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "integrator-id",
                      "label": "test integrator",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    Object {
                      "buyTokenAddress": "0x1",
                      "chainId": "1337",
                      "feeAmount": "100",
                      "feeToken": "0x0b1ba0af832d7c05fd64161e0db78e85978e8082",
                      "integratorId": "integrator-id",
                      "protocolVersion": "4",
                      "sellAmountBaseUnits": "1000",
                      "sellTokenAddress": "0x2",
                      "takerAddress": "0x0",
                      "txOrigin": "0xtakeraddress",
                    },
                    [Function],
                  ]
              `);
            });
            it('gets prices', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken: '0x1',
                    isSelling: true,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                const price = {
                    // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
                    // eslint-disable-next-line @typescript-eslint/no-loss-of-precision
                    expiry: new utils_1.BigNumber(9999999999999999),
                    maker: '0xmakeraddress',
                    makerAmount: new utils_1.BigNumber(1000),
                    makerToken: '0x1',
                    makerUri: 'maker.uri',
                    takerAmount: new utils_1.BigNumber(1001),
                    takerToken: '0x2',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([price]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                const result = await rfqtService.getV2PricesAsync(quoteContext);
                expect(result.length).toEqual(1);
                expect(result[0].makerId).toEqual('maker-id');
                expect(result[0]).toMatchInlineSnapshot(`
                  Object {
                    "expiry": "10000000000000000",
                    "makerAddress": "0xmakeraddress",
                    "makerAmount": "1000",
                    "makerId": "maker-id",
                    "makerToken": "0x1",
                    "makerUri": "maker.uri",
                    "takerAmount": "1001",
                    "takerToken": "0x2",
                  }
                `);
            });
            it('gets prices from whitelisted makers only', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator: {
                        ...integrator,
                        whitelistMakerIds: ['maker1'],
                    },
                    makerToken: '0x1',
                    isSelling: true,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                const price = {
                    // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
                    // eslint-disable-next-line @typescript-eslint/no-loss-of-precision
                    expiry: new utils_1.BigNumber(9999999999999999),
                    maker: '0xmakeraddress',
                    makerAmount: new utils_1.BigNumber(1000),
                    makerToken: '0x1',
                    makerUri: 'maker.uri',
                    takerAmount: new utils_1.BigNumber(1001),
                    takerToken: '0x2',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([
                    {
                        ...maker,
                        makerId: 'maker1',
                    },
                    {
                        ...maker,
                        makerId: 'maker2',
                    },
                ]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([price]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                const result = await rfqtService.getV2PricesAsync(quoteContext);
                expect(result.length).toEqual(1);
                expect(result[0].makerId).toEqual('maker1');
                expect(result[0]).toMatchInlineSnapshot(`
                  Object {
                    "expiry": "10000000000000000",
                    "makerAddress": "0xmakeraddress",
                    "makerAmount": "1000",
                    "makerId": "maker1",
                    "makerToken": "0x1",
                    "makerUri": "maker.uri",
                    "takerAmount": "1001",
                    "takerToken": "0x2",
                  }
                `);
            });
        });
        describe('getV2QuotesAsync', () => {
            const makerToken = '0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE';
            const makerAddress = '0x79b7a69d90c82E014Bf0315e164208119B510FA0';
            const takerToken = '0x42d6622deCe394b54999Fbd73D108123806f6a18';
            const takerAddress = '0xE06fFA8146bBdECcBaaF72B6043b29091071AEB8';
            const fakeNow = new Date(1657069278103);
            const expiry = new utils_1.BigNumber(fakeNow.getTime() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            mockRfqBlockchainUtils.isValidOrderSignerAsync = jest.fn().mockResolvedValue(true);
            it('filters out quotes with no signatures', async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(undefined);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                const result = await rfqtService.getV2QuotesAsync(quoteContext);
                expect(result.length).toEqual(0);
            });
            it("doesn't blow up if a sign request fails", async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                mockQuoteServerClient.signV2Async = jest.fn().mockRejectedValue(new Error('EXPLODE'));
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                const result = await rfqtService.getV2QuotesAsync(quoteContext);
                expect(result.length).toEqual(0);
            });
            it('[workflow: rfqt] creates orders with unique nonces', async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(900),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync = jest
                    .fn()
                    .mockResolvedValue([new utils_1.BigNumber(10000), new utils_1.BigNumber(10000)]);
                const signature = { r: 'r', v: 21, s: 's', signatureType: signature_utils_1.SignatureType.EIP712 };
                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(signature);
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                const result = await rfqtService.getV2QuotesAsync(quoteContext, fakeNow);
                const [{ nonce: nonce1 }, { nonce: nonce2 }] = [
                    protocol_utils_1.OtcOrder.parseExpiryAndNonce(result[0].order.expiryAndNonce),
                    protocol_utils_1.OtcOrder.parseExpiryAndNonce(result[1].order.expiryAndNonce),
                ];
                expect(nonce1.toString()).not.toEqual(nonce2.toString());
            });
            it('[workflow: gasless-rfqt] creates orders with unique buckets', async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'gasless-rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(900),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync = jest
                    .fn()
                    .mockResolvedValue([new utils_1.BigNumber(10000), new utils_1.BigNumber(10000)]);
                const signature = { r: 'r', v: 21, s: 's', signatureType: signature_utils_1.SignatureType.EIP712 };
                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(signature);
                // 0 is a special return value since this will trigger a wrap around
                mockCacheClient.getNextNOtcOrderBucketsAsync = jest.fn().mockResolvedValue(0);
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                const result = await rfqtService.getV2QuotesAsync(quoteContext, fakeNow);
                console.log('result', result);
                const [{ nonceBucket: bucket1 }, { nonceBucket: bucket2 }] = [
                    protocol_utils_1.OtcOrder.parseExpiryAndNonce(result[0].order.expiryAndNonce),
                    protocol_utils_1.OtcOrder.parseExpiryAndNonce(result[1].order.expiryAndNonce),
                ];
                expect(bucket1.toString()).not.toEqual(bucket2.toString());
                // check that buckets are greater than zero (successfully wrapped around for negative numbers)
                expect(bucket1.toNumber()).toBeGreaterThanOrEqual(0);
                expect(bucket2.toNumber()).toBeGreaterThanOrEqual(0);
            });
            it('gets a signed quote', async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress: constants_1.NULL_ADDRESS,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                const signature = { r: 'r', v: 21, s: 's', signatureType: signature_utils_1.SignatureType.EIP712 };
                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(signature);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync = jest
                    .fn()
                    .mockResolvedValue([new utils_1.BigNumber(10000)]);
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService, mockCacheClient);
                const result = await rfqtService.getV2QuotesAsync(quoteContext, fakeNow);
                expect(result.length).toEqual(1);
                expect(result[0]).toMatchObject({
                    fillableMakerAmount: new utils_1.BigNumber(999),
                    fillableTakerAmount: new utils_1.BigNumber(1000),
                    fillableTakerFeeAmount: new utils_1.BigNumber(0),
                    makerId: maker.makerId,
                    makerUri: maker.rfqtUri,
                    signature,
                });
                expect(result[0].order).toMatchInlineSnapshot(`
                OtcOrder {
                  "chainId": 1337,
                  "expiry": "1657070278",
                  "expiryAndNonce": "10401598717691489530826623925864187439861993812812831231287826374366",
                  "maker": "0x79b7a69d90c82E014Bf0315e164208119B510FA0",
                  "makerAmount": "999",
                  "makerToken": "0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE",
                  "nonce": "1657069278",
                  "nonceBucket": "0",
                  "taker": "0x0000000000000000000000000000000000000000",
                  "takerAmount": "1000",
                  "takerToken": "0x42d6622deCe394b54999Fbd73D108123806f6a18",
                  "txOrigin": "0xE06fFA8146bBdECcBaaF72B6043b29091071AEB8",
                  "verifyingContract": "0x5315e44798395d4a952530d131249fe00f554565",
                }
              `);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3Qvc2VydmljZXMvUmZxdFNlcnZpY2VUZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBNkJBLElBQUksQ0FBQyxJQUFJLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsRCxlQUFlLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRTtRQUMvQyxPQUFPO1lBQ0gsc0JBQXNCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNwQyxDQUFDO0lBQ04sQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDeEQsY0FBYyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUU7UUFDOUMsT0FBTztZQUNILGdDQUFnQyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUM7WUFDakUsMEJBQTBCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsQ0FBQztTQUM5RCxDQUFDO0lBQ04sQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDcEQsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRTtRQUNqRCxPQUFPO1lBQ0gsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsQ0FBQztTQUN4RCxDQUFDO0lBQ04sQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLG9EQUFvRCxFQUFFLEdB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b0JBQ3hDLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTztvQkFDdEIsUUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPO29CQUN2QixTQUFTO2lCQUNaLENBQUMsQ0FBQztnQkFDSCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7O2VBZ0IvQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZGF2aWR3YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvdGVzdC9zZXJ2aWNlcy9SZnF0U2VydmljZVRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGUgY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnMgbWF4LWZpbGUtbGluZS1jb3VudFxuaW1wb3J0IHsgZ2V0Q29udHJhY3RBZGRyZXNzZXNGb3JDaGFpbk9yVGhyb3cgfSBmcm9tICdAMHgvY29udHJhY3QtYWRkcmVzc2VzJztcbmltcG9ydCB7IE90Y09yZGVyIH0gZnJvbSAnQDB4L3Byb3RvY29sLXV0aWxzJztcbmltcG9ydCB7IFNpZ25hdHVyZSwgU2lnbmF0dXJlVHlwZSB9IGZyb20gJ0AweC9wcm90b2NvbC11dGlscy9saWIvc3JjL3NpZ25hdHVyZV91dGlscyc7XG5pbXBvcnQgeyBUb2tlbk1ldGFkYXRhIH0gZnJvbSAnQDB4L3Rva2VuLW1ldGFkYXRhJztcbmltcG9ydCB7IE1hcmtldE9wZXJhdGlvbiB9IGZyb20gJ0AweC90eXBlcyc7XG5pbXBvcnQgeyBCaWdOdW1iZXIgfSBmcm9tICdAMHgvdXRpbHMnO1xuaW1wb3J0IHsgQXhpb3NJbnN0YW5jZSB9IGZyb20gJ2F4aW9zJztcblxuaW1wb3J0IHsgSW50ZWdyYXRvciB9IGZyb20gJy4uLy4uL3NyYy9jb25maWcnO1xuaW1wb3J0IHsgREVGQVVMVF9NSU5fRVhQSVJZX0RVUkFUSU9OX01TLCBOVUxMX0FERFJFU1MsIE9ORV9TRUNPTkRfTVMgfSBmcm9tICcuLi8uLi9zcmMvY29yZS9jb25zdGFudHMnO1xuaW1wb3J0IHsgUmZxTWFrZXIgfSBmcm9tICcuLi8uLi9zcmMvZW50aXRpZXMnO1xuaW1wb3J0IHsgUXVvdGVSZXF1ZXN0b3IgfSBmcm9tICcuLi8uLi9zcmMvcXVvdGVSZXF1ZXN0b3IvUXVvdGVSZXF1ZXN0b3InO1xuaW1wb3J0IHsgRmVlU2VydmljZSB9IGZyb20gJy4uLy4uL3NyYy9zZXJ2aWNlcy9mZWVfc2VydmljZSc7XG5pbXBvcnQgeyBSZnF0U2VydmljZSB9IGZyb20gJy4uLy4uL3NyYy9zZXJ2aWNlcy9SZnF0U2VydmljZSc7XG5pbXBvcnQgeyBSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvcmZxX21ha2VyX2JhbGFuY2VfY2FjaGVfc2VydmljZSc7XG5pbXBvcnQgeyBGaXJtUXVvdGVDb250ZXh0LCBRdW90ZUNvbnRleHQgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvdHlwZXMnO1xuaW1wb3J0IHsgSW5kaWNhdGl2ZVF1b3RlIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvdHlwZXMnO1xuaW1wb3J0IHsgQ2FjaGVDbGllbnQgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvY2FjaGVfY2xpZW50JztcbmltcG9ydCB7IENvbmZpZ01hbmFnZXIgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvY29uZmlnX21hbmFnZXInO1xuaW1wb3J0IHsgR2FzU3RhdGlvbkF0dGVuZGFudCB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9HYXNTdGF0aW9uQXR0ZW5kYW50JztcbmltcG9ydCB7IFF1b3RlU2VydmVyQ2xpZW50IH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL3F1b3RlX3NlcnZlcl9jbGllbnQnO1xuaW1wb3J0IHsgUmZxQmFsYW5jZUNoZWNrVXRpbHMsIFJmcUJsb2NrY2hhaW5VdGlscyB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9yZnFfYmxvY2tjaGFpbl91dGlscyc7XG5pbXBvcnQgeyBSZnFNYWtlckRiVXRpbHMgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvcmZxX21ha2VyX2RiX3V0aWxzJztcbmltcG9ydCB7IFJmcU1ha2VyQXNzZXRPZmZlcmluZ3MsIFJmcU1ha2VyTWFuYWdlciB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9yZnFfbWFrZXJfbWFuYWdlcic7XG5pbXBvcnQgeyBUb2tlbk1ldGFkYXRhTWFuYWdlciB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9Ub2tlbk1ldGFkYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBUb2tlblByaWNlT3JhY2xlIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL1Rva2VuUHJpY2VPcmFjbGUnO1xuaW1wb3J0IHsgWmVyb0V4QXBpQ2xpZW50IH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL1plcm9FeEFwaUNsaWVudCc7XG5cbmplc3QubW9jaygnLi4vLi4vc3JjL3V0aWxzL3JmcV9tYWtlcl9tYW5hZ2VyJywgKCkgPT4gKHtcbiAgICBSZnFNYWtlck1hbmFnZXI6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0UmZxdFYyTWFrZXJzRm9yUGFpcjogamVzdC5mbigpLFxuICAgICAgICB9O1xuICAgIH0pLFxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9xdW90ZVJlcXVlc3Rvci9RdW90ZVJlcXVlc3RvcicsICgpID0+ICh7XG4gICAgUXVvdGVSZXF1ZXN0b3I6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVxdWVzdFJmcXRJbmRpY2F0aXZlUXVvdGVzQXN5bmM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSksXG4gICAgICAgICAgICByZXF1ZXN0UmZxdEZpcm1RdW90ZXNBc3luYzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcbiAgICAgICAgfTtcbiAgICB9KSxcbn0pKTtcblxuamVzdC5tb2NrKCcuLi8uLi9zcmMvdXRpbHMvcXVvdGVfc2VydmVyX2NsaWVudCcsICgpID0+ICh7XG4gICAgUXVvdGVTZXJ2ZXJDbGllbnQ6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmF0Y2hHZXRQcmljZVYyQXN5bmM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSksXG4gICAgICAgIH07XG4gICAgfSksXG59KSk7XG5cbmplc3QubW9jaygnLi4vLi4vc3JjL3NlcnZpY2VzL3JmcV9tYWtlcl9iYWxhbmNlX2NhY2hlX3NlcnZpY2UnLCAoKSA9PiAoe1xuICAgIFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcbiAgICAgICAgfTtcbiAgICB9KSxcbn0pKTtcblxuLy8gVE9ETyAocmhpbm9kYXZpZCk6IEZpbmQgYSBiZXR0ZXIgd2F5IHRvIGluaXRpYWxpemUgbW9ja2VkIGNsYXNzZXNcbmNvbnN0IG1vY2tRdW90ZVJlcXVlc3RvciA9IGplc3QubW9ja2VkKG5ldyBRdW90ZVJlcXVlc3Rvcih7fSBhcyBSZnFNYWtlckFzc2V0T2ZmZXJpbmdzLCB7fSBhcyBBeGlvc0luc3RhbmNlKSk7XG5jb25zdCBtb2NrUmZxTWFrZXJNYW5hZ2VyID0gamVzdC5tb2NrZWQobmV3IFJmcU1ha2VyTWFuYWdlcih7fSBhcyBDb25maWdNYW5hZ2VyLCB7fSBhcyBSZnFNYWtlckRiVXRpbHMsIDApKTtcbmNvbnN0IG1vY2tRdW90ZVNlcnZlckNsaWVudCA9IGplc3QubW9ja2VkKG5ldyBRdW90ZVNlcnZlckNsaWVudCh7fSBhcyBBeGlvc0luc3RhbmNlKSk7XG5jb25zdCBtb2NrRmVlU2VydmljZSA9IGplc3QubW9ja2VkKFxuICAgIG5ldyBGZWVTZXJ2aWNlKFxuICAgICAgICAxMzM3LFxuICAgICAgICB7fSBhcyBUb2tlbk1ldGFkYXRhLFxuICAgICAgICB7fSBhcyBDb25maWdNYW5hZ2VyLFxuICAgICAgICB7fSBhcyBHYXNTdGF0aW9uQXR0ZW5kYW50LFxuICAgICAgICB7fSBhcyBUb2tlblByaWNlT3JhY2xlLFxuICAgICAgICB7fSBhcyBaZXJvRXhBcGlDbGllbnQsXG4gICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcbiAgICApLFxuKTtcbmNvbnN0IG1vY2tSZnFCbG9ja2NoYWluVXRpbHMgPSBqZXN0Lm1vY2tlZCh7fSBhcyBSZnFCbG9ja2NoYWluVXRpbHMpO1xuY29uc3QgbW9ja1Rva2VuTWV0YWRhdGFNYW5hZ2VyID0gamVzdC5tb2NrZWQobmV3IFRva2VuTWV0YWRhdGFNYW5hZ2VyKDEzMzcsIHt9IGFzIFJmcUJsb2NrY2hhaW5VdGlscykpO1xuLy8gdHNsaW50OmVuYWJsZTogbm8tb2JqZWN0LWxpdGVyYWwtdHlwZS1hc3NlcnRpb25cbmNvbnN0IG1vY2tDb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEzMzcpO1xuY29uc3QgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSA9IGplc3QubW9ja2VkKFxuICAgIG5ldyBSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2Uoe30gYXMgQ2FjaGVDbGllbnQsIHt9IGFzIFJmcUJhbGFuY2VDaGVja1V0aWxzKSxcbik7XG5jb25zdCBtb2NrQ2FjaGVDbGllbnQgPSBqZXN0Lm1vY2tlZCh7fSBhcyBDYWNoZUNsaWVudCk7XG5cbmRlc2NyaWJlKCdSZnF0IFNlcnZpY2UnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIG1vY2tRdW90ZVJlcXVlc3Rvci5yZXF1ZXN0UmZxdEZpcm1RdW90ZXNBc3luYy5tb2NrQ2xlYXIoKTtcbiAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLnJlcXVlc3RSZnF0SW5kaWNhdGl2ZVF1b3Rlc0FzeW5jLm1vY2tDbGVhcigpO1xuICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuYmF0Y2hHZXRQcmljZVYyQXN5bmMubW9ja0NsZWFyKCk7XG4gICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIuZ2V0UmZxdFYyTWFrZXJzRm9yUGFpci5tb2NrQ2xlYXIoKTtcbiAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYy5tb2NrQ2xlYXIoKTtcbiAgICB9KTtcbiAgICBkZXNjcmliZSgndjEnLCAoKSA9PiB7XG4gICAgICAgIGRlc2NyaWJlKCdnZXRWMVByaWNlc0FzeW5jJywgKCkgPT4ge1xuICAgICAgICAgICAgaXQoJ3Bhc3NlcyB0aHJvdWdoIGNhbGxzIHRvIFF1b3RlUmVxdWVzdG9yOjpyZXF1ZXN0UmZxdEluZGljYXRpdmVRdW90ZXNBc3luYycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1Rva2VuTWV0YWRhdGFNYW5hZ2VyLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ29udHJhY3RBZGRyZXNzZXMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ2FjaGVDbGllbnQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcXRTZXJ2aWNlLmdldFYxUHJpY2VzQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FsdC1tbSc6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlQXNzZXQ6ICcweGJhc2Vhc3NldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlQXNzZXQ6ICcweHF1b3RlYXNzZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlQXNzZXREZWNpbWFsczogNDIwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZUFzc2V0RGVjaW1hbHM6IDY5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTExKSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyaXNvblByaWNlOiBuZXcgQmlnTnVtYmVyKDY2NiksXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246IE1hcmtldE9wZXJhdGlvbi5CdXksXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtaW50ZWdyYXRvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbHA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmZxbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdTY2FtIEludGVncmF0b3IgMScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbW9ja1F1b3RlUmVxdWVzdG9yLnJlcXVlc3RSZnF0SW5kaWNhdGl2ZVF1b3Rlc0FzeW5jLm1vY2suY2FsbHNbMF07XG4gICAgICAgICAgICAgICAgZXhwZWN0KGFyZ3MpLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChgXG4gICAgICAgICAgICAgICAgICAgIEFycmF5IFtcbiAgICAgICAgICAgICAgICAgICAgICBcIjB4bWFrZXJ0b2tlblwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiMHh0YWtlcnRva2VuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCIxMTFcIixcbiAgICAgICAgICAgICAgICAgICAgICBcIkJ1eVwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiNjY2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWx0UmZxQXNzZXRPZmZlcmluZ3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhbHQtbW1cIjogQXJyYXkgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VBc3NldFwiOiBcIjB4YmFzZWFzc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VBc3NldERlY2ltYWxzXCI6IDQyMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZUFzc2V0XCI6IFwiMHhxdW90ZWFzc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlQXNzZXREZWNpbWFsc1wiOiA2OSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvclwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBcImFsbG93ZWRDaGFpbklkc1wiOiBBcnJheSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhcGlLZXlzXCI6IEFycmF5IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JJZFwiOiBcInV1aWQtaW50ZWdyYXRvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCI6IFwiU2NhbSBJbnRlZ3JhdG9yIDFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwbHBcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicmZxbVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZnF0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnRlbnRPbkZpbGxpbmdcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzSW5kaWNhdGl2ZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpc0xhc3RMb29rXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYWtlckVuZHBvaW50TWF4UmVzcG9uc2VUaW1lTXNcIjogNjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0YWtlckFkZHJlc3NcIjogXCIweHRha2VyYWRkcmVzc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eE9yaWdpblwiOiBcIjB4dHhvcmlnaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRlc2NyaWJlKCdnZXRWMVF1b3Rlc0FzeW5jJywgKCkgPT4ge1xuICAgICAgICAgICAgaXQoJ3Bhc3NlcyB0aHJvdWdoIGNhbGxzIHRvIFF1b3RlUmVxdWVzdG9yOjpyZXF1ZXN0UmZxdEZpcm1RdW90ZXNBc3luYycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVSZXF1ZXN0b3IucmVxdWVzdFJmcXRGaXJtUXVvdGVzQXN5bmMubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJmcXRTZXJ2aWNlID0gbmV3IFJmcXRTZXJ2aWNlKFxuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVSZXF1ZXN0b3IsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9NSU5fRVhQSVJZX0RVUkFUSU9OX01TLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxQmxvY2tjaGFpblV0aWxzLFxuICAgICAgICAgICAgICAgICAgICBtb2NrVG9rZW5NZXRhZGF0YU1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tDb250cmFjdEFkZHJlc3NlcyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tDYWNoZUNsaWVudCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgcmZxdFNlcnZpY2UuZ2V0VjFRdW90ZXNBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGFsdFJmcUFzc2V0T2ZmZXJpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYWx0LW1tJzogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VBc3NldDogJzB4YmFzZWFzc2V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVBc3NldDogJzB4cXVvdGVhc3NldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VBc3NldERlY2ltYWxzOiA0MjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlQXNzZXREZWNpbWFsczogNjksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMTEpLFxuICAgICAgICAgICAgICAgICAgICBjb21wYXJpc29uUHJpY2U6IG5ldyBCaWdOdW1iZXIoNjY2KSxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldE9wZXJhdGlvbjogTWFya2V0T3BlcmF0aW9uLkJ1eSxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dlZENoYWluSWRzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaUtleXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBscDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICByZnFtOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJmcXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1NjYW0gSW50ZWdyYXRvciAxJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHR4b3JpZ2luJyxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBtb2NrUXVvdGVSZXF1ZXN0b3IucmVxdWVzdFJmcXRGaXJtUXVvdGVzQXN5bmMubW9jay5jYWxsc1swXTtcbiAgICAgICAgICAgICAgICBleHBlY3QoYXJncykudG9NYXRjaElubGluZVNuYXBzaG90KGBcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkgW1xuICAgICAgICAgICAgICAgICAgICAgIFwiMHhtYWtlcnRva2VuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCIweHRha2VydG9rZW5cIixcbiAgICAgICAgICAgICAgICAgICAgICBcIjExMVwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiQnV5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCI2NjZcIixcbiAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJhbHRSZnFBc3NldE9mZmVyaW5nc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBcImFsdC1tbVwiOiBBcnJheSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFzZUFzc2V0XCI6IFwiMHhiYXNlYXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFzZUFzc2V0RGVjaW1hbHNcIjogNDIwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBcImlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlQXNzZXRcIjogXCIweHF1b3RlYXNzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicXVvdGVBc3NldERlY2ltYWxzXCI6IDY5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnRlZ3JhdG9yXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWxsb3dlZENoYWluSWRzXCI6IEFycmF5IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImFwaUtleXNcIjogQXJyYXkgW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvcklkXCI6IFwidXVpZC1pbnRlZ3JhdG9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwibGFiZWxcIjogXCJTY2FtIEludGVncmF0b3IgMVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBscFwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZnFtXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInJmcXRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBcImludGVudE9uRmlsbGluZ1wiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNJbmRpY2F0aXZlXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpc0xhc3RMb29rXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYWtlckVuZHBvaW50TWF4UmVzcG9uc2VUaW1lTXNcIjogNjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0YWtlckFkZHJlc3NcIjogXCIweHRha2VyYWRkcmVzc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eE9yaWdpblwiOiBcIjB4dHhvcmlnaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoJ3YyJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtYWtlciA9IG5ldyBSZnFNYWtlcih7XG4gICAgICAgICAgICBtYWtlcklkOiAnbWFrZXItaWQnLFxuICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHBhaXJzOiBbWycweDEnLCAnMHgyJ11dLFxuICAgICAgICAgICAgcmZxbVVyaTogbnVsbCxcbiAgICAgICAgICAgIHJmcXRVcmk6ICdtYWtlci51cmknLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaW50ZWdyYXRvcjogSW50ZWdyYXRvciA9IHtcbiAgICAgICAgICAgIGFsbG93ZWRDaGFpbklkczogWzEzMzddLCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xuICAgICAgICAgICAgYXBpS2V5czogW10sXG4gICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICdpbnRlZ3JhdG9yLWlkJyxcbiAgICAgICAgICAgIGxhYmVsOiAndGVzdCBpbnRlZ3JhdG9yJyxcbiAgICAgICAgICAgIHBscDogZmFsc2UsXG4gICAgICAgICAgICByZnFtOiBmYWxzZSxcbiAgICAgICAgICAgIHJmcXQ6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGRlc2NyaWJlKCdnZXRWMlByaWNlc0FzeW5jJywgKCkgPT4ge1xuICAgICAgICAgICAgaXQoJ3RyYW5zZm9ybXMgdGhlIEFQSSByZXF1ZXN0IGludG8gYSBxdW90ZSBzZXJ2ZXIgY2xpZW50IHJlcXVlc3QgZm9yIGJ1eXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVDb250ZXh0OiBRdW90ZUNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRmlybTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93OiAncmZxdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYWtlclRva2VuOiAnMHgxJyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAxLFxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3IsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweDEnLFxuICAgICAgICAgICAgICAgICAgICBpc1NlbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweDAnLFxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHgyJyxcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHRha2VyYWRkcmVzcycsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIuZ2V0UmZxdFYyTWFrZXJzRm9yUGFpciA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW21ha2VyXSk7XG4gICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UuY2FsY3VsYXRlRmVlQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcweDBiMWJhMGFmODMyZDdjMDVmZDY0MTYxZTBkYjc4ZTg1OTc4ZTgwODInLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxdFNlcnZpY2UgPSBuZXcgUmZxdFNlcnZpY2UoXG4gICAgICAgICAgICAgICAgICAgIDEzMzcsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVJlcXVlc3RvcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFCbG9ja2NoYWluVXRpbHMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUb2tlbk1ldGFkYXRhTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NhY2hlQ2xpZW50LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCByZnF0U2VydmljZS5nZXRWMlByaWNlc0FzeW5jKHF1b3RlQ29udGV4dCk7XG5cbiAgICAgICAgICAgICAgICBleHBlY3QobW9ja1F1b3RlU2VydmVyQ2xpZW50LmJhdGNoR2V0UHJpY2VWMkFzeW5jLm1vY2suY2FsbHNbMF0pLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChgXG4gICAgICAgICAgICAgICAgICBBcnJheSBbXG4gICAgICAgICAgICAgICAgICAgIEFycmF5IFtcbiAgICAgICAgICAgICAgICAgICAgICBcIm1ha2VyLnVyaVwiLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICAgIFwiYWxsb3dlZENoYWluSWRzXCI6IEFycmF5IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIDEzMzcsXG4gICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICBcImFwaUtleXNcIjogQXJyYXkgW10sXG4gICAgICAgICAgICAgICAgICAgICAgXCJpbnRlZ3JhdG9ySWRcIjogXCJpbnRlZ3JhdG9yLWlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJsYWJlbFwiOiBcInRlc3QgaW50ZWdyYXRvclwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwicGxwXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxbVwiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICBcInJmcXRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgICAgICAgICAgICBcImJ1eUFtb3VudEJhc2VVbml0c1wiOiBcIjEwMDBcIixcbiAgICAgICAgICAgICAgICAgICAgICBcImJ1eVRva2VuQWRkcmVzc1wiOiBcIjB4MVwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiY2hhaW5JZFwiOiBcIjEzMzdcIixcbiAgICAgICAgICAgICAgICAgICAgICBcImZlZUFtb3VudFwiOiBcIjEwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiZmVlVG9rZW5cIjogXCIweDBiMWJhMGFmODMyZDdjMDVmZDY0MTYxZTBkYjc4ZTg1OTc4ZTgwODJcIixcbiAgICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JJZFwiOiBcImludGVncmF0b3ItaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICBcInByb3RvY29sVmVyc2lvblwiOiBcIjRcIixcbiAgICAgICAgICAgICAgICAgICAgICBcInNlbGxUb2tlbkFkZHJlc3NcIjogXCIweDJcIixcbiAgICAgICAgICAgICAgICAgICAgICBcInRha2VyQWRkcmVzc1wiOiBcIjB4MFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwidHhPcmlnaW5cIjogXCIweHRha2VyYWRkcmVzc1wiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBbRnVuY3Rpb25dLFxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIGApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpdCgnW3dvcmtmbG93OiBnYXNsZXNzLXJmcXRdIHRyYW5zZm9ybXMgdGhlIEFQSSByZXF1ZXN0IGludG8gYSBxdW90ZSBzZXJ2ZXIgY2xpZW50IHJlcXVlc3QgZm9yIGJ1eXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVDb250ZXh0OiBRdW90ZUNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRmlybTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93OiAnZ2FzbGVzcy1yZnF0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNVbndyYXA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1ha2VyVG9rZW46ICcweDEnLFxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuRGVjaW1hbHM6IDE4LFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRGVjaW1hbHM6IDE4LFxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MScsXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4MCcsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDInLFxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dGFrZXJhZGRyZXNzJyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlci5nZXRSZnF0VjJNYWtlcnNGb3JQYWlyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbbWFrZXJdKTtcbiAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZS5jYWxjdWxhdGVGZWVBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcbiAgICAgICAgICAgICAgICAgICAgMTMzNywgLy8gdHNsaW50OmRpc2FibGUtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1Rva2VuTWV0YWRhdGFNYW5hZ2VyLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ29udHJhY3RBZGRyZXNzZXMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ2FjaGVDbGllbnQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcXRTZXJ2aWNlLmdldFYyUHJpY2VzQXN5bmMocXVvdGVDb250ZXh0KTtcblxuICAgICAgICAgICAgICAgIGV4cGVjdChtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuYmF0Y2hHZXRQcmljZVYyQXN5bmMubW9jay5jYWxsc1swXSkudG9NYXRjaElubGluZVNuYXBzaG90KGBcbiAgICAgICAgICAgICAgICAgIEFycmF5IFtcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkgW1xuICAgICAgICAgICAgICAgICAgICAgIFwibWFrZXIudXJpXCIsXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgICAgXCJhbGxvd2VkQ2hhaW5JZHNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICAgICAgICAgICAgMTMzNyxcbiAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgIFwiYXBpS2V5c1wiOiBBcnJheSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JJZFwiOiBcImludGVncmF0b3ItaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCI6IFwidGVzdCBpbnRlZ3JhdG9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJwbHBcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgXCJyZnFtXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxdFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICAgIFwiYnV5QW1vdW50QmFzZVVuaXRzXCI6IFwiMTAwMFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiYnV5VG9rZW5BZGRyZXNzXCI6IFwiMHgxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJjaGFpbklkXCI6IFwiMTMzN1wiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiZmVlQW1vdW50XCI6IFwiMTAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJmZWVUb2tlblwiOiBcIjB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MlwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvcklkXCI6IFwiaW50ZWdyYXRvci1pZFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwicHJvdG9jb2xWZXJzaW9uXCI6IFwiNFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwic2VsbFRva2VuQWRkcmVzc1wiOiBcIjB4MlwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwidGFrZXJBZGRyZXNzXCI6IFwiMHgwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJ0eE9yaWdpblwiOiBcIjB4dGFrZXJhZGRyZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFtGdW5jdGlvbl0sXG4gICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGl0KCd0cmFuc2Zvcm1zIHRoZSBBUEkgcmVxdWVzdCBpbnRvIGEgcXVvdGUgc2VydmVyIGNsaWVudCByZXF1ZXN0IGZvciBzZWxscycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZUNvbnRleHQ6IFF1b3RlQ29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICAgICAgaXNGaXJtOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3c6ICdyZnF0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNVbndyYXA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1ha2VyVG9rZW46ICcweDEnLFxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuRGVjaW1hbHM6IDE4LFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRGVjaW1hbHM6IDE4LFxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MScsXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsbGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHgwJyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4MicsXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0YWtlcmFkZHJlc3MnLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlci5nZXRSZnF0VjJNYWtlcnNGb3JQYWlyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbbWFrZXJdKTtcbiAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZS5jYWxjdWxhdGVGZWVBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcbiAgICAgICAgICAgICAgICAgICAgMTMzNywgLy8gdHNsaW50OmRpc2FibGUtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1Rva2VuTWV0YWRhdGFNYW5hZ2VyLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ29udHJhY3RBZGRyZXNzZXMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ2FjaGVDbGllbnQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcXRTZXJ2aWNlLmdldFYyUHJpY2VzQXN5bmMocXVvdGVDb250ZXh0KTtcblxuICAgICAgICAgICAgICAgIGV4cGVjdChtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuYmF0Y2hHZXRQcmljZVYyQXN5bmMubW9jay5jYWxsc1swXSkudG9NYXRjaElubGluZVNuYXBzaG90KGBcbiAgICAgICAgICAgICAgICAgIEFycmF5IFtcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkgW1xuICAgICAgICAgICAgICAgICAgICAgIFwibWFrZXIudXJpXCIsXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgICAgXCJhbGxvd2VkQ2hhaW5JZHNcIjogQXJyYXkgW1xuICAgICAgICAgICAgICAgICAgICAgICAgMTMzNyxcbiAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgIFwiYXBpS2V5c1wiOiBBcnJheSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JJZFwiOiBcImludGVncmF0b3ItaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCI6IFwidGVzdCBpbnRlZ3JhdG9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJwbHBcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgXCJyZnFtXCI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxdFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgICAgICAgICAgIFwiYnV5VG9rZW5BZGRyZXNzXCI6IFwiMHgxXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJjaGFpbklkXCI6IFwiMTMzN1wiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiZmVlQW1vdW50XCI6IFwiMTAwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJmZWVUb2tlblwiOiBcIjB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MlwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvcklkXCI6IFwiaW50ZWdyYXRvci1pZFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwicHJvdG9jb2xWZXJzaW9uXCI6IFwiNFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwic2VsbEFtb3VudEJhc2VVbml0c1wiOiBcIjEwMDBcIixcbiAgICAgICAgICAgICAgICAgICAgICBcInNlbGxUb2tlbkFkZHJlc3NcIjogXCIweDJcIixcbiAgICAgICAgICAgICAgICAgICAgICBcInRha2VyQWRkcmVzc1wiOiBcIjB4MFwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwidHhPcmlnaW5cIjogXCIweHRha2VyYWRkcmVzc1wiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBbRnVuY3Rpb25dLFxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICBgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaXQoJ2dldHMgcHJpY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlQ29udGV4dDogUXVvdGVDb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgICAgICBpc0Zpcm06IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvdzogJ3JmcXQnLFxuICAgICAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWFrZXJUb2tlbjogJzB4MScsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5EZWNpbWFsczogMTgsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5EZWNpbWFsczogMTgsXG4gICAgICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHgxJyxcbiAgICAgICAgICAgICAgICAgICAgaXNTZWxsaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweDAnLFxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHgyJyxcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHRha2VyYWRkcmVzcycsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlOiBJbmRpY2F0aXZlUXVvdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICRlc2xpbnQtZml4LW1lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaGlub2RhdmlkL2VzbGludC1maXgtbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1sb3NzLW9mLXByZWNpc2lvblxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoOTk5OTk5OTk5OTk5OTk5OSksXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcmFkZHJlc3MnLFxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MScsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnbWFrZXIudXJpJyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMSksXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDInLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLmdldFJmcXRWMk1ha2Vyc0ZvclBhaXIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFttYWtlcl0pO1xuICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudC5iYXRjaEdldFByaWNlVjJBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbcHJpY2VdKTtcbiAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZS5jYWxjdWxhdGVGZWVBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcbiAgICAgICAgICAgICAgICAgICAgMTMzNywgLy8gdHNsaW50OmRpc2FibGUtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1Rva2VuTWV0YWRhdGFNYW5hZ2VyLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ29udHJhY3RBZGRyZXNzZXMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ2FjaGVDbGllbnQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJmcXRTZXJ2aWNlLmdldFYyUHJpY2VzQXN5bmMocXVvdGVDb250ZXh0KTtcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9FcXVhbCgxKTtcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0WzBdLm1ha2VySWQpLnRvRXF1YWwoJ21ha2VyLWlkJyk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdFswXSkudG9NYXRjaElubGluZVNuYXBzaG90KGBcbiAgICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgIFwiZXhwaXJ5XCI6IFwiMTAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlckFkZHJlc3NcIjogXCIweG1ha2VyYWRkcmVzc1wiLFxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VyQW1vdW50XCI6IFwiMTAwMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VySWRcIjogXCJtYWtlci1pZFwiLFxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VyVG9rZW5cIjogXCIweDFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlclVyaVwiOiBcIm1ha2VyLnVyaVwiLFxuICAgICAgICAgICAgICAgICAgICBcInRha2VyQW1vdW50XCI6IFwiMTAwMVwiLFxuICAgICAgICAgICAgICAgICAgICBcInRha2VyVG9rZW5cIjogXCIweDJcIixcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaXQoJ2dldHMgcHJpY2VzIGZyb20gd2hpdGVsaXN0ZWQgbWFrZXJzIG9ubHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVDb250ZXh0OiBRdW90ZUNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRmlybTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93OiAncmZxdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYWtlclRva2VuOiAnMHgxJyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAxLFxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmludGVncmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RNYWtlcklkczogWydtYWtlcjEnXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MScsXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsbGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHgwJyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4MicsXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0YWtlcmFkZHJlc3MnLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwcmljZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xuICAgICAgICAgICAgICAgICAgICAvLyAkZXNsaW50LWZpeC1tZSBodHRwczovL2dpdGh1Yi5jb20vcmhpbm9kYXZpZC9lc2xpbnQtZml4LW1lXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbG9zcy1vZi1wcmVjaXNpb25cbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKDk5OTk5OTk5OTk5OTk5OTkpLFxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXJhZGRyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweDEnLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogJ21ha2VyLnVyaScsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDEpLFxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHgyJyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlci5nZXRSZnF0VjJNYWtlcnNGb3JQYWlyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm1ha2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJJZDogJ21ha2VyMScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm1ha2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJJZDogJ21ha2VyMicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LmJhdGNoR2V0UHJpY2VWMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtwcmljZV0pO1xuICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLmNhbGN1bGF0ZUZlZUFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgZmVlV2l0aERldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnMHgwYjFiYTBhZjgzMmQ3YzA1ZmQ2NDE2MWUwZGI3OGU4NTk3OGU4MDgyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcXRTZXJ2aWNlID0gbmV3IFJmcXRTZXJ2aWNlKFxuICAgICAgICAgICAgICAgICAgICAxMzM3LCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVSZXF1ZXN0b3IsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9NSU5fRVhQSVJZX0RVUkFUSU9OX01TLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxQmxvY2tjaGFpblV0aWxzLFxuICAgICAgICAgICAgICAgICAgICBtb2NrVG9rZW5NZXRhZGF0YU1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tDb250cmFjdEFkZHJlc3NlcyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tDYWNoZUNsaWVudCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmZxdFNlcnZpY2UuZ2V0VjJQcmljZXNBc3luYyhxdW90ZUNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQubGVuZ3RoKS50b0VxdWFsKDEpO1xuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWFrZXJJZCkudG9FcXVhbCgnbWFrZXIxJyk7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdFswXSkudG9NYXRjaElubGluZVNuYXBzaG90KGBcbiAgICAgICAgICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICAgICAgICAgIFwiZXhwaXJ5XCI6IFwiMTAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlckFkZHJlc3NcIjogXCIweG1ha2VyYWRkcmVzc1wiLFxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VyQW1vdW50XCI6IFwiMTAwMFwiLFxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VySWRcIjogXCJtYWtlcjFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlclRva2VuXCI6IFwiMHgxXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibWFrZXJVcmlcIjogXCJtYWtlci51cmlcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0YWtlckFtb3VudFwiOiBcIjEwMDFcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0YWtlclRva2VuXCI6IFwiMHgyXCIsXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRlc2NyaWJlKCdnZXRWMlF1b3Rlc0FzeW5jJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWFrZXJUb2tlbiA9ICcweDk1YUQ2MWIwYTE1MGQ3OTIxOWRDRjY0RTFFNkNjMDFmMEI2NEM0Y0UnO1xuICAgICAgICAgICAgY29uc3QgbWFrZXJBZGRyZXNzID0gJzB4NzliN2E2OWQ5MGM4MkUwMTRCZjAzMTVlMTY0MjA4MTE5QjUxMEZBMCc7XG4gICAgICAgICAgICBjb25zdCB0YWtlclRva2VuID0gJzB4NDJkNjYyMmRlQ2UzOTRiNTQ5OTlGYmQ3M0QxMDgxMjM4MDZmNmExOCc7XG4gICAgICAgICAgICBjb25zdCB0YWtlckFkZHJlc3MgPSAnMHhFMDZmRkE4MTQ2YkJkRUNjQmFhRjcyQjYwNDNiMjkwOTEwNzFBRUI4JztcbiAgICAgICAgICAgIGNvbnN0IGZha2VOb3cgPSBuZXcgRGF0ZSgxNjU3MDY5Mjc4MTAzKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyeSA9IG5ldyBCaWdOdW1iZXIoZmFrZU5vdy5nZXRUaW1lKCkgKyAxXzAwMF8wMDApLmRpdmlkZWRCeShPTkVfU0VDT05EX01TKS5kZWNpbWFsUGxhY2VzKDApO1xuXG4gICAgICAgICAgICBtb2NrUmZxQmxvY2tjaGFpblV0aWxzLmlzVmFsaWRPcmRlclNpZ25lckFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuICAgICAgICAgICAgaXQoJ2ZpbHRlcnMgb3V0IHF1b3RlcyB3aXRoIG5vIHNpZ25hdHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVDb250ZXh0OiBGaXJtUXVvdGVDb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgICAgICBpc0Zpcm06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93OiAncmZxdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYWtlclRva2VuOiAnMHgxJyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAxLFxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3IsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgdHJhZGVyOiB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIuZ2V0UmZxdFYyTWFrZXJzRm9yUGFpciA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW21ha2VyXSk7XG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LmJhdGNoR2V0UHJpY2VWMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6IG1ha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBtYWtlci5yZnF0VXJpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcig5OTkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LnNpZ25WMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UuY2FsY3VsYXRlRmVlQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcweDBiMWJhMGFmODMyZDdjMDVmZDY0MTYxZTBkYjc4ZTg1OTc4ZTgwODInLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxdFNlcnZpY2UgPSBuZXcgUmZxdFNlcnZpY2UoXG4gICAgICAgICAgICAgICAgICAgIDEzMzcsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVJlcXVlc3RvcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFCbG9ja2NoYWluVXRpbHMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUb2tlbk1ldGFkYXRhTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NhY2hlQ2xpZW50LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZnF0U2VydmljZS5nZXRWMlF1b3Rlc0FzeW5jKHF1b3RlQ29udGV4dCk7XG5cbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9FcXVhbCgwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpdChcImRvZXNuJ3QgYmxvdyB1cCBpZiBhIHNpZ24gcmVxdWVzdCBmYWlsc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVDb250ZXh0OiBGaXJtUXVvdGVDb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgICAgICBpc0Zpcm06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93OiAncmZxdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYWtlclRva2VuOiAnMHgxJyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAxLFxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3IsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgdHJhZGVyOiB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIuZ2V0UmZxdFYyTWFrZXJzRm9yUGFpciA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW21ha2VyXSk7XG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LmJhdGNoR2V0UHJpY2VWMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6IG1ha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBtYWtlci5yZnF0VXJpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcig5OTkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LnNpZ25WMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRVhQTE9ERScpKTtcbiAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZS5jYWxjdWxhdGVGZWVBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcbiAgICAgICAgICAgICAgICAgICAgMTMzNywgLy8gdHNsaW50OmRpc2FibGUtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1Rva2VuTWV0YWRhdGFNYW5hZ2VyLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ29udHJhY3RBZGRyZXNzZXMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBtb2NrQ2FjaGVDbGllbnQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJmcXRTZXJ2aWNlLmdldFYyUXVvdGVzQXN5bmMocXVvdGVDb250ZXh0KTtcblxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQubGVuZ3RoKS50b0VxdWFsKDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KCdbd29ya2Zsb3c6IHJmcXRdIGNyZWF0ZXMgb3JkZXJzIHdpdGggdW5pcXVlIG5vbmNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZUNvbnRleHQ6IEZpcm1RdW90ZUNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRmlybTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3c6ICdyZnF0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNVbndyYXA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1ha2VyVG9rZW46ICcweDEnLFxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuRGVjaW1hbHM6IDE4LFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRGVjaW1hbHM6IDE4LFxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgaXNTZWxsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICB0cmFkZXI6IHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46IHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlci5nZXRSZnF0VjJNYWtlcnNGb3JQYWlyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbbWFrZXJdKTtcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuYmF0Y2hHZXRQcmljZVYyQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogbWFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IG1ha2VyLnJmcXRVcmksXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDk5OSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6IG1ha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBtYWtlci5yZnF0VXJpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcig5MDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UuY2FsY3VsYXRlRmVlQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcweDBiMWJhMGFmODMyZDdjMDVmZDY0MTYxZTBkYjc4ZTg1OTc4ZTgwODInLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMgPSBqZXN0XG4gICAgICAgICAgICAgICAgICAgIC5mbigpXG4gICAgICAgICAgICAgICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZShbbmV3IEJpZ051bWJlcigxMDAwMCksIG5ldyBCaWdOdW1iZXIoMTAwMDApXSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzaWduYXR1cmU6IFNpZ25hdHVyZSA9IHsgcjogJ3InLCB2OiAyMSwgczogJ3MnLCBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkVJUDcxMiB9O1xuICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudC5zaWduVjJBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShzaWduYXR1cmUpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxdFNlcnZpY2UgPSBuZXcgUmZxdFNlcnZpY2UoXG4gICAgICAgICAgICAgICAgICAgIDEzMzcsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVJlcXVlc3RvcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFCbG9ja2NoYWluVXRpbHMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUb2tlbk1ldGFkYXRhTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NhY2hlQ2xpZW50LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZnF0U2VydmljZS5nZXRWMlF1b3Rlc0FzeW5jKHF1b3RlQ29udGV4dCwgZmFrZU5vdyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBbeyBub25jZTogbm9uY2UxIH0sIHsgbm9uY2U6IG5vbmNlMiB9XSA9IFtcbiAgICAgICAgICAgICAgICAgICAgT3RjT3JkZXIucGFyc2VFeHBpcnlBbmROb25jZShyZXN1bHRbMF0ub3JkZXIuZXhwaXJ5QW5kTm9uY2UpLFxuICAgICAgICAgICAgICAgICAgICBPdGNPcmRlci5wYXJzZUV4cGlyeUFuZE5vbmNlKHJlc3VsdFsxXS5vcmRlci5leHBpcnlBbmROb25jZSksXG4gICAgICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgICAgIGV4cGVjdChub25jZTEudG9TdHJpbmcoKSkubm90LnRvRXF1YWwobm9uY2UyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KCdbd29ya2Zsb3c6IGdhc2xlc3MtcmZxdF0gY3JlYXRlcyBvcmRlcnMgd2l0aCB1bmlxdWUgYnVja2V0cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZUNvbnRleHQ6IEZpcm1RdW90ZUNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzRmlybTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3c6ICdnYXNsZXNzLXJmcXQnLFxuICAgICAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWFrZXJUb2tlbjogJzB4MScsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5EZWNpbWFsczogMTgsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5EZWNpbWFsczogMTgsXG4gICAgICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxuICAgICAgICAgICAgICAgICAgICBpc1NlbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIHRyYWRlcjogdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuLFxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLmdldFJmcXRWMk1ha2Vyc0ZvclBhaXIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFttYWtlcl0pO1xuICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudC5iYXRjaEdldFByaWNlVjJBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiBtYWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogbWFrZXIucmZxdFVyaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoOTk5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogbWFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IG1ha2VyLnJmcXRVcmksXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDkwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZS5jYWxjdWxhdGVGZWVBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyA9IGplc3RcbiAgICAgICAgICAgICAgICAgICAgLmZuKClcbiAgICAgICAgICAgICAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlKFtuZXcgQmlnTnVtYmVyKDEwMDAwKSwgbmV3IEJpZ051bWJlcigxMDAwMCldKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZTogU2lnbmF0dXJlID0geyByOiAncicsIHY6IDIxLCBzOiAncycsIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRUlQNzEyIH07XG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LnNpZ25WMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHNpZ25hdHVyZSk7XG5cbiAgICAgICAgICAgICAgICAvLyAwIGlzIGEgc3BlY2lhbCByZXR1cm4gdmFsdWUgc2luY2UgdGhpcyB3aWxsIHRyaWdnZXIgYSB3cmFwIGFyb3VuZFxuICAgICAgICAgICAgICAgIG1vY2tDYWNoZUNsaWVudC5nZXROZXh0Tk90Y09yZGVyQnVja2V0c0FzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxdFNlcnZpY2UgPSBuZXcgUmZxdFNlcnZpY2UoXG4gICAgICAgICAgICAgICAgICAgIDEzMzcsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVJlcXVlc3RvcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFCbG9ja2NoYWluVXRpbHMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUb2tlbk1ldGFkYXRhTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NhY2hlQ2xpZW50LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZnF0U2VydmljZS5nZXRWMlF1b3Rlc0FzeW5jKHF1b3RlQ29udGV4dCwgZmFrZU5vdyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCcsIHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBbeyBub25jZUJ1Y2tldDogYnVja2V0MSB9LCB7IG5vbmNlQnVja2V0OiBidWNrZXQyIH1dID0gW1xuICAgICAgICAgICAgICAgICAgICBPdGNPcmRlci5wYXJzZUV4cGlyeUFuZE5vbmNlKHJlc3VsdFswXS5vcmRlci5leHBpcnlBbmROb25jZSksXG4gICAgICAgICAgICAgICAgICAgIE90Y09yZGVyLnBhcnNlRXhwaXJ5QW5kTm9uY2UocmVzdWx0WzFdLm9yZGVyLmV4cGlyeUFuZE5vbmNlKSxcbiAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgZXhwZWN0KGJ1Y2tldDEudG9TdHJpbmcoKSkubm90LnRvRXF1YWwoYnVja2V0Mi50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGF0IGJ1Y2tldHMgYXJlIGdyZWF0ZXIgdGhhbiB6ZXJvIChzdWNjZXNzZnVsbHkgd3JhcHBlZCBhcm91bmQgZm9yIG5lZ2F0aXZlIG51bWJlcnMpXG4gICAgICAgICAgICAgICAgZXhwZWN0KGJ1Y2tldDEudG9OdW1iZXIoKSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgICAgICAgICAgICBleHBlY3QoYnVja2V0Mi50b051bWJlcigpKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0KCdnZXRzIGEgc2lnbmVkIHF1b3RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlQ29udGV4dDogRmlybVF1b3RlQ29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICAgICAgaXNGaXJtOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvdzogJ3JmcXQnLFxuICAgICAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWFrZXJUb2tlbjogJzB4MScsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5EZWNpbWFsczogMTgsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5EZWNpbWFsczogMTgsXG4gICAgICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxuICAgICAgICAgICAgICAgICAgICBpc1NlbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6IE5VTExfQUREUkVTUyxcbiAgICAgICAgICAgICAgICAgICAgdHJhZGVyOiB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIuZ2V0UmZxdFYyTWFrZXJzRm9yUGFpciA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW21ha2VyXSk7XG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LmJhdGNoR2V0UHJpY2VWMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6IG1ha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBtYWtlci5yZnF0VXJpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcig5OTkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlOiBTaWduYXR1cmUgPSB7IHI6ICdyJywgdjogMjEsIHM6ICdzJywgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FSVA3MTIgfTtcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuc2lnblYyQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoc2lnbmF0dXJlKTtcbiAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZS5jYWxjdWxhdGVGZWVBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyA9IGplc3RcbiAgICAgICAgICAgICAgICAgICAgLmZuKClcbiAgICAgICAgICAgICAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlKFtuZXcgQmlnTnVtYmVyKDEwMDAwKV0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxdFNlcnZpY2UgPSBuZXcgUmZxdFNlcnZpY2UoXG4gICAgICAgICAgICAgICAgICAgIDEzMzcsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVJlcXVlc3RvcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LFxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFCbG9ja2NoYWluVXRpbHMsXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUb2tlbk1ldGFkYXRhTWFuYWdlcixcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NhY2hlQ2xpZW50LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZnF0U2VydmljZS5nZXRWMlF1b3Rlc0FzeW5jKHF1b3RlQ29udGV4dCwgZmFrZU5vdyk7XG5cbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9FcXVhbCgxKTtcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0WzBdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbGFibGVNYWtlckFtb3VudDogbmV3IEJpZ051bWJlcig5OTkpLFxuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZVRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZVRha2VyRmVlQW1vdW50OiBuZXcgQmlnTnVtYmVyKDApLFxuICAgICAgICAgICAgICAgICAgICBtYWtlcklkOiBtYWtlci5tYWtlcklkLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogbWFrZXIucmZxdFVyaSxcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHRbMF0ub3JkZXIpLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChgXG4gICAgICAgICAgICAgICAgT3RjT3JkZXIge1xuICAgICAgICAgICAgICAgICAgXCJjaGFpbklkXCI6IDEzMzcsXG4gICAgICAgICAgICAgICAgICBcImV4cGlyeVwiOiBcIjE2NTcwNzAyNzhcIixcbiAgICAgICAgICAgICAgICAgIFwiZXhwaXJ5QW5kTm9uY2VcIjogXCIxMDQwMTU5ODcxNzY5MTQ4OTUzMDgyNjYyMzkyNTg2NDE4NzQzOTg2MTk5MzgxMjgxMjgzMTIzMTI4NzgyNjM3NDM2NlwiLFxuICAgICAgICAgICAgICAgICAgXCJtYWtlclwiOiBcIjB4NzliN2E2OWQ5MGM4MkUwMTRCZjAzMTVlMTY0MjA4MTE5QjUxMEZBMFwiLFxuICAgICAgICAgICAgICAgICAgXCJtYWtlckFtb3VudFwiOiBcIjk5OVwiLFxuICAgICAgICAgICAgICAgICAgXCJtYWtlclRva2VuXCI6IFwiMHg5NWFENjFiMGExNTBkNzkyMTlkQ0Y2NEUxRTZDYzAxZjBCNjRDNGNFXCIsXG4gICAgICAgICAgICAgICAgICBcIm5vbmNlXCI6IFwiMTY1NzA2OTI3OFwiLFxuICAgICAgICAgICAgICAgICAgXCJub25jZUJ1Y2tldFwiOiBcIjBcIixcbiAgICAgICAgICAgICAgICAgIFwidGFrZXJcIjogXCIweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIixcbiAgICAgICAgICAgICAgICAgIFwidGFrZXJBbW91bnRcIjogXCIxMDAwXCIsXG4gICAgICAgICAgICAgICAgICBcInRha2VyVG9rZW5cIjogXCIweDQyZDY2MjJkZUNlMzk0YjU0OTk5RmJkNzNEMTA4MTIzODA2ZjZhMThcIixcbiAgICAgICAgICAgICAgICAgIFwidHhPcmlnaW5cIjogXCIweEUwNmZGQTgxNDZiQmRFQ2NCYWFGNzJCNjA0M2IyOTA5MTA3MUFFQjhcIixcbiAgICAgICAgICAgICAgICAgIFwidmVyaWZ5aW5nQ29udHJhY3RcIjogXCIweDUzMTVlNDQ3OTgzOTVkNGE5NTI1MzBkMTMxMjQ5ZmUwMGY1NTQ1NjVcIixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=
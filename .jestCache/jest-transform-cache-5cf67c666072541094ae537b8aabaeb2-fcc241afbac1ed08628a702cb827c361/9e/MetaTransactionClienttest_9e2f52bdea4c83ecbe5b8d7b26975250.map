{"file":"/Users/davidwalsh/code-local/0x-rfq-api/test/utils/MetaTransactionClient.test.ts","mappings":"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","names":[],"sources":["/Users/davidwalsh/code-local/0x-rfq-api/test/utils/MetaTransactionClient.test.ts"],"sourcesContent":["import { ValidationError, ValidationErrorCodes } from '@0x/api-utils';\r\nimport { MetaTransaction } from '@0x/protocol-utils';\r\nimport { SwapQuoterError } from '@0x/asset-swapper';\r\nimport { BigNumber } from '@0x/utils';\r\nimport Axios, { AxiosInstance } from 'axios';\r\nimport AxiosMockAdapter from 'axios-mock-adapter';\r\nimport { BAD_REQUEST, NOT_ACCEPTABLE, OK } from 'http-status-codes';\r\nimport { TwirpError } from 'twirpscript';\r\nimport { APIErrorCodes, apiErrorCodesToReasons } from '../../src/core/errors';\r\nimport { GetQuote, GetQuoteResponse } from '../../src/proto-ts/meta_transaction.pb';\r\nimport { getV1QuoteAsync, getQuoteRpc, getV2QuoteAsync } from '../../src/utils/MetaTransactionClient';\r\nimport { bigNumberToProto, protoToBigNumber } from '../../src/utils/ProtoUtils';\r\nimport { MetaTransactionV2 } from '../../src/services/types';\r\n\r\njest.mock('../../src/proto-ts/meta_transaction.pb');\r\nconst mockGetQuote = jest.mocked(GetQuote);\r\n\r\nlet axiosClient: AxiosInstance;\r\nlet axiosMock: AxiosMockAdapter;\r\n\r\ndescribe('MetaTransactionClient', () => {\r\n    const integratorAddress = '0x4ea754349ace5303c82f0d1d491041e042f2ad22';\r\n    const zeroExAddress = '0x4ea754349ace5303c82f0d1d491041e042f2ad22';\r\n\r\n    beforeAll(() => {\r\n        axiosClient = Axios.create();\r\n        axiosMock = new AxiosMockAdapter(axiosClient);\r\n    });\r\n    describe('getV1QuoteAsync', () => {\r\n        it('should get a metatransaction quote', async () => {\r\n            const exampleSuccessfulResponse = {\r\n                allowanceTarget: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\r\n                buyAmount: '1800054805473',\r\n                buyTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\r\n                buyTokenToEthRate: '0.851202',\r\n                chainId: 137,\r\n                estimatedGas: '1043459',\r\n                estimatedPriceImpact: '1.6301',\r\n                gas: '1043459',\r\n                gasPrice: '115200000000',\r\n                minimumProtocolFee: '0',\r\n                metaTransaction: {\r\n                    callData:\r\n                        '0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000019eeab6030b00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac1897880000000000000000000000000000000000000000000000000000003f47a215c5000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c4bc40000000000000000000000000000000000000000000000000000001f2c6f738e000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c4bc40000000000000000000000000000000000000000000000000000001f811895a7000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000001d30a7ac56da56396a000000000000000000000000000000000000000000000000000000e10b7768e500000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e6973776170563300000000000000000000000000000000000000000000000000000000000008570b55cfac1897880000000000000000000000000000000000000000000000000000003fea147b29000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c630000000000000000000000000000000000000000000000f789bac21b62fed5ef',\r\n                    domain: {\r\n                        chainId: 137,\r\n                        verifyingContract: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\r\n                    },\r\n                    expirationTimeSeconds: '1660868679',\r\n                    feeAmount: '0',\r\n                    feeToken: '0x0000000000000000000000000000000000000000',\r\n                    maxGasPrice: '4294967296',\r\n                    minGasPrice: '1',\r\n                    salt: '32606650794224189614795510724011106220035660490560169776986607186708081701146',\r\n                    sender: '0x0000000000000000000000000000000000000000',\r\n                    signer: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                    value: '0',\r\n                },\r\n                metaTransactionHash: '0x16688406783c0e721a69e5c9f2727e2d30f24a0669522c1fb6937460348b4095',\r\n                price: '1800.054805',\r\n                protocolFee: '0',\r\n                sellAmount: '1000000000000000000000',\r\n                sellTokenAddress: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                sellTokenToEthRate: '0.000465167371348443',\r\n                sources: [\r\n                    {\r\n                        name: 'SushiSwap',\r\n                        proportion: '0',\r\n                    },\r\n                    {\r\n                        name: 'QuickSwap',\r\n                        proportion: '0.2308',\r\n                    },\r\n                    {\r\n                        name: 'DODO_V2',\r\n                        proportion: '0.07692',\r\n                    },\r\n                    {\r\n                        name: 'Uniswap_V3',\r\n                        proportion: '0.6923',\r\n                    },\r\n                ],\r\n                value: '0',\r\n            };\r\n\r\n            const url = new URL('https://quoteserver.pizza/quote');\r\n\r\n            axiosMock.onGet(url.toString()).replyOnce(OK, exampleSuccessfulResponse);\r\n\r\n            const response = await getV1QuoteAsync(axiosClient, url, {\r\n                buyToken: 'USDC',\r\n                chainId: 137,\r\n                integratorId: 'integrator-id',\r\n                sellToken: 'WETH',\r\n                sellAmount: new BigNumber(1000000000000000000000),\r\n                takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n            });\r\n\r\n            expect(response?.metaTransaction).toBeInstanceOf(MetaTransaction);\r\n            expect(response?.metaTransaction.getHash()).toEqual(exampleSuccessfulResponse.metaTransactionHash);\r\n            expect(response?.price).toEqual({\r\n                buyAmount: exampleSuccessfulResponse.buyAmount,\r\n                buyTokenAddress: exampleSuccessfulResponse.buyTokenAddress,\r\n                gas: exampleSuccessfulResponse.gas,\r\n                price: exampleSuccessfulResponse.price,\r\n                sellAmount: exampleSuccessfulResponse.sellAmount,\r\n                sellTokenAddress: exampleSuccessfulResponse.sellTokenAddress,\r\n            });\r\n        });\r\n\r\n        it('should return `null` when no liquidity is available', async () => {\r\n            const exampleNoLiquidityResponse = {\r\n                code: 100,\r\n                reason: 'Validation Failed',\r\n                validationErrors: [\r\n                    {\r\n                        field: 'sellAmount',\r\n                        code: 1004,\r\n                        reason: 'INSUFFICIENT_ASSET_LIQUIDITY',\r\n                    },\r\n                ],\r\n            };\r\n\r\n            const url = new URL('https://quoteserver.pizza/quote');\r\n\r\n            axiosMock.onGet(url.toString()).replyOnce(BAD_REQUEST, exampleNoLiquidityResponse);\r\n\r\n            const response = await getV1QuoteAsync(axiosClient, url, {\r\n                buyToken: 'USDC',\r\n                chainId: 137,\r\n                integratorId: 'integrator-id',\r\n                sellToken: '0x0000000000000000000000000000000000000000',\r\n                sellAmount: new BigNumber(1000000000000000000000),\r\n                takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                slippagePercentage: new BigNumber(0.2),\r\n            });\r\n\r\n            expect(response).toBeNull();\r\n        });\r\n\r\n        it('should throw validation error when meta-transaction server returns the insufficient fund error', async () => {\r\n            const exampleInsufficientFundErrorResponse = {\r\n                code: APIErrorCodes.InsufficientFundsError,\r\n                reason: apiErrorCodesToReasons[APIErrorCodes.InsufficientFundsError],\r\n            };\r\n\r\n            const url = new URL('https://quoteserver.pizza/quote');\r\n\r\n            axiosMock.onGet(url.toString()).reply(BAD_REQUEST, exampleInsufficientFundErrorResponse);\r\n\r\n            await expect(() =>\r\n                getV1QuoteAsync(axiosClient, url, {\r\n                    buyToken: 'USDC',\r\n                    chainId: 137,\r\n                    integratorId: 'integrator-id',\r\n                    sellToken: '0x0000000000000000000000000000000000000000',\r\n                    sellAmount: new BigNumber(1000000000000000000000),\r\n                    takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                    slippagePercentage: new BigNumber(0.2),\r\n                }),\r\n            ).rejects.toThrow(ValidationError);\r\n        });\r\n\r\n        it(\"should throw an error if the response doesn't match the no liquidity response + the insufficient fund error\", async () => {\r\n            const url = new URL('https://quoteserver.pizza/quote');\r\n\r\n            axiosMock.onGet(url.toString()).replyOnce(NOT_ACCEPTABLE);\r\n\r\n            await expect(() =>\r\n                getV1QuoteAsync(axiosClient, url, {\r\n                    buyToken: 'USDC',\r\n                    chainId: 137,\r\n                    integratorId: 'integrator-id',\r\n                    sellToken: '0x0000000000000000000000000000000000000000',\r\n                    sellAmount: new BigNumber(1000000000000000000000),\r\n                    takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                }),\r\n            ).rejects.toThrow();\r\n        });\r\n    });\r\n\r\n    describe('getV2QuoteAsync', () => {\r\n        it('should get a metatransaction quote', async () => {\r\n            const exampleSuccessfulResponse = {\r\n                allowanceTarget: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\r\n                buyAmount: '1800054805473',\r\n                buyTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\r\n                buyTokenToEthRate: '0.851202',\r\n                chainId: 137,\r\n                estimatedGas: '1043459',\r\n                estimatedPriceImpact: '1.6301',\r\n                gas: '1043459',\r\n                gasPrice: '115200000000',\r\n                minimumProtocolFee: '0',\r\n                metaTransaction: {\r\n                    callData:\r\n                        '0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000019eeab6030b00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac1897880000000000000000000000000000000000000000000000000000003f47a215c5000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c4bc40000000000000000000000000000000000000000000000000000001f2c6f738e000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c4bc40000000000000000000000000000000000000000000000000000001f811895a7000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000001d30a7ac56da56396a000000000000000000000000000000000000000000000000000000e10b7768e500000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e6973776170563300000000000000000000000000000000000000000000000000000000000008570b55cfac1897880000000000000000000000000000000000000000000000000000003fea147b29000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c630000000000000000000000000000000000000000000000f789bac21b62fed5ef',\r\n                    domain: {\r\n                        chainId: 137,\r\n                        verifyingContract: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\r\n                    },\r\n                    expirationTimeSeconds: '1660868679',\r\n                    feeAmount: '0',\r\n                    feeToken: '0x0000000000000000000000000000000000000000',\r\n                    maxGasPrice: '4294967296',\r\n                    minGasPrice: '1',\r\n                    salt: '32606650794224189614795510724011106220035660490560169776986607186708081701146',\r\n                    sender: '0x0000000000000000000000000000000000000000',\r\n                    signer: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                    value: '0',\r\n                },\r\n                metaTransactionHash: '0x16688406783c0e721a69e5c9f2727e2d30f24a0669522c1fb6937460348b4095',\r\n                price: '1800.054805',\r\n                protocolFee: '0',\r\n                sellAmount: '1000000000000000000000',\r\n                sellTokenAddress: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                sellTokenToEthRate: '0.000465167371348443',\r\n                sources: [\r\n                    {\r\n                        name: 'SushiSwap',\r\n                        proportion: '0',\r\n                    },\r\n                    {\r\n                        name: 'QuickSwap',\r\n                        proportion: '0.2308',\r\n                    },\r\n                    {\r\n                        name: '\"Aave_V2',\r\n                        proportion: '0',\r\n                    },\r\n                    {\r\n                        name: 'DODO_V2',\r\n                        proportion: '0.07692',\r\n                    },\r\n                    {\r\n                        name: 'Uniswap_V3',\r\n                        proportion: '0.6923',\r\n                    },\r\n                ],\r\n                value: '0',\r\n                fees: {\r\n                    integratorFee: {\r\n                        type: 'volume',\r\n                        feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                        feeAmount: '1000000000000000000',\r\n                        feeRecipient: integratorAddress,\r\n                        volumePercentage: '0.1',\r\n                    },\r\n                    zeroExFee: {\r\n                        type: 'integrator_share',\r\n                        feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                        feeAmount: '1000000000000000',\r\n                        feeRecipient: zeroExAddress,\r\n                        integratorSharePercentage: '0.1',\r\n                    },\r\n                    gasFee: {\r\n                        type: 'gas',\r\n                        gasPrice: '115200000000',\r\n                        feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                        feeAmount: '10000000',\r\n                        estimatedGas: '1043459',\r\n                        feeTokenAmountPerBaseUnitNativeToken: '0.001',\r\n                    },\r\n                },\r\n            };\r\n\r\n            const url = new URL('https://quoteserver.pizza/quote');\r\n\r\n            axiosMock.onPost(url.toString()).replyOnce(OK, exampleSuccessfulResponse);\r\n\r\n            const response = await getV2QuoteAsync(axiosClient, url, {\r\n                buyToken: 'USDC',\r\n                chainId: 137,\r\n                integratorId: 'integrator-id',\r\n                sellToken: 'WETH',\r\n                sellAmount: new BigNumber(1000000000000000000000),\r\n                takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n            });\r\n\r\n            expect(response?.metaTransaction).toBeInstanceOf(MetaTransactionV2);\r\n            expect(response?.metaTransaction.getHash()).toEqual(exampleSuccessfulResponse.metaTransactionHash);\r\n            expect(response?.price).toEqual({\r\n                buyAmount: new BigNumber(exampleSuccessfulResponse.buyAmount),\r\n                buyTokenAddress: exampleSuccessfulResponse.buyTokenAddress,\r\n                gas: new BigNumber(exampleSuccessfulResponse.gas),\r\n                price: new BigNumber(exampleSuccessfulResponse.price),\r\n                sellAmount: new BigNumber(exampleSuccessfulResponse.sellAmount),\r\n                sellTokenAddress: exampleSuccessfulResponse.sellTokenAddress,\r\n            });\r\n            expect(response?.sources).toEqual([\r\n                {\r\n                    name: 'QuickSwap',\r\n                    proportion: new BigNumber('0.2308'),\r\n                },\r\n                {\r\n                    name: 'DODO_V2',\r\n                    proportion: new BigNumber('0.07692'),\r\n                },\r\n                {\r\n                    name: 'Uniswap_V3',\r\n                    proportion: new BigNumber('0.6923'),\r\n                },\r\n            ]);\r\n            expect(response?.fees).toEqual({\r\n                integratorFee: {\r\n                    type: 'volume',\r\n                    feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                    feeAmount: new BigNumber(1000000000000000000),\r\n                    feeRecipient: integratorAddress,\r\n                    volumePercentage: new BigNumber(0.1),\r\n                },\r\n                zeroExFee: {\r\n                    type: 'integrator_share',\r\n                    feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                    feeAmount: new BigNumber(1000000000000000),\r\n                    feeRecipient: zeroExAddress,\r\n                    integratorSharePercentage: new BigNumber(0.1),\r\n                },\r\n                gasFee: {\r\n                    type: 'gas',\r\n                    gasPrice: new BigNumber(115200000000),\r\n                    feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                    feeAmount: new BigNumber(10000000),\r\n                    estimatedGas: new BigNumber(1043459),\r\n                    feeTokenAmountPerBaseUnitNativeToken: new BigNumber(0.001),\r\n                },\r\n            });\r\n        });\r\n\r\n        it('should return `null` when no liquidity is available', async () => {\r\n            const exampleNoLiquidityResponse = {\r\n                code: 100,\r\n                reason: 'Validation Failed',\r\n                validationErrors: [\r\n                    {\r\n                        field: 'sellAmount',\r\n                        code: 1004,\r\n                        reason: 'INSUFFICIENT_ASSET_LIQUIDITY',\r\n                    },\r\n                ],\r\n            };\r\n\r\n            const url = new URL('https://quoteserver.pizza/quote');\r\n\r\n            axiosMock.onPost(url.toString()).replyOnce(BAD_REQUEST, exampleNoLiquidityResponse);\r\n\r\n            const response = await getV2QuoteAsync(axiosClient, url, {\r\n                buyToken: 'USDC',\r\n                chainId: 137,\r\n                integratorId: 'integrator-id',\r\n                sellToken: '0x0000000000000000000000000000000000000000',\r\n                sellAmount: new BigNumber(1000000000000000000000),\r\n                takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                slippagePercentage: new BigNumber(0.2),\r\n            });\r\n\r\n            expect(response).toBeNull();\r\n        });\r\n\r\n        it('should throw validation error when meta-transaction server returns the insufficient fund error', async () => {\r\n            const exampleInsufficientFundErrorResponse = {\r\n                code: APIErrorCodes.InsufficientFundsError,\r\n                reason: apiErrorCodesToReasons[APIErrorCodes.InsufficientFundsError],\r\n            };\r\n\r\n            const url = new URL('https://quoteserver.pizza/quote');\r\n\r\n            axiosMock.onPost(url.toString()).reply(BAD_REQUEST, exampleInsufficientFundErrorResponse);\r\n\r\n            await expect(() =>\r\n                getV2QuoteAsync(axiosClient, url, {\r\n                    buyToken: 'USDC',\r\n                    chainId: 137,\r\n                    integratorId: 'integrator-id',\r\n                    sellToken: '0x0000000000000000000000000000000000000000',\r\n                    sellAmount: new BigNumber(1000000000000000000000),\r\n                    takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                    slippagePercentage: new BigNumber(0.2),\r\n                }),\r\n            ).rejects.toThrow(ValidationError);\r\n        });\r\n\r\n        it(\"should throw an error if the response doesn't match the no liquidity response + the insufficient fund error\", async () => {\r\n            const url = new URL('https://quoteserver.pizza/quote');\r\n\r\n            axiosMock.onPost(url.toString()).replyOnce(NOT_ACCEPTABLE);\r\n\r\n            await expect(() =>\r\n                getV2QuoteAsync(axiosClient, url, {\r\n                    buyToken: 'USDC',\r\n                    chainId: 137,\r\n                    integratorId: 'integrator-id',\r\n                    sellToken: '0x0000000000000000000000000000000000000000',\r\n                    sellAmount: new BigNumber(1000000000000000000000),\r\n                    takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                }),\r\n            ).rejects.toThrow();\r\n        });\r\n    });\r\n\r\n    describe('getQuoteRpc', () => {\r\n        it('gets a quote', async () => {\r\n            const mockResponse: GetQuoteResponse = {\r\n                metaTransaction: {\r\n                    callData:\r\n                        '0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000019eeab6030b00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac1897880000000000000000000000000000000000000000000000000000003f47a215c5000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c4bc40000000000000000000000000000000000000000000000000000001f2c6f738e000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c4bc40000000000000000000000000000000000000000000000000000001f811895a7000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000001d30a7ac56da56396a000000000000000000000000000000000000000000000000000000e10b7768e500000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e6973776170563300000000000000000000000000000000000000000000000000000000000008570b55cfac1897880000000000000000000000000000000000000000000000000000003fea147b29000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c630000000000000000000000000000000000000000000000f789bac21b62fed5ef',\r\n                    chainId: 137,\r\n                    expirationTimeSeconds: bigNumberToProto(new BigNumber('1660868679')),\r\n                    feeAmount: bigNumberToProto(new BigNumber('0')),\r\n                    feeTokenAddress: '0x0000000000000000000000000000000000000000',\r\n                    maxGasPrice: bigNumberToProto(new BigNumber('4294967296')),\r\n                    minGasPrice: bigNumberToProto(new BigNumber('1')),\r\n                    salt: bigNumberToProto(\r\n                        new BigNumber('32606650794224189614795510724011106220035660490560169776986607186708081701146'),\r\n                    ),\r\n                    senderAddress: '0x0000000000000000000000000000000000000000',\r\n                    signerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                    value: bigNumberToProto(new BigNumber('0')),\r\n                    verifyingContract: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\r\n                },\r\n                quote: {\r\n                    allowanceTarget: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\r\n                    buyAmount: bigNumberToProto(new BigNumber('1800054805473')),\r\n                    buyTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\r\n                    buyTokenToNativeTokenRate: bigNumberToProto(new BigNumber('0.851202')),\r\n                    chainId: 137,\r\n                    estimatedGas: bigNumberToProto(new BigNumber('1043459')),\r\n                    estimatedPriceImpact: bigNumberToProto(new BigNumber('1.6301')),\r\n                    gas: bigNumberToProto(new BigNumber('1043459')),\r\n                    gasPrice: bigNumberToProto(new BigNumber('115200000000')),\r\n                    liquiditySources: [\r\n                        {\r\n                            hops: [],\r\n                            name: 'SushiSwap',\r\n                            proportion: bigNumberToProto(new BigNumber('0')),\r\n                        },\r\n                        {\r\n                            hops: [],\r\n                            name: 'QuickSwap',\r\n                            proportion: bigNumberToProto(new BigNumber('0.2308')),\r\n                        },\r\n                        {\r\n                            hops: [],\r\n                            name: 'DODO_V2',\r\n                            proportion: bigNumberToProto(new BigNumber('0.07692')),\r\n                        },\r\n                        {\r\n                            hops: [],\r\n                            name: 'Uniswap_V3',\r\n                            proportion: bigNumberToProto(new BigNumber('0.6923')),\r\n                        },\r\n                    ],\r\n                    minimumProtocolFee: bigNumberToProto(new BigNumber('0')),\r\n                    price: bigNumberToProto(new BigNumber('1800.054805')),\r\n                    protocolFee: bigNumberToProto(new BigNumber('0')),\r\n                    sellAmount: bigNumberToProto(new BigNumber('1000000000000000000000')),\r\n                    sellTokenAddress: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\r\n                    sellTokenToNativeTokenRate: bigNumberToProto(new BigNumber('0.000465167371348443')),\r\n                    value: bigNumberToProto(new BigNumber('0')),\r\n                },\r\n            };\r\n            mockGetQuote.mockResolvedValue(mockResponse);\r\n\r\n            const response = await getQuoteRpc({\r\n                buyToken: 'USDC',\r\n                chainId: 137,\r\n                integratorId: 'integrator-id',\r\n                sellToken: 'WETH',\r\n                sellAmount: new BigNumber(1000000000000000000000),\r\n                takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n            });\r\n\r\n            expect(response?.metaTransaction).toBeInstanceOf(MetaTransaction);\r\n            expect(response?.metaTransaction.callData).toEqual(mockResponse.metaTransaction.callData);\r\n            expect(response?.metaTransaction.expirationTimeSeconds.toNumber()).toEqual(1660868679);\r\n            expect(response?.metaTransaction.maxGasPrice.toNumber()).toEqual(4294967296);\r\n\r\n            expect(response?.price.buyAmount.toNumber()).toEqual(\r\n                protoToBigNumber(mockResponse.quote.buyAmount).toNumber(),\r\n            );\r\n            expect(response?.price.sellAmount.toNumber()).toEqual(\r\n                protoToBigNumber(mockResponse.quote.sellAmount).toNumber(),\r\n            );\r\n            expect(response?.price.buyTokenAddress).toEqual(mockResponse.quote.buyTokenAddress);\r\n            expect(response?.price.sellTokenAddress).toEqual(mockResponse.quote.sellTokenAddress);\r\n        });\r\n\r\n        it('returns `null` when no liquidity is available', async () => {\r\n            const noLiquidityError: TwirpError = {\r\n                code: 'not_found',\r\n                msg: 'No liquidity exists',\r\n                meta: {\r\n                    validationErrors: JSON.stringify([\r\n                        {\r\n                            field: 'sellAmount',\r\n                            code: ValidationErrorCodes.ValueOutOfRange,\r\n                            reason: SwapQuoterError.InsufficientAssetLiquidity,\r\n                        },\r\n                    ]),\r\n                },\r\n            };\r\n            mockGetQuote.mockRejectedValue(noLiquidityError);\r\n\r\n            const response = await getQuoteRpc({\r\n                buyToken: 'USDC',\r\n                chainId: 137,\r\n                integratorId: 'integrator-id',\r\n                sellToken: '0x0000000000000000000000000000000000000000',\r\n                sellAmount: new BigNumber(1000000000000000000000),\r\n                takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                slippagePercentage: new BigNumber(0.2),\r\n            });\r\n\r\n            expect(response).toBeNull();\r\n        });\r\n\r\n        it('should throw validation error when meta-transaction server returns the insufficient fund error', async () => {\r\n            const exampleInsufficientFundError: TwirpError = {\r\n                code: 'failed_precondition',\r\n                msg: apiErrorCodesToReasons[APIErrorCodes.InsufficientFundsError],\r\n                meta: { zeroexErrorCode: APIErrorCodes.InsufficientFundsError.toString() },\r\n            };\r\n            mockGetQuote.mockRejectedValue(exampleInsufficientFundError);\r\n\r\n            await expect(() =>\r\n                getQuoteRpc({\r\n                    buyToken: 'USDC',\r\n                    chainId: 137,\r\n                    integratorId: 'integrator-id',\r\n                    sellToken: '0x0000000000000000000000000000000000000000',\r\n                    sellAmount: new BigNumber(1000000000000000000000),\r\n                    takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                    slippagePercentage: new BigNumber(0.2),\r\n                }),\r\n            ).rejects.toThrow(ValidationError);\r\n\r\n            await expect(() =>\r\n                getQuoteRpc({\r\n                    buyToken: 'USDC',\r\n                    chainId: 137,\r\n                    integratorId: 'integrator-id',\r\n                    sellToken: '0x0000000000000000000000000000000000000000',\r\n                    buyAmount: new BigNumber(1000000000000000000000),\r\n                    takerAddress: '0xd8da6bf26964af9d7eed9e03e53415d37aa96045',\r\n                    slippagePercentage: new BigNumber(0.2),\r\n                }),\r\n            ).rejects.toThrow(ValidationError);\r\n        });\r\n    });\r\n});\r\n"],"version":3}
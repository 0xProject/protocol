ae2ae6c276e52f697f919f044460cd33
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.stringsToEIP712Context = exports.stringsToOtcOrderFields = exports.stringsToMetaTransactionFields = exports.stringsToSignature = void 0;
const utils_1 = require("@0x/utils");
/**
 * convert a Signature response into the data types expected by protocol-utils
 */
function stringsToSignature(strings) {
    return {
        signatureType: Number(strings.signatureType),
        v: Number(strings.v),
        r: strings.r,
        s: strings.s,
    };
}
exports.stringsToSignature = stringsToSignature;
/**
 * Converts the request payload for a gasless swap metatransaction into
 * the appropriate types
 */
function stringsToMetaTransactionFields(strings) {
    return {
        callData: strings.callData,
        chainId: Number(strings.chainId),
        expirationTimeSeconds: new utils_1.BigNumber(strings.expirationTimeSeconds),
        feeAmount: new utils_1.BigNumber(strings.feeAmount),
        feeToken: strings.feeToken,
        maxGasPrice: new utils_1.BigNumber(strings.maxGasPrice),
        minGasPrice: new utils_1.BigNumber(strings.minGasPrice),
        salt: new utils_1.BigNumber(strings.salt),
        sender: strings.sender,
        signer: strings.signer,
        value: new utils_1.BigNumber(strings.value),
        verifyingContract: strings.verifyingContract,
    };
}
exports.stringsToMetaTransactionFields = stringsToMetaTransactionFields;
/**
 * convert a JSON OtcOrder into an OtcOrder
 */
function stringsToOtcOrderFields(strings) {
    return {
        maker: strings.maker,
        taker: strings.taker,
        makerAmount: new utils_1.BigNumber(strings.makerAmount),
        takerAmount: new utils_1.BigNumber(strings.takerAmount),
        makerToken: strings.makerToken,
        takerToken: strings.takerToken,
        txOrigin: strings.txOrigin,
        expiryAndNonce: new utils_1.BigNumber(strings.expiryAndNonce),
        chainId: Number(strings.chainId),
        verifyingContract: strings.verifyingContract,
    };
}
exports.stringsToOtcOrderFields = stringsToOtcOrderFields;
// Internal function for handling the domain
function _stringsToEIP712Domain(strings) {
    const res = {
        ...strings,
        chainId: Number(strings.chainId),
    };
    // remove chainId if its NaN
    if (Number.isNaN(res.chainId)) {
        delete res.chainId;
    }
    return res;
}
/**
 * convert a JSON EIP712Context into an EIP712Context
 */
function stringsToEIP712Context(strings) {
    return {
        // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        types: strings.types,
        // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        primaryType: strings.primaryType,
        domain: _stringsToEIP712Domain(strings.domain),
        // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        message: strings.message,
    };
}
exports.stringsToEIP712Context = stringsToEIP712Context;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3NyYy91dGlscy9yZnFtX3JlcXVlc3RfdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQ0EscUNBQXNDO0FBMEJ0Qzs7R0FFRztBQUNILFNBQWdCLGtCQUFrQixDQUFDLE9BQThCO0lBQzdELE9BQU87UUFDSCxhQUFhLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUM7UUFDNUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ3BCLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNaLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUNmLENBQUM7QUFDTixDQUFDO0FBUEQsZ0RBT0M7QUFFRDs7O0dBR0c7QUFDSCxTQUFnQiw4QkFBOEIsQ0FBQyxPQUFpQztJQUM1RSxPQUFPO1FBQ0gsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRO1FBQzFCLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUNoQyxxQkFBcUIsRUFBRSxJQUFJLGlCQUFTLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDO1FBQ25FLFNBQVMsRUFBRSxJQUFJLGlCQUFTLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUMzQyxRQUFRLEVBQUUsT0FBTyxDQUFDLFFBQVE7UUFDMUIsV0FBVyxFQUFFLElBQUksaUJBQVMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1FBQy9DLFdBQVcsRUFBRSxJQUFJLGlCQUFTLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztRQUMvQyxJQUFJLEVBQUUsSUFBSSxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDakMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1FBQ3RCLE1BQU0sRUFBRSxPQUFPLENBQUMsTUFBTTtRQUN0QixLQUFLLEVBQUUsSUFBSSxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFDbkMsaUJBQWlCLEVBQUUsT0FBTyxDQUFDLGlCQUFpQjtLQUMvQyxDQUFDO0FBQ04sQ0FBQztBQWZELHdFQWVDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQix1QkFBdUIsQ0FBQyxPQUEwQjtJQUM5RCxPQUFPO1FBQ0gsS0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLO1FBQ3BCLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSztRQUNwQixXQUFXLEVBQUUsSUFBSSxpQkFBUyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDL0MsV0FBVyxFQUFFLElBQUksaUJBQVMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1FBQy9DLFVBQVUsRUFBRSxPQUFPLENBQUMsVUFBVTtRQUM5QixVQUFVLEVBQUUsT0FBTyxDQUFDLFVBQVU7UUFDOUIsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRO1FBQzFCLGNBQWMsRUFBRSxJQUFJLGlCQUFTLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQztRQUNyRCxPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7UUFDaEMsaUJBQWlCLEVBQUUsT0FBTyxDQUFDLGlCQUFpQjtLQUMvQyxDQUFDO0FBQ04sQ0FBQztBQWJELDBEQWFDO0FBRUQsNENBQTRDO0FBQzVDLFNBQVMsc0JBQXNCLENBQUMsT0FBeUM7SUFDckUsTUFBTSxHQUFHLEdBQWlCO1FBQ3RCLEdBQUcsT0FBTztRQUNWLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztLQUNuQyxDQUFDO0lBRUYsNEJBQTRCO0lBQzVCLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDM0IsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDO0tBQ3RCO0lBRUQsT0FBTyxHQUFHLENBQUM7QUFDZixDQUFDO0FBRUQ7O0dBRUc7QUFDSCxTQUFnQixzQkFBc0IsQ0FDbEMsT0FBK0I7SUFFL0IsT0FBTztRQUNILDZEQUE2RDtRQUM3RCw4REFBOEQ7UUFDOUQsS0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFZO1FBQzNCLDZEQUE2RDtRQUM3RCw4REFBOEQ7UUFDOUQsV0FBVyxFQUFFLE9BQU8sQ0FBQyxXQUFrQjtRQUN2QyxNQUFNLEVBQUUsc0JBQXNCLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztRQUM5Qyw2REFBNkQ7UUFDN0QsOERBQThEO1FBQzlELE9BQU8sRUFBRSxPQUFPLENBQUMsT0FBYztLQUNsQyxDQUFDO0FBQ04sQ0FBQztBQWZELHdEQWVDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZHdhbHNoL2NvZGUtbG9jYWwvMHgtcmZxLWFwaS9zcmMvdXRpbHMvcmZxbV9yZXF1ZXN0X3V0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1ldGFUcmFuc2FjdGlvbkZpZWxkcywgT3RjT3JkZXJGaWVsZHMsIFNpZ25hdHVyZSB9IGZyb20gJ0AweC9wcm90b2NvbC11dGlscyc7XHJcbmltcG9ydCB7IEJpZ051bWJlciB9IGZyb20gJ0AweC91dGlscyc7XHJcblxyXG5pbXBvcnQgeyBFaXA3MTJEYXRhRmllbGQsIEVpcDcxMkRvbWFpbiwgRXhlY3V0ZU1ldGFUcmFuc2FjdGlvbkVpcDcxMkNvbnRleHQsIFBlcm1pdEVpcDcxMkNvbnRleHQgfSBmcm9tICcuLi9jb3JlL3R5cGVzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU3RyaW5nU2lnbmF0dXJlRmllbGRzIHtcclxuICAgIHNpZ25hdHVyZVR5cGU6IHN0cmluZztcclxuICAgIHY6IHN0cmluZztcclxuICAgIHI6IHN0cmluZztcclxuICAgIHM6IHN0cmluZztcclxufVxyXG5cclxuLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5leHBvcnQgdHlwZSBSYXdPdGNPcmRlckZpZWxkcyA9IFJlY29yZDxrZXlvZiBPbWl0PE90Y09yZGVyRmllbGRzLCAnY2hhaW5JZCc+LCBzdHJpbmc+ICYgeyBjaGFpbklkOiBhbnkgfTtcclxuLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5leHBvcnQgdHlwZSBSYXdNZXRhVHJhbnNhY3Rpb25GaWVsZHMgPSBSZWNvcmQ8a2V5b2YgT21pdDxNZXRhVHJhbnNhY3Rpb25GaWVsZHMsICdjaGFpbklkJz4sIHN0cmluZz4gJiB7IGNoYWluSWQ6IGFueSB9O1xyXG5leHBvcnQgaW50ZXJmYWNlIFJhd0VJUDcxMkNvbnRleHRGaWVsZHMge1xyXG4gICAgdHlwZXM6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxrZXlvZiBFaXA3MTJEYXRhRmllbGQsIHN0cmluZz5bXT47XHJcbiAgICBwcmltYXJ5VHlwZTogc3RyaW5nO1xyXG4gICAgZG9tYWluOiBSZWNvcmQ8a2V5b2YgRWlwNzEyRG9tYWluLCBzdHJpbmc+O1xyXG4gICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIG1lc3NhZ2U6IFJlY29yZDxzdHJpbmcsIGFueT47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBjb252ZXJ0IGEgU2lnbmF0dXJlIHJlc3BvbnNlIGludG8gdGhlIGRhdGEgdHlwZXMgZXhwZWN0ZWQgYnkgcHJvdG9jb2wtdXRpbHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdzVG9TaWduYXR1cmUoc3RyaW5nczogU3RyaW5nU2lnbmF0dXJlRmllbGRzKTogU2lnbmF0dXJlIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgc2lnbmF0dXJlVHlwZTogTnVtYmVyKHN0cmluZ3Muc2lnbmF0dXJlVHlwZSksXHJcbiAgICAgICAgdjogTnVtYmVyKHN0cmluZ3MudiksXHJcbiAgICAgICAgcjogc3RyaW5ncy5yLFxyXG4gICAgICAgIHM6IHN0cmluZ3MucyxcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyB0aGUgcmVxdWVzdCBwYXlsb2FkIGZvciBhIGdhc2xlc3Mgc3dhcCBtZXRhdHJhbnNhY3Rpb24gaW50b1xyXG4gKiB0aGUgYXBwcm9wcmlhdGUgdHlwZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdzVG9NZXRhVHJhbnNhY3Rpb25GaWVsZHMoc3RyaW5nczogUmF3TWV0YVRyYW5zYWN0aW9uRmllbGRzKTogTWV0YVRyYW5zYWN0aW9uRmllbGRzIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY2FsbERhdGE6IHN0cmluZ3MuY2FsbERhdGEsXHJcbiAgICAgICAgY2hhaW5JZDogTnVtYmVyKHN0cmluZ3MuY2hhaW5JZCksXHJcbiAgICAgICAgZXhwaXJhdGlvblRpbWVTZWNvbmRzOiBuZXcgQmlnTnVtYmVyKHN0cmluZ3MuZXhwaXJhdGlvblRpbWVTZWNvbmRzKSxcclxuICAgICAgICBmZWVBbW91bnQ6IG5ldyBCaWdOdW1iZXIoc3RyaW5ncy5mZWVBbW91bnQpLFxyXG4gICAgICAgIGZlZVRva2VuOiBzdHJpbmdzLmZlZVRva2VuLFxyXG4gICAgICAgIG1heEdhc1ByaWNlOiBuZXcgQmlnTnVtYmVyKHN0cmluZ3MubWF4R2FzUHJpY2UpLFxyXG4gICAgICAgIG1pbkdhc1ByaWNlOiBuZXcgQmlnTnVtYmVyKHN0cmluZ3MubWluR2FzUHJpY2UpLFxyXG4gICAgICAgIHNhbHQ6IG5ldyBCaWdOdW1iZXIoc3RyaW5ncy5zYWx0KSxcclxuICAgICAgICBzZW5kZXI6IHN0cmluZ3Muc2VuZGVyLFxyXG4gICAgICAgIHNpZ25lcjogc3RyaW5ncy5zaWduZXIsXHJcbiAgICAgICAgdmFsdWU6IG5ldyBCaWdOdW1iZXIoc3RyaW5ncy52YWx1ZSksXHJcbiAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6IHN0cmluZ3MudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogY29udmVydCBhIEpTT04gT3RjT3JkZXIgaW50byBhbiBPdGNPcmRlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ3NUb090Y09yZGVyRmllbGRzKHN0cmluZ3M6IFJhd090Y09yZGVyRmllbGRzKTogT3RjT3JkZXJGaWVsZHMge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBtYWtlcjogc3RyaW5ncy5tYWtlcixcclxuICAgICAgICB0YWtlcjogc3RyaW5ncy50YWtlcixcclxuICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcihzdHJpbmdzLm1ha2VyQW1vdW50KSxcclxuICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcihzdHJpbmdzLnRha2VyQW1vdW50KSxcclxuICAgICAgICBtYWtlclRva2VuOiBzdHJpbmdzLm1ha2VyVG9rZW4sXHJcbiAgICAgICAgdGFrZXJUb2tlbjogc3RyaW5ncy50YWtlclRva2VuLFxyXG4gICAgICAgIHR4T3JpZ2luOiBzdHJpbmdzLnR4T3JpZ2luLFxyXG4gICAgICAgIGV4cGlyeUFuZE5vbmNlOiBuZXcgQmlnTnVtYmVyKHN0cmluZ3MuZXhwaXJ5QW5kTm9uY2UpLFxyXG4gICAgICAgIGNoYWluSWQ6IE51bWJlcihzdHJpbmdzLmNoYWluSWQpLFxyXG4gICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiBzdHJpbmdzLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgfTtcclxufVxyXG5cclxuLy8gSW50ZXJuYWwgZnVuY3Rpb24gZm9yIGhhbmRsaW5nIHRoZSBkb21haW5cclxuZnVuY3Rpb24gX3N0cmluZ3NUb0VJUDcxMkRvbWFpbihzdHJpbmdzOiBSYXdFSVA3MTJDb250ZXh0RmllbGRzWydkb21haW4nXSk6IEVpcDcxMkRvbWFpbiB7XHJcbiAgICBjb25zdCByZXM6IEVpcDcxMkRvbWFpbiA9IHtcclxuICAgICAgICAuLi5zdHJpbmdzLFxyXG4gICAgICAgIGNoYWluSWQ6IE51bWJlcihzdHJpbmdzLmNoYWluSWQpLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZW1vdmUgY2hhaW5JZCBpZiBpdHMgTmFOXHJcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHJlcy5jaGFpbklkKSkge1xyXG4gICAgICAgIGRlbGV0ZSByZXMuY2hhaW5JZDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG4vKipcclxuICogY29udmVydCBhIEpTT04gRUlQNzEyQ29udGV4dCBpbnRvIGFuIEVJUDcxMkNvbnRleHRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdzVG9FSVA3MTJDb250ZXh0KFxyXG4gICAgc3RyaW5nczogUmF3RUlQNzEyQ29udGV4dEZpZWxkcyxcclxuKTogRXhlY3V0ZU1ldGFUcmFuc2FjdGlvbkVpcDcxMkNvbnRleHQgfCBQZXJtaXRFaXA3MTJDb250ZXh0IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdHlwZXM6IHN0cmluZ3MudHlwZXMgYXMgYW55LFxyXG4gICAgICAgIC8vICRlc2xpbnQtZml4LW1lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaGlub2RhdmlkL2VzbGludC1maXgtbWVcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHByaW1hcnlUeXBlOiBzdHJpbmdzLnByaW1hcnlUeXBlIGFzIGFueSxcclxuICAgICAgICBkb21haW46IF9zdHJpbmdzVG9FSVA3MTJEb21haW4oc3RyaW5ncy5kb21haW4pLFxyXG4gICAgICAgIC8vICRlc2xpbnQtZml4LW1lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaGlub2RhdmlkL2VzbGludC1maXgtbWVcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZ3MubWVzc2FnZSBhcyBhbnksXHJcbiAgICB9O1xyXG59XHJcbiJdLCJ2ZXJzaW9uIjozfQ==
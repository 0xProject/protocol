a1f628265847151a557396a24ba7f508
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const protocol_utils_1 = require("@0x/protocol-utils");
const utils_1 = require("@0x/utils");
const web3_wrapper_1 = require("@0x/web3-wrapper");
const axios_1 = require("axios");
const axios_mock_adapter_1 = require("axios-mock-adapter");
const chai_1 = require("chai");
const ethers_1 = require("ethers");
const HttpStatus = require("http-status-codes");
const ioredis_1 = require("ioredis");
const sqs_producer_1 = require("sqs-producer");
const request = require("supertest");
const ts_mockito_1 = require("ts-mockito");
const config = require("../src/config");
const constants_1 = require("../src/core/constants");
const entities_1 = require("../src/entities");
const types_1 = require("../src/entities/types");
const http_rfqm_service_runner_1 = require("../src/runners/http_rfqm_service_runner");
const fee_service_1 = require("../src/services/fee_service");
const rfqm_service_1 = require("../src/services/rfqm_service");
const rfq_maker_balance_cache_service_1 = require("../src/services/rfq_maker_balance_cache_service");
const types_2 = require("../src/core/types");
const cache_client_1 = require("../src/utils/cache_client");
const config_manager_1 = require("../src/utils/config_manager");
const quote_server_client_1 = require("../src/utils/quote_server_client");
const rfqm_db_utils_1 = require("../src/utils/rfqm_db_utils");
const rfq_blockchain_utils_1 = require("../src/utils/rfq_blockchain_utils");
const rfq_maker_db_utils_1 = require("../src/utils/rfq_maker_db_utils");
const rfq_maker_manager_1 = require("../src/utils/rfq_maker_manager");
const SubmissionContext_1 = require("../src/utils/SubmissionContext");
const TokenMetadataManager_1 = require("../src/utils/TokenMetadataManager");
const constants_2 = require("./constants");
const deployment_1 = require("./test_utils/deployment");
const initDbDataSourceAsync_1 = require("./test_utils/initDbDataSourceAsync");
const MOCK_WORKER_REGISTRY_ADDRESS = '0x1023331a469c6391730ff1E2749422CE8873EC38';
const API_KEY = 'koolApiKey';
const ADMIN_API_KEY = 'adminApiKey';
const INTEGRATOR_ID = 'koolIntegratorId';
const contractAddresses = constants_2.CONTRACT_ADDRESSES;
const WORKER_FULL_BALANCE_WEI = new utils_1.BigNumber(1).shiftedBy(constants_1.ETH_DECIMALS);
// RFQM Market Maker request specific constants
const MARKET_MAKER_1 = 'https://mock-rfqt1.club';
const MARKET_MAKER_2 = 'https://mock-rfqt2.club';
const MARKET_MAKER_3 = 'https://mock-rfqt3.club';
const MARKET_MAKER_2_ADDR = '0xbEA29fE10caed0E1a65A7AdBddd254dD372e83Ff';
const MARKET_MAKER_3_ADDR = '0xA84f003D3a6F62c5dF218c7fb7b0EFB766b5AC07';
const GAS_PRICE = new utils_1.BigNumber(100);
const MOCK_META_TX_CALL_DATA = '0x123';
const RANDOM_VALID_SIGNATURE = {
    r: '0x72ba2125d4efe1f9cc77882138ed94cbd485f8897fe6d9fe34854906634fc59d',
    s: '0x1e19d3d29ab2855debc62a1df98a727673b8bf31c4da3a391a6eaea465920ff2',
    v: 27,
    signatureType: protocol_utils_1.SignatureType.EthSign,
};
const SAFE_EXPIRY = '1903620548';
const GAS_ESTIMATE = 165000;
const WORKER_ADDRESS = '0xaWorkerAddress';
const FIRST_TRANSACTION_HASH = '0xfirstTxHash';
const FIRST_SIGNED_TRANSACTION = '0xfirstSignedTransaction';
const TX_STATUS = 1;
// it's over 9K
const MINED_BLOCK = 9001;
// the tx should be finalized
const CURRENT_BLOCK = MINED_BLOCK + SubmissionContext_1.BLOCK_FINALITY_THRESHOLD;
const MOCK_EXCHANGE_PROXY = '0xtheExchangeProxy';
const SUCCESSFUL_TRANSACTION_RECEIPT = {
    blockHash: '0xaBlockHash',
    blockNumber: MINED_BLOCK,
    byzantium: true,
    confirmations: 2,
    contractAddress: '',
    cumulativeGasUsed: ethers_1.BigNumber.from(150000),
    effectiveGasPrice: ethers_1.BigNumber.from(1000),
    from: WORKER_ADDRESS,
    gasUsed: ethers_1.BigNumber.from(GAS_ESTIMATE),
    logs: [constants_2.TEST_RFQ_ORDER_FILLED_EVENT_LOG],
    logsBloom: '',
    status: TX_STATUS,
    to: MOCK_EXCHANGE_PROXY,
    transactionHash: FIRST_TRANSACTION_HASH,
    transactionIndex: 5,
    type: 2,
};
const MOCK_RFQM_JOB = new entities_1.RfqmV2JobEntity({
    chainId: 1337,
    createdAt: new Date(),
    expiry: new utils_1.BigNumber(Date.now()),
    fee: {
        amount: '1000',
        token: '0x123',
        type: 'fixed',
    },
    integratorId: null,
    makerUri: MARKET_MAKER_1,
    order: {
        order: {
            chainId: '1337',
            expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(SAFE_EXPIRY), constants_1.ZERO, new utils_1.BigNumber(SAFE_EXPIRY)).toString(),
            maker: '0x123',
            makerAmount: '1',
            makerToken: '0x123',
            taker: '0x123',
            takerAmount: '1',
            takerToken: '0x123',
            txOrigin: '0x123',
            verifyingContract: '0x123',
        },
        type: types_1.RfqmOrderTypes.Otc,
    },
    orderHash: '0x288d4d771179738ee9ca60f14df74612fb1ca43dfbc3bbb49dd9226a19747c11',
    status: types_1.RfqmJobStatus.PendingSubmitted,
    updatedAt: new Date(),
    workerAddress: null,
    lastLookResult: null,
    affiliateAddress: constants_2.MATCHA_AFFILIATE_ADDRESS,
    takerSpecifiedSide: 'makerToken',
});
jest.setTimeout(constants_1.ONE_MINUTE_MS * 2);
let teardownDependencies;
describe('RFQM Integration', () => {
    let app;
    let axiosClient;
    let cacheClient;
    let dataSource;
    let dbUtils;
    let mockAxios;
    let rfqBlockchainUtilsMock;
    let rfqmServiceChainId1337;
    let rfqmServiceChainId3;
    let server;
    let takerAddress;
    beforeAll(async () => {
        teardownDependencies = await (0, deployment_1.setupDependenciesAsync)(['postgres', 'ganache', 'redis']);
        // Create a Provider
        const provider = (0, constants_2.getProvider)();
        const web3Wrapper = new web3_wrapper_1.Web3Wrapper(provider);
        [takerAddress] = await web3Wrapper.getAvailableAddressesAsync();
        // Build dependencies
        // Create the mock FeeService
        const feeServiceMock = (0, ts_mockito_1.mock)(fee_service_1.FeeService);
        (0, ts_mockito_1.when)(feeServiceMock.getGasPriceEstimationAsync()).thenResolve(GAS_PRICE);
        (0, ts_mockito_1.when)(feeServiceMock.calculateFeeAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve({
            feeWithDetails: {
                token: '0xToken',
                amount: new utils_1.BigNumber(300),
                type: 'fixed',
                details: {
                    feeModelVersion: 1,
                    kind: 'default',
                    gasFeeAmount: new utils_1.BigNumber(100),
                    gasPrice: GAS_PRICE,
                    zeroExFeeAmount: new utils_1.BigNumber(200),
                    tradeSizeBps: 4,
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(30),
                    takerTokenBaseUnitPriceUsd: null,
                    makerTokenBaseUnitPriceUsd: new utils_1.BigNumber(20),
                },
                breakdown: {
                    gas: {
                        amount: new utils_1.BigNumber(100),
                        details: {
                            gasPrice: GAS_PRICE,
                            estimatedGas: new utils_1.BigNumber(1),
                        },
                    },
                    zeroEx: {
                        amount: new utils_1.BigNumber(200),
                        details: {
                            kind: 'volume',
                            tradeSizeBps: 4,
                        },
                    },
                },
                conversionRates: {
                    nativeTokenBaseUnitPriceUsd: new utils_1.BigNumber(30),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(30),
                    takerTokenBaseUnitPriceUsd: null,
                    makerTokenBaseUnitPriceUsd: new utils_1.BigNumber(20),
                },
            },
        });
        const feeServiceInstance = (0, ts_mockito_1.instance)(feeServiceMock);
        // Create the mock ConfigManager
        const configManagerMock = (0, ts_mockito_1.mock)(config_manager_1.ConfigManager);
        (0, ts_mockito_1.when)(configManagerMock.getAdminApiKey()).thenReturn(ADMIN_API_KEY);
        (0, ts_mockito_1.when)(configManagerMock.getRfqmApiKeyWhitelist()).thenReturn(new Set([API_KEY]));
        (0, ts_mockito_1.when)(configManagerMock.getIntegratorIdForApiKey(API_KEY)).thenReturn(INTEGRATOR_ID);
        (0, ts_mockito_1.when)(configManagerMock.getIntegratorByIdOrThrow(INTEGRATOR_ID)).thenReturn({
            integratorId: INTEGRATOR_ID,
            apiKeys: [API_KEY],
            allowedChainIds: [1337],
            label: 'Test',
            rfqm: true,
            plp: false,
            rfqt: false,
        });
        const configManager = (0, ts_mockito_1.instance)(configManagerMock);
        // Create Axios client and mock
        axiosClient = axios_1.default.create();
        mockAxios = new axios_mock_adapter_1.default(axiosClient);
        // Create the mock rfqBlockchainUtils
        const validationResponse = [new utils_1.BigNumber(1), new utils_1.BigNumber(1)];
        rfqBlockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.generateMetaTransaction((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenCall((_rfqOrder, _signature, _taker, _takerAmount, chainId) => new protocol_utils_1.MetaTransaction({ chainId }));
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.generateMetaTransactionCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(MOCK_META_TX_CALL_DATA);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.validateMetaTransactionOrThrowAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(validationResponse);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getTokenBalancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(1)]);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(1)]);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getNonceAsync((0, ts_mockito_1.anything)())).thenResolve(1);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(GAS_ESTIMATE);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
            signedTransaction: FIRST_SIGNED_TRANSACTION,
            transactionHash: FIRST_TRANSACTION_HASH,
        });
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.submitSignedTransactionAsync(FIRST_SIGNED_TRANSACTION)).thenResolve(FIRST_TRANSACTION_HASH);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getReceiptsAsync((0, ts_mockito_1.deepEqual)([FIRST_TRANSACTION_HASH]))).thenResolve([
            SUCCESSFUL_TRANSACTION_RECEIPT,
        ]);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getCurrentBlockAsync()).thenResolve(CURRENT_BLOCK);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getExchangeProxyAddress()).thenReturn(MOCK_EXCHANGE_PROXY);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.decodeMetaTransactionCallDataAndValidateAsync((0, ts_mockito_1.anyString)(), (0, ts_mockito_1.anyString)(), (0, ts_mockito_1.anything)())).thenResolve(validationResponse);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn(constants_2.TEST_DECODED_RFQ_ORDER_FILLED_EVENT_LOG);
        (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getAccountBalanceAsync(MOCK_WORKER_REGISTRY_ADDRESS)).thenResolve(WORKER_FULL_BALANCE_WEI);
        const rfqBlockchainUtils = (0, ts_mockito_1.instance)(rfqBlockchainUtilsMock);
        const tokenMetadataManagerMock = (0, ts_mockito_1.mock)(TokenMetadataManager_1.TokenMetadataManager);
        (0, ts_mockito_1.when)(tokenMetadataManagerMock.getTokenDecimalsAsync((0, ts_mockito_1.anything)())).thenResolve(18);
        const tokenMetadataManager = (0, ts_mockito_1.instance)(tokenMetadataManagerMock);
        const sqsResponse = [
            {
                Id: 'id',
                MD5OfMessageBody: 'MD5OfMessageBody',
                MessageId: 'MessageId',
            },
        ];
        // Create the dbUtils
        dataSource = await (0, initDbDataSourceAsync_1.initDbDataSourceAsync)();
        dbUtils = new rfqm_db_utils_1.RfqmDbUtils(dataSource);
        // Create the mock sqsProducer
        const sqsProducerMock = (0, ts_mockito_1.mock)(sqs_producer_1.Producer);
        (0, ts_mockito_1.when)(sqsProducerMock.send((0, ts_mockito_1.anything)())).thenResolve(sqsResponse);
        (0, ts_mockito_1.when)(sqsProducerMock.queueSize()).thenResolve(0);
        const sqsProducer = (0, ts_mockito_1.instance)(sqsProducerMock);
        // Create the quote server client
        const quoteServerClient = new quote_server_client_1.QuoteServerClient(axiosClient);
        // Create the CacheClient
        const redis = new ioredis_1.default();
        cacheClient = new cache_client_1.CacheClient(redis);
        // Create the maker balance cache service
        const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
        (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(200000000000000000)], [new utils_1.BigNumber(200000000000000000), new utils_1.BigNumber(200000000000000000)]);
        const rfqMakerBalanceCacheService = (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock);
        // Create the mock RfqMakerManager
        const rfqMakerManagerMock = (0, ts_mockito_1.mock)(rfq_maker_manager_1.RfqMakerManager);
        (0, ts_mockito_1.when)(rfqMakerManagerMock.getRfqmV2MakerUrisForPair((0, ts_mockito_1.anyString)(), (0, ts_mockito_1.anyString)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn([MARKET_MAKER_2, MARKET_MAKER_3]);
        (0, ts_mockito_1.when)(rfqMakerManagerMock.getRfqmV2MakerOfferings()).thenReturn({
            'https://mock-rfqm1.club': [
                ['0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c', '0x0b1ba0af832d7c05fd64161e0db78e85978e8082'],
            ],
        });
        const rfqMakerManager = (0, ts_mockito_1.instance)(rfqMakerManagerMock);
        rfqmServiceChainId1337 = new rfqm_service_1.RfqmService(1337, feeServiceInstance, 
        /* feeModelVersion */ 0, contractAddresses, MOCK_WORKER_REGISTRY_ADDRESS, rfqBlockchainUtils, dbUtils, sqsProducer, quoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, cacheClient, rfqMakerBalanceCacheService, rfqMakerManager, tokenMetadataManager);
        // Create another RFQM Service for chain ID 3 that returns 0 offering
        const rfqMakerManagerChain3Mock = (0, ts_mockito_1.mock)(rfq_maker_manager_1.RfqMakerManager);
        (0, ts_mockito_1.when)(rfqMakerManagerChain3Mock.getRfqmV2MakerOfferings()).thenReturn({
            'https://mock-rfqm1.club': [],
        });
        const rfqMakerManagerChainId3 = (0, ts_mockito_1.instance)(rfqMakerManagerChain3Mock);
        rfqmServiceChainId3 = new rfqm_service_1.RfqmService(3, feeServiceInstance, 
        /* feeModelVersion */ 0, contractAddresses, MOCK_WORKER_REGISTRY_ADDRESS, rfqBlockchainUtils, dbUtils, sqsProducer, quoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, cacheClient, rfqMakerBalanceCacheService, rfqMakerManagerChainId3, tokenMetadataManager);
        const rfqAdminService = (0, http_rfqm_service_runner_1.buildRfqAdminService)(dbUtils);
        const rfqMakerService = (0, http_rfqm_service_runner_1.buildRfqMakerService)(new rfq_maker_db_utils_1.RfqMakerDbUtils(dataSource), configManager);
        // Start the server
        const res = await (0, http_rfqm_service_runner_1.runHttpRfqmServiceAsync)(new Map([
            [1337, rfqmServiceChainId1337],
            [3, rfqmServiceChainId3],
        ]), new Map(), rfqAdminService, rfqMakerService, configManager, config.defaultHttpServiceConfig, dataSource, false);
        app = res.app;
        server = res.server;
    });
    afterEach(async () => {
        await dataSource.query('TRUNCATE TABLE rfqm_quotes CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_jobs CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_transaction_submissions CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_v2_quotes CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_v2_jobs CASCADE;');
        await dataSource.query('TRUNCATE TABLE rfqm_v2_transaction_submissions CASCADE;');
    });
    afterAll(async () => {
        await new Promise((resolve, reject) => {
            server.close((err) => {
                if (err) {
                    reject(err);
                }
                resolve();
            });
        });
        await cacheClient.closeAsync();
        if (!teardownDependencies()) {
            throw new Error('Failed to tear down dependencies');
        }
    });
    describe('rfqm/v1/healthz', () => {
        it('should return a 200 OK with active pairs', async () => {
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/healthz`)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.pairs[0][0]).to.equal('0x0b1ba0af832d7c05fd64161e0db78e85978e8082');
            (0, chai_1.expect)(appResponse.body.pairs[0][1]).to.equal('0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c');
        });
        // This test is to cover this issue: https://github.com/0xProject/0x-rfq-api/pull/200
        it('should return correct values for different chains', async () => {
            const chainId3HealthzResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/healthz`)
                .set('0x-chain-id', '3')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            // tslint:disable-next-line: no-unused-expression
            (0, chai_1.expect)(chainId3HealthzResponse.body.pairs).to.be.an('array').that.is.empty;
            const chainId1337HealthzResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/healthz`)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(chainId1337HealthzResponse.body.pairs[0][0]).to.equal('0x0b1ba0af832d7c05fd64161e0db78e85978e8082');
            (0, chai_1.expect)(chainId1337HealthzResponse.body.pairs[0][1]).to.equal('0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c');
        });
    });
    describe('rfqm/v1/price', () => {
        it('should return a 200 OK with an indicative quote for buys', async () => {
            const buyAmount = 200000000000000000;
            const winningQuote = 100000000000000000;
            const losingQuote = 150000000000000000;
            const zeroExApiParams = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                buyAmount: buyAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const baseResponse = {
                makerAmount: buyAmount.toString(),
                makerToken: contractAddresses.zrxToken,
                takerToken: contractAddresses.etherToken,
                expiry: '1903620548', // in the year 2030
            };
            mockAxios.onGet(`${MARKET_MAKER_2}/rfqm/v2/price`).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                takerAmount: winningQuote.toString(),
                maker: MARKET_MAKER_2_ADDR,
            });
            mockAxios.onGet(`${MARKET_MAKER_3}/rfqm/v2/price`).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                takerAmount: losingQuote.toString(),
                maker: MARKET_MAKER_3_ADDR,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${zeroExApiParams.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            const expectedPrice = '0.5';
            (0, chai_1.expect)(appResponse.body.liquidityAvailable).to.equal(true);
            (0, chai_1.expect)(appResponse.body.price).to.equal(expectedPrice);
        });
        it('should return a 200 OK with an indicative quote for sells', async () => {
            const sellAmount = 100000000000000000;
            const winningQuote = 200000000000000000;
            const losingQuote = 150000000000000000;
            const zeroExApiParams = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const baseResponse = {
                takerAmount: sellAmount.toString(),
                makerToken: contractAddresses.zrxToken,
                takerToken: contractAddresses.etherToken,
                expiry: '1903620548', // in the year 2030
            };
            mockAxios.onGet(`${MARKET_MAKER_2}/rfqm/v2/price`).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                makerAmount: winningQuote.toString(),
                maker: MARKET_MAKER_2_ADDR,
            });
            mockAxios.onGet(`${MARKET_MAKER_3}/rfqm/v2/price`).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                makerAmount: losingQuote.toString(),
                maker: MARKET_MAKER_3_ADDR,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${zeroExApiParams.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            const expectedPrice = '2';
            (0, chai_1.expect)(appResponse.body.liquidityAvailable).to.equal(true);
            (0, chai_1.expect)(appResponse.body.price).to.equal(expectedPrice);
        });
        it('should return a 200 OK, liquidityAvailable === false if no valid quotes found', async () => {
            const sellAmount = 100000000000000000;
            const quotedAmount = 200000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            mockAxios.onGet(`${MARKET_MAKER_2}/rfqm/v2/price`).replyOnce(HttpStatus.OK, {
                makerAmount: quotedAmount.toString(),
                takerAmount: sellAmount.toString(),
                makerToken: contractAddresses.zrxToken,
                takerToken: contractAddresses.etherToken,
                expiry: '0', // already expired
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.liquidityAvailable).to.equal(false);
            (0, chai_1.expect)(appResponse.body.price).to.equal(undefined);
        });
        it('should return a 400 BAD REQUEST if API Key is not permitted access', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', 'unknown-key')
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Invalid API key');
        });
        it('should return a 400 BAD REQUEST if API Key does not have access to the chain', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1')
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Invalid API key');
        });
        it('should return a 400 BAD REQUEST Validation Error if Chain Id cannot be parsed', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', 'invalid-id')
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
            (0, chai_1.expect)(appResponse.body.validationErrors[0].reason).to.equal('Invalid chain id');
        });
        it('should return a 400 BAD REQUEST Validation Error if sending ETH, not WETH', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'ETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
            (0, chai_1.expect)(appResponse.body.validationErrors[0].reason).to.equal('Unwrapped Native Asset is not supported. Use WETH instead');
        });
        it('should return a 400 BAD REQUEST if buyToken is missing', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
        });
        it('should return a 400 BAD REQUEST if sellToken is missing', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellAmount: sellAmount.toString(),
                takerAddress,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
        });
        it('should return a 400 BAD REQUEST if both sellAmount and buyAmount are missing', async () => {
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                takerAddress,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
        });
        it('should return a 400 BAD REQUEST Error if trading an unknown token', async () => {
            const sellAmount = 100000000000000000;
            const UNKNOWN_TOKEN = 'RACCOONS_FOREVER';
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: UNKNOWN_TOKEN,
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/price?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
            (0, chai_1.expect)(appResponse.body.validationErrors[0].reason).to.equal(`Token ${UNKNOWN_TOKEN} is currently unsupported`);
        });
    });
    describe('rfqm/v1/quote', () => {
        it('should return a 200 OK, liquidityAvailable === false if no valid firm quotes found', async () => {
            const sellAmount = 100000000000000000;
            const insufficientSellAmount = 1;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const baseResponse = {
                makerToken: contractAddresses.zrxToken,
                takerToken: contractAddresses.etherToken,
                expiry: '1903620548', // in the year 2030
            };
            mockAxios.onGet(`${MARKET_MAKER_2}/rfqm/v2/price`).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                takerAmount: insufficientSellAmount,
                makerAmount: insufficientSellAmount,
                maker: MARKET_MAKER_2_ADDR,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${params.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.liquidityAvailable).to.equal(false);
            (0, chai_1.expect)(appResponse.body.price).to.equal(undefined);
        });
        it('should return a 200 OK with a firm quote for buys', async () => {
            const buyAmount = 200000000000000000;
            const winningQuote = 100000000000000000;
            const losingQuote = 150000000000000000;
            const zeroExApiParams = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                buyAmount: buyAmount.toString(),
                takerAddress,
                intentOnFilling: 'true',
                skipValidation: 'true',
            });
            const headers = {
                Accept: 'application/json, text/plain, */*',
                '0x-api-key': INTEGRATOR_ID,
                '0x-integrator-id': INTEGRATOR_ID,
            };
            const baseResponse = {
                makerAmount: buyAmount.toString(),
                makerToken: contractAddresses.zrxToken,
                takerToken: contractAddresses.etherToken,
                expiry: '1903620548', // in the year 2030
            };
            mockAxios.onGet(`${MARKET_MAKER_2}/rfqm/v2/price`, { headers }).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                takerAmount: winningQuote.toString(),
                maker: MARKET_MAKER_2_ADDR,
            });
            mockAxios.onGet(`${MARKET_MAKER_3}/rfqm/v2/price`, { headers }).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                takerAmount: losingQuote.toString(),
                maker: MARKET_MAKER_3_ADDR,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${zeroExApiParams.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            const expectedPrice = '0.5';
            (0, chai_1.expect)(appResponse.body.price).to.equal(expectedPrice);
            (0, chai_1.expect)(appResponse.body.type).to.equal(types_2.GaslessTypes.OtcOrder);
            (0, chai_1.expect)(appResponse.body.orderHash).to.match(/^0x[0-9a-fA-F]+/);
            (0, chai_1.expect)(appResponse.body.order.maker).to.equal(MARKET_MAKER_2_ADDR);
            (0, chai_1.expect)(appResponse.body.approval).to.equal(undefined);
        });
        it('should return a 200 OK with a firm quote when OtcOrder pricing is available for sells', async () => {
            const sellAmount = 100000000000000000;
            const winningQuote = 200000000000000000;
            const losingQuote = 150000000000000000;
            const zeroExApiParams = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'true',
                skipValidation: 'true',
            });
            const headers = {
                Accept: 'application/json, text/plain, */*',
                '0x-api-key': INTEGRATOR_ID,
                '0x-integrator-id': INTEGRATOR_ID,
            };
            const baseResponse = {
                takerAmount: sellAmount.toString(),
                makerToken: contractAddresses.zrxToken,
                takerToken: contractAddresses.etherToken,
                expiry: '1903620548', // in the year 2030
            };
            mockAxios.onGet(`${MARKET_MAKER_2}/rfqm/v2/price`, { headers }).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                makerAmount: winningQuote.toString(),
                maker: MARKET_MAKER_2_ADDR,
            });
            mockAxios.onGet(`${MARKET_MAKER_3}/rfqm/v2/price`, { headers }).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                makerAmount: losingQuote.toString(),
                maker: MARKET_MAKER_3_ADDR,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${zeroExApiParams.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            const expectedPrice = '2';
            (0, chai_1.expect)(appResponse.body.price).to.equal(expectedPrice);
            (0, chai_1.expect)(appResponse.body.type).to.equal(types_2.GaslessTypes.OtcOrder);
            (0, chai_1.expect)(appResponse.body.orderHash).to.match(/^0x[0-9a-fA-F]+/);
            (0, chai_1.expect)(appResponse.body.order.maker).to.equal(MARKET_MAKER_2_ADDR);
            (0, chai_1.expect)(appResponse.body.approval).to.equal(undefined);
        });
        it('should return a 200 OK with a firm quote when OtcOrder pricing is available for sells and checkApproval is true', async () => {
            (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getAllowanceAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(new utils_1.BigNumber(0));
            (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getGaslessApprovalAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL);
            const sellAmount = 100000000000000000;
            const winningQuote = 200000000000000000;
            const losingQuote = 150000000000000000;
            const zeroExApiParams = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                checkApproval: 'true',
            });
            const headers = {
                Accept: 'application/json, text/plain, */*',
                '0x-api-key': INTEGRATOR_ID,
                '0x-integrator-id': INTEGRATOR_ID,
            };
            const baseResponse = {
                takerAmount: sellAmount.toString(),
                makerToken: contractAddresses.zrxToken,
                takerToken: contractAddresses.etherToken,
                expiry: '1903620548', // in the year 2030
            };
            mockAxios.onGet(`${MARKET_MAKER_2}/rfqm/v2/price`, { headers }).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                makerAmount: winningQuote.toString(),
                maker: MARKET_MAKER_2_ADDR,
            });
            mockAxios.onGet(`${MARKET_MAKER_3}/rfqm/v2/price`, { headers }).replyOnce(HttpStatus.OK, {
                ...baseResponse,
                makerAmount: losingQuote.toString(),
                maker: MARKET_MAKER_3_ADDR,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${zeroExApiParams.toString()}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            const expectedPrice = '2';
            const expectedApproval = {
                isRequired: true,
                isGaslessAvailable: true,
                type: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL.kind,
                eip712: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL.eip712,
            };
            (0, chai_1.expect)(appResponse.body.price).to.equal(expectedPrice);
            (0, chai_1.expect)(appResponse.body.type).to.equal(types_2.GaslessTypes.OtcOrder);
            (0, chai_1.expect)(appResponse.body.orderHash).to.match(/^0x[0-9a-fA-F]+/);
            (0, chai_1.expect)(appResponse.body.order.maker).to.equal(MARKET_MAKER_2_ADDR);
            (0, chai_1.expect)(appResponse.body.approval).to.eql(expectedApproval);
        });
        it('should return a 400 BAD REQUEST if api key is missing', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
                intentOnFilling: 'false',
                skipValidation: 'true',
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${params.toString()}`)
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Invalid API key');
        });
        it('should return a 400 BAD REQUEST if takerAddress is missing', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${params.toString()}`)
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
        });
        it('should return a 400 BAD REQUEST if buyToken is missing', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                sellToken: 'WETH',
                sellAmount: sellAmount.toString(),
                takerAddress,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${params.toString()}`)
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
        });
        it('should return a 400 BAD REQUEST if sellToken is missing', async () => {
            const sellAmount = 100000000000000000;
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellAmount: sellAmount.toString(),
                takerAddress,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${params.toString()}`)
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
        });
        it('should return a 400 BAD REQUEST if both sellAmount and buyAmount are missing', async () => {
            const params = new URLSearchParams({
                buyToken: 'ZRX',
                sellToken: 'WETH',
                takerAddress,
            });
            const appResponse = await request(app)
                .get(`${constants_1.RFQM_PATH}/quote?${params.toString()}`)
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
        });
    });
    describe('rfqm/v1/submit', () => {
        const mockStoredFee = {
            token: '0x123',
            amount: '1000',
            type: 'fixed',
        };
        const mockStoredOrder = {
            type: types_1.RfqmOrderTypes.Otc,
            order: {
                chainId: '1337',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(SAFE_EXPIRY), constants_1.ZERO, new utils_1.BigNumber(SAFE_EXPIRY)).toString(),
                maker: '0x123',
                makerAmount: '1',
                makerToken: '0x123',
                taker: '0x123',
                takerAmount: '1',
                takerToken: '0x123',
                txOrigin: '0x123',
                verifyingContract: '0x123',
            },
        };
        // OtcOrder Taker
        const otcOrderTakerAddress = '0xdA9AC423442169588DE6b4305f4E820D708d0cE5';
        const otcOrderTakerPrivateKey = '0x653fa328df81be180b58e42737bc4cef037a19a3b9673b15d20ee2eebb2e509d';
        // OtcOrder
        const mockStoredOtcOrder = {
            type: types_1.RfqmOrderTypes.Otc,
            order: {
                txOrigin: '0x123',
                maker: '0x123',
                taker: otcOrderTakerAddress,
                makerToken: '0x123',
                takerToken: '0x123',
                makerAmount: '1',
                takerAmount: '1',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(SAFE_EXPIRY), constants_1.ZERO, new utils_1.BigNumber(SAFE_EXPIRY)).toString(),
                chainId: '1337',
                verifyingContract: '0x123',
            },
        };
        const otcOrder = (0, rfqm_db_utils_1.storedOtcOrderToOtcOrder)(mockStoredOtcOrder);
        it('[v2] should return status 201 created and queue up a job with a successful request', async () => {
            // OtcOrder
            const order = otcOrder;
            const orderHash = order.getHash();
            // Taker Signature
            const takerSignature = (0, protocol_utils_1.ethSignHashWithKey)(orderHash, otcOrderTakerPrivateKey);
            const mockQuote = new entities_1.RfqmV2QuoteEntity({
                orderHash,
                makerUri: MARKET_MAKER_1,
                fee: mockStoredFee,
                order: mockStoredOtcOrder,
                chainId: 1337,
                affiliateAddress: constants_2.MATCHA_AFFILIATE_ADDRESS,
                takerSpecifiedSide: 'makerToken',
            });
            // write a corresponding quote entity to validate against
            await dataSource.getRepository(entities_1.RfqmV2QuoteEntity).insert(mockQuote);
            const appResponse = await request(app)
                .post(`${constants_1.RFQM_PATH}/submit`)
                .send({ type: types_2.GaslessTypes.OtcOrder, order, signature: takerSignature })
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.CREATED)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.orderHash).to.equal(orderHash);
            const dbJobEntity = await dataSource.getRepository(entities_1.RfqmV2JobEntity).findOne({
                where: {
                    orderHash,
                },
            });
            (0, chai_1.expect)(dbJobEntity).to.not.equal(null);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.orderHash).to.equal(mockQuote.orderHash);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.makerUri).to.equal(MARKET_MAKER_1);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.affiliateAddress).to.equal(constants_2.MATCHA_AFFILIATE_ADDRESS);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.takerSignature).to.deep.eq(takerSignature);
        });
        it('[v2] should return status 404 not found if there is not a pre-existing quote', async () => {
            const order = otcOrder;
            // Taker Signature
            const takerSignature = (0, protocol_utils_1.ethSignHashWithKey)(order.getHash(), otcOrderTakerPrivateKey);
            const appResponse = await request(app)
                .post(`${constants_1.RFQM_PATH}/submit`)
                .send({
                type: types_2.GaslessTypes.OtcOrder,
                order,
                signature: takerSignature,
            })
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.NOT_FOUND)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Not Found');
        });
        it('should return a 400 BAD REQUEST Error the type is not supported', async () => {
            const invalidType = 'v10rfq';
            const appResponse = await request(app)
                .post(`${constants_1.RFQM_PATH}/submit`)
                .send({ type: invalidType, order: mockStoredOrder, signature: RANDOM_VALID_SIGNATURE })
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
            (0, chai_1.expect)(appResponse.body.validationErrors[0].reason).to.equal(`${invalidType} is an invalid value for 'type'`);
        });
        it('[v2] should fail with status code 500 if a quote has already been submitted', async () => {
            // OtcOrder
            const order = otcOrder;
            const orderHash = order.getHash();
            // Taker Signature
            const takerSignature = (0, protocol_utils_1.ethSignHashWithKey)(orderHash, otcOrderTakerPrivateKey);
            const mockQuote = new entities_1.RfqmV2QuoteEntity({
                orderHash,
                makerUri: MARKET_MAKER_1,
                fee: mockStoredFee,
                order: mockStoredOtcOrder,
                chainId: 1337,
                affiliateAddress: constants_2.MATCHA_AFFILIATE_ADDRESS,
                takerSpecifiedSide: 'makerToken',
            });
            // write a corresponding quote entity to validate against
            await dataSource.getRepository(entities_1.RfqmV2QuoteEntity).insert(mockQuote);
            await request(app)
                .post(`${constants_1.RFQM_PATH}/submit`)
                .send({ type: types_2.GaslessTypes.OtcOrder, order, signature: takerSignature })
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.CREATED)
                .expect('Content-Type', /json/);
            // try to submit again
            await request(app)
                .post(`${constants_1.RFQM_PATH}/submit`)
                .send({ type: types_2.GaslessTypes.OtcOrder, order, signature: takerSignature })
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.INTERNAL_SERVER_ERROR)
                .expect('Content-Type', /json/);
        });
        it('[v2] should fail with 400 BAD REQUEST if meta tx is too close to expiration', async () => {
            const order = new protocol_utils_1.OtcOrder({
                ...otcOrder,
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(constants_1.ZERO, constants_1.ZERO, constants_1.ZERO),
            });
            const orderHash = order.getHash();
            const mockQuote = new entities_1.RfqmV2QuoteEntity({
                orderHash,
                makerUri: MARKET_MAKER_1,
                fee: mockStoredFee,
                order: mockStoredOtcOrder,
                chainId: 1337,
                affiliateAddress: constants_2.MATCHA_AFFILIATE_ADDRESS,
                takerSpecifiedSide: 'makerToken',
            });
            await dataSource.getRepository(entities_1.RfqmV2QuoteEntity).insert(mockQuote);
            const appResponse = await request(app)
                .post(`${constants_1.RFQM_PATH}/submit`)
                .send({ type: types_2.GaslessTypes.OtcOrder, order, signature: RANDOM_VALID_SIGNATURE })
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
            (0, chai_1.expect)(appResponse.body.validationErrors[0].reason).to.equal(`order will expire too soon`);
        });
        it('[v2] should fail with 400 BAD REQUEST if signature is invalid', async () => {
            const order = otcOrder;
            const orderHash = order.getHash();
            const mockQuote = new entities_1.RfqmV2QuoteEntity({
                orderHash,
                makerUri: MARKET_MAKER_1,
                fee: mockStoredFee,
                order: mockStoredOtcOrder,
                chainId: 1337,
                affiliateAddress: constants_2.MATCHA_AFFILIATE_ADDRESS,
                takerSpecifiedSide: 'makerToken',
            });
            await dataSource.getRepository(entities_1.RfqmV2QuoteEntity).insert(mockQuote);
            const appResponse = await request(app)
                .post(`${constants_1.RFQM_PATH}/submit`)
                .send({ type: types_2.GaslessTypes.OtcOrder, order, signature: RANDOM_VALID_SIGNATURE })
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.BAD_REQUEST)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.reason).to.equal('Validation Failed');
            (0, chai_1.expect)(appResponse.body.validationErrors[0].reason).to.equal(`signature is not valid`);
        });
    });
    describe('rfqm/v1/submit-with-approval', () => {
        const mockStoredFee = {
            token: '0x123',
            amount: '1000',
            type: 'fixed',
        };
        // OtcOrder Taker
        const otcOrderTakerAddress = '0xdA9AC423442169588DE6b4305f4E820D708d0cE5';
        const otcOrderTakerPrivateKey = '0x653fa328df81be180b58e42737bc4cef037a19a3b9673b15d20ee2eebb2e509d';
        // OtcOrder
        const mockStoredOtcOrder = {
            type: types_1.RfqmOrderTypes.Otc,
            order: {
                txOrigin: '0x123',
                maker: '0x123',
                taker: otcOrderTakerAddress,
                makerToken: '0x123',
                takerToken: '0x123',
                makerAmount: '1',
                takerAmount: '1',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(SAFE_EXPIRY), constants_1.ZERO, new utils_1.BigNumber(SAFE_EXPIRY)).toString(),
                chainId: '1337',
                verifyingContract: '0x123',
            },
        };
        // Approval
        const approval = {
            type: constants_2.MOCK_PERMIT_APPROVAL.kind,
            eip712: constants_2.MOCK_PERMIT_APPROVAL.eip712,
        };
        const otcOrder = (0, rfqm_db_utils_1.storedOtcOrderToOtcOrder)(mockStoredOtcOrder);
        it('[v2] should return status 201 created and queue up a job with a successful request', async () => {
            var _a, _b;
            // OtcOrder
            const order = otcOrder;
            const orderHash = order.getHash();
            // Taker Signature
            const takerSignature = (0, protocol_utils_1.ethSignHashWithKey)(orderHash, otcOrderTakerPrivateKey);
            // Approval signature
            const signer = new ethers_1.ethers.Wallet(otcOrderTakerPrivateKey);
            const typesCopy = { ...approval.eip712.types };
            delete typesCopy.EIP712Domain;
            const rawApprovalSignature = await signer._signTypedData(approval.eip712.domain, 
            // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            typesCopy, approval.eip712.message);
            const { v, r, s } = ethers_1.ethers.utils.splitSignature(rawApprovalSignature);
            const approvalSignature = {
                v,
                r,
                s,
                signatureType: 3,
            };
            const mockQuote = new entities_1.RfqmV2QuoteEntity({
                orderHash,
                makerUri: MARKET_MAKER_1,
                fee: mockStoredFee,
                order: mockStoredOtcOrder,
                chainId: 1337,
                affiliateAddress: constants_2.MATCHA_AFFILIATE_ADDRESS,
                takerSpecifiedSide: 'makerToken',
            });
            // write a corresponding quote entity to validate against
            await dataSource.getRepository(entities_1.RfqmV2QuoteEntity).insert(mockQuote);
            const appResponse = await request(app)
                .post(`${constants_1.RFQM_PATH}/submit-with-approval`)
                .send({
                trade: { type: types_2.GaslessTypes.OtcOrder, order, signature: takerSignature },
                approval: {
                    type: types_2.GaslessApprovalTypes.Permit,
                    eip712: approval.eip712,
                    signature: approvalSignature,
                },
            })
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.CREATED)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(appResponse.body.orderHash).to.equal(orderHash);
            const dbJobEntity = await dataSource.getRepository(entities_1.RfqmV2JobEntity).findOne({
                where: {
                    orderHash,
                },
            });
            (0, chai_1.expect)(dbJobEntity).to.not.equal(null);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.orderHash).to.equal(mockQuote.orderHash);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.makerUri).to.equal(MARKET_MAKER_1);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.affiliateAddress).to.equal(constants_2.MATCHA_AFFILIATE_ADDRESS);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.takerSignature).to.deep.eq(takerSignature);
            (0, chai_1.expect)((_a = dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.approval) === null || _a === void 0 ? void 0 : _a.eip712).to.deep.eq(approval.eip712);
            (0, chai_1.expect)((_b = dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.approval) === null || _b === void 0 ? void 0 : _b.kind).to.deep.eq(approval.type);
            (0, chai_1.expect)(dbJobEntity === null || dbJobEntity === void 0 ? void 0 : dbJobEntity.approvalSignature).to.deep.eq(approvalSignature);
        });
    });
    describe('rfqm/v1/status/:orderHash', () => {
        it('should return a 404 NOT FOUND if the order hash is not found', () => {
            const orderHash = '0x00';
            return request(app)
                .get(`${constants_1.RFQM_PATH}/status/${orderHash}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.NOT_FOUND);
        });
        it('should return a 200 when the order exists', async () => {
            await dbUtils.writeV2JobAsync(MOCK_RFQM_JOB);
            const response = await request(app)
                .get(`${constants_1.RFQM_PATH}/status/${MOCK_RFQM_JOB.orderHash}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            // Response details are covered by the service test, but do one small check for sanity
            (0, chai_1.expect)(response.body.status).to.equal('submitted');
        });
        it('should return status reason for failures', async () => {
            await dbUtils.writeV2JobAsync({
                ...MOCK_RFQM_JOB,
                status: types_1.RfqmJobStatus.FailedRevertedConfirmed,
            });
            const response = await request(app)
                .get(`${constants_1.RFQM_PATH}/status/${MOCK_RFQM_JOB.orderHash}`)
                .set('0x-api-key', API_KEY)
                .set('0x-chain-id', '1337')
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            // Response details are covered by the service test, but do one small check for sanity
            (0, chai_1.expect)(response.body.reason).to.equal('transaction_reverted');
        });
    });
    describe('/admin/v1/cleanup', () => {
        it('should return a 400 BAD REQUEST if the order hash is not found', () => {
            const orderHash = '0x00';
            return request(app)
                .post(`${constants_1.ADMIN_PATH}/cleanup`)
                .send({ orderHashes: [orderHash] })
                .set('0x-admin-api-key', ADMIN_API_KEY)
                .expect(HttpStatus.BAD_REQUEST);
        });
        it('should return a 400 BAD REQUEST if no order hashes are sent', async () => {
            await request(app)
                .post(`${constants_1.ADMIN_PATH}/cleanup`)
                .send({ orderHashes: [] })
                .set('0x-admin-api-key', ADMIN_API_KEY)
                .expect(HttpStatus.BAD_REQUEST);
        });
        it('should return a 400 BAD REQUEST if all job updates fail', async () => {
            await dbUtils.writeV2JobAsync({ ...MOCK_RFQM_JOB, status: types_1.RfqmJobStatus.SucceededConfirmed });
            const response = await request(app)
                .post(`${constants_1.ADMIN_PATH}/cleanup`)
                .send({ orderHashes: [MOCK_RFQM_JOB.orderHash] })
                .set('0x-admin-api-key', ADMIN_API_KEY)
                .expect(HttpStatus.BAD_REQUEST);
            (0, chai_1.expect)(response.body.unmodifiedJobs[0]).to.equal(MOCK_RFQM_JOB.orderHash);
        });
        it('should return a 401 UNAUTHORIZED if the API key is not an admin key', async () => {
            await dbUtils.writeV2JobAsync(MOCK_RFQM_JOB);
            const badApiKey = '0xbadapikey';
            return request(app)
                .post(`${constants_1.ADMIN_PATH}/cleanup`)
                .send({ orderHashes: [MOCK_RFQM_JOB.orderHash] })
                .set('0x-admin-api-key', badApiKey)
                .expect(HttpStatus.UNAUTHORIZED);
        });
        it('should return a 200 OK when the jobs are successfully set to failure', async () => {
            await dbUtils.writeV2JobAsync({
                ...MOCK_RFQM_JOB,
                expiry: new utils_1.BigNumber(Date.now() - 60000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0),
            });
            const response = await request(app)
                .post(`${constants_1.ADMIN_PATH}/cleanup`)
                .send({ orderHashes: [MOCK_RFQM_JOB.orderHash] })
                .set('0x-admin-api-key', ADMIN_API_KEY)
                .expect(HttpStatus.OK)
                .expect('Content-Type', /json/);
            (0, chai_1.expect)(response.body.modifiedJobs[0]).to.equal(MOCK_RFQM_JOB.orderHash);
        });
        it('should return a 207 MULTI STATUS if some jobs succeed and some jobs fail', async () => {
            await dbUtils.writeV2JobAsync({
                ...MOCK_RFQM_JOB,
                status: types_1.RfqmJobStatus.SucceededConfirmed,
                orderHash: '0x01',
            });
            await dbUtils.writeV2JobAsync({
                ...MOCK_RFQM_JOB,
                expiry: new utils_1.BigNumber(Date.now() - 60000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0),
                orderHash: '0x02',
            });
            const response = await request(app)
                .post(`${constants_1.ADMIN_PATH}/cleanup`)
                .send({ orderHashes: ['0x01', '0x02'] })
                .set('0x-admin-api-key', ADMIN_API_KEY)
                .expect(HttpStatus.MULTI_STATUS);
            (0, chai_1.expect)(response.body.unmodifiedJobs[0]).to.equal('0x01');
            (0, chai_1.expect)(response.body.modifiedJobs[0]).to.equal('0x02');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3QvcmZxbV90ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBRUEsdURBQWtHO0FBQ2xHLHFDQUFzQztBQUN0QyxtREFBK0M7QUFDL0MsaUNBQTZDO0FBQzdDLDJEQUFrRDtBQUNsRCwrQkFBOEI7QUFFOUIsbUNBQThEO0FBRTlELGdEQUFnRDtBQUNoRCxxQ0FBNEI7QUFDNUIsK0NBQXdDO0FBQ3hDLHFDQUFxQztBQUNyQywyQ0FBa0Y7QUFHbEYsd0NBQXdDO0FBQ3hDLHFEQVErQjtBQUMvQiw4Q0FBcUU7QUFDckUsaURBQXNGO0FBQ3RGLHNGQUlpRDtBQUNqRCw2REFBeUQ7QUFDekQsK0RBQTJEO0FBQzNELHFHQUE4RjtBQUM5Riw2Q0FBcUc7QUFDckcsNERBQXdEO0FBQ3hELGdFQUE0RDtBQUM1RCwwRUFBcUU7QUFDckUsOERBQW1GO0FBQ25GLDRFQUF1RTtBQUN2RSx3RUFBa0U7QUFDbEUsc0VBQWlFO0FBQ2pFLHNFQUEwRTtBQUMxRSw0RUFBeUU7QUFFekUsMkNBUXFCO0FBQ3JCLHdEQUFxRztBQUNyRyw4RUFBMkU7QUFFM0UsTUFBTSw0QkFBNEIsR0FBRyw0Q0FBNEMsQ0FBQztBQUNsRixNQUFNLE9BQU8sR0FBRyxZQUFZLENBQUM7QUFDN0IsTUFBTSxhQUFhLEdBQUcsYUFBYSxDQUFDO0FBQ3BDLE1BQU0sYUFBYSxHQUFHLGtCQUFrQixDQUFDO0FBQ3pDLE1BQU0saUJBQWlCLEdBQXNCLDhCQUFrQixDQUFDO0FBQ2hFLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxpQkFBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyx3QkFBWSxDQUFDLENBQUM7QUFFekUsK0NBQStDO0FBQy9DLE1BQU0sY0FBYyxHQUFHLHlCQUF5QixDQUFDO0FBQ2pELE1BQU0sY0FBYyxHQUFHLHlCQUF5QixDQUFDO0FBQ2pELE1BQU0sY0FBYyxHQUFHLHlCQUF5QixDQUFDO0FBQ2pELE1BQU0sbUJBQW1CLEdBQUcsNENBQTRDLENB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QUUscUJBQWEsQ0FBQyxrQkFBa0I7Z0JBQ3hDLFNBQVMsRUFBRSxNQUFNO2FBQ3BCLENBQUMsQ0FBQztZQUNILE1BQU0sT0FBTyxDQUFDLGVBQWUsQ0FBQztnQkFDMUIsR0FBRyxhQUFhO2dCQUNoQixNQUFNLEVBQUUsSUFBSSxpQkFBUyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMseUJBQWEsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3BGLFNBQVMsRUFBRSxNQUFNO2FBQ3BCLENBQUMsQ0FBQztZQUVILE1BQU0sUUFBUSxHQUFHLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQztpQkFDOUIsSUFBSSxDQUFDLEdBQUcsc0JBQVUsVUFBVSxDQUFDO2lCQUM3QixJQUFJLENBQUMsRUFBRSxXQUFXLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQztpQkFDdkMsR0FBRyxDQUFDLGtCQUFrQixFQUFFLGFBQWEsQ0FBQztpQkFDdEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUVyQyxJQUFBLGFBQU0sRUFBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDekQsSUFBQSxhQUFNLEVBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZGF2aWR3YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvdGVzdC9yZnFtX3Rlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGU6bWF4LWZpbGUtbGluZS1jb3VudCBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xuaW1wb3J0IHsgQ29udHJhY3RBZGRyZXNzZXMgfSBmcm9tICdAMHgvY29udHJhY3QtYWRkcmVzc2VzJztcbmltcG9ydCB7IGV0aFNpZ25IYXNoV2l0aEtleSwgTWV0YVRyYW5zYWN0aW9uLCBPdGNPcmRlciwgU2lnbmF0dXJlVHlwZSB9IGZyb20gJ0AweC9wcm90b2NvbC11dGlscyc7XG5pbXBvcnQgeyBCaWdOdW1iZXIgfSBmcm9tICdAMHgvdXRpbHMnO1xuaW1wb3J0IHsgV2ViM1dyYXBwZXIgfSBmcm9tICdAMHgvd2ViMy13cmFwcGVyJztcbmltcG9ydCBBeGlvcywgeyBBeGlvc0luc3RhbmNlIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IEF4aW9zTW9ja0FkYXB0ZXIgZnJvbSAnYXhpb3MtbW9jay1hZGFwdGVyJztcbmltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25SZWNlaXB0U3RhdHVzIH0gZnJvbSAnZXRoZXJldW0tdHlwZXMnO1xuaW1wb3J0IHsgQmlnTnVtYmVyIGFzIEV0aGVyc0JpZ051bWJlciwgZXRoZXJzIH0gZnJvbSAnZXRoZXJzJztcbmltcG9ydCB7IFNlcnZlciB9IGZyb20gJ2h0dHAnO1xuaW1wb3J0ICogYXMgSHR0cFN0YXR1cyBmcm9tICdodHRwLXN0YXR1cy1jb2Rlcyc7XG5pbXBvcnQgUmVkaXMgZnJvbSAnaW9yZWRpcyc7XG5pbXBvcnQgeyBQcm9kdWNlciB9IGZyb20gJ3Nxcy1wcm9kdWNlcic7XG5pbXBvcnQgKiBhcyByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5pbXBvcnQgeyBhbnlTdHJpbmcsIGFueXRoaW5nLCBkZWVwRXF1YWwsIGluc3RhbmNlLCBtb2NrLCB3aGVuIH0gZnJvbSAndHMtbW9ja2l0byc7XG5pbXBvcnQgeyBEYXRhU291cmNlIH0gZnJvbSAndHlwZW9ybSc7XG5cbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tICcuLi9zcmMvY29uZmlnJztcbmltcG9ydCB7XG4gICAgQURNSU5fUEFUSCxcbiAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXG4gICAgRVRIX0RFQ0lNQUxTLFxuICAgIE9ORV9NSU5VVEVfTVMsXG4gICAgT05FX1NFQ09ORF9NUyxcbiAgICBSRlFNX1BBVEgsXG4gICAgWkVSTyxcbn0gZnJvbSAnLi4vc3JjL2NvcmUvY29uc3RhbnRzJztcbmltcG9ydCB7IFJmcW1WMkpvYkVudGl0eSwgUmZxbVYyUXVvdGVFbnRpdHkgfSBmcm9tICcuLi9zcmMvZW50aXRpZXMnO1xuaW1wb3J0IHsgUmZxbUpvYlN0YXR1cywgUmZxbU9yZGVyVHlwZXMsIFN0b3JlZE90Y09yZGVyIH0gZnJvbSAnLi4vc3JjL2VudGl0aWVzL3R5cGVzJztcbmltcG9ydCB7XG4gICAgYnVpbGRSZnFBZG1pblNlcnZpY2UsXG4gICAgYnVpbGRSZnFNYWtlclNlcnZpY2UsXG4gICAgcnVuSHR0cFJmcW1TZXJ2aWNlQXN5bmMsXG59IGZyb20gJy4uL3NyYy9ydW5uZXJzL2h0dHBfcmZxbV9zZXJ2aWNlX3J1bm5lcic7XG5pbXBvcnQgeyBGZWVTZXJ2aWNlIH0gZnJvbSAnLi4vc3JjL3NlcnZpY2VzL2ZlZV9zZXJ2aWNlJztcbmltcG9ydCB7IFJmcW1TZXJ2aWNlIH0gZnJvbSAnLi4vc3JjL3NlcnZpY2VzL3JmcW1fc2VydmljZSc7XG5pbXBvcnQgeyBSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgfSBmcm9tICcuLi9zcmMvc2VydmljZXMvcmZxX21ha2VyX2JhbGFuY2VfY2FjaGVfc2VydmljZSc7XG5pbXBvcnQgeyBHYXNsZXNzQXBwcm92YWxUeXBlcywgR2FzbGVzc1R5cGVzLCBQZXJtaXRFaXA3MTJUeXBlcywgU3RvcmVkRmVlIH0gZnJvbSAnLi4vc3JjL2NvcmUvdHlwZXMnO1xuaW1wb3J0IHsgQ2FjaGVDbGllbnQgfSBmcm9tICcuLi9zcmMvdXRpbHMvY2FjaGVfY2xpZW50JztcbmltcG9ydCB7IENvbmZpZ01hbmFnZXIgfSBmcm9tICcuLi9zcmMvdXRpbHMvY29uZmlnX21hbmFnZXInO1xuaW1wb3J0IHsgUXVvdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICcuLi9zcmMvdXRpbHMvcXVvdGVfc2VydmVyX2NsaWVudCc7XG5pbXBvcnQgeyBSZnFtRGJVdGlscywgc3RvcmVkT3RjT3JkZXJUb090Y09yZGVyIH0gZnJvbSAnLi4vc3JjL3V0aWxzL3JmcW1fZGJfdXRpbHMnO1xuaW1wb3J0IHsgUmZxQmxvY2tjaGFpblV0aWxzIH0gZnJvbSAnLi4vc3JjL3V0aWxzL3JmcV9ibG9ja2NoYWluX3V0aWxzJztcbmltcG9ydCB7IFJmcU1ha2VyRGJVdGlscyB9IGZyb20gJy4uL3NyYy91dGlscy9yZnFfbWFrZXJfZGJfdXRpbHMnO1xuaW1wb3J0IHsgUmZxTWFrZXJNYW5hZ2VyIH0gZnJvbSAnLi4vc3JjL3V0aWxzL3JmcV9tYWtlcl9tYW5hZ2VyJztcbmltcG9ydCB7IEJMT0NLX0ZJTkFMSVRZX1RIUkVTSE9MRCB9IGZyb20gJy4uL3NyYy91dGlscy9TdWJtaXNzaW9uQ29udGV4dCc7XG5pbXBvcnQgeyBUb2tlbk1ldGFkYXRhTWFuYWdlciB9IGZyb20gJy4uL3NyYy91dGlscy9Ub2tlbk1ldGFkYXRhTWFuYWdlcic7XG5cbmltcG9ydCB7XG4gICAgQ09OVFJBQ1RfQUREUkVTU0VTLFxuICAgIGdldFByb3ZpZGVyLFxuICAgIE1BVENIQV9BRkZJTElBVEVfQUREUkVTUyxcbiAgICBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTCxcbiAgICBNT0NLX1BFUk1JVF9BUFBST1ZBTCxcbiAgICBURVNUX0RFQ09ERURfUkZRX09SREVSX0ZJTExFRF9FVkVOVF9MT0csXG4gICAgVEVTVF9SRlFfT1JERVJfRklMTEVEX0VWRU5UX0xPRyxcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgc2V0dXBEZXBlbmRlbmNpZXNBc3luYywgVGVhcmRvd25EZXBlbmRlbmNpZXNGdW5jdGlvbkhhbmRsZSB9IGZyb20gJy4vdGVzdF91dGlscy9kZXBsb3ltZW50JztcbmltcG9ydCB7IGluaXREYkRhdGFTb3VyY2VBc3luYyB9IGZyb20gJy4vdGVzdF91dGlscy9pbml0RGJEYXRhU291cmNlQXN5bmMnO1xuXG5jb25zdCBNT0NLX1dPUktFUl9SRUdJU1RSWV9BRERSRVNTID0gJzB4MTAyMzMzMWE0NjljNjM5MTczMGZmMUUyNzQ5NDIyQ0U4ODczRUMzOCc7XG5jb25zdCBBUElfS0VZID0gJ2tvb2xBcGlLZXknO1xuY29uc3QgQURNSU5fQVBJX0tFWSA9ICdhZG1pbkFwaUtleSc7XG5jb25zdCBJTlRFR1JBVE9SX0lEID0gJ2tvb2xJbnRlZ3JhdG9ySWQnO1xuY29uc3QgY29udHJhY3RBZGRyZXNzZXM6IENvbnRyYWN0QWRkcmVzc2VzID0gQ09OVFJBQ1RfQUREUkVTU0VTO1xuY29uc3QgV09SS0VSX0ZVTExfQkFMQU5DRV9XRUkgPSBuZXcgQmlnTnVtYmVyKDEpLnNoaWZ0ZWRCeShFVEhfREVDSU1BTFMpO1xuXG4vLyBSRlFNIE1hcmtldCBNYWtlciByZXF1ZXN0IHNwZWNpZmljIGNvbnN0YW50c1xuY29uc3QgTUFSS0VUX01BS0VSXzEgPSAnaHR0cHM6Ly9tb2NrLXJmcXQxLmNsdWInO1xuY29uc3QgTUFSS0VUX01BS0VSXzIgPSAnaHR0cHM6Ly9tb2NrLXJmcXQyLmNsdWInO1xuY29uc3QgTUFSS0VUX01BS0VSXzMgPSAnaHR0cHM6Ly9tb2NrLXJmcXQzLmNsdWInO1xuY29uc3QgTUFSS0VUX01BS0VSXzJfQUREUiA9ICcweGJFQTI5ZkUxMGNhZWQwRTFhNjVBN0FkQmRkZDI1NGREMzcyZTgzRmYnO1xuY29uc3QgTUFSS0VUX01BS0VSXzNfQUREUiA9ICcweEE4NGYwMDNEM2E2RjYyYzVkRjIxOGM3ZmI3YjBFRkI3NjZiNUFDMDcnO1xuY29uc3QgR0FTX1BSSUNFID0gbmV3IEJpZ051bWJlcigxMDApO1xuXG5jb25zdCBNT0NLX01FVEFfVFhfQ0FMTF9EQVRBID0gJzB4MTIzJztcbmNvbnN0IFJBTkRPTV9WQUxJRF9TSUdOQVRVUkUgPSB7XG4gICAgcjogJzB4NzJiYTIxMjVkNGVmZTFmOWNjNzc4ODIxMzhlZDk0Y2JkNDg1Zjg4OTdmZTZkOWZlMzQ4NTQ5MDY2MzRmYzU5ZCcsXG4gICAgczogJzB4MWUxOWQzZDI5YWIyODU1ZGViYzYyYTFkZjk4YTcyNzY3M2I4YmYzMWM0ZGEzYTM5MWE2ZWFlYTQ2NTkyMGZmMicsXG4gICAgdjogMjcsXG4gICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxufTtcbmNvbnN0IFNBRkVfRVhQSVJZID0gJzE5MDM2MjA1NDgnO1xuY29uc3QgR0FTX0VTVElNQVRFID0gMTY1MDAwO1xuY29uc3QgV09SS0VSX0FERFJFU1MgPSAnMHhhV29ya2VyQWRkcmVzcyc7XG5jb25zdCBGSVJTVF9UUkFOU0FDVElPTl9IQVNIID0gJzB4Zmlyc3RUeEhhc2gnO1xuY29uc3QgRklSU1RfU0lHTkVEX1RSQU5TQUNUSU9OID0gJzB4Zmlyc3RTaWduZWRUcmFuc2FjdGlvbic7XG5jb25zdCBUWF9TVEFUVVM6IFRyYW5zYWN0aW9uUmVjZWlwdFN0YXR1cyA9IDE7XG4vLyBpdCdzIG92ZXIgOUtcbmNvbnN0IE1JTkVEX0JMT0NLID0gOTAwMTtcbi8vIHRoZSB0eCBzaG91bGQgYmUgZmluYWxpemVkXG5jb25zdCBDVVJSRU5UX0JMT0NLID0gTUlORURfQkxPQ0sgKyBCTE9DS19GSU5BTElUWV9USFJFU0hPTEQ7XG5jb25zdCBNT0NLX0VYQ0hBTkdFX1BST1hZID0gJzB4dGhlRXhjaGFuZ2VQcm94eSc7XG5jb25zdCBTVUNDRVNTRlVMX1RSQU5TQUNUSU9OX1JFQ0VJUFQgPSB7XG4gICAgYmxvY2tIYXNoOiAnMHhhQmxvY2tIYXNoJyxcbiAgICBibG9ja051bWJlcjogTUlORURfQkxPQ0ssXG4gICAgYnl6YW50aXVtOiB0cnVlLFxuICAgIGNvbmZpcm1hdGlvbnM6IDIsXG4gICAgY29udHJhY3RBZGRyZXNzOiAnJyxcbiAgICBjdW11bGF0aXZlR2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTUwMDAwKSxcbiAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXG4gICAgZnJvbTogV09SS0VSX0FERFJFU1MsXG4gICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oR0FTX0VTVElNQVRFKSxcbiAgICBsb2dzOiBbVEVTVF9SRlFfT1JERVJfRklMTEVEX0VWRU5UX0xPR10sXG4gICAgbG9nc0Jsb29tOiAnJyxcbiAgICBzdGF0dXM6IFRYX1NUQVRVUyxcbiAgICB0bzogTU9DS19FWENIQU5HRV9QUk9YWSxcbiAgICB0cmFuc2FjdGlvbkhhc2g6IEZJUlNUX1RSQU5TQUNUSU9OX0hBU0gsXG4gICAgdHJhbnNhY3Rpb25JbmRleDogNSxcbiAgICB0eXBlOiAyLFxufTtcblxuY29uc3QgTU9DS19SRlFNX0pPQiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xuICAgIGNoYWluSWQ6IDEzMzcsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihEYXRlLm5vdygpKSxcbiAgICBmZWU6IHtcbiAgICAgICAgYW1vdW50OiAnMTAwMCcsXG4gICAgICAgIHRva2VuOiAnMHgxMjMnLFxuICAgICAgICB0eXBlOiAnZml4ZWQnLFxuICAgIH0sXG4gICAgaW50ZWdyYXRvcklkOiBudWxsLFxuICAgIG1ha2VyVXJpOiBNQVJLRVRfTUFLRVJfMSxcbiAgICBvcmRlcjoge1xuICAgICAgICBvcmRlcjoge1xuICAgICAgICAgICAgY2hhaW5JZDogJzEzMzcnLFxuICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoU0FGRV9FWFBJUlkpLFxuICAgICAgICAgICAgICAgIFpFUk8sXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihTQUZFX0VYUElSWSksXG4gICAgICAgICAgICApLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBtYWtlcjogJzB4MTIzJyxcbiAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMScsXG4gICAgICAgICAgICBtYWtlclRva2VuOiAnMHgxMjMnLFxuICAgICAgICAgICAgdGFrZXI6ICcweDEyMycsXG4gICAgICAgICAgICB0YWtlckFtb3VudDogJzEnLFxuICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4MTIzJyxcbiAgICAgICAgICAgIHR4T3JpZ2luOiAnMHgxMjMnLFxuICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcweDEyMycsXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcbiAgICB9LFxuICAgIG9yZGVySGFzaDogJzB4Mjg4ZDRkNzcxMTc5NzM4ZWU5Y2E2MGYxNGRmNzQ2MTJmYjFjYTQzZGZiYzNiYmI0OWRkOTIyNmExOTc0N2MxMScsXG4gICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdTdWJtaXR0ZWQsXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHdvcmtlckFkZHJlc3M6IG51bGwsXG4gICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXG4gICAgYWZmaWxpYXRlQWRkcmVzczogTUFUQ0hBX0FGRklMSUFURV9BRERSRVNTLFxuICAgIHRha2VyU3BlY2lmaWVkU2lkZTogJ21ha2VyVG9rZW4nLFxufSk7XG5cbmplc3Quc2V0VGltZW91dChPTkVfTUlOVVRFX01TICogMik7XG5sZXQgdGVhcmRvd25EZXBlbmRlbmNpZXM6IFRlYXJkb3duRGVwZW5kZW5jaWVzRnVuY3Rpb25IYW5kbGU7XG5cbmRlc2NyaWJlKCdSRlFNIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGxldCBhcHA6IEV4cHJlc3MuQXBwbGljYXRpb247XG4gICAgbGV0IGF4aW9zQ2xpZW50OiBBeGlvc0luc3RhbmNlO1xuICAgIGxldCBjYWNoZUNsaWVudDogQ2FjaGVDbGllbnQ7XG4gICAgbGV0IGRhdGFTb3VyY2U6IERhdGFTb3VyY2U7XG4gICAgbGV0IGRiVXRpbHM6IFJmcW1EYlV0aWxzO1xuICAgIGxldCBtb2NrQXhpb3M6IEF4aW9zTW9ja0FkYXB0ZXI7XG4gICAgbGV0IHJmcUJsb2NrY2hhaW5VdGlsc01vY2s6IFJmcUJsb2NrY2hhaW5VdGlscztcbiAgICBsZXQgcmZxbVNlcnZpY2VDaGFpbklkMTMzNzogUmZxbVNlcnZpY2U7XG4gICAgbGV0IHJmcW1TZXJ2aWNlQ2hhaW5JZDM6IFJmcW1TZXJ2aWNlO1xuICAgIGxldCBzZXJ2ZXI6IFNlcnZlcjtcbiAgICBsZXQgdGFrZXJBZGRyZXNzOiBzdHJpbmc7XG5cbiAgICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0ZWFyZG93bkRlcGVuZGVuY2llcyA9IGF3YWl0IHNldHVwRGVwZW5kZW5jaWVzQXN5bmMoWydwb3N0Z3JlcycsICdnYW5hY2hlJywgJ3JlZGlzJ10pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIFByb3ZpZGVyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gZ2V0UHJvdmlkZXIoKTtcbiAgICAgICAgY29uc3Qgd2ViM1dyYXBwZXIgPSBuZXcgV2ViM1dyYXBwZXIocHJvdmlkZXIpO1xuICAgICAgICBbdGFrZXJBZGRyZXNzXSA9IGF3YWl0IHdlYjNXcmFwcGVyLmdldEF2YWlsYWJsZUFkZHJlc3Nlc0FzeW5jKCk7XG5cbiAgICAgICAgLy8gQnVpbGQgZGVwZW5kZW5jaWVzXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbW9jayBGZWVTZXJ2aWNlXG4gICAgICAgIGNvbnN0IGZlZVNlcnZpY2VNb2NrID0gbW9jayhGZWVTZXJ2aWNlKTtcbiAgICAgICAgd2hlbihmZWVTZXJ2aWNlTW9jay5nZXRHYXNQcmljZUVzdGltYXRpb25Bc3luYygpKS50aGVuUmVzb2x2ZShHQVNfUFJJQ0UpO1xuICAgICAgICB3aGVuKGZlZVNlcnZpY2VNb2NrLmNhbGN1bGF0ZUZlZUFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSh7XG4gICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xuICAgICAgICAgICAgICAgIHRva2VuOiAnMHhUb2tlbicsXG4gICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDMwMCksXG4gICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgICAgICAga2luZDogJ2RlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICBnYXNGZWVBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgZ2FzUHJpY2U6IEdBU19QUklDRSxcbiAgICAgICAgICAgICAgICAgICAgemVyb0V4RmVlQW1vdW50OiBuZXcgQmlnTnVtYmVyKDIwMCksXG4gICAgICAgICAgICAgICAgICAgIHRyYWRlU2l6ZUJwczogNCxcbiAgICAgICAgICAgICAgICAgICAgZmVlVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDMwKSxcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDIwKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJyZWFrZG93bjoge1xuICAgICAgICAgICAgICAgICAgICBnYXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiBHQVNfUFJJQ0UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXN0aW1hdGVkR2FzOiBuZXcgQmlnTnVtYmVyKDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgemVyb0V4OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMjAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiAndm9sdW1lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFkZVNpemVCcHM6IDQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29udmVyc2lvblJhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzMCksXG4gICAgICAgICAgICAgICAgICAgIGZlZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzMCksXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigyMCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmZWVTZXJ2aWNlSW5zdGFuY2UgPSBpbnN0YW5jZShmZWVTZXJ2aWNlTW9jayk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtb2NrIENvbmZpZ01hbmFnZXJcbiAgICAgICAgY29uc3QgY29uZmlnTWFuYWdlck1vY2sgPSBtb2NrKENvbmZpZ01hbmFnZXIpO1xuICAgICAgICB3aGVuKGNvbmZpZ01hbmFnZXJNb2NrLmdldEFkbWluQXBpS2V5KCkpLnRoZW5SZXR1cm4oQURNSU5fQVBJX0tFWSk7XG4gICAgICAgIHdoZW4oY29uZmlnTWFuYWdlck1vY2suZ2V0UmZxbUFwaUtleVdoaXRlbGlzdCgpKS50aGVuUmV0dXJuKG5ldyBTZXQoW0FQSV9LRVldKSk7XG4gICAgICAgIHdoZW4oY29uZmlnTWFuYWdlck1vY2suZ2V0SW50ZWdyYXRvcklkRm9yQXBpS2V5KEFQSV9LRVkpKS50aGVuUmV0dXJuKElOVEVHUkFUT1JfSUQpO1xuICAgICAgICB3aGVuKGNvbmZpZ01hbmFnZXJNb2NrLmdldEludGVncmF0b3JCeUlkT3JUaHJvdyhJTlRFR1JBVE9SX0lEKSkudGhlblJldHVybih7XG4gICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6IElOVEVHUkFUT1JfSUQsXG4gICAgICAgICAgICBhcGlLZXlzOiBbQVBJX0tFWV0sXG4gICAgICAgICAgICBhbGxvd2VkQ2hhaW5JZHM6IFsxMzM3XSxcbiAgICAgICAgICAgIGxhYmVsOiAnVGVzdCcsXG4gICAgICAgICAgICByZnFtOiB0cnVlLFxuICAgICAgICAgICAgcGxwOiBmYWxzZSxcbiAgICAgICAgICAgIHJmcXQ6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29uZmlnTWFuYWdlciA9IGluc3RhbmNlKGNvbmZpZ01hbmFnZXJNb2NrKTtcblxuICAgICAgICAvLyBDcmVhdGUgQXhpb3MgY2xpZW50IGFuZCBtb2NrXG4gICAgICAgIGF4aW9zQ2xpZW50ID0gQXhpb3MuY3JlYXRlKCk7XG4gICAgICAgIG1vY2tBeGlvcyA9IG5ldyBBeGlvc01vY2tBZGFwdGVyKGF4aW9zQ2xpZW50KTtcblxuICAgICAgICAvLyBDcmVhdGUgdGhlIG1vY2sgcmZxQmxvY2tjaGFpblV0aWxzXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXNwb25zZTogW0JpZ051bWJlciwgQmlnTnVtYmVyXSA9IFtuZXcgQmlnTnVtYmVyKDEpLCBuZXcgQmlnTnVtYmVyKDEpXTtcbiAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzTW9jayA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcbiAgICAgICAgd2hlbihcbiAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsc01vY2suZ2VuZXJhdGVNZXRhVHJhbnNhY3Rpb24oYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSksXG4gICAgICAgICkudGhlbkNhbGwoKF9yZnFPcmRlciwgX3NpZ25hdHVyZSwgX3Rha2VyLCBfdGFrZXJBbW91bnQsIGNoYWluSWQpID0+IG5ldyBNZXRhVHJhbnNhY3Rpb24oeyBjaGFpbklkIH0pKTtcbiAgICAgICAgd2hlbihyZnFCbG9ja2NoYWluVXRpbHNNb2NrLmdlbmVyYXRlTWV0YVRyYW5zYWN0aW9uQ2FsbERhdGEoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXR1cm4oXG4gICAgICAgICAgICBNT0NLX01FVEFfVFhfQ0FMTF9EQVRBLFxuICAgICAgICApO1xuICAgICAgICB3aGVuKFxuICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzTW9jay52YWxpZGF0ZU1ldGFUcmFuc2FjdGlvbk9yVGhyb3dBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSxcbiAgICAgICAgKS50aGVuUmVzb2x2ZSh2YWxpZGF0aW9uUmVzcG9uc2UpO1xuICAgICAgICB3aGVuKHJmcUJsb2NrY2hhaW5VdGlsc01vY2suZ2V0VG9rZW5CYWxhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbbmV3IEJpZ051bWJlcigxKV0pO1xuICAgICAgICB3aGVuKHJmcUJsb2NrY2hhaW5VdGlsc01vY2suZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW25ldyBCaWdOdW1iZXIoMSldKTtcbiAgICAgICAgd2hlbihyZnFCbG9ja2NoYWluVXRpbHNNb2NrLmdldE5vbmNlQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKDEpO1xuICAgICAgICB3aGVuKHJmcUJsb2NrY2hhaW5VdGlsc01vY2suZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoR0FTX0VTVElNQVRFKTtcbiAgICAgICAgd2hlbihyZnFCbG9ja2NoYWluVXRpbHNNb2NrLnNpZ25UcmFuc2FjdGlvbkFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSh7XG4gICAgICAgICAgICBzaWduZWRUcmFuc2FjdGlvbjogRklSU1RfU0lHTkVEX1RSQU5TQUNUSU9OLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiBGSVJTVF9UUkFOU0FDVElPTl9IQVNILFxuICAgICAgICB9KTtcbiAgICAgICAgd2hlbihyZnFCbG9ja2NoYWluVXRpbHNNb2NrLnN1Ym1pdFNpZ25lZFRyYW5zYWN0aW9uQXN5bmMoRklSU1RfU0lHTkVEX1RSQU5TQUNUSU9OKSkudGhlblJlc29sdmUoXG4gICAgICAgICAgICBGSVJTVF9UUkFOU0FDVElPTl9IQVNILFxuICAgICAgICApO1xuICAgICAgICB3aGVuKHJmcUJsb2NrY2hhaW5VdGlsc01vY2suZ2V0UmVjZWlwdHNBc3luYyhkZWVwRXF1YWwoW0ZJUlNUX1RSQU5TQUNUSU9OX0hBU0hdKSkpLnRoZW5SZXNvbHZlKFtcbiAgICAgICAgICAgIFNVQ0NFU1NGVUxfVFJBTlNBQ1RJT05fUkVDRUlQVCxcbiAgICAgICAgXSk7XG4gICAgICAgIHdoZW4ocmZxQmxvY2tjaGFpblV0aWxzTW9jay5nZXRDdXJyZW50QmxvY2tBc3luYygpKS50aGVuUmVzb2x2ZShDVVJSRU5UX0JMT0NLKTtcbiAgICAgICAgd2hlbihyZnFCbG9ja2NoYWluVXRpbHNNb2NrLmdldEV4Y2hhbmdlUHJveHlBZGRyZXNzKCkpLnRoZW5SZXR1cm4oTU9DS19FWENIQU5HRV9QUk9YWSk7XG4gICAgICAgIHdoZW4oXG4gICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHNNb2NrLmRlY29kZU1ldGFUcmFuc2FjdGlvbkNhbGxEYXRhQW5kVmFsaWRhdGVBc3luYyhhbnlTdHJpbmcoKSwgYW55U3RyaW5nKCksIGFueXRoaW5nKCkpLFxuICAgICAgICApLnRoZW5SZXNvbHZlKHZhbGlkYXRpb25SZXNwb25zZSk7XG4gICAgICAgIHdoZW4ocmZxQmxvY2tjaGFpblV0aWxzTW9jay5nZXREZWNvZGVkUmZxT3JkZXJGaWxsRXZlbnRMb2dGcm9tTG9ncyhhbnl0aGluZygpKSkudGhlblJldHVybihcbiAgICAgICAgICAgIFRFU1RfREVDT0RFRF9SRlFfT1JERVJfRklMTEVEX0VWRU5UX0xPRyxcbiAgICAgICAgKTtcbiAgICAgICAgd2hlbihyZnFCbG9ja2NoYWluVXRpbHNNb2NrLmdldEFjY291bnRCYWxhbmNlQXN5bmMoTU9DS19XT1JLRVJfUkVHSVNUUllfQUREUkVTUykpLnRoZW5SZXNvbHZlKFxuICAgICAgICAgICAgV09SS0VSX0ZVTExfQkFMQU5DRV9XRUksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJmcUJsb2NrY2hhaW5VdGlscyA9IGluc3RhbmNlKHJmcUJsb2NrY2hhaW5VdGlsc01vY2spO1xuXG4gICAgICAgIGNvbnN0IHRva2VuTWV0YWRhdGFNYW5hZ2VyTW9jayA9IG1vY2soVG9rZW5NZXRhZGF0YU1hbmFnZXIpO1xuICAgICAgICB3aGVuKHRva2VuTWV0YWRhdGFNYW5hZ2VyTW9jay5nZXRUb2tlbkRlY2ltYWxzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKDE4KTtcbiAgICAgICAgY29uc3QgdG9rZW5NZXRhZGF0YU1hbmFnZXIgPSBpbnN0YW5jZSh0b2tlbk1ldGFkYXRhTWFuYWdlck1vY2spO1xuXG4gICAgICAgIGludGVyZmFjZSBTcXNSZXNwb25zZSB7XG4gICAgICAgICAgICBJZDogc3RyaW5nO1xuICAgICAgICAgICAgTUQ1T2ZNZXNzYWdlQm9keTogc3RyaW5nO1xuICAgICAgICAgICAgTWVzc2FnZUlkOiBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3FzUmVzcG9uc2U6IFNxc1Jlc3BvbnNlW10gPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgSWQ6ICdpZCcsXG4gICAgICAgICAgICAgICAgTUQ1T2ZNZXNzYWdlQm9keTogJ01ENU9mTWVzc2FnZUJvZHknLFxuICAgICAgICAgICAgICAgIE1lc3NhZ2VJZDogJ01lc3NhZ2VJZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZGJVdGlsc1xuICAgICAgICBkYXRhU291cmNlID0gYXdhaXQgaW5pdERiRGF0YVNvdXJjZUFzeW5jKCk7XG4gICAgICAgIGRiVXRpbHMgPSBuZXcgUmZxbURiVXRpbHMoZGF0YVNvdXJjZSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtb2NrIHNxc1Byb2R1Y2VyXG4gICAgICAgIGNvbnN0IHNxc1Byb2R1Y2VyTW9jayA9IG1vY2soUHJvZHVjZXIpO1xuICAgICAgICB3aGVuKHNxc1Byb2R1Y2VyTW9jay5zZW5kKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShzcXNSZXNwb25zZSk7XG4gICAgICAgIHdoZW4oc3FzUHJvZHVjZXJNb2NrLnF1ZXVlU2l6ZSgpKS50aGVuUmVzb2x2ZSgwKTtcbiAgICAgICAgY29uc3Qgc3FzUHJvZHVjZXIgPSBpbnN0YW5jZShzcXNQcm9kdWNlck1vY2spO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgcXVvdGUgc2VydmVyIGNsaWVudFxuICAgICAgICBjb25zdCBxdW90ZVNlcnZlckNsaWVudCA9IG5ldyBRdW90ZVNlcnZlckNsaWVudChheGlvc0NsaWVudCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBDYWNoZUNsaWVudFxuICAgICAgICBjb25zdCByZWRpcyA9IG5ldyBSZWRpcygpO1xuICAgICAgICBjYWNoZUNsaWVudCA9IG5ldyBDYWNoZUNsaWVudChyZWRpcyk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtYWtlciBiYWxhbmNlIGNhY2hlIHNlcnZpY2VcbiAgICAgICAgY29uc3QgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayA9IG1vY2soUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKTtcbiAgICAgICAgd2hlbihyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcbiAgICAgICAgICAgIFtuZXcgQmlnTnVtYmVyKDIwMDAwMDAwMDAwMDAwMDAwMCldLFxuICAgICAgICAgICAgW25ldyBCaWdOdW1iZXIoMjAwMDAwMDAwMDAwMDAwMDAwKSwgbmV3IEJpZ051bWJlcigyMDAwMDAwMDAwMDAwMDAwMDApXSxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gaW5zdGFuY2UocmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtb2NrIFJmcU1ha2VyTWFuYWdlclxuICAgICAgICBjb25zdCByZnFNYWtlck1hbmFnZXJNb2NrID0gbW9jayhSZnFNYWtlck1hbmFnZXIpO1xuICAgICAgICB3aGVuKFxuICAgICAgICAgICAgcmZxTWFrZXJNYW5hZ2VyTW9jay5nZXRSZnFtVjJNYWtlclVyaXNGb3JQYWlyKGFueVN0cmluZygpLCBhbnlTdHJpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSksXG4gICAgICAgICkudGhlblJldHVybihbTUFSS0VUX01BS0VSXzIsIE1BUktFVF9NQUtFUl8zXSk7XG4gICAgICAgIHdoZW4ocmZxTWFrZXJNYW5hZ2VyTW9jay5nZXRSZnFtVjJNYWtlck9mZmVyaW5ncygpKS50aGVuUmV0dXJuKHtcbiAgICAgICAgICAgICdodHRwczovL21vY2stcmZxbTEuY2x1Yic6IFtcbiAgICAgICAgICAgICAgICBbJzB4ODcxZGQ3YzJiNGIyNWUxYWExODcyOGU5ZDVmMmFmNGM0ZTQzMWY1YycsICcweDBiMWJhMGFmODMyZDdjMDVmZDY0MTYxZTBkYjc4ZTg1OTc4ZTgwODInXSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZnFNYWtlck1hbmFnZXIgPSBpbnN0YW5jZShyZnFNYWtlck1hbmFnZXJNb2NrKTtcbiAgICAgICAgcmZxbVNlcnZpY2VDaGFpbklkMTMzNyA9IG5ldyBSZnFtU2VydmljZShcbiAgICAgICAgICAgIDEzMzcsXG4gICAgICAgICAgICBmZWVTZXJ2aWNlSW5zdGFuY2UsXG4gICAgICAgICAgICAvKiBmZWVNb2RlbFZlcnNpb24gKi8gMCxcbiAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzc2VzLFxuICAgICAgICAgICAgTU9DS19XT1JLRVJfUkVHSVNUUllfQUREUkVTUyxcbiAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlscyxcbiAgICAgICAgICAgIGRiVXRpbHMsXG4gICAgICAgICAgICBzcXNQcm9kdWNlcixcbiAgICAgICAgICAgIHF1b3RlU2VydmVyQ2xpZW50LFxuICAgICAgICAgICAgREVGQVVMVF9NSU5fRVhQSVJZX0RVUkFUSU9OX01TLFxuICAgICAgICAgICAgY2FjaGVDbGllbnQsXG4gICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UsXG4gICAgICAgICAgICByZnFNYWtlck1hbmFnZXIsXG4gICAgICAgICAgICB0b2tlbk1ldGFkYXRhTWFuYWdlcixcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBDcmVhdGUgYW5vdGhlciBSRlFNIFNlcnZpY2UgZm9yIGNoYWluIElEIDMgdGhhdCByZXR1cm5zIDAgb2ZmZXJpbmdcbiAgICAgICAgY29uc3QgcmZxTWFrZXJNYW5hZ2VyQ2hhaW4zTW9jayA9IG1vY2soUmZxTWFrZXJNYW5hZ2VyKTtcbiAgICAgICAgd2hlbihyZnFNYWtlck1hbmFnZXJDaGFpbjNNb2NrLmdldFJmcW1WMk1ha2VyT2ZmZXJpbmdzKCkpLnRoZW5SZXR1cm4oe1xuICAgICAgICAgICAgJ2h0dHBzOi8vbW9jay1yZnFtMS5jbHViJzogW10sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZnFNYWtlck1hbmFnZXJDaGFpbklkMyA9IGluc3RhbmNlKHJmcU1ha2VyTWFuYWdlckNoYWluM01vY2spO1xuICAgICAgICByZnFtU2VydmljZUNoYWluSWQzID0gbmV3IFJmcW1TZXJ2aWNlKFxuICAgICAgICAgICAgMyxcbiAgICAgICAgICAgIGZlZVNlcnZpY2VJbnN0YW5jZSxcbiAgICAgICAgICAgIC8qIGZlZU1vZGVsVmVyc2lvbiAqLyAwLFxuICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzZXMsXG4gICAgICAgICAgICBNT0NLX1dPUktFUl9SRUdJU1RSWV9BRERSRVNTLFxuICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzLFxuICAgICAgICAgICAgZGJVdGlscyxcbiAgICAgICAgICAgIHNxc1Byb2R1Y2VyLFxuICAgICAgICAgICAgcXVvdGVTZXJ2ZXJDbGllbnQsXG4gICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXG4gICAgICAgICAgICBjYWNoZUNsaWVudCxcbiAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcbiAgICAgICAgICAgIHJmcU1ha2VyTWFuYWdlckNoYWluSWQzLFxuICAgICAgICAgICAgdG9rZW5NZXRhZGF0YU1hbmFnZXIsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcmZxQWRtaW5TZXJ2aWNlID0gYnVpbGRSZnFBZG1pblNlcnZpY2UoZGJVdGlscyk7XG4gICAgICAgIGNvbnN0IHJmcU1ha2VyU2VydmljZSA9IGJ1aWxkUmZxTWFrZXJTZXJ2aWNlKG5ldyBSZnFNYWtlckRiVXRpbHMoZGF0YVNvdXJjZSksIGNvbmZpZ01hbmFnZXIpO1xuXG4gICAgICAgIC8vIFN0YXJ0IHRoZSBzZXJ2ZXJcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcnVuSHR0cFJmcW1TZXJ2aWNlQXN5bmMoXG4gICAgICAgICAgICBuZXcgTWFwKFtcbiAgICAgICAgICAgICAgICBbMTMzNywgcmZxbVNlcnZpY2VDaGFpbklkMTMzN10sXG4gICAgICAgICAgICAgICAgWzMsIHJmcW1TZXJ2aWNlQ2hhaW5JZDNdLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICBuZXcgTWFwKCksXG4gICAgICAgICAgICByZnFBZG1pblNlcnZpY2UsXG4gICAgICAgICAgICByZnFNYWtlclNlcnZpY2UsXG4gICAgICAgICAgICBjb25maWdNYW5hZ2VyLFxuICAgICAgICAgICAgY29uZmlnLmRlZmF1bHRIdHRwU2VydmljZUNvbmZpZyxcbiAgICAgICAgICAgIGRhdGFTb3VyY2UsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgKTtcbiAgICAgICAgYXBwID0gcmVzLmFwcDtcbiAgICAgICAgc2VydmVyID0gcmVzLnNlcnZlcjtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGRhdGFTb3VyY2UucXVlcnkoJ1RSVU5DQVRFIFRBQkxFIHJmcW1fcXVvdGVzIENBU0NBREU7Jyk7XG4gICAgICAgIGF3YWl0IGRhdGFTb3VyY2UucXVlcnkoJ1RSVU5DQVRFIFRBQkxFIHJmcW1fam9icyBDQVNDQURFOycpO1xuICAgICAgICBhd2FpdCBkYXRhU291cmNlLnF1ZXJ5KCdUUlVOQ0FURSBUQUJMRSByZnFtX3RyYW5zYWN0aW9uX3N1Ym1pc3Npb25zIENBU0NBREU7Jyk7XG4gICAgICAgIGF3YWl0IGRhdGFTb3VyY2UucXVlcnkoJ1RSVU5DQVRFIFRBQkxFIHJmcW1fdjJfcXVvdGVzIENBU0NBREU7Jyk7XG4gICAgICAgIGF3YWl0IGRhdGFTb3VyY2UucXVlcnkoJ1RSVU5DQVRFIFRBQkxFIHJmcW1fdjJfam9icyBDQVNDQURFOycpO1xuICAgICAgICBhd2FpdCBkYXRhU291cmNlLnF1ZXJ5KCdUUlVOQ0FURSBUQUJMRSByZnFtX3YyX3RyYW5zYWN0aW9uX3N1Ym1pc3Npb25zIENBU0NBREU7Jyk7XG4gICAgfSk7XG5cbiAgICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHNlcnZlci5jbG9zZSgoZXJyPzogRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGNhY2hlQ2xpZW50LmNsb3NlQXN5bmMoKTtcbiAgICAgICAgaWYgKCF0ZWFyZG93bkRlcGVuZGVuY2llcygpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB0ZWFyIGRvd24gZGVwZW5kZW5jaWVzJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdyZnFtL3YxL2hlYWx0aHonLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjAwIE9LIHdpdGggYWN0aXZlIHBhaXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYXBwUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAuZ2V0KGAke1JGUU1fUEFUSH0vaGVhbHRoemApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLk9LKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5wYWlyc1swXVswXSkudG8uZXF1YWwoJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicpO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucGFpcnNbMF1bMV0pLnRvLmVxdWFsKCcweDg3MWRkN2MyYjRiMjVlMWFhMTg3MjhlOWQ1ZjJhZjRjNGU0MzFmNWMnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVGhpcyB0ZXN0IGlzIHRvIGNvdmVyIHRoaXMgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS8weFByb2plY3QvMHgtcmZxLWFwaS9wdWxsLzIwMFxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0IHZhbHVlcyBmb3IgZGlmZmVyZW50IGNoYWlucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoYWluSWQzSGVhbHRoelJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L2hlYWx0aHpgKVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWNoYWluLWlkJywgJzMnKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoSHR0cFN0YXR1cy5PSylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pO1xuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby11bnVzZWQtZXhwcmVzc2lvblxuICAgICAgICAgICAgZXhwZWN0KGNoYWluSWQzSGVhbHRoelJlc3BvbnNlLmJvZHkucGFpcnMpLnRvLmJlLmFuKCdhcnJheScpLnRoYXQuaXMuZW1wdHk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNoYWluSWQxMzM3SGVhbHRoelJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L2hlYWx0aHpgKVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWNoYWluLWlkJywgJzEzMzcnKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoSHR0cFN0YXR1cy5PSylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pO1xuICAgICAgICAgICAgZXhwZWN0KGNoYWluSWQxMzM3SGVhbHRoelJlc3BvbnNlLmJvZHkucGFpcnNbMF1bMF0pLnRvLmVxdWFsKCcweDBiMWJhMGFmODMyZDdjMDVmZDY0MTYxZTBkYjc4ZTg1OTc4ZTgwODInKTtcbiAgICAgICAgICAgIGV4cGVjdChjaGFpbklkMTMzN0hlYWx0aHpSZXNwb25zZS5ib2R5LnBhaXJzWzBdWzFdKS50by5lcXVhbCgnMHg4NzFkZDdjMmI0YjI1ZTFhYTE4NzI4ZTlkNWYyYWY0YzRlNDMxZjVjJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3JmcW0vdjEvcHJpY2UnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjAwIE9LIHdpdGggYW4gaW5kaWNhdGl2ZSBxdW90ZSBmb3IgYnV5cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eUFtb3VudCA9IDIwMDAwMDAwMDAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5pbmdRdW90ZSA9IDEwMDAwMDAwMDAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IGxvc2luZ1F1b3RlID0gMTUwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgemVyb0V4QXBpUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ1dFVEgnLFxuICAgICAgICAgICAgICAgIGJ1eUFtb3VudDogYnV5QW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICBza2lwVmFsaWRhdGlvbjogJ3RydWUnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJhc2VSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogYnV5QW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcbiAgICAgICAgICAgICAgICBleHBpcnk6ICcxOTAzNjIwNTQ4JywgLy8gaW4gdGhlIHllYXIgMjAzMFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbW9ja0F4aW9zLm9uR2V0KGAke01BUktFVF9NQUtFUl8yfS9yZnFtL3YyL3ByaWNlYCkucmVwbHlPbmNlKEh0dHBTdGF0dXMuT0ssIHtcbiAgICAgICAgICAgICAgICAuLi5iYXNlUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IHdpbm5pbmdRdW90ZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG1ha2VyOiBNQVJLRVRfTUFLRVJfMl9BRERSLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtb2NrQXhpb3Mub25HZXQoYCR7TUFSS0VUX01BS0VSXzN9L3JmcW0vdjIvcHJpY2VgKS5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywge1xuICAgICAgICAgICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbG9zaW5nUXVvdGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBtYWtlcjogTUFSS0VUX01BS0VSXzNfQUREUixcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9wcmljZT8ke3plcm9FeEFwaVBhcmFtcy50b1N0cmluZygpfWApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLk9LKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUHJpY2UgPSAnMC41JztcbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LmxpcXVpZGl0eUF2YWlsYWJsZSkudG8uZXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5wcmljZSkudG8uZXF1YWwoZXhwZWN0ZWRQcmljZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjAwIE9LIHdpdGggYW4gaW5kaWNhdGl2ZSBxdW90ZSBmb3Igc2VsbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3Qgd2lubmluZ1F1b3RlID0gMjAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgbG9zaW5nUXVvdGUgPSAxNTAwMDAwMDAwMDAwMDAwMDA7XG4gICAgICAgICAgICBjb25zdCB6ZXJvRXhBcGlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBidXlUb2tlbjogJ1pSWCcsXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuOiAnV0VUSCcsXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudDogc2VsbEFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgc2tpcFZhbGlkYXRpb246ICd0cnVlJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBiYXNlUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IHNlbGxBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxuICAgICAgICAgICAgICAgIGV4cGlyeTogJzE5MDM2MjA1NDgnLCAvLyBpbiB0aGUgeWVhciAyMDMwXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBtb2NrQXhpb3Mub25HZXQoYCR7TUFSS0VUX01BS0VSXzJ9L3JmcW0vdjIvcHJpY2VgKS5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywge1xuICAgICAgICAgICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogd2lubmluZ1F1b3RlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgbWFrZXI6IE1BUktFVF9NQUtFUl8yX0FERFIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1vY2tBeGlvcy5vbkdldChgJHtNQVJLRVRfTUFLRVJfM30vcmZxbS92Mi9wcmljZWApLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCB7XG4gICAgICAgICAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBsb3NpbmdRdW90ZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG1ha2VyOiBNQVJLRVRfTUFLRVJfM19BRERSLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3ByaWNlPyR7emVyb0V4QXBpUGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1jaGFpbi1pZCcsICcxMzM3JylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuT0spXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRQcmljZSA9ICcyJztcbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LmxpcXVpZGl0eUF2YWlsYWJsZSkudG8uZXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5wcmljZSkudG8uZXF1YWwoZXhwZWN0ZWRQcmljZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjAwIE9LLCBsaXF1aWRpdHlBdmFpbGFibGUgPT09IGZhbHNlIGlmIG5vIHZhbGlkIHF1b3RlcyBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGxBbW91bnQgPSAxMDAwMDAwMDAwMDAwMDAwMDA7XG4gICAgICAgICAgICBjb25zdCBxdW90ZWRBbW91bnQgPSAyMDAwMDAwMDAwMDAwMDAwMDA7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBidXlUb2tlbjogJ1pSWCcsXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuOiAnV0VUSCcsXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudDogc2VsbEFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgc2tpcFZhbGlkYXRpb246ICd0cnVlJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtb2NrQXhpb3Mub25HZXQoYCR7TUFSS0VUX01BS0VSXzJ9L3JmcW0vdjIvcHJpY2VgKS5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywge1xuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBxdW90ZWRBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogc2VsbEFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiAnMCcsIC8vIGFscmVhZHkgZXhwaXJlZFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3ByaWNlPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1jaGFpbi1pZCcsICcxMzM3JylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuT0spXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkubGlxdWlkaXR5QXZhaWxhYmxlKS50by5lcXVhbChmYWxzZSk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5wcmljZSkudG8uZXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgaWYgQVBJIEtleSBpcyBub3QgcGVybWl0dGVkIGFjY2VzcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGxBbW91bnQgPSAxMDAwMDAwMDAwMDAwMDAwMDA7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBidXlUb2tlbjogJ1pSWCcsXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuOiAnV0VUSCcsXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudDogc2VsbEFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgc2tpcFZhbGlkYXRpb246ICd0cnVlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgYXBwUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAuZ2V0KGAke1JGUU1fUEFUSH0vcHJpY2U/JHtwYXJhbXMudG9TdHJpbmcoKX1gKVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWFwaS1rZXknLCAndW5rbm93bi1rZXknKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoSHR0cFN0YXR1cy5CQURfUkVRVUVTVClcbiAgICAgICAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pO1xuXG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5yZWFzb24pLnRvLmVxdWFsKCdJbnZhbGlkIEFQSSBrZXknKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgaWYgQVBJIEtleSBkb2VzIG5vdCBoYXZlIGFjY2VzcyB0byB0aGUgY2hhaW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ1dFVEgnLFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6IHNlbGxBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiAnZmFsc2UnLFxuICAgICAgICAgICAgICAgIHNraXBWYWxpZGF0aW9uOiAndHJ1ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3ByaWNlPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1jaGFpbi1pZCcsICcxJylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucmVhc29uKS50by5lcXVhbCgnSW52YWxpZCBBUEkga2V5Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgNDAwIEJBRCBSRVFVRVNUIFZhbGlkYXRpb24gRXJyb3IgaWYgQ2hhaW4gSWQgY2Fubm90IGJlIHBhcnNlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGxBbW91bnQgPSAxMDAwMDAwMDAwMDAwMDAwMDA7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBidXlUb2tlbjogJ1pSWCcsXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuOiAnV0VUSCcsXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudDogc2VsbEFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgc2tpcFZhbGlkYXRpb246ICd0cnVlJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9wcmljZT8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnaW52YWxpZC1pZCcpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LnJlYXNvbikudG8uZXF1YWwoJ1ZhbGlkYXRpb24gRmFpbGVkJyk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS52YWxpZGF0aW9uRXJyb3JzWzBdLnJlYXNvbikudG8uZXF1YWwoJ0ludmFsaWQgY2hhaW4gaWQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgVmFsaWRhdGlvbiBFcnJvciBpZiBzZW5kaW5nIEVUSCwgbm90IFdFVEgnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ0VUSCcsXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudDogc2VsbEFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgc2tpcFZhbGlkYXRpb246ICd0cnVlJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9wcmljZT8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LnJlYXNvbikudG8uZXF1YWwoJ1ZhbGlkYXRpb24gRmFpbGVkJyk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS52YWxpZGF0aW9uRXJyb3JzWzBdLnJlYXNvbikudG8uZXF1YWwoXG4gICAgICAgICAgICAgICAgJ1Vud3JhcHBlZCBOYXRpdmUgQXNzZXQgaXMgbm90IHN1cHBvcnRlZC4gVXNlIFdFVEggaW5zdGVhZCcsXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBhIDQwMCBCQUQgUkVRVUVTVCBpZiBidXlUb2tlbiBpcyBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsbEFtb3VudCA9IDEwMDAwMDAwMDAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ1dFVEgnLFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6IHNlbGxBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3ByaWNlPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucmVhc29uKS50by5lcXVhbCgnVmFsaWRhdGlvbiBGYWlsZWQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgaWYgc2VsbFRva2VuIGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6IHNlbGxBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3ByaWNlPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucmVhc29uKS50by5lcXVhbCgnVmFsaWRhdGlvbiBGYWlsZWQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgaWYgYm90aCBzZWxsQW1vdW50IGFuZCBidXlBbW91bnQgYXJlIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBidXlUb2tlbjogJ1pSWCcsXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuOiAnV0VUSCcsXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9wcmljZT8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LnJlYXNvbikudG8uZXF1YWwoJ1ZhbGlkYXRpb24gRmFpbGVkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgNDAwIEJBRCBSRVFVRVNUIEVycm9yIGlmIHRyYWRpbmcgYW4gdW5rbm93biB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGxBbW91bnQgPSAxMDAwMDAwMDAwMDAwMDAwMDA7XG4gICAgICAgICAgICBjb25zdCBVTktOT1dOX1RPS0VOID0gJ1JBQ0NPT05TX0ZPUkVWRVInO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogVU5LTk9XTl9UT0tFTixcbiAgICAgICAgICAgICAgICBzZWxsQW1vdW50OiBzZWxsQW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICBza2lwVmFsaWRhdGlvbjogJ3RydWUnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3ByaWNlPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1jaGFpbi1pZCcsICcxMzM3JylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucmVhc29uKS50by5lcXVhbCgnVmFsaWRhdGlvbiBGYWlsZWQnKTtcbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LnZhbGlkYXRpb25FcnJvcnNbMF0ucmVhc29uKS50by5lcXVhbChcbiAgICAgICAgICAgICAgICBgVG9rZW4gJHtVTktOT1dOX1RPS0VOfSBpcyBjdXJyZW50bHkgdW5zdXBwb3J0ZWRgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncmZxbS92MS9xdW90ZScsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSAyMDAgT0ssIGxpcXVpZGl0eUF2YWlsYWJsZSA9PT0gZmFsc2UgaWYgbm8gdmFsaWQgZmlybSBxdW90ZXMgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgaW5zdWZmaWNpZW50U2VsbEFtb3VudCA9IDE7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICAgIGJ1eVRva2VuOiAnWlJYJyxcbiAgICAgICAgICAgICAgICBzZWxsVG9rZW46ICdXRVRIJyxcbiAgICAgICAgICAgICAgICBzZWxsQW1vdW50OiBzZWxsQW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICBza2lwVmFsaWRhdGlvbjogJ3RydWUnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJhc2VSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxuICAgICAgICAgICAgICAgIGV4cGlyeTogJzE5MDM2MjA1NDgnLCAvLyBpbiB0aGUgeWVhciAyMDMwXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBtb2NrQXhpb3Mub25HZXQoYCR7TUFSS0VUX01BS0VSXzJ9L3JmcW0vdjIvcHJpY2VgKS5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywge1xuICAgICAgICAgICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogaW5zdWZmaWNpZW50U2VsbEFtb3VudCxcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogaW5zdWZmaWNpZW50U2VsbEFtb3VudCxcbiAgICAgICAgICAgICAgICBtYWtlcjogTUFSS0VUX01BS0VSXzJfQUREUixcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9xdW90ZT8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLk9LKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LmxpcXVpZGl0eUF2YWlsYWJsZSkudG8uZXF1YWwoZmFsc2UpO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucHJpY2UpLnRvLmVxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjAwIE9LIHdpdGggYSBmaXJtIHF1b3RlIGZvciBidXlzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnV5QW1vdW50ID0gMjAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3Qgd2lubmluZ1F1b3RlID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgbG9zaW5nUXVvdGUgPSAxNTAwMDAwMDAwMDAwMDAwMDA7XG4gICAgICAgICAgICBjb25zdCB6ZXJvRXhBcGlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBidXlUb2tlbjogJ1pSWCcsXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuOiAnV0VUSCcsXG4gICAgICAgICAgICAgICAgYnV5QW1vdW50OiBidXlBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgc2tpcFZhbGlkYXRpb246ICd0cnVlJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicsXG4gICAgICAgICAgICAgICAgJzB4LWFwaS1rZXknOiBJTlRFR1JBVE9SX0lELFxuICAgICAgICAgICAgICAgICcweC1pbnRlZ3JhdG9yLWlkJzogSU5URUdSQVRPUl9JRCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGJhc2VSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogYnV5QW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcbiAgICAgICAgICAgICAgICBleHBpcnk6ICcxOTAzNjIwNTQ4JywgLy8gaW4gdGhlIHllYXIgMjAzMFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbW9ja0F4aW9zLm9uR2V0KGAke01BUktFVF9NQUtFUl8yfS9yZnFtL3YyL3ByaWNlYCwgeyBoZWFkZXJzIH0pLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCB7XG4gICAgICAgICAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiB3aW5uaW5nUXVvdGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBtYWtlcjogTUFSS0VUX01BS0VSXzJfQUREUixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbW9ja0F4aW9zLm9uR2V0KGAke01BUktFVF9NQUtFUl8zfS9yZnFtL3YyL3ByaWNlYCwgeyBoZWFkZXJzIH0pLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCB7XG4gICAgICAgICAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBsb3NpbmdRdW90ZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG1ha2VyOiBNQVJLRVRfTUFLRVJfM19BRERSLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3F1b3RlPyR7emVyb0V4QXBpUGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1jaGFpbi1pZCcsICcxMzM3JylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuT0spXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRQcmljZSA9ICcwLjUnO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucHJpY2UpLnRvLmVxdWFsKGV4cGVjdGVkUHJpY2UpO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkudHlwZSkudG8uZXF1YWwoR2FzbGVzc1R5cGVzLk90Y09yZGVyKTtcbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5Lm9yZGVySGFzaCkudG8ubWF0Y2goL14weFswLTlhLWZBLUZdKy8pO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkub3JkZXIubWFrZXIpLnRvLmVxdWFsKE1BUktFVF9NQUtFUl8yX0FERFIpO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkuYXBwcm92YWwpLnRvLmVxdWFsKHVuZGVmaW5lZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjAwIE9LIHdpdGggYSBmaXJtIHF1b3RlIHdoZW4gT3RjT3JkZXIgcHJpY2luZyBpcyBhdmFpbGFibGUgZm9yIHNlbGxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsbEFtb3VudCA9IDEwMDAwMDAwMDAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5pbmdRdW90ZSA9IDIwMDAwMDAwMDAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IGxvc2luZ1F1b3RlID0gMTUwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgemVyb0V4QXBpUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ1dFVEgnLFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6IHNlbGxBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgc2tpcFZhbGlkYXRpb246ICd0cnVlJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKicsXG4gICAgICAgICAgICAgICAgJzB4LWFwaS1rZXknOiBJTlRFR1JBVE9SX0lELFxuICAgICAgICAgICAgICAgICcweC1pbnRlZ3JhdG9yLWlkJzogSU5URUdSQVRPUl9JRCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGJhc2VSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogc2VsbEFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiAnMTkwMzYyMDU0OCcsIC8vIGluIHRoZSB5ZWFyIDIwMzBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIG1vY2tBeGlvcy5vbkdldChgJHtNQVJLRVRfTUFLRVJfMn0vcmZxbS92Mi9wcmljZWAsIHsgaGVhZGVycyB9KS5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywge1xuICAgICAgICAgICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogd2lubmluZ1F1b3RlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgbWFrZXI6IE1BUktFVF9NQUtFUl8yX0FERFIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1vY2tBeGlvcy5vbkdldChgJHtNQVJLRVRfTUFLRVJfM30vcmZxbS92Mi9wcmljZWAsIHsgaGVhZGVycyB9KS5yZXBseU9uY2UoSHR0cFN0YXR1cy5PSywge1xuICAgICAgICAgICAgICAgIC4uLmJhc2VSZXNwb25zZSxcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbG9zaW5nUXVvdGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBtYWtlcjogTUFSS0VUX01BS0VSXzNfQUREUixcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9xdW90ZT8ke3plcm9FeEFwaVBhcmFtcy50b1N0cmluZygpfWApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLk9LKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUHJpY2UgPSAnMic7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5wcmljZSkudG8uZXF1YWwoZXhwZWN0ZWRQcmljZSk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS50eXBlKS50by5lcXVhbChHYXNsZXNzVHlwZXMuT3RjT3JkZXIpO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkub3JkZXJIYXNoKS50by5tYXRjaCgvXjB4WzAtOWEtZkEtRl0rLyk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5vcmRlci5tYWtlcikudG8uZXF1YWwoTUFSS0VUX01BS0VSXzJfQUREUik7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5hcHByb3ZhbCkudG8uZXF1YWwodW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSAyMDAgT0sgd2l0aCBhIGZpcm0gcXVvdGUgd2hlbiBPdGNPcmRlciBwcmljaW5nIGlzIGF2YWlsYWJsZSBmb3Igc2VsbHMgYW5kIGNoZWNrQXBwcm92YWwgaXMgdHJ1ZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHdoZW4ocmZxQmxvY2tjaGFpblV0aWxzTW9jay5nZXRBbGxvd2FuY2VBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigwKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB3aGVuKHJmcUJsb2NrY2hhaW5VdGlsc01vY2suZ2V0R2FzbGVzc0FwcHJvdmFsQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxuICAgICAgICAgICAgICAgIE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3Qgc2VsbEFtb3VudCA9IDEwMDAwMDAwMDAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5pbmdRdW90ZSA9IDIwMDAwMDAwMDAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IGxvc2luZ1F1b3RlID0gMTUwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgemVyb0V4QXBpUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ1dFVEgnLFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6IHNlbGxBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgY2hlY2tBcHByb3ZhbDogJ3RydWUnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJyxcbiAgICAgICAgICAgICAgICAnMHgtYXBpLWtleSc6IElOVEVHUkFUT1JfSUQsXG4gICAgICAgICAgICAgICAgJzB4LWludGVncmF0b3ItaWQnOiBJTlRFR1JBVE9SX0lELFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgYmFzZVJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBzZWxsQW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcbiAgICAgICAgICAgICAgICBleHBpcnk6ICcxOTAzNjIwNTQ4JywgLy8gaW4gdGhlIHllYXIgMjAzMFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbW9ja0F4aW9zLm9uR2V0KGAke01BUktFVF9NQUtFUl8yfS9yZnFtL3YyL3ByaWNlYCwgeyBoZWFkZXJzIH0pLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCB7XG4gICAgICAgICAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiB3aW5uaW5nUXVvdGUudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBtYWtlcjogTUFSS0VUX01BS0VSXzJfQUREUixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbW9ja0F4aW9zLm9uR2V0KGAke01BUktFVF9NQUtFUl8zfS9yZnFtL3YyL3ByaWNlYCwgeyBoZWFkZXJzIH0pLnJlcGx5T25jZShIdHRwU3RhdHVzLk9LLCB7XG4gICAgICAgICAgICAgICAgLi4uYmFzZVJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBsb3NpbmdRdW90ZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG1ha2VyOiBNQVJLRVRfTUFLRVJfM19BRERSLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3F1b3RlPyR7emVyb0V4QXBpUGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1jaGFpbi1pZCcsICcxMzM3JylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuT0spXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRQcmljZSA9ICcyJztcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkQXBwcm92YWwgPSB7XG4gICAgICAgICAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0dhc2xlc3NBdmFpbGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdHlwZTogTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQVBQUk9WQUwua2luZCxcbiAgICAgICAgICAgICAgICBlaXA3MTI6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLmVpcDcxMixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5wcmljZSkudG8uZXF1YWwoZXhwZWN0ZWRQcmljZSk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS50eXBlKS50by5lcXVhbChHYXNsZXNzVHlwZXMuT3RjT3JkZXIpO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkub3JkZXJIYXNoKS50by5tYXRjaCgvXjB4WzAtOWEtZkEtRl0rLyk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5vcmRlci5tYWtlcikudG8uZXF1YWwoTUFSS0VUX01BS0VSXzJfQUREUik7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5hcHByb3ZhbCkudG8uZXFsKGV4cGVjdGVkQXBwcm92YWwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBhIDQwMCBCQUQgUkVRVUVTVCBpZiBhcGkga2V5IGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ1dFVEgnLFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6IHNlbGxBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiAnZmFsc2UnLFxuICAgICAgICAgICAgICAgIHNraXBWYWxpZGF0aW9uOiAndHJ1ZScsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgYXBwUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAuZ2V0KGAke1JGUU1fUEFUSH0vcXVvdGU/JHtwYXJhbXMudG9TdHJpbmcoKX1gKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoSHR0cFN0YXR1cy5CQURfUkVRVUVTVClcbiAgICAgICAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pO1xuXG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5yZWFzb24pLnRvLmVxdWFsKCdJbnZhbGlkIEFQSSBrZXknKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgaWYgdGFrZXJBZGRyZXNzIGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgYnV5VG9rZW46ICdaUlgnLFxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogJ1dFVEgnLFxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQ6IHNlbGxBbW91bnQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9xdW90ZT8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LnJlYXNvbikudG8uZXF1YWwoJ1ZhbGlkYXRpb24gRmFpbGVkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgNDAwIEJBRCBSRVFVRVNUIGlmIGJ1eVRva2VuIGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gMTAwMDAwMDAwMDAwMDAwMDAwO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgc2VsbFRva2VuOiAnV0VUSCcsXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudDogc2VsbEFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9xdW90ZT8ke3BhcmFtcy50b1N0cmluZygpfWApXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LnJlYXNvbikudG8uZXF1YWwoJ1ZhbGlkYXRpb24gRmFpbGVkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgNDAwIEJBRCBSRVFVRVNUIGlmIHNlbGxUb2tlbiBpcyBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsbEFtb3VudCA9IDEwMDAwMDAwMDAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgICAgIGJ1eVRva2VuOiAnWlJYJyxcbiAgICAgICAgICAgICAgICBzZWxsQW1vdW50OiBzZWxsQW1vdW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3F1b3RlPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucmVhc29uKS50by5lcXVhbCgnVmFsaWRhdGlvbiBGYWlsZWQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgaWYgYm90aCBzZWxsQW1vdW50IGFuZCBidXlBbW91bnQgYXJlIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBidXlUb2tlbjogJ1pSWCcsXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuOiAnV0VUSCcsXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3F1b3RlPyR7cGFyYW1zLnRvU3RyaW5nKCl9YClcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkucmVhc29uKS50by5lcXVhbCgnVmFsaWRhdGlvbiBGYWlsZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncmZxbS92MS9zdWJtaXQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vY2tTdG9yZWRGZWU6IFN0b3JlZEZlZSA9IHtcbiAgICAgICAgICAgIHRva2VuOiAnMHgxMjMnLFxuICAgICAgICAgICAgYW1vdW50OiAnMTAwMCcsXG4gICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtb2NrU3RvcmVkT3JkZXI6IFN0b3JlZE90Y09yZGVyID0ge1xuICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxuICAgICAgICAgICAgb3JkZXI6IHtcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAnMTMzNycsXG4gICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxuICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKFNBRkVfRVhQSVJZKSxcbiAgICAgICAgICAgICAgICAgICAgWkVSTyxcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihTQUZFX0VYUElSWSksXG4gICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIG1ha2VyOiAnMHgxMjMnLFxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMScsXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MTIzJyxcbiAgICAgICAgICAgICAgICB0YWtlcjogJzB4MTIzJyxcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEnLFxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDEyMycsXG4gICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweDEyMycsXG4gICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcweDEyMycsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICAvLyBPdGNPcmRlciBUYWtlclxuICAgICAgICBjb25zdCBvdGNPcmRlclRha2VyQWRkcmVzcyA9ICcweGRBOUFDNDIzNDQyMTY5NTg4REU2YjQzMDVmNEU4MjBENzA4ZDBjRTUnO1xuICAgICAgICBjb25zdCBvdGNPcmRlclRha2VyUHJpdmF0ZUtleSA9ICcweDY1M2ZhMzI4ZGY4MWJlMTgwYjU4ZTQyNzM3YmM0Y2VmMDM3YTE5YTNiOTY3M2IxNWQyMGVlMmVlYmIyZTUwOWQnO1xuXG4gICAgICAgIC8vIE90Y09yZGVyXG4gICAgICAgIGNvbnN0IG1vY2tTdG9yZWRPdGNPcmRlcjogU3RvcmVkT3RjT3JkZXIgPSB7XG4gICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXG4gICAgICAgICAgICBvcmRlcjoge1xuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHgxMjMnLFxuICAgICAgICAgICAgICAgIG1ha2VyOiAnMHgxMjMnLFxuICAgICAgICAgICAgICAgIHRha2VyOiBvdGNPcmRlclRha2VyQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHgxMjMnLFxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDEyMycsXG4gICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxJyxcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEnLFxuICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihTQUZFX0VYUElSWSksXG4gICAgICAgICAgICAgICAgICAgIFpFUk8sXG4gICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoU0FGRV9FWFBJUlkpLFxuICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAnMTMzNycsXG4gICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcweDEyMycsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvdGNPcmRlciA9IHN0b3JlZE90Y09yZGVyVG9PdGNPcmRlcihtb2NrU3RvcmVkT3RjT3JkZXIpO1xuICAgICAgICBpdCgnW3YyXSBzaG91bGQgcmV0dXJuIHN0YXR1cyAyMDEgY3JlYXRlZCBhbmQgcXVldWUgdXAgYSBqb2Igd2l0aCBhIHN1Y2Nlc3NmdWwgcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIE90Y09yZGVyXG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IG90Y09yZGVyO1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJIYXNoID0gb3JkZXIuZ2V0SGFzaCgpO1xuXG4gICAgICAgICAgICAvLyBUYWtlciBTaWduYXR1cmVcbiAgICAgICAgICAgIGNvbnN0IHRha2VyU2lnbmF0dXJlID0gZXRoU2lnbkhhc2hXaXRoS2V5KG9yZGVySGFzaCwgb3RjT3JkZXJUYWtlclByaXZhdGVLZXkpO1xuXG4gICAgICAgICAgICBjb25zdCBtb2NrUXVvdGUgPSBuZXcgUmZxbVYyUXVvdGVFbnRpdHkoe1xuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogTUFSS0VUX01BS0VSXzEsXG4gICAgICAgICAgICAgICAgZmVlOiBtb2NrU3RvcmVkRmVlLFxuICAgICAgICAgICAgICAgIG9yZGVyOiBtb2NrU3RvcmVkT3RjT3JkZXIsXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiBNQVRDSEFfQUZGSUxJQVRFX0FERFJFU1MsXG4gICAgICAgICAgICAgICAgdGFrZXJTcGVjaWZpZWRTaWRlOiAnbWFrZXJUb2tlbicsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gd3JpdGUgYSBjb3JyZXNwb25kaW5nIHF1b3RlIGVudGl0eSB0byB2YWxpZGF0ZSBhZ2FpbnN0XG4gICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLmdldFJlcG9zaXRvcnkoUmZxbVYyUXVvdGVFbnRpdHkpLmluc2VydChtb2NrUXVvdGUpO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5wb3N0KGAke1JGUU1fUEFUSH0vc3VibWl0YClcbiAgICAgICAgICAgICAgICAuc2VuZCh7IHR5cGU6IEdhc2xlc3NUeXBlcy5PdGNPcmRlciwgb3JkZXIsIHNpZ25hdHVyZTogdGFrZXJTaWduYXR1cmUgfSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hcGkta2V5JywgQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1jaGFpbi1pZCcsICcxMzM3JylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuQ1JFQVRFRClcbiAgICAgICAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pO1xuXG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5vcmRlckhhc2gpLnRvLmVxdWFsKG9yZGVySGFzaCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRiSm9iRW50aXR5ID0gYXdhaXQgZGF0YVNvdXJjZS5nZXRSZXBvc2l0b3J5KFJmcW1WMkpvYkVudGl0eSkuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV4cGVjdChkYkpvYkVudGl0eSkudG8ubm90LmVxdWFsKG51bGwpO1xuICAgICAgICAgICAgZXhwZWN0KGRiSm9iRW50aXR5Py5vcmRlckhhc2gpLnRvLmVxdWFsKG1vY2tRdW90ZS5vcmRlckhhc2gpO1xuICAgICAgICAgICAgZXhwZWN0KGRiSm9iRW50aXR5Py5tYWtlclVyaSkudG8uZXF1YWwoTUFSS0VUX01BS0VSXzEpO1xuICAgICAgICAgICAgZXhwZWN0KGRiSm9iRW50aXR5Py5hZmZpbGlhdGVBZGRyZXNzKS50by5lcXVhbChNQVRDSEFfQUZGSUxJQVRFX0FERFJFU1MpO1xuICAgICAgICAgICAgZXhwZWN0KGRiSm9iRW50aXR5Py50YWtlclNpZ25hdHVyZSkudG8uZGVlcC5lcSh0YWtlclNpZ25hdHVyZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdbdjJdIHNob3VsZCByZXR1cm4gc3RhdHVzIDQwNCBub3QgZm91bmQgaWYgdGhlcmUgaXMgbm90IGEgcHJlLWV4aXN0aW5nIHF1b3RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBvdGNPcmRlcjtcblxuICAgICAgICAgICAgLy8gVGFrZXIgU2lnbmF0dXJlXG4gICAgICAgICAgICBjb25zdCB0YWtlclNpZ25hdHVyZSA9IGV0aFNpZ25IYXNoV2l0aEtleShvcmRlci5nZXRIYXNoKCksIG90Y09yZGVyVGFrZXJQcml2YXRlS2V5KTtcblxuICAgICAgICAgICAgY29uc3QgYXBwUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAucG9zdChgJHtSRlFNX1BBVEh9L3N1Ym1pdGApXG4gICAgICAgICAgICAgICAgLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBHYXNsZXNzVHlwZXMuT3RjT3JkZXIsXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLFxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHRha2VyU2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLk5PVF9GT1VORClcbiAgICAgICAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pO1xuXG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5yZWFzb24pLnRvLmVxdWFsKCdOb3QgRm91bmQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgRXJyb3IgdGhlIHR5cGUgaXMgbm90IHN1cHBvcnRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRUeXBlID0gJ3YxMHJmcSc7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnBvc3QoYCR7UkZRTV9QQVRIfS9zdWJtaXRgKVxuICAgICAgICAgICAgICAgIC5zZW5kKHsgdHlwZTogaW52YWxpZFR5cGUsIG9yZGVyOiBtb2NrU3RvcmVkT3JkZXIsIHNpZ25hdHVyZTogUkFORE9NX1ZBTElEX1NJR05BVFVSRSB9KVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWFwaS1rZXknLCBBUElfS0VZKVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWNoYWluLWlkJywgJzEzMzcnKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoSHR0cFN0YXR1cy5CQURfUkVRVUVTVClcbiAgICAgICAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pO1xuXG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS5yZWFzb24pLnRvLmVxdWFsKCdWYWxpZGF0aW9uIEZhaWxlZCcpO1xuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkudmFsaWRhdGlvbkVycm9yc1swXS5yZWFzb24pLnRvLmVxdWFsKFxuICAgICAgICAgICAgICAgIGAke2ludmFsaWRUeXBlfSBpcyBhbiBpbnZhbGlkIHZhbHVlIGZvciAndHlwZSdgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ1t2Ml0gc2hvdWxkIGZhaWwgd2l0aCBzdGF0dXMgY29kZSA1MDAgaWYgYSBxdW90ZSBoYXMgYWxyZWFkeSBiZWVuIHN1Ym1pdHRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIE90Y09yZGVyXG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IG90Y09yZGVyO1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJIYXNoID0gb3JkZXIuZ2V0SGFzaCgpO1xuXG4gICAgICAgICAgICAvLyBUYWtlciBTaWduYXR1cmVcbiAgICAgICAgICAgIGNvbnN0IHRha2VyU2lnbmF0dXJlID0gZXRoU2lnbkhhc2hXaXRoS2V5KG9yZGVySGFzaCwgb3RjT3JkZXJUYWtlclByaXZhdGVLZXkpO1xuXG4gICAgICAgICAgICBjb25zdCBtb2NrUXVvdGUgPSBuZXcgUmZxbVYyUXVvdGVFbnRpdHkoe1xuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogTUFSS0VUX01BS0VSXzEsXG4gICAgICAgICAgICAgICAgZmVlOiBtb2NrU3RvcmVkRmVlLFxuICAgICAgICAgICAgICAgIG9yZGVyOiBtb2NrU3RvcmVkT3RjT3JkZXIsXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiBNQVRDSEFfQUZGSUxJQVRFX0FERFJFU1MsXG4gICAgICAgICAgICAgICAgdGFrZXJTcGVjaWZpZWRTaWRlOiAnbWFrZXJUb2tlbicsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gd3JpdGUgYSBjb3JyZXNwb25kaW5nIHF1b3RlIGVudGl0eSB0byB2YWxpZGF0ZSBhZ2FpbnN0XG4gICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLmdldFJlcG9zaXRvcnkoUmZxbVYyUXVvdGVFbnRpdHkpLmluc2VydChtb2NrUXVvdGUpO1xuXG4gICAgICAgICAgICBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAucG9zdChgJHtSRlFNX1BBVEh9L3N1Ym1pdGApXG4gICAgICAgICAgICAgICAgLnNlbmQoeyB0eXBlOiBHYXNsZXNzVHlwZXMuT3RjT3JkZXIsIG9yZGVyLCBzaWduYXR1cmU6IHRha2VyU2lnbmF0dXJlIH0pXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkNSRUFURUQpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgLy8gdHJ5IHRvIHN1Ym1pdCBhZ2FpblxuICAgICAgICAgICAgYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnBvc3QoYCR7UkZRTV9QQVRIfS9zdWJtaXRgKVxuICAgICAgICAgICAgICAgIC5zZW5kKHsgdHlwZTogR2FzbGVzc1R5cGVzLk90Y09yZGVyLCBvcmRlciwgc2lnbmF0dXJlOiB0YWtlclNpZ25hdHVyZSB9KVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWFwaS1rZXknLCBBUElfS0VZKVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWNoYWluLWlkJywgJzEzMzcnKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ1t2Ml0gc2hvdWxkIGZhaWwgd2l0aCA0MDAgQkFEIFJFUVVFU1QgaWYgbWV0YSB0eCBpcyB0b28gY2xvc2UgdG8gZXhwaXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gbmV3IE90Y09yZGVyKHtcbiAgICAgICAgICAgICAgICAuLi5vdGNPcmRlcixcbiAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoWkVSTywgWkVSTywgWkVSTyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySGFzaCA9IG9yZGVyLmdldEhhc2goKTtcblxuICAgICAgICAgICAgY29uc3QgbW9ja1F1b3RlID0gbmV3IFJmcW1WMlF1b3RlRW50aXR5KHtcbiAgICAgICAgICAgICAgICBvcmRlckhhc2gsXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1BUktFVF9NQUtFUl8xLFxuICAgICAgICAgICAgICAgIGZlZTogbW9ja1N0b3JlZEZlZSxcbiAgICAgICAgICAgICAgICBvcmRlcjogbW9ja1N0b3JlZE90Y09yZGVyLFxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogTUFUQ0hBX0FGRklMSUFURV9BRERSRVNTLFxuICAgICAgICAgICAgICAgIHRha2VyU3BlY2lmaWVkU2lkZTogJ21ha2VyVG9rZW4nLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGF3YWl0IGRhdGFTb3VyY2UuZ2V0UmVwb3NpdG9yeShSZnFtVjJRdW90ZUVudGl0eSkuaW5zZXJ0KG1vY2tRdW90ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnBvc3QoYCR7UkZRTV9QQVRIfS9zdWJtaXRgKVxuICAgICAgICAgICAgICAgIC5zZW5kKHsgdHlwZTogR2FzbGVzc1R5cGVzLk90Y09yZGVyLCBvcmRlciwgc2lnbmF0dXJlOiBSQU5ET01fVkFMSURfU0lHTkFUVVJFIH0pXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LnJlYXNvbikudG8uZXF1YWwoJ1ZhbGlkYXRpb24gRmFpbGVkJyk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS52YWxpZGF0aW9uRXJyb3JzWzBdLnJlYXNvbikudG8uZXF1YWwoYG9yZGVyIHdpbGwgZXhwaXJlIHRvbyBzb29uYCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdbdjJdIHNob3VsZCBmYWlsIHdpdGggNDAwIEJBRCBSRVFVRVNUIGlmIHNpZ25hdHVyZSBpcyBpbnZhbGlkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBvdGNPcmRlcjtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySGFzaCA9IG9yZGVyLmdldEhhc2goKTtcblxuICAgICAgICAgICAgY29uc3QgbW9ja1F1b3RlID0gbmV3IFJmcW1WMlF1b3RlRW50aXR5KHtcbiAgICAgICAgICAgICAgICBvcmRlckhhc2gsXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1BUktFVF9NQUtFUl8xLFxuICAgICAgICAgICAgICAgIGZlZTogbW9ja1N0b3JlZEZlZSxcbiAgICAgICAgICAgICAgICBvcmRlcjogbW9ja1N0b3JlZE90Y09yZGVyLFxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogTUFUQ0hBX0FGRklMSUFURV9BRERSRVNTLFxuICAgICAgICAgICAgICAgIHRha2VyU3BlY2lmaWVkU2lkZTogJ21ha2VyVG9rZW4nLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGF3YWl0IGRhdGFTb3VyY2UuZ2V0UmVwb3NpdG9yeShSZnFtVjJRdW90ZUVudGl0eSkuaW5zZXJ0KG1vY2tRdW90ZSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFwcFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnBvc3QoYCR7UkZRTV9QQVRIfS9zdWJtaXRgKVxuICAgICAgICAgICAgICAgIC5zZW5kKHsgdHlwZTogR2FzbGVzc1R5cGVzLk90Y09yZGVyLCBvcmRlciwgc2lnbmF0dXJlOiBSQU5ET01fVkFMSURfU0lHTkFUVVJFIH0pXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChhcHBSZXNwb25zZS5ib2R5LnJlYXNvbikudG8uZXF1YWwoJ1ZhbGlkYXRpb24gRmFpbGVkJyk7XG4gICAgICAgICAgICBleHBlY3QoYXBwUmVzcG9uc2UuYm9keS52YWxpZGF0aW9uRXJyb3JzWzBdLnJlYXNvbikudG8uZXF1YWwoYHNpZ25hdHVyZSBpcyBub3QgdmFsaWRgKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncmZxbS92MS9zdWJtaXQtd2l0aC1hcHByb3ZhbCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgbW9ja1N0b3JlZEZlZTogU3RvcmVkRmVlID0ge1xuICAgICAgICAgICAgdG9rZW46ICcweDEyMycsXG4gICAgICAgICAgICBhbW91bnQ6ICcxMDAwJyxcbiAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gT3RjT3JkZXIgVGFrZXJcbiAgICAgICAgY29uc3Qgb3RjT3JkZXJUYWtlckFkZHJlc3MgPSAnMHhkQTlBQzQyMzQ0MjE2OTU4OERFNmI0MzA1ZjRFODIwRDcwOGQwY0U1JztcbiAgICAgICAgY29uc3Qgb3RjT3JkZXJUYWtlclByaXZhdGVLZXkgPSAnMHg2NTNmYTMyOGRmODFiZTE4MGI1OGU0MjczN2JjNGNlZjAzN2ExOWEzYjk2NzNiMTVkMjBlZTJlZWJiMmU1MDlkJztcblxuICAgICAgICAvLyBPdGNPcmRlclxuICAgICAgICBjb25zdCBtb2NrU3RvcmVkT3RjT3JkZXI6IFN0b3JlZE90Y09yZGVyID0ge1xuICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxuICAgICAgICAgICAgb3JkZXI6IHtcbiAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4MTIzJyxcbiAgICAgICAgICAgICAgICBtYWtlcjogJzB4MTIzJyxcbiAgICAgICAgICAgICAgICB0YWtlcjogb3RjT3JkZXJUYWtlckFkZHJlc3MsXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MTIzJyxcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHgxMjMnLFxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMScsXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxJyxcbiAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoU0FGRV9FWFBJUlkpLFxuICAgICAgICAgICAgICAgICAgICBaRVJPLFxuICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKFNBRkVfRVhQSVJZKSxcbiAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogJzEzMzcnLFxuICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnMHgxMjMnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBBcHByb3ZhbFxuICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHtcbiAgICAgICAgICAgIHR5cGU6IE1PQ0tfUEVSTUlUX0FQUFJPVkFMLmtpbmQsXG4gICAgICAgICAgICBlaXA3MTI6IE1PQ0tfUEVSTUlUX0FQUFJPVkFMLmVpcDcxMixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb3RjT3JkZXIgPSBzdG9yZWRPdGNPcmRlclRvT3RjT3JkZXIobW9ja1N0b3JlZE90Y09yZGVyKTtcbiAgICAgICAgaXQoJ1t2Ml0gc2hvdWxkIHJldHVybiBzdGF0dXMgMjAxIGNyZWF0ZWQgYW5kIHF1ZXVlIHVwIGEgam9iIHdpdGggYSBzdWNjZXNzZnVsIHJlcXVlc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBPdGNPcmRlclxuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBvdGNPcmRlcjtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySGFzaCA9IG9yZGVyLmdldEhhc2goKTtcblxuICAgICAgICAgICAgLy8gVGFrZXIgU2lnbmF0dXJlXG4gICAgICAgICAgICBjb25zdCB0YWtlclNpZ25hdHVyZSA9IGV0aFNpZ25IYXNoV2l0aEtleShvcmRlckhhc2gsIG90Y09yZGVyVGFrZXJQcml2YXRlS2V5KTtcblxuICAgICAgICAgICAgLy8gQXBwcm92YWwgc2lnbmF0dXJlXG4gICAgICAgICAgICBjb25zdCBzaWduZXIgPSBuZXcgZXRoZXJzLldhbGxldChvdGNPcmRlclRha2VyUHJpdmF0ZUtleSk7XG4gICAgICAgICAgICBjb25zdCB0eXBlc0NvcHk6IFBhcnRpYWw8UGVybWl0RWlwNzEyVHlwZXM+ID0geyAuLi5hcHByb3ZhbC5laXA3MTIudHlwZXMgfTtcbiAgICAgICAgICAgIGRlbGV0ZSB0eXBlc0NvcHkuRUlQNzEyRG9tYWluO1xuICAgICAgICAgICAgY29uc3QgcmF3QXBwcm92YWxTaWduYXR1cmUgPSBhd2FpdCBzaWduZXIuX3NpZ25UeXBlZERhdGEoXG4gICAgICAgICAgICAgICAgYXBwcm92YWwuZWlwNzEyLmRvbWFpbixcbiAgICAgICAgICAgICAgICAvLyAkZXNsaW50LWZpeC1tZSBodHRwczovL2dpdGh1Yi5jb20vcmhpbm9kYXZpZC9lc2xpbnQtZml4LW1lXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICB0eXBlc0NvcHkgYXMgYW55LFxuICAgICAgICAgICAgICAgIGFwcHJvdmFsLmVpcDcxMi5tZXNzYWdlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHsgdiwgciwgcyB9ID0gZXRoZXJzLnV0aWxzLnNwbGl0U2lnbmF0dXJlKHJhd0FwcHJvdmFsU2lnbmF0dXJlKTtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsU2lnbmF0dXJlID0ge1xuICAgICAgICAgICAgICAgIHYsXG4gICAgICAgICAgICAgICAgcixcbiAgICAgICAgICAgICAgICBzLFxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IDMsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBtb2NrUXVvdGUgPSBuZXcgUmZxbVYyUXVvdGVFbnRpdHkoe1xuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogTUFSS0VUX01BS0VSXzEsXG4gICAgICAgICAgICAgICAgZmVlOiBtb2NrU3RvcmVkRmVlLFxuICAgICAgICAgICAgICAgIG9yZGVyOiBtb2NrU3RvcmVkT3RjT3JkZXIsXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiBNQVRDSEFfQUZGSUxJQVRFX0FERFJFU1MsXG4gICAgICAgICAgICAgICAgdGFrZXJTcGVjaWZpZWRTaWRlOiAnbWFrZXJUb2tlbicsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gd3JpdGUgYSBjb3JyZXNwb25kaW5nIHF1b3RlIGVudGl0eSB0byB2YWxpZGF0ZSBhZ2FpbnN0XG4gICAgICAgICAgICBhd2FpdCBkYXRhU291cmNlLmdldFJlcG9zaXRvcnkoUmZxbVYyUXVvdGVFbnRpdHkpLmluc2VydChtb2NrUXVvdGUpO1xuXG4gICAgICAgICAgICBjb25zdCBhcHBSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5wb3N0KGAke1JGUU1fUEFUSH0vc3VibWl0LXdpdGgtYXBwcm92YWxgKVxuICAgICAgICAgICAgICAgIC5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgdHJhZGU6IHsgdHlwZTogR2FzbGVzc1R5cGVzLk90Y09yZGVyLCBvcmRlciwgc2lnbmF0dXJlOiB0YWtlclNpZ25hdHVyZSB9LFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogR2FzbGVzc0FwcHJvdmFsVHlwZXMuUGVybWl0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZWlwNzEyOiBhcHByb3ZhbC5laXA3MTIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IGFwcHJvdmFsU2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkNSRUFURUQpXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KGFwcFJlc3BvbnNlLmJvZHkub3JkZXJIYXNoKS50by5lcXVhbChvcmRlckhhc2gpO1xuXG4gICAgICAgICAgICBjb25zdCBkYkpvYkVudGl0eSA9IGF3YWl0IGRhdGFTb3VyY2UuZ2V0UmVwb3NpdG9yeShSZnFtVjJKb2JFbnRpdHkpLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChkYkpvYkVudGl0eSkudG8ubm90LmVxdWFsKG51bGwpO1xuICAgICAgICAgICAgZXhwZWN0KGRiSm9iRW50aXR5Py5vcmRlckhhc2gpLnRvLmVxdWFsKG1vY2tRdW90ZS5vcmRlckhhc2gpO1xuICAgICAgICAgICAgZXhwZWN0KGRiSm9iRW50aXR5Py5tYWtlclVyaSkudG8uZXF1YWwoTUFSS0VUX01BS0VSXzEpO1xuICAgICAgICAgICAgZXhwZWN0KGRiSm9iRW50aXR5Py5hZmZpbGlhdGVBZGRyZXNzKS50by5lcXVhbChNQVRDSEFfQUZGSUxJQVRFX0FERFJFU1MpO1xuICAgICAgICAgICAgZXhwZWN0KGRiSm9iRW50aXR5Py50YWtlclNpZ25hdHVyZSkudG8uZGVlcC5lcSh0YWtlclNpZ25hdHVyZSk7XG4gICAgICAgICAgICBleHBlY3QoZGJKb2JFbnRpdHk/LmFwcHJvdmFsPy5laXA3MTIpLnRvLmRlZXAuZXEoYXBwcm92YWwuZWlwNzEyKTtcbiAgICAgICAgICAgIGV4cGVjdChkYkpvYkVudGl0eT8uYXBwcm92YWw/LmtpbmQpLnRvLmRlZXAuZXEoYXBwcm92YWwudHlwZSk7XG4gICAgICAgICAgICBleHBlY3QoZGJKb2JFbnRpdHk/LmFwcHJvdmFsU2lnbmF0dXJlKS50by5kZWVwLmVxKGFwcHJvdmFsU2lnbmF0dXJlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncmZxbS92MS9zdGF0dXMvOm9yZGVySGFzaCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDQgTk9UIEZPVU5EIGlmIHRoZSBvcmRlciBoYXNoIGlzIG5vdCBmb3VuZCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySGFzaCA9ICcweDAwJztcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAuZ2V0KGAke1JGUU1fUEFUSH0vc3RhdHVzLyR7b3JkZXJIYXNofWApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLk5PVF9GT1VORCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjAwIHdoZW4gdGhlIG9yZGVyIGV4aXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRiVXRpbHMud3JpdGVWMkpvYkFzeW5jKE1PQ0tfUkZRTV9KT0IpO1xuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYCR7UkZRTV9QQVRIfS9zdGF0dXMvJHtNT0NLX1JGUU1fSk9CLm9yZGVySGFzaH1gKVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWFwaS1rZXknLCBBUElfS0VZKVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWNoYWluLWlkJywgJzEzMzcnKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoSHR0cFN0YXR1cy5PSylcbiAgICAgICAgICAgICAgICAuZXhwZWN0KCdDb250ZW50LVR5cGUnLCAvanNvbi8pO1xuXG4gICAgICAgICAgICAvLyBSZXNwb25zZSBkZXRhaWxzIGFyZSBjb3ZlcmVkIGJ5IHRoZSBzZXJ2aWNlIHRlc3QsIGJ1dCBkbyBvbmUgc21hbGwgY2hlY2sgZm9yIHNhbml0eVxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3RhdHVzKS50by5lcXVhbCgnc3VibWl0dGVkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHN0YXR1cyByZWFzb24gZm9yIGZhaWx1cmVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgZGJVdGlscy53cml0ZVYySm9iQXN5bmMoe1xuICAgICAgICAgICAgICAgIC4uLk1PQ0tfUkZRTV9KT0IsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLkZhaWxlZFJldmVydGVkQ29uZmlybWVkLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgJHtSRlFNX1BBVEh9L3N0YXR1cy8ke01PQ0tfUkZRTV9KT0Iub3JkZXJIYXNofWApXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYXBpLWtleScsIEFQSV9LRVkpXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtY2hhaW4taWQnLCAnMTMzNycpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLk9LKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoJ0NvbnRlbnQtVHlwZScsIC9qc29uLyk7XG5cbiAgICAgICAgICAgIC8vIFJlc3BvbnNlIGRldGFpbHMgYXJlIGNvdmVyZWQgYnkgdGhlIHNlcnZpY2UgdGVzdCwgYnV0IGRvIG9uZSBzbWFsbCBjaGVjayBmb3Igc2FuaXR5XG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5yZWFzb24pLnRvLmVxdWFsKCd0cmFuc2FjdGlvbl9yZXZlcnRlZCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCcvYWRtaW4vdjEvY2xlYW51cCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgaWYgdGhlIG9yZGVyIGhhc2ggaXMgbm90IGZvdW5kJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJIYXNoID0gJzB4MDAnO1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5wb3N0KGAke0FETUlOX1BBVEh9L2NsZWFudXBgKVxuICAgICAgICAgICAgICAgIC5zZW5kKHsgb3JkZXJIYXNoZXM6IFtvcmRlckhhc2hdIH0pXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYWRtaW4tYXBpLWtleScsIEFETUlOX0FQSV9LRVkpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLkJBRF9SRVFVRVNUKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSA0MDAgQkFEIFJFUVVFU1QgaWYgbm8gb3JkZXIgaGFzaGVzIGFyZSBzZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnBvc3QoYCR7QURNSU5fUEFUSH0vY2xlYW51cGApXG4gICAgICAgICAgICAgICAgLnNlbmQoeyBvcmRlckhhc2hlczogW10gfSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hZG1pbi1hcGkta2V5JywgQURNSU5fQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBhIDQwMCBCQUQgUkVRVUVTVCBpZiBhbGwgam9iIHVwZGF0ZXMgZmFpbCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRiVXRpbHMud3JpdGVWMkpvYkFzeW5jKHsgLi4uTU9DS19SRlFNX0pPQiwgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnBvc3QoYCR7QURNSU5fUEFUSH0vY2xlYW51cGApXG4gICAgICAgICAgICAgICAgLnNlbmQoeyBvcmRlckhhc2hlczogW01PQ0tfUkZRTV9KT0Iub3JkZXJIYXNoXSB9KVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWFkbWluLWFwaS1rZXknLCBBRE1JTl9BUElfS0VZKVxuICAgICAgICAgICAgICAgIC5leHBlY3QoSHR0cFN0YXR1cy5CQURfUkVRVUVTVCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnVubW9kaWZpZWRKb2JzWzBdKS50by5lcXVhbChNT0NLX1JGUU1fSk9CLm9yZGVySGFzaCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgNDAxIFVOQVVUSE9SSVpFRCBpZiB0aGUgQVBJIGtleSBpcyBub3QgYW4gYWRtaW4ga2V5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgZGJVdGlscy53cml0ZVYySm9iQXN5bmMoTU9DS19SRlFNX0pPQik7XG4gICAgICAgICAgICBjb25zdCBiYWRBcGlLZXkgPSAnMHhiYWRhcGlrZXknO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnBvc3QoYCR7QURNSU5fUEFUSH0vY2xlYW51cGApXG4gICAgICAgICAgICAgICAgLnNlbmQoeyBvcmRlckhhc2hlczogW01PQ0tfUkZRTV9KT0Iub3JkZXJIYXNoXSB9KVxuICAgICAgICAgICAgICAgIC5zZXQoJzB4LWFkbWluLWFwaS1rZXknLCBiYWRBcGlLZXkpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLlVOQVVUSE9SSVpFRCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjAwIE9LIHdoZW4gdGhlIGpvYnMgYXJlIHN1Y2Nlc3NmdWxseSBzZXQgdG8gZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRiVXRpbHMud3JpdGVWMkpvYkFzeW5jKHtcbiAgICAgICAgICAgICAgICAuLi5NT0NLX1JGUU1fSk9CLFxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihEYXRlLm5vdygpIC0gNjBfMDAwKS5kaXZpZGVkQnkoT05FX1NFQ09ORF9NUykuZGVjaW1hbFBsYWNlcygwKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5wb3N0KGAke0FETUlOX1BBVEh9L2NsZWFudXBgKVxuICAgICAgICAgICAgICAgIC5zZW5kKHsgb3JkZXJIYXNoZXM6IFtNT0NLX1JGUU1fSk9CLm9yZGVySGFzaF0gfSlcbiAgICAgICAgICAgICAgICAuc2V0KCcweC1hZG1pbi1hcGkta2V5JywgQURNSU5fQVBJX0tFWSlcbiAgICAgICAgICAgICAgICAuZXhwZWN0KEh0dHBTdGF0dXMuT0spXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgnQ29udGVudC1UeXBlJywgL2pzb24vKTtcblxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubW9kaWZpZWRKb2JzWzBdKS50by5lcXVhbChNT0NLX1JGUU1fSk9CLm9yZGVySGFzaCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMjA3IE1VTFRJIFNUQVRVUyBpZiBzb21lIGpvYnMgc3VjY2VlZCBhbmQgc29tZSBqb2JzIGZhaWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBkYlV0aWxzLndyaXRlVjJKb2JBc3luYyh7XG4gICAgICAgICAgICAgICAgLi4uTU9DS19SRlFNX0pPQixcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkLFxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4MDEnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBkYlV0aWxzLndyaXRlVjJKb2JBc3luYyh7XG4gICAgICAgICAgICAgICAgLi4uTU9DS19SRlFNX0pPQixcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoRGF0ZS5ub3coKSAtIDYwXzAwMCkuZGl2aWRlZEJ5KE9ORV9TRUNPTkRfTVMpLmRlY2ltYWxQbGFjZXMoMCksXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHgwMicsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAucG9zdChgJHtBRE1JTl9QQVRIfS9jbGVhbnVwYClcbiAgICAgICAgICAgICAgICAuc2VuZCh7IG9yZGVySGFzaGVzOiBbJzB4MDEnLCAnMHgwMiddIH0pXG4gICAgICAgICAgICAgICAgLnNldCgnMHgtYWRtaW4tYXBpLWtleScsIEFETUlOX0FQSV9LRVkpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChIdHRwU3RhdHVzLk1VTFRJX1NUQVRVUyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnVubW9kaWZpZWRKb2JzWzBdKS50by5lcXVhbCgnMHgwMScpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubW9kaWZpZWRKb2JzWzBdKS50by5lcXVhbCgnMHgwMicpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9
e4a4079f3cf2acca939a1fb1e1af8a6a
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable:custom-no-magic-numbers
// tslint:disable:no-empty
// tslint:disable:max-file-line-count
const api_utils_1 = require("@0x/api-utils");
const asset_swapper_1 = require("@0x/asset-swapper");
const contract_addresses_1 = require("@0x/contract-addresses");
const protocol_utils_1 = require("@0x/protocol-utils");
const utils_1 = require("@0x/utils");
const chai_1 = require("chai");
const ethers_1 = require("ethers");
const sqs_producer_1 = require("sqs-producer");
const ts_mockito_1 = require("ts-mockito");
const constants_1 = require("../../src/core/constants");
const entities_1 = require("../../src/entities");
const types_1 = require("../../src/entities/types");
const fee_service_1 = require("../../src/services/fee_service");
const rfqm_service_1 = require("../../src/services/rfqm_service");
const rfq_maker_balance_cache_service_1 = require("../../src/services/rfq_maker_balance_cache_service");
const types_2 = require("../../src/core/types");
const cache_client_1 = require("../../src/utils/cache_client");
const quote_server_client_1 = require("../../src/utils/quote_server_client");
const rfqm_db_utils_1 = require("../../src/utils/rfqm_db_utils");
const rfqm_health_check_1 = require("../../src/utils/rfqm_health_check");
const rfq_blockchain_utils_1 = require("../../src/utils/rfq_blockchain_utils");
const rfq_maker_manager_1 = require("../../src/utils/rfq_maker_manager");
const TokenMetadataManager_1 = require("../../src/utils/TokenMetadataManager");
const constants_2 = require("../constants");
// $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
// eslint-disable-next-line @typescript-eslint/no-loss-of-precision
const NEVER_EXPIRES = new utils_1.BigNumber(9999999999999999);
const MOCK_WORKER_REGISTRY_ADDRESS = '0x1023331a469c6391730ff1E2749422CE8873EC38';
const MOCK_TOKEN = '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48';
const MOCK_GAS_PRICE = new utils_1.BigNumber(100000000000);
const MOCK_MM_URI = 'https://mm-address';
const WORKER_FULL_BALANCE_WEI = new utils_1.BigNumber(1).shiftedBy(constants_1.ETH_DECIMALS);
const MOCK_INTEGRATOR = {
    apiKeys: ['an-integrator-id'],
    integratorId: 'an-integrator-id',
    allowedChainIds: [1337],
    label: 'Test',
    plp: false,
    rfqm: true,
    rfqt: true,
};
const buildRfqmServiceForUnitTest = (overrides = {}) => {
    const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
    const quoteRequestorMock = (0, ts_mockito_1.mock)(asset_swapper_1.QuoteRequestor);
    (0, ts_mockito_1.when)(quoteRequestorMock.requestRfqmIndicativeQuotesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
        {
            makerToken: contractAddresses.zrxToken,
            makerAmount: new utils_1.BigNumber(101),
            takerToken: contractAddresses.etherToken,
            takerAmount: new utils_1.BigNumber(100),
            expiry: NEVER_EXPIRES,
            makerUri: MOCK_MM_URI,
        },
    ]);
    const feeServiceMock = (0, ts_mockito_1.mock)(fee_service_1.FeeService);
    (0, ts_mockito_1.when)(feeServiceMock.getGasPriceEstimationAsync()).thenResolve(MOCK_GAS_PRICE);
    (0, ts_mockito_1.when)(feeServiceMock.calculateFeeAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve({
        feeWithDetails: {
            token: '0xToken',
            amount: new utils_1.BigNumber(300),
            type: 'fixed',
            details: {
                feeModelVersion: 1,
                kind: 'default',
                gasFeeAmount: new utils_1.BigNumber(100),
                gasPrice: MOCK_GAS_PRICE,
                zeroExFeeAmount: new utils_1.BigNumber(200),
                tradeSizeBps: 4,
                feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(30),
                takerTokenBaseUnitPriceUsd: null,
                makerTokenBaseUnitPriceUsd: new utils_1.BigNumber(20),
            },
            breakdown: {
                gas: {
                    amount: new utils_1.BigNumber(100),
                    details: {
                        gasPrice: MOCK_GAS_PRICE,
                        estimatedGas: new utils_1.BigNumber(1),
                    },
                },
                zeroEx: {
                    amount: new utils_1.BigNumber(200),
                    details: {
                        kind: 'volume',
                        tradeSizeBps: 4,
                    },
                },
            },
            conversionRates: {
                nativeTokenBaseUnitPriceUsd: new utils_1.BigNumber(30),
                feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(30),
                takerTokenBaseUnitPriceUsd: null,
                makerTokenBaseUnitPriceUsd: new utils_1.BigNumber(20),
            },
        },
    });
    const feeServiceInstance = (0, ts_mockito_1.instance)(feeServiceMock);
    const rfqBlockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
    (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getAccountBalanceAsync(MOCK_WORKER_REGISTRY_ADDRESS)).thenResolve(WORKER_FULL_BALANCE_WEI);
    (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getAllowanceAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(new utils_1.BigNumber(ethers_1.constants.MaxUint256.toString()), new utils_1.BigNumber(0), new utils_1.BigNumber(0));
    (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getGaslessApprovalAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(null, constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL);
    const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
    const sqsMock = (0, ts_mockito_1.mock)(sqs_producer_1.Producer);
    (0, ts_mockito_1.when)(sqsMock.queueSize()).thenResolve(0);
    const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
    const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
    (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
    const rfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
    const rfqMakerManagerMock = (0, ts_mockito_1.mock)(rfq_maker_manager_1.RfqMakerManager);
    const tokenMetadataManagerMock = (0, ts_mockito_1.mock)(TokenMetadataManager_1.TokenMetadataManager);
    (0, ts_mockito_1.when)(tokenMetadataManagerMock.getTokenDecimalsAsync((0, ts_mockito_1.anything)())).thenResolve(18);
    const tokenMetadataManager = (0, ts_mockito_1.instance)(tokenMetadataManagerMock);
    return new rfqm_service_1.RfqmService(overrides.chainId || 1337, overrides.feeService || feeServiceInstance, overrides.feeModelVersion || 0, contractAddresses, MOCK_WORKER_REGISTRY_ADDRESS, overrides.rfqBlockchainUtils || (0, ts_mockito_1.instance)(rfqBlockchainUtilsMock), overrides.dbUtils || dbUtilsMock, overrides.producer || sqsMock, overrides.quoteServerClient || quoteServerClientMock, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, overrides.cacheClient || (0, ts_mockito_1.instance)(cacheClientMock), overrides.rfqMakerBalanceCacheService || rfqMakerBalanceCacheService, overrides.rfqMakerManager || rfqMakerManagerMock, overrides.tokenMetadataManager || tokenMetadataManager);
};
describe('RfqmService HTTP Logic', () => {
    describe('submitTakerSignedOtcOrderAsync', () => {
        it('should fail if there is already a pending trade for the taker and taker token', async () => {
            const expiry = new utils_1.BigNumber(Date.now() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            const otcOrder = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: '0x1111111111111111111111111111111111111111',
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, expiry),
                chainId: 1337,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const existingJob = new entities_1.RfqmV2JobEntity({
                chainId: 1337,
                expiry,
                makerUri: '',
                orderHash: '0x00',
                fee: {
                    token: '0xToken',
                    amount: '100',
                    type: 'fixed',
                },
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(otcOrder),
            });
            const quote = new entities_1.RfqmV2QuoteEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                makerUri: 'http://foo.bar',
                order: {
                    order: existingJob.order.order,
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '',
                isUnwrap: false,
            });
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2JobsWithStatusesAsync((0, ts_mockito_1.anything)())).thenResolve([existingJob]);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2QuoteByOrderHashAsync(otcOrder.getHash())).thenResolve(quote);
            const params = {
                type: types_2.GaslessTypes.OtcOrder,
                order: otcOrder,
                signature: {
                    r: '',
                    s: '',
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                },
            };
            const metatransactionMock = (0, ts_mockito_1.mock)(protocol_utils_1.MetaTransaction);
            (0, ts_mockito_1.when)(metatransactionMock.getHash()).thenReturn('0xmetatransactionhash');
            (0, ts_mockito_1.when)(metatransactionMock.expirationTimeSeconds).thenReturn(NEVER_EXPIRES);
            const service = buildRfqmServiceForUnitTest({
                chainId: 1,
                dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock),
                feeModelVersion: 0,
            });
            (0, chai_1.expect)(service.submitTakerSignedOtcOrderAsync(params)).to.be.rejectedWith(api_utils_1.TooManyRequestsError, 'a pending trade for this taker and takertoken already exists'); // tslint:disable-line no-unused-expression
        });
        it('should allow two trades by the same taker with different taker tokens', async () => {
            const takerPrivateKey = '0xe13ae9fa0166b501a2ab50e7b6fbb65819add7376da9b4fbb3bf3ae48cd9dcd3';
            const takerAddress = '0x4e2145eDC29f27E126154B9c716Df70c429C291B';
            const expiry = new utils_1.BigNumber(Date.now() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            const existingOtcOrder = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: takerAddress,
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, expiry),
                chainId: 1337,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const newOtcOrder = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: takerAddress,
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x9999999999999999999999999999999999999999',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, expiry),
                chainId: 1337,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const existingJob = new entities_1.RfqmV2JobEntity({
                chainId: 1337,
                expiry,
                makerUri: '',
                orderHash: '0x00',
                fee: {
                    token: '0xToken',
                    amount: '100',
                    type: 'fixed',
                },
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(existingOtcOrder),
            });
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2JobsWithStatusesAsync((0, ts_mockito_1.anything)())).thenResolve([existingJob]);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2QuoteByOrderHashAsync(newOtcOrder.getHash())).thenResolve({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                makerUri: 'http://foo.bar',
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(newOtcOrder),
                orderHash: '',
                isUnwrap: false,
                takerSpecifiedSide: null,
            });
            const metatransactionMock = (0, ts_mockito_1.mock)(protocol_utils_1.MetaTransaction);
            (0, ts_mockito_1.when)(metatransactionMock.getHash()).thenReturn('0xmetatransactionhash');
            (0, ts_mockito_1.when)(metatransactionMock.expirationTimeSeconds).thenReturn(NEVER_EXPIRES);
            const blockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(blockchainUtilsMock.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(10000),
            ]);
            const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(10000),
            ]);
            const service = buildRfqmServiceForUnitTest({
                chainId: 1,
                dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(blockchainUtilsMock),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
                feeModelVersion: 0,
            });
            const submitParams = {
                type: types_2.GaslessTypes.OtcOrder,
                order: newOtcOrder,
                signature: (0, protocol_utils_1.ethSignHashWithKey)(newOtcOrder.getHash(), takerPrivateKey),
            };
            const result = await service.submitTakerSignedOtcOrderAsync(submitParams);
            (0, chai_1.expect)(result.type).to.equal('otc');
        });
    });
    describe('submitTakerSignedOtcOrderWithApprovalAsync', () => {
        it('should fail if approval params generate an invalid calldata', async () => {
            const takerAddress = '0x4e2145eDC29f27E126154B9c716Df70c429C291B';
            const expiry = new utils_1.BigNumber(Date.now() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            const otcOrder = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: '0x1111111111111111111111111111111111111111',
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, expiry),
                chainId: 1,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const eip712Context = {
                types: {
                    EIP712Domain: [
                        { name: 'name', type: 'string' },
                        { name: 'version', type: 'string' },
                        { name: 'verifyingContract', type: 'address' },
                        { name: 'salt', type: 'bytes32' },
                    ],
                    MetaTransaction: [
                        { name: 'nonce', type: 'uint256' },
                        { name: 'from', type: 'address' },
                        { name: 'functionSignature', type: 'bytes' },
                    ],
                },
                primaryType: 'MetaTransaction',
                domain: {},
                message: {
                    nonce: expiry.toNumber(),
                    from: takerAddress,
                    functionSignature: '',
                },
            };
            const submitParams = {
                approval: {
                    type: types_2.GaslessApprovalTypes.ExecuteMetaTransaction,
                    eip712: eip712Context,
                    signature: {
                        r: '',
                        s: '',
                        v: 28,
                        signatureType: asset_swapper_1.SignatureType.EIP712,
                    },
                },
                trade: {
                    type: types_2.GaslessTypes.OtcOrder,
                    order: otcOrder,
                    signature: {
                        r: '',
                        s: '',
                        v: 28,
                        signatureType: asset_swapper_1.SignatureType.EthSign,
                    },
                },
                kind: types_2.GaslessTypes.OtcOrder,
            };
            const blockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(blockchainUtilsMock.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve('0xinvalidcalldata');
            (0, ts_mockito_1.when)(blockchainUtilsMock.estimateGasForAsync((0, ts_mockito_1.anything)())).thenReject();
            const service = buildRfqmServiceForUnitTest({
                chainId: 1,
                feeModelVersion: 0,
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(blockchainUtilsMock),
            });
            try {
                await service.submitTakerSignedOtcOrderWithApprovalAsync(submitParams);
                chai_1.expect.fail('should fail eth call approval validation');
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Eth call approval validation failed');
                (0, ts_mockito_1.verify)(blockchainUtilsMock.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).once();
                (0, ts_mockito_1.verify)(blockchainUtilsMock.estimateGasForAsync((0, ts_mockito_1.anything)())).thrice();
            }
        });
        it('should proceed with trade submission if approval is empty', async () => {
            const takerPrivateKey = '0xe13ae9fa0166b501a2ab50e7b6fbb65819add7376da9b4fbb3bf3ae48cd9dcd3';
            const takerAddress = '0x4e2145eDC29f27E126154B9c716Df70c429C291B';
            const expiry = new utils_1.BigNumber(Date.now() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            const otcOrder = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: takerAddress,
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, expiry),
                chainId: 1,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2JobsWithStatusesAsync((0, ts_mockito_1.anything)())).thenResolve([]);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2QuoteByOrderHashAsync(otcOrder.getHash())).thenResolve({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                makerUri: 'http://foo.bar',
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(otcOrder),
                orderHash: '',
                isUnwrap: false,
                takerSpecifiedSide: null,
            });
            const blockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(blockchainUtilsMock.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(10000),
            ]);
            const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(10000),
            ]);
            const service = buildRfqmServiceForUnitTest({
                chainId: 1,
                feeModelVersion: 0,
                dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(blockchainUtilsMock),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
            });
            const submitParams = {
                kind: types_2.GaslessTypes.OtcOrder,
                trade: {
                    type: types_2.GaslessTypes.OtcOrder,
                    order: otcOrder,
                    signature: (0, protocol_utils_1.ethSignHashWithKey)(otcOrder.getHash(), takerPrivateKey),
                },
            };
            const result = await service.submitTakerSignedOtcOrderWithApprovalAsync(submitParams);
            (0, chai_1.expect)(result.type).to.equal('otc');
            (0, ts_mockito_1.verify)(dbUtilsMock.writeV2JobAsync((0, ts_mockito_1.anything)())).once();
        });
        it('should save job with executeMetaTransaction params to DB', async () => {
            const takerPrivateKey = '0xe13ae9fa0166b501a2ab50e7b6fbb65819add7376da9b4fbb3bf3ae48cd9dcd3';
            const takerAddress = '0x4e2145eDC29f27E126154B9c716Df70c429C291B';
            const expiry = new utils_1.BigNumber(Date.now() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            const otcOrder = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: takerAddress,
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, expiry),
                chainId: 1,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const eip712Context = {
                types: {
                    EIP712Domain: [
                        { name: 'name', type: 'string' },
                        { name: 'version', type: 'string' },
                        { name: 'verifyingContract', type: 'address' },
                        { name: 'salt', type: 'bytes32' },
                    ],
                    MetaTransaction: [
                        { name: 'nonce', type: 'uint256' },
                        { name: 'from', type: 'address' },
                        { name: 'functionSignature', type: 'bytes' },
                    ],
                },
                primaryType: 'MetaTransaction',
                domain: {},
                message: {
                    from: takerAddress,
                    functionSignature: '',
                    nonce: expiry.toNumber(),
                },
            };
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2JobsWithStatusesAsync((0, ts_mockito_1.anything)())).thenResolve([]);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2QuoteByOrderHashAsync(otcOrder.getHash())).thenResolve({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                makerUri: 'http://foo.bar',
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(otcOrder),
                orderHash: '',
                isUnwrap: false,
                takerSpecifiedSide: null,
            });
            const blockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(blockchainUtilsMock.getTokenBalancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(10000)]);
            (0, ts_mockito_1.when)(blockchainUtilsMock.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve('0xvalidcalldata');
            (0, ts_mockito_1.when)(blockchainUtilsMock.simulateTransactionAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve();
            const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(10000),
            ]);
            const service = buildRfqmServiceForUnitTest({
                chainId: 1,
                feeModelVersion: 0,
                dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(blockchainUtilsMock),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
            });
            const submitParams = {
                trade: {
                    type: types_2.GaslessTypes.OtcOrder,
                    order: otcOrder,
                    signature: (0, protocol_utils_1.ethSignHashWithKey)(otcOrder.getHash(), takerPrivateKey),
                },
                approval: {
                    type: types_2.GaslessApprovalTypes.ExecuteMetaTransaction,
                    eip712: eip712Context,
                    signature: (0, protocol_utils_1.eip712SignHashWithKey)(otcOrder.getHash(), takerPrivateKey),
                },
                kind: types_2.GaslessTypes.OtcOrder,
            };
            const result = await service.submitTakerSignedOtcOrderWithApprovalAsync(submitParams);
            (0, chai_1.expect)(result.type).to.equal('otc');
            (0, ts_mockito_1.verify)(blockchainUtilsMock.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).never();
            (0, ts_mockito_1.verify)(dbUtilsMock.writeV2JobAsync((0, ts_mockito_1.anything)())).once();
        });
        it('should save job with permit params to DB', async () => {
            const takerPrivateKey = '0xe13ae9fa0166b501a2ab50e7b6fbb65819add7376da9b4fbb3bf3ae48cd9dcd3';
            const takerAddress = '0x4e2145eDC29f27E126154B9c716Df70c429C291B';
            const expiry = new utils_1.BigNumber(Date.now() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            const otcOrder = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: takerAddress,
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, expiry),
                chainId: 1,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const eip712Context = {
                types: {
                    EIP712Domain: [
                        { name: 'name', type: 'string' },
                        { name: 'version', type: 'string' },
                        { name: 'verifyingContract', type: 'address' },
                        { name: 'salt', type: 'bytes32' },
                    ],
                    Permit: [
                        { name: 'owner', type: 'address' },
                        { name: 'spender', type: 'address' },
                        { name: 'value', type: 'uint256' },
                        { name: 'nonce', type: 'uint256' },
                        { name: 'deadline', type: 'uint256' },
                    ],
                },
                primaryType: 'Permit',
                domain: {},
                message: {
                    deadline: '12345',
                    owner: takerAddress,
                    spender: '0x0000000000000000000000000000000000000000',
                    value: '0xffffffffffffffffffffffffffffffffffffffff',
                    nonce: expiry.toNumber(),
                },
            };
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2JobsWithStatusesAsync((0, ts_mockito_1.anything)())).thenResolve([]);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2QuoteByOrderHashAsync(otcOrder.getHash())).thenResolve({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                makerUri: 'http://foo.bar',
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(otcOrder),
                orderHash: '',
                isUnwrap: false,
                takerSpecifiedSide: null,
            });
            const blockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(blockchainUtilsMock.getTokenBalancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(10000)]);
            (0, ts_mockito_1.when)(blockchainUtilsMock.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve('0xvalidcalldata');
            (0, ts_mockito_1.when)(blockchainUtilsMock.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(10);
            const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(10000),
            ]);
            const service = buildRfqmServiceForUnitTest({
                chainId: 1,
                feeModelVersion: 0,
                dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(blockchainUtilsMock),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
            });
            const submitParams = {
                trade: {
                    type: types_2.GaslessTypes.OtcOrder,
                    order: otcOrder,
                    signature: (0, protocol_utils_1.ethSignHashWithKey)(otcOrder.getHash(), takerPrivateKey),
                },
                approval: {
                    type: types_2.GaslessApprovalTypes.Permit,
                    eip712: eip712Context,
                    signature: (0, protocol_utils_1.eip712SignHashWithKey)(otcOrder.getHash(), takerPrivateKey),
                },
                kind: types_2.GaslessTypes.OtcOrder,
            };
            const result = await service.submitTakerSignedOtcOrderWithApprovalAsync(submitParams);
            (0, chai_1.expect)(result.type).to.equal('otc');
            (0, ts_mockito_1.verify)(blockchainUtilsMock.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).never();
            (0, ts_mockito_1.verify)(dbUtilsMock.writeV2JobAsync((0, ts_mockito_1.anything)())).once();
        });
    });
    describe('fetchIndicativeQuoteAsync', () => {
        describe('sells', () => {
            it('should fetch indicative quote', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(101),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    feeModelVersion: 0,
                });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount: new utils_1.BigNumber(100),
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.sellAmount.toNumber()).to.be.at.least(100);
                (0, chai_1.expect)(res.price.toNumber()).to.equal(1.01);
            });
            it('should round price to six decimal places', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(111),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(333),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    feeModelVersion: 0,
                });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount: new utils_1.BigNumber(333),
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.price.toNumber()).to.equal(0.3333333);
            });
            it('should only return an indicative quote that is 100% filled when selling', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote1 = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(55),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(50),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quote2 = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(105),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote1,
                    quote2,
                ]);
                const service = buildRfqmServiceForUnitTest({ quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock) });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount: new utils_1.BigNumber(100),
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.sellAmount.toNumber()).to.equal(100);
                (0, chai_1.expect)(res.price.toNumber()).to.equal(1.05);
            });
            it('should return null if no quotes are valid', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const partialFillQuote = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(55),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(50),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    partialFillQuote,
                ]);
                const service = buildRfqmServiceForUnitTest({ quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock) });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount: new utils_1.BigNumber(100),
                });
                (0, chai_1.expect)(res).to.equal(null);
            });
            // TODO: we may want to reintroduce this test very soon. However, if not addressed by June 2022, remove
            it.skip('should return an indicative quote that can fill more than 100%', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const worseQuote = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(101),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const betterQuote = {
                    maker: '0xmaker2',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(222),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(200),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    worseQuote,
                    betterQuote,
                ]);
                const service = buildRfqmServiceForUnitTest({ quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock) });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount: new utils_1.BigNumber(100),
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.sellAmount.toNumber()).to.equal(200);
                (0, chai_1.expect)(res.price.toNumber()).to.equal(1.11);
            });
            it('should ignore quotes that are for the wrong pair', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const worseQuote = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(101),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const betterQuote = {
                    maker: '0xmaker2',
                    makerToken: '0x1111111111111111111111111111111111111111',
                    makerAmount: new utils_1.BigNumber(111),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    worseQuote,
                    betterQuote,
                ]);
                const service = buildRfqmServiceForUnitTest({ quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock) });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount: new utils_1.BigNumber(100),
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.sellAmount.toNumber()).to.equal(100);
                (0, chai_1.expect)(res.price.toNumber()).to.equal(1.01); // Worse pricing wins because better pricing is for wrong pair
            });
            it('should ignore quotes that expire within 3 minutes', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const inOneMinute = (Date.now() + constants_1.ONE_MINUTE_MS) / constants_1.ONE_SECOND_MS;
                const expiresSoon = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(111),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: new utils_1.BigNumber(inOneMinute),
                    makerUri: MOCK_MM_URI,
                };
                const neverExpires = {
                    maker: '0xmaker2',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(101),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    expiresSoon,
                    neverExpires,
                ]);
                const service = buildRfqmServiceForUnitTest({ quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock) });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount: new utils_1.BigNumber(100),
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.sellAmount.toNumber()).to.equal(100);
                (0, chai_1.expect)(res.price.toNumber()).to.equal(1.01); // Worse pricing wins because better pricing expires too soon
            });
        });
        describe('buys', () => {
            it('should fetch indicative quote when buying', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(100),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(80),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const service = buildRfqmServiceForUnitTest({ quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock) });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    buyAmount: new utils_1.BigNumber(100),
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.buyAmount.toNumber()).to.be.at.least(100);
                (0, chai_1.expect)(res.price.toNumber()).to.equal(0.8);
            });
            it('should only return an indicative quote that is 100% filled when buying', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const overFillQuoteGoodPricing = {
                    maker: '0xmaker',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(160),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(80),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const partialFillQuoteGoodPricing = {
                    maker: '0xmaker2',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(80),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(40),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const fullQuote = {
                    maker: '0xmaker3',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(100),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(80),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    overFillQuoteGoodPricing,
                    partialFillQuoteGoodPricing,
                    fullQuote,
                ]);
                const service = buildRfqmServiceForUnitTest({ quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock) });
                const res = await service.fetchIndicativeQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    buyAmount: new utils_1.BigNumber(100),
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.buyAmount.toNumber()).to.equal(100);
                (0, chai_1.expect)(res.price.toNumber()).to.equal(0.8);
            });
        });
    });
    describe('fetchFirmQuoteAsync', () => {
        const takerAddress = '0xf003A9418DE2620f935181259C0Fa1595E871234';
        it('should use an affiliate address provided in the quote request even if one is present in configuration', async () => {
            const sellAmount = new utils_1.BigNumber(100);
            const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
            const quote = {
                maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                makerToken: contractAddresses.zrxToken,
                makerAmount: new utils_1.BigNumber(101),
                takerToken: contractAddresses.etherToken,
                takerAmount: new utils_1.BigNumber(100),
                expiry: NEVER_EXPIRES,
                makerUri: MOCK_MM_URI,
            };
            const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
            (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
            (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
            // Mock out the dbUtils
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
            const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
            const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([quote]);
            const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(150),
            ]);
            const service = buildRfqmServiceForUnitTest({
                quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                dbUtils,
                cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
            });
            await service.fetchFirmQuoteAsync({
                affiliateAddress: '0xaffiliateAddress',
                buyToken: contractAddresses.zrxToken,
                buyTokenDecimals: 18,
                checkApproval: false,
                integrator: { ...MOCK_INTEGRATOR, affiliateAddress: '0xaffiliateAddressNotThisOne' },
                sellAmount,
                sellToken: contractAddresses.etherToken,
                sellTokenDecimals: 18,
                takerAddress,
            });
            const writeV2QuoteArgs = (0, ts_mockito_1.capture)(dbUtilsMock.writeV2QuoteAsync).last();
            (0, chai_1.expect)(writeV2QuoteArgs[0]['affiliateAddress']).to.equal('0xaffiliateAddress');
        });
        it('should use a configured affiliate address when none is provide in the quote request', async () => {
            const sellAmount = new utils_1.BigNumber(100);
            const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
            const quote = {
                maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                makerToken: contractAddresses.zrxToken,
                makerAmount: new utils_1.BigNumber(101),
                takerToken: contractAddresses.etherToken,
                takerAmount: new utils_1.BigNumber(100),
                expiry: NEVER_EXPIRES,
                makerUri: MOCK_MM_URI,
            };
            const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
            (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
            (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
            // Mock out the dbUtils
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
            const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
            const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([quote]);
            const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(150),
            ]);
            const service = buildRfqmServiceForUnitTest({
                quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                dbUtils,
                cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
            });
            await service.fetchFirmQuoteAsync({
                buyToken: contractAddresses.zrxToken,
                buyTokenDecimals: 18,
                checkApproval: false,
                integrator: { ...MOCK_INTEGRATOR, affiliateAddress: '0xaffiliateAddress' },
                sellAmount,
                sellToken: contractAddresses.etherToken,
                sellTokenDecimals: 18,
                takerAddress,
            });
            const writeV2QuoteArgs = (0, ts_mockito_1.capture)(dbUtilsMock.writeV2QuoteAsync).last();
            (0, chai_1.expect)(writeV2QuoteArgs[0]['affiliateAddress']).to.equal('0xaffiliateAddress');
        });
        describe('sells', () => {
            it('should fetch a firm quote', async () => {
                const sellAmount = new utils_1.BigNumber(100);
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(101),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
                (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
                (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
                // Mock out the dbUtils
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
                const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
                (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    new utils_1.BigNumber(150),
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    dbUtils,
                    cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                    rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
                });
                const { quote: res } = await service.fetchFirmQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    takerAddress,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount,
                    checkApproval: false,
                });
                (0, chai_1.expect)(res).to.exist; // tslint:disable-line: no-unused-expression
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.type).to.equal(types_2.GaslessTypes.OtcOrder);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.sellAmount).to.equal(sellAmount);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.price.toNumber()).to.equal(1.01);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.orderHash).to.match(/^0x[0-9a-fA-F]+/);
            });
            // TODO: we may want to reintroduce this test very soon. However, if not addressed by June 2022, remove
            it.skip('should scale a firm quote if MM returns too much', async () => {
                const sellAmount = new utils_1.BigNumber(100);
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(202),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(200),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
                (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
                (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
                // Mock out the dbUtils
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
                const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
                (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    new utils_1.BigNumber(150),
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    dbUtils,
                    cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                    rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
                });
                const { quote: res } = await service.fetchFirmQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    takerAddress,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount,
                    checkApproval: false,
                });
                (0, chai_1.expect)(res).to.exist; // tslint:disable-line: no-unused-expression
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.type).to.equal(types_2.GaslessTypes.OtcOrder);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.sellAmount).to.equal(sellAmount);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.buyAmount.toNumber()).to.equal(101); // result is scaled
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.price.toNumber()).to.equal(1.01);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.orderHash).to.match(/^0x[0-9a-fA-F]+/);
            });
            it('should round price to six decimal places', async () => {
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(111),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(333),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
                (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
                (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
                // Mock out the dbUtils
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
                const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
                (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    new utils_1.BigNumber(150),
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    dbUtils,
                    cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                    rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
                });
                const { quote: res } = await service.fetchFirmQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    takerAddress,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount: new utils_1.BigNumber(333),
                    checkApproval: false,
                });
                if (res === null) {
                    chai_1.expect.fail('res is null, but not expected to be null');
                    return;
                }
                (0, chai_1.expect)(res.price.toNumber()).to.equal(0.3333333);
            });
            it('should not call `getGaslessApprovalResponseAsync` if checkApproval is false', async () => {
                const sellAmount = new utils_1.BigNumber(100);
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(101),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
                (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
                (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
                // Mock out the dbUtils
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
                const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
                (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    new utils_1.BigNumber(150),
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    dbUtils,
                    cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                    rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
                });
                const spiedService = (0, ts_mockito_1.spy)(service);
                (0, ts_mockito_1.when)(spiedService.getGaslessApprovalResponseAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenThrow(new Error('`getGaslessApprovalResponseAsync` should not be called'));
                const { quote: res } = await service.fetchFirmQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    takerAddress,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount,
                    checkApproval: false,
                });
                (0, chai_1.expect)(res).to.exist; // tslint:disable-line: no-unused-expression
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.type).to.equal(types_2.GaslessTypes.OtcOrder);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.sellAmount).to.equal(sellAmount);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.price.toNumber()).to.equal(1.01);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.orderHash).to.match(/^0x[0-9a-fA-F]+/);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.approval).to.equal(undefined);
            });
            it('should return the correct approval if checkApproval is true', async () => {
                const sellAmount = new utils_1.BigNumber(100);
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(101),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
                (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
                (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
                // Mock out the dbUtils
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
                const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
                (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    new utils_1.BigNumber(150),
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    dbUtils,
                    cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                    rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
                });
                const approval = {
                    isRequired: true,
                    isGaslessAvailable: true,
                    type: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL.kind,
                    eip712: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL.eip712,
                };
                const spiedService = (0, ts_mockito_1.spy)(service);
                (0, ts_mockito_1.when)(spiedService.getGaslessApprovalResponseAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(approval);
                const { quote: res } = await service.fetchFirmQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    takerAddress,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    sellAmount,
                    checkApproval: true,
                });
                (0, chai_1.expect)(res).to.exist; // tslint:disable-line: no-unused-expression
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.type).to.equal(types_2.GaslessTypes.OtcOrder);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.sellAmount).to.equal(sellAmount);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.price.toNumber()).to.equal(1.01);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.orderHash).to.match(/^0x[0-9a-fA-F]+/);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.approval).to.eql(approval);
            });
        });
        describe('buys', () => {
            it('should fetch a firm quote', async () => {
                const buyAmount = new utils_1.BigNumber(100);
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(100),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(80),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
                (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
                (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
                // Mock out the dbUtils
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
                const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
                (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    new utils_1.BigNumber(150),
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    dbUtils,
                    cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                    rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
                });
                const { quote: res } = await service.fetchFirmQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    takerAddress,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    buyAmount: new utils_1.BigNumber(100),
                    checkApproval: false,
                });
                (0, chai_1.expect)(res).to.exist; // tslint:disable-line: no-unused-expression
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.type).to.equal(types_2.GaslessTypes.OtcOrder);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.buyAmount.toNumber()).to.equal(buyAmount.toNumber());
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.price.toNumber()).to.equal(0.8);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.orderHash).to.match(/^0x[0-9a-fA-F]+/);
            });
            // TODO: we may want to reintroduce this test very soon. However, if not addressed by June 2022, remove
            it.skip('should scale a firm quote to desired buyAmount if MM returns too much', async () => {
                const buyAmount = new utils_1.BigNumber(100);
                const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
                const quote = {
                    maker: '0x64B92f5d9E5b5f20603de8498385c3a3d3048E22',
                    makerToken: contractAddresses.zrxToken,
                    makerAmount: new utils_1.BigNumber(125),
                    takerToken: contractAddresses.etherToken,
                    takerAmount: new utils_1.BigNumber(100),
                    expiry: NEVER_EXPIRES,
                    makerUri: MOCK_MM_URI,
                };
                const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
                (0, ts_mockito_1.when)(cacheClientMock.getNextOtcOrderBucketAsync(1337)).thenResolve(420);
                (0, ts_mockito_1.when)(cacheClientMock.getMakersInCooldownForPairAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([]);
                // Mock out the dbUtils
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.writeV2QuoteAsync((0, ts_mockito_1.anything)())).thenResolve();
                const dbUtils = (0, ts_mockito_1.instance)(dbUtilsMock);
                const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
                (0, ts_mockito_1.when)(quoteServerClientMock.batchGetPriceV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    quote,
                ]);
                const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
                (0, ts_mockito_1.when)(rfqMakerBalanceCacheServiceMock.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                    new utils_1.BigNumber(150),
                ]);
                const service = buildRfqmServiceForUnitTest({
                    quoteServerClient: (0, ts_mockito_1.instance)(quoteServerClientMock),
                    dbUtils,
                    cacheClient: (0, ts_mockito_1.instance)(cacheClientMock),
                    rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock),
                });
                const { quote: res } = await service.fetchFirmQuoteAsync({
                    integrator: MOCK_INTEGRATOR,
                    takerAddress,
                    buyToken: contractAddresses.zrxToken,
                    sellToken: contractAddresses.etherToken,
                    buyTokenDecimals: 18,
                    sellTokenDecimals: 18,
                    buyAmount: new utils_1.BigNumber(100),
                    checkApproval: false,
                });
                (0, chai_1.expect)(res).to.exist; // tslint:disable-line: no-unused-expression
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.type).to.equal(types_2.GaslessTypes.OtcOrder);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.buyAmount.toNumber()).to.equal(buyAmount.toNumber());
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.sellAmount.toNumber()).to.equal(80); // result is scaled
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.price.toNumber()).to.equal(0.8);
                (0, chai_1.expect)(res === null || res === void 0 ? void 0 : res.orderHash).to.match(/^0x[0-9a-fA-F]+/);
            });
        });
    });
    describe('getGaslessApprovalResponseAsync', () => {
        it('returns correct approval field', async () => {
            const service = buildRfqmServiceForUnitTest();
            let approval = await service.getGaslessApprovalResponseAsync(MOCK_WORKER_REGISTRY_ADDRESS, MOCK_TOKEN, new utils_1.BigNumber(100));
            (0, chai_1.expect)(approval).to.eql({ isRequired: false });
            approval = await service.getGaslessApprovalResponseAsync(MOCK_WORKER_REGISTRY_ADDRESS, MOCK_TOKEN, new utils_1.BigNumber(100));
            (0, chai_1.expect)(approval).to.eql({ isRequired: true, isGaslessAvailable: false });
            approval = await service.getGaslessApprovalResponseAsync(MOCK_WORKER_REGISTRY_ADDRESS, MOCK_TOKEN, new utils_1.BigNumber(100));
            (0, chai_1.expect)(approval).to.eql({
                isRequired: true,
                isGaslessAvailable: true,
                type: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL.kind,
                eip712: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL.eip712,
            });
        });
    });
    describe('runHealthCheckAsync', () => {
        it('returns active pairs', async () => {
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findRfqmWorkerHeartbeatsAsync(1337)).thenResolve([]);
            const rfqMakerManagerMock = (0, ts_mockito_1.mock)(rfq_maker_manager_1.RfqMakerManager);
            (0, ts_mockito_1.when)(rfqMakerManagerMock.getRfqmV2MakerOfferings()).thenReturn({
                'https://mock-rfqm1.club': [
                    ['0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c', '0x0b1ba0af832d7c05fd64161e0db78e85978e8082'],
                ],
            });
            const service = buildRfqmServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock),
                rfqMakerManager: (0, ts_mockito_1.instance)(rfqMakerManagerMock),
            });
            const result = await service.runHealthCheckAsync();
            (0, chai_1.expect)(result.pairs).to.have.key('0x0b1ba0af832d7c05fd64161e0db78e85978e8082-0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c');
            (0, chai_1.expect)(result.pairs['0x0b1ba0af832d7c05fd64161e0db78e85978e8082-0x871dd7c2b4b25e1aa18728e9d5f2af4c4e431f5c']).to.equal(rfqm_health_check_1.HealthCheckStatus.Operational);
        });
    });
    describe('status', () => {
        describe('v2', () => {
            const expiry = new utils_1.BigNumber(Date.now() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            const chainId = 1337;
            const otcOrder = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: '0x1111111111111111111111111111111111111111',
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, expiry),
                chainId,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const BASE_JOB = new entities_1.RfqmV2JobEntity({
                chainId,
                expiry,
                makerUri: '',
                orderHash: '0x00',
                fee: {
                    token: '0xToken',
                    amount: '100',
                    type: 'fixed',
                },
                order: (0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(otcOrder),
            });
            it('should return failed for jobs that have sat in queue past expiry', async () => {
                const expired = new utils_1.BigNumber(Date.now() - 10000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
                const oldJob = new entities_1.RfqmV2JobEntity({ ...BASE_JOB, expiry: expired });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(oldJob);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const jobStatus = await service.getStatusAsync('0x00');
                if (jobStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                (0, chai_1.expect)(jobStatus.status).to.equal('failed');
                if (jobStatus.status !== 'failed') {
                    chai_1.expect.fail('Status should be failed');
                    throw new Error();
                }
                (0, chai_1.expect)(jobStatus.transactions).to.have.length(0); // tslint:disable-line no-unused-expression
            });
            it('should return pending for unexpired enqueued jobs', async () => {
                const newJob = BASE_JOB; // BASE_JOB has a valid expiry
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(newJob);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const jobStatus = await service.getStatusAsync('0x00');
                if (jobStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                (0, chai_1.expect)(jobStatus.status).to.equal('pending');
            });
            it('should return pending for jobs in processing', async () => {
                const job = new entities_1.RfqmV2JobEntity({ ...BASE_JOB, status: types_1.RfqmJobStatus.PendingProcessing });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const jobStatus = await service.getStatusAsync('0x00');
                if (jobStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                (0, chai_1.expect)(jobStatus.status).to.equal('pending');
            });
            it('should return submitted with transaction submissions for submitted jobs', async () => {
                const now = Date.now();
                const transaction1Time = now + 10;
                const transaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    status: types_1.RfqmJobStatus.PendingSubmitted,
                });
                const submission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 0,
                });
                const submission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 1,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([submission1, submission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const jobStatus = await service.getStatusAsync('0x00');
                if (jobStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                if (jobStatus.status !== 'submitted') {
                    chai_1.expect.fail('Status should be submitted');
                    throw new Error();
                }
                (0, chai_1.expect)(jobStatus.transactions).to.have.length(2);
                (0, chai_1.expect)(jobStatus.transactions).to.deep.include({
                    hash: '0x01',
                    timestamp: +transaction1Time.valueOf(),
                });
                (0, chai_1.expect)(jobStatus.transactions).to.deep.include({
                    hash: '0x02',
                    timestamp: +transaction2Time.valueOf(),
                });
            });
            it('should return succeeded for a successful job, with the succeeded job', async () => {
                const now = Date.now();
                const transaction1Time = now + 10;
                const transaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    status: types_1.RfqmJobStatus.SucceededUnconfirmed,
                });
                const submission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 0,
                });
                const submission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 1,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([submission1, submission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const jobStatus = await service.getStatusAsync('0x00');
                if (jobStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                if (jobStatus.status !== 'succeeded') {
                    chai_1.expect.fail('Status should be succeeded');
                    throw new Error();
                }
                (0, chai_1.expect)(jobStatus.transactions[0]).to.contain({ hash: '0x02', timestamp: +transaction2Time.valueOf() });
            });
            it('should return confirmed for a successful confirmed job', async () => {
                const now = Date.now();
                const transaction1Time = now + 10;
                const transaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    status: types_1.RfqmJobStatus.SucceededConfirmed,
                });
                const submission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 0,
                });
                const submission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 1,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([submission1, submission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const jobStatus = await service.getStatusAsync('0x00');
                if (jobStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                if (jobStatus.status !== 'confirmed') {
                    chai_1.expect.fail('Status should be confirmed');
                    throw new Error();
                }
                (0, chai_1.expect)(jobStatus.transactions[0]).to.contain({ hash: '0x02', timestamp: +transaction2Time.valueOf() });
            });
            it('should throw if the job is successful but there are no successful transactions', async () => {
                const now = Date.now();
                const transaction1Time = now + 10;
                const transaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    status: types_1.RfqmJobStatus.SucceededUnconfirmed,
                });
                const submission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 0,
                });
                const submission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    status: types_1.RfqmTransactionSubmissionStatus.RevertedUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 1,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([submission1, submission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                try {
                    await service.getStatusAsync('0x00');
                    chai_1.expect.fail();
                }
                catch (e) {
                    (0, chai_1.expect)(e.message).to.contain('Expected exactly one successful transaction submission');
                }
            });
            it('should throw if the job is successful but there are multiple successful transactions', async () => {
                const now = Date.now();
                const transaction1Time = now + 10;
                const transaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    status: types_1.RfqmJobStatus.SucceededUnconfirmed,
                });
                const submission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 0,
                });
                const submission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(transaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 1,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([submission1, submission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                try {
                    await service.getStatusAsync('0x00');
                    chai_1.expect.fail();
                }
                catch (e) {
                    (0, chai_1.expect)(e.message).to.contain('Expected exactly one successful transaction submission');
                }
            });
            it('should return submitted with approval and trade transaction submissions for submitted jobs', async () => {
                const now = Date.now();
                const approvalTransaction1Time = now + 3;
                const approvalTransaction2Time = now + 7;
                const tradeTransaction1Time = now + 10;
                const tradeTransaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                    status: types_1.RfqmJobStatus.PendingSubmitted,
                });
                const approvalSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 0,
                });
                const approvalSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 1,
                });
                const tradeSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x03',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 2,
                });
                const tradeSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x04',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 3,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([approvalSubmission1, approvalSubmission2]);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([tradeSubmission1, tradeSubmission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const orderStatus = await service.getStatusAsync('0x00');
                if (orderStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                if (orderStatus.status !== 'submitted') {
                    chai_1.expect.fail('Status should be submitted');
                    throw new Error();
                }
                (0, chai_1.expect)(orderStatus.approvalTransactions).to.have.length(2);
                (0, chai_1.expect)(orderStatus.approvalTransactions).to.deep.include({
                    hash: '0x01',
                    timestamp: +approvalTransaction1Time.valueOf(),
                });
                (0, chai_1.expect)(orderStatus.approvalTransactions).to.deep.include({
                    hash: '0x02',
                    timestamp: +approvalTransaction2Time.valueOf(),
                });
                (0, chai_1.expect)(orderStatus.transactions).to.have.length(2);
                (0, chai_1.expect)(orderStatus.transactions).to.deep.include({
                    hash: '0x03',
                    timestamp: +tradeTransaction1Time.valueOf(),
                });
                (0, chai_1.expect)(orderStatus.transactions).to.deep.include({
                    hash: '0x04',
                    timestamp: +tradeTransaction2Time.valueOf(),
                });
            });
            it('should return failed with approval and trade transaction submissions for failed jobs', async () => {
                const now = Date.now();
                const approvalTransaction1Time = now + 3;
                const approvalTransaction2Time = now + 7;
                const tradeTransaction1Time = now + 10;
                const tradeTransaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                    status: types_1.RfqmJobStatus.FailedExpired,
                });
                const approvalSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 0,
                });
                const approvalSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 1,
                });
                const tradeSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x03',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 2,
                });
                const tradeSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x04',
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 3,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([approvalSubmission1, approvalSubmission2]);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([tradeSubmission1, tradeSubmission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const orderStatus = await service.getStatusAsync('0x00');
                if (orderStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                if (orderStatus.status !== 'failed') {
                    chai_1.expect.fail('Status should be failed');
                    throw new Error();
                }
                (0, chai_1.expect)(orderStatus.approvalTransactions).to.have.length(2);
                (0, chai_1.expect)(orderStatus.approvalTransactions).to.deep.include({
                    hash: '0x01',
                    timestamp: +approvalTransaction1Time.valueOf(),
                });
                (0, chai_1.expect)(orderStatus.approvalTransactions).to.deep.include({
                    hash: '0x02',
                    timestamp: +approvalTransaction2Time.valueOf(),
                });
                (0, chai_1.expect)(orderStatus.transactions).to.have.length(2);
                (0, chai_1.expect)(orderStatus.transactions).to.deep.include({
                    hash: '0x03',
                    timestamp: +tradeTransaction1Time.valueOf(),
                });
                (0, chai_1.expect)(orderStatus.transactions).to.deep.include({
                    hash: '0x04',
                    timestamp: +tradeTransaction2Time.valueOf(),
                });
            });
            it('should return declined for a job that was declined on the last look', async () => {
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    status: types_1.RfqmJobStatus.FailedLastLookDeclined,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                //what is this dummy first attempt?
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve();
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const jobStatus = await service.getStatusAsync('0x00');
                if (jobStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                (0, chai_1.expect)(jobStatus.status).to.eq('failed');
                if (jobStatus.status == 'failed') {
                    (0, chai_1.expect)(jobStatus.reason).to.eq('last_look_declined');
                }
            });
            it('should return succeeded for a successful job, with the succeeded job and include correct `transactions` and `approvalTransactions`', async () => {
                const now = Date.now();
                const approvalTransaction1Time = now + 3;
                const approvalTransaction2Time = now + 7;
                const tradeTransaction1Time = now + 10;
                const tradeTransaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                    status: types_1.RfqmJobStatus.SucceededUnconfirmed,
                });
                const approvalSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 0,
                });
                const approvalSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 1,
                });
                const tradeSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x03',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 2,
                });
                const tradeSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x04',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 3,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([approvalSubmission1, approvalSubmission2]);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([tradeSubmission1, tradeSubmission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const orderStatus = await service.getStatusAsync('0x00');
                if (orderStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                if (orderStatus.status !== 'succeeded') {
                    chai_1.expect.fail('Status should be succeeded');
                    throw new Error();
                }
                if (!orderStatus.approvalTransactions) {
                    chai_1.expect.fail('Approval transactions not present');
                    throw new Error();
                }
                (0, chai_1.expect)(orderStatus.approvalTransactions[0]).to.contain({
                    hash: '0x02',
                    timestamp: +approvalTransaction2Time.valueOf(),
                });
                (0, chai_1.expect)(orderStatus.transactions[0]).to.contain({
                    hash: '0x04',
                    timestamp: +tradeTransaction2Time.valueOf(),
                });
            });
            it('should return confirmed for a successful confirmed job and include correct `transactions` and `approvalTransactions`', async () => {
                const now = Date.now();
                const approvalTransaction1Time = now + 3;
                const approvalTransaction2Time = now + 7;
                const tradeTransaction1Time = now + 10;
                const tradeTransaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                    status: types_1.RfqmJobStatus.SucceededConfirmed,
                });
                const approvalSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 0,
                });
                const approvalSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 1,
                });
                const tradeSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x03',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 2,
                });
                const tradeSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x04',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 3,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([approvalSubmission1, approvalSubmission2]);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([tradeSubmission1, tradeSubmission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                const orderStatus = await service.getStatusAsync('0x00');
                if (orderStatus === null) {
                    chai_1.expect.fail('Status should exist');
                    throw new Error();
                }
                if (orderStatus.status !== 'confirmed') {
                    chai_1.expect.fail('Status should be confirmed');
                    throw new Error();
                }
                if (!orderStatus.approvalTransactions) {
                    chai_1.expect.fail('Approval transactions not present');
                    throw new Error();
                }
                (0, chai_1.expect)(orderStatus.approvalTransactions[0]).to.contain({
                    hash: '0x02',
                    timestamp: +approvalTransaction2Time.valueOf(),
                });
                (0, chai_1.expect)(orderStatus.transactions[0]).to.contain({
                    hash: '0x04',
                    timestamp: +tradeTransaction2Time.valueOf(),
                });
            });
            it('should throw if the job is successful but there are no successful transactions for approval', async () => {
                const now = Date.now();
                const approvalTransaction1Time = now + 3;
                const approvalTransaction2Time = now + 7;
                const tradeTransaction1Time = now + 10;
                const tradeTransaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                    status: types_1.RfqmJobStatus.SucceededUnconfirmed,
                });
                const approvalSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 0,
                });
                const approvalSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    status: types_1.RfqmTransactionSubmissionStatus.RevertedUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 1,
                });
                const tradeSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x03',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 2,
                });
                const tradeSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x04',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 3,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([approvalSubmission1, approvalSubmission2]);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([tradeSubmission1, tradeSubmission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                try {
                    await service.getStatusAsync('0x00');
                    chai_1.expect.fail();
                }
                catch (e) {
                    (0, chai_1.expect)(e.message).to.contain('Expected exactly one successful transaction submission');
                }
            });
            it('should throw if the job is successful but there are multiple successful transactions for approval', async () => {
                const now = Date.now();
                const approvalTransaction1Time = now + 3;
                const approvalTransaction2Time = now + 7;
                const tradeTransaction1Time = now + 10;
                const tradeTransaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                    status: types_1.RfqmJobStatus.SucceededUnconfirmed,
                });
                const approvalSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 0,
                });
                const approvalSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x02',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 1,
                });
                const tradeSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x03',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 2,
                });
                const tradeSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x04',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 3,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([approvalSubmission1, approvalSubmission2]);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([tradeSubmission1, tradeSubmission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                try {
                    await service.getStatusAsync('0x00');
                    chai_1.expect.fail();
                }
                catch (e) {
                    (0, chai_1.expect)(e.message).to.contain('Expected exactly one successful transaction submission');
                }
            });
            it('should throw if the job is successful but the successful transaciton has no hash for approval', async () => {
                const now = Date.now();
                const approvalTransaction1Time = now + 3;
                const approvalTransaction2Time = now + 7;
                const tradeTransaction1Time = now + 10;
                const tradeTransaction2Time = now + 20;
                const job = new entities_1.RfqmV2JobEntity({
                    ...BASE_JOB,
                    approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                    status: types_1.RfqmJobStatus.SucceededUnconfirmed,
                });
                const approvalSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x01',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 0,
                });
                const approvalSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(approvalTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Approval,
                    nonce: 1,
                });
                const tradeSubmission1 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction1Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x03',
                    status: types_1.RfqmTransactionSubmissionStatus.DroppedAndReplaced,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 2,
                });
                const tradeSubmission2 = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(tradeTransaction2Time),
                    orderHash: job.orderHash,
                    transactionHash: '0x04',
                    status: types_1.RfqmTransactionSubmissionStatus.SucceededUnconfirmed,
                    from: job.order.order.txOrigin,
                    to: job.order.order.verifyingContract,
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                    nonce: 3,
                });
                const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve(job);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([approvalSubmission1, approvalSubmission2]);
                (0, ts_mockito_1.when)(dbUtilsMock.findV2TransactionSubmissionsByOrderHashAsync(job.orderHash, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([tradeSubmission1, tradeSubmission2]);
                const service = buildRfqmServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
                try {
                    await service.getStatusAsync('0x00');
                    chai_1.expect.fail();
                }
                catch (e) {
                    (0, chai_1.expect)(e.message).to.contain('does not have a hash');
                }
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3Qvc2VydmljZXMvcmZxbV9zZXJ2aWNlX3Rlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSx5Q0FBeUM7QUFDekMsMEJBQTBCO0FBQzFCLHFDQUFxQztBQUVyQyw2Q0FBcUQ7QUFDckQscURBQWtFO0FBQ2xFLCtEQUE2RTtBQUM3RSx1REFBMEc7QUFDMUcscUNBQXNDO0FBQ3RDLCtCQUE4QjtBQUM5QixtQ0FBbUM7QUFDbkMsK0NBQXdDO0FBQ3hDLDJDQUFrRjtBQUdsRix3REFNa0M7QUFDbEMsaURBQTJHO0FBQzNHLG9EQUtrQztBQUNsQyxnRUFBNEQ7QUFDNUQsa0VBQThEO0FBQzlELHdHQUFpRztBQU1qRyxnREFPOEI7QUFDOUIsK0RBQTJEO0FBQzNELDZFQUF3RTtBQUN4RSxpRUFBc0Y7QUFDdEYseUVBQXNFO0FBQ3RFLCtFQUEwRTtBQUMxRSx5RUFBb0U7QUFDcEUsK0VBQTRFO0FBQzVFLDRDQUFzRTtBQUV0RSw2REFBNkQ7QUFDN0QsbUVBQW1FO0FBQ25FLE1BQU0sYUFBYSxHQUFHLElBQUksaUJBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3RELE1BQU0sNEJBQTRCLEdBQUcsNENBQTRDLENBQUM7QUFDbEYsTUFBTSxVQUFVLEdBQUcsNENBQTRDLENBQUM7QUFDaEUsTUFBTSxjQUFjLEdBQUcsSUFBSSxpQkFBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ25ELE1BQU0sV0FBVyxHQUFHLG9CQUFvQixDQUFDO0FBQ3pDLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxpQkFBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyx3QkFBWSxDQUFDLENBQUM7QUFDekUsTUFBTSxlQUFlLEdBQWU7SUFDaEMsT0FBTyxFQUFFLENBQUMsa0JBQWtCLENBQUM7SUFDN0IsWUFBWSxFQUFFLGtCQUFrQjtJQUNoQyxlQUFlLEVBQUUsQ0FBQyxJQUFJLENBQUM7SUFDdkIsS0FBSyxFQUFFLE1BQU07SUFDYixHQUFH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QUFnQixFQUFFLGdCQUFnQixDQUFDLENBQUMsQ0FBQztnQkFDcEQsTUFBTSxPQUFPLEdBQUcsMkJBQTJCLENBQUMsRUFBRSxPQUFPLEVBQUUsSUFBQSxxQkFBUSxFQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFFaEYsSUFBSTtvQkFDQSxNQUFNLE9BQU8sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ3JDLGFBQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztpQkFDakI7Z0JBQUMsT0FBTyxDQUFDLEVBQUU7b0JBQ1IsSUFBQSxhQUFNLEVBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztpQkFDeEQ7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZGF2aWR3YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvdGVzdC9zZXJ2aWNlcy9yZnFtX3NlcnZpY2VfdGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0c2xpbnQ6ZGlzYWJsZTpjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4vLyB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eVxyXG4vLyB0c2xpbnQ6ZGlzYWJsZTptYXgtZmlsZS1saW5lLWNvdW50XHJcblxyXG5pbXBvcnQgeyBUb29NYW55UmVxdWVzdHNFcnJvciB9IGZyb20gJ0AweC9hcGktdXRpbHMnO1xyXG5pbXBvcnQgeyBRdW90ZVJlcXVlc3RvciwgU2lnbmF0dXJlVHlwZSB9IGZyb20gJ0AweC9hc3NldC1zd2FwcGVyJztcclxuaW1wb3J0IHsgZ2V0Q29udHJhY3RBZGRyZXNzZXNGb3JDaGFpbk9yVGhyb3cgfSBmcm9tICdAMHgvY29udHJhY3QtYWRkcmVzc2VzJztcclxuaW1wb3J0IHsgZWlwNzEyU2lnbkhhc2hXaXRoS2V5LCBldGhTaWduSGFzaFdpdGhLZXksIE1ldGFUcmFuc2FjdGlvbiwgT3RjT3JkZXIgfSBmcm9tICdAMHgvcHJvdG9jb2wtdXRpbHMnO1xyXG5pbXBvcnQgeyBCaWdOdW1iZXIgfSBmcm9tICdAMHgvdXRpbHMnO1xyXG5pbXBvcnQgeyBleHBlY3QgfSBmcm9tICdjaGFpJztcclxuaW1wb3J0IHsgY29uc3RhbnRzIH0gZnJvbSAnZXRoZXJzJztcclxuaW1wb3J0IHsgUHJvZHVjZXIgfSBmcm9tICdzcXMtcHJvZHVjZXInO1xyXG5pbXBvcnQgeyBhbnl0aGluZywgY2FwdHVyZSwgaW5zdGFuY2UsIG1vY2ssIHNweSwgdmVyaWZ5LCB3aGVuIH0gZnJvbSAndHMtbW9ja2l0byc7XHJcblxyXG5pbXBvcnQgeyBJbnRlZ3JhdG9yIH0gZnJvbSAnLi4vLi4vc3JjL2NvbmZpZyc7XHJcbmltcG9ydCB7XHJcbiAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXHJcbiAgICBFVEhfREVDSU1BTFMsXHJcbiAgICBPTkVfTUlOVVRFX01TLFxyXG4gICAgT05FX1NFQ09ORF9NUyxcclxuICAgIFpFUk8sXHJcbn0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgUmZxbVYySm9iRW50aXR5LCBSZnFtVjJRdW90ZUVudGl0eSwgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5IH0gZnJvbSAnLi4vLi4vc3JjL2VudGl0aWVzJztcclxuaW1wb3J0IHtcclxuICAgIFJmcW1Kb2JTdGF0dXMsXHJcbiAgICBSZnFtT3JkZXJUeXBlcyxcclxuICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMsXHJcbiAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZSxcclxufSBmcm9tICcuLi8uLi9zcmMvZW50aXRpZXMvdHlwZXMnO1xyXG5pbXBvcnQgeyBGZWVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL2ZlZV9zZXJ2aWNlJztcclxuaW1wb3J0IHsgUmZxbVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvcmZxbV9zZXJ2aWNlJztcclxuaW1wb3J0IHsgUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL3JmcV9tYWtlcl9iYWxhbmNlX2NhY2hlX3NlcnZpY2UnO1xyXG5pbXBvcnQge1xyXG4gICAgQXBwcm92YWxSZXNwb25zZSxcclxuICAgIE90Y09yZGVyU3VibWl0UmZxbVNpZ25lZFF1b3RlUGFyYW1zLFxyXG4gICAgU3VibWl0UmZxbVNpZ25lZFF1b3RlV2l0aEFwcHJvdmFsUGFyYW1zLFxyXG59IGZyb20gJy4uLy4uL3NyYy9zZXJ2aWNlcy90eXBlcyc7XHJcbmltcG9ydCB7XHJcbiAgICBFeGVjdXRlTWV0YVRyYW5zYWN0aW9uRWlwNzEyQ29udGV4dCxcclxuICAgIEZlZU1vZGVsVmVyc2lvbixcclxuICAgIEdhc2xlc3NBcHByb3ZhbFR5cGVzLFxyXG4gICAgR2FzbGVzc1R5cGVzLFxyXG4gICAgSW5kaWNhdGl2ZVF1b3RlLFxyXG4gICAgUGVybWl0RWlwNzEyQ29udGV4dCxcclxufSBmcm9tICcuLi8uLi9zcmMvY29yZS90eXBlcyc7XHJcbmltcG9ydCB7IENhY2hlQ2xpZW50IH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL2NhY2hlX2NsaWVudCc7XHJcbmltcG9ydCB7IFF1b3RlU2VydmVyQ2xpZW50IH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL3F1b3RlX3NlcnZlcl9jbGllbnQnO1xyXG5pbXBvcnQgeyBvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXIsIFJmcW1EYlV0aWxzIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL3JmcW1fZGJfdXRpbHMnO1xyXG5pbXBvcnQgeyBIZWFsdGhDaGVja1N0YXR1cyB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9yZnFtX2hlYWx0aF9jaGVjayc7XHJcbmltcG9ydCB7IFJmcUJsb2NrY2hhaW5VdGlscyB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9yZnFfYmxvY2tjaGFpbl91dGlscyc7XHJcbmltcG9ydCB7IFJmcU1ha2VyTWFuYWdlciB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9yZnFfbWFrZXJfbWFuYWdlcic7XHJcbmltcG9ydCB7IFRva2VuTWV0YWRhdGFNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL1Rva2VuTWV0YWRhdGFNYW5hZ2VyJztcclxuaW1wb3J0IHsgTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQVBQUk9WQUwgfSBmcm9tICcuLi9jb25zdGFudHMnO1xyXG5cclxuLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWxvc3Mtb2YtcHJlY2lzaW9uXHJcbmNvbnN0IE5FVkVSX0VYUElSRVMgPSBuZXcgQmlnTnVtYmVyKDk5OTk5OTk5OTk5OTk5OTkpO1xyXG5jb25zdCBNT0NLX1dPUktFUl9SRUdJU1RSWV9BRERSRVNTID0gJzB4MTAyMzMzMWE0NjljNjM5MTczMGZmMUUyNzQ5NDIyQ0U4ODczRUMzOCc7XHJcbmNvbnN0IE1PQ0tfVE9LRU4gPSAnMHhBMGI4Njk5MWM2MjE4YjM2YzFkMTlENGEyZTlFYjBjRTM2MDZlQjQ4JztcclxuY29uc3QgTU9DS19HQVNfUFJJQ0UgPSBuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDAwMCk7XHJcbmNvbnN0IE1PQ0tfTU1fVVJJID0gJ2h0dHBzOi8vbW0tYWRkcmVzcyc7XHJcbmNvbnN0IFdPUktFUl9GVUxMX0JBTEFOQ0VfV0VJID0gbmV3IEJpZ051bWJlcigxKS5zaGlmdGVkQnkoRVRIX0RFQ0lNQUxTKTtcclxuY29uc3QgTU9DS19JTlRFR1JBVE9SOiBJbnRlZ3JhdG9yID0ge1xyXG4gICAgYXBpS2V5czogWydhbi1pbnRlZ3JhdG9yLWlkJ10sXHJcbiAgICBpbnRlZ3JhdG9ySWQ6ICdhbi1pbnRlZ3JhdG9yLWlkJyxcclxuICAgIGFsbG93ZWRDaGFpbklkczogWzEzMzddLFxyXG4gICAgbGFiZWw6ICdUZXN0JyxcclxuICAgIHBscDogZmFsc2UsXHJcbiAgICByZnFtOiB0cnVlLFxyXG4gICAgcmZxdDogdHJ1ZSxcclxufTtcclxuXHJcbmNvbnN0IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCA9IChcclxuICAgIG92ZXJyaWRlczoge1xyXG4gICAgICAgIGNoYWluSWQ/OiBudW1iZXI7XHJcbiAgICAgICAgZmVlU2VydmljZT86IEZlZVNlcnZpY2U7XHJcbiAgICAgICAgZmVlTW9kZWxWZXJzaW9uPzogRmVlTW9kZWxWZXJzaW9uO1xyXG4gICAgICAgIHJmcUJsb2NrY2hhaW5VdGlscz86IFJmcUJsb2NrY2hhaW5VdGlscztcclxuICAgICAgICBkYlV0aWxzPzogUmZxbURiVXRpbHM7XHJcbiAgICAgICAgcHJvZHVjZXI/OiBQcm9kdWNlcjtcclxuICAgICAgICBxdW90ZVNlcnZlckNsaWVudD86IFF1b3RlU2VydmVyQ2xpZW50O1xyXG4gICAgICAgIGNhY2hlQ2xpZW50PzogQ2FjaGVDbGllbnQ7XHJcbiAgICAgICAgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlPzogUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlO1xyXG4gICAgICAgIHJmcU1ha2VyTWFuYWdlcj86IFJmcU1ha2VyTWFuYWdlcjtcclxuICAgICAgICB0b2tlbk1ldGFkYXRhTWFuYWdlcj86IFRva2VuTWV0YWRhdGFNYW5hZ2VyO1xyXG4gICAgfSA9IHt9LFxyXG4pOiBSZnFtU2VydmljZSA9PiB7XHJcbiAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgY29uc3QgcXVvdGVSZXF1ZXN0b3JNb2NrID0gbW9jayhRdW90ZVJlcXVlc3Rvcik7XHJcbiAgICB3aGVuKFxyXG4gICAgICAgIHF1b3RlUmVxdWVzdG9yTW9jay5yZXF1ZXN0UmZxbUluZGljYXRpdmVRdW90ZXNBc3luYyhcclxuICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICApLFxyXG4gICAgKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAxKSxcclxuICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgZXhwaXJ5OiBORVZFUl9FWFBJUkVTLFxyXG4gICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgfSxcclxuICAgIF0pO1xyXG5cclxuICAgIGNvbnN0IGZlZVNlcnZpY2VNb2NrID0gbW9jayhGZWVTZXJ2aWNlKTtcclxuICAgIHdoZW4oZmVlU2VydmljZU1vY2suZ2V0R2FzUHJpY2VFc3RpbWF0aW9uQXN5bmMoKSkudGhlblJlc29sdmUoTU9DS19HQVNfUFJJQ0UpO1xyXG4gICAgd2hlbihmZWVTZXJ2aWNlTW9jay5jYWxjdWxhdGVGZWVBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoe1xyXG4gICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XHJcbiAgICAgICAgICAgIHRva2VuOiAnMHhUb2tlbicsXHJcbiAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigzMDApLFxyXG4gICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXHJcbiAgICAgICAgICAgICAgICBraW5kOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICBnYXNGZWVBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgIGdhc1ByaWNlOiBNT0NLX0dBU19QUklDRSxcclxuICAgICAgICAgICAgICAgIHplcm9FeEZlZUFtb3VudDogbmV3IEJpZ051bWJlcigyMDApLFxyXG4gICAgICAgICAgICAgICAgdHJhZGVTaXplQnBzOiA0LFxyXG4gICAgICAgICAgICAgICAgZmVlVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDMwKSxcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG5ldyBCaWdOdW1iZXIoMjApLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBicmVha2Rvd246IHtcclxuICAgICAgICAgICAgICAgIGdhczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FzUHJpY2U6IE1PQ0tfR0FTX1BSSUNFLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlc3RpbWF0ZWRHYXM6IG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB6ZXJvRXg6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMjAwKSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6ICd2b2x1bWUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFkZVNpemVCcHM6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnZlcnNpb25SYXRlczoge1xyXG4gICAgICAgICAgICAgICAgbmF0aXZlVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDMwKSxcclxuICAgICAgICAgICAgICAgIGZlZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzMCksXHJcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuQmFzZVVuaXRQcmljZVVzZDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDIwKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBmZWVTZXJ2aWNlSW5zdGFuY2UgPSBpbnN0YW5jZShmZWVTZXJ2aWNlTW9jayk7XHJcblxyXG4gICAgY29uc3QgcmZxQmxvY2tjaGFpblV0aWxzTW9jayA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgIHdoZW4ocmZxQmxvY2tjaGFpblV0aWxzTW9jay5nZXRBY2NvdW50QmFsYW5jZUFzeW5jKE1PQ0tfV09SS0VSX1JFR0lTVFJZX0FERFJFU1MpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICBXT1JLRVJfRlVMTF9CQUxBTkNFX1dFSSxcclxuICAgICk7XHJcbiAgICB3aGVuKHJmcUJsb2NrY2hhaW5VdGlsc01vY2suZ2V0QWxsb3dhbmNlQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgIG5ldyBCaWdOdW1iZXIoY29uc3RhbnRzLk1heFVpbnQyNTYudG9TdHJpbmcoKSksXHJcbiAgICAgICAgbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgKTtcclxuICAgIHdoZW4ocmZxQmxvY2tjaGFpblV0aWxzTW9jay5nZXRHYXNsZXNzQXBwcm92YWxBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgbnVsbCxcclxuICAgICAgICBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTCxcclxuICAgICk7XHJcbiAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgY29uc3Qgc3FzTW9jayA9IG1vY2soUHJvZHVjZXIpO1xyXG4gICAgd2hlbihzcXNNb2NrLnF1ZXVlU2l6ZSgpKS50aGVuUmVzb2x2ZSgwKTtcclxuICAgIGNvbnN0IHF1b3RlU2VydmVyQ2xpZW50TW9jayA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgY29uc3QgY2FjaGVDbGllbnRNb2NrID0gbW9jayhDYWNoZUNsaWVudCk7XHJcbiAgICB3aGVuKGNhY2hlQ2xpZW50TW9jay5nZXRNYWtlcnNJbkNvb2xkb3duRm9yUGFpckFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICBjb25zdCByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICBjb25zdCByZnFNYWtlck1hbmFnZXJNb2NrID0gbW9jayhSZnFNYWtlck1hbmFnZXIpO1xyXG5cclxuICAgIGNvbnN0IHRva2VuTWV0YWRhdGFNYW5hZ2VyTW9jayA9IG1vY2soVG9rZW5NZXRhZGF0YU1hbmFnZXIpO1xyXG4gICAgd2hlbih0b2tlbk1ldGFkYXRhTWFuYWdlck1vY2suZ2V0VG9rZW5EZWNpbWFsc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgxOCk7XHJcbiAgICBjb25zdCB0b2tlbk1ldGFkYXRhTWFuYWdlciA9IGluc3RhbmNlKHRva2VuTWV0YWRhdGFNYW5hZ2VyTW9jayk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBSZnFtU2VydmljZShcclxuICAgICAgICBvdmVycmlkZXMuY2hhaW5JZCB8fCAxMzM3LFxyXG4gICAgICAgIG92ZXJyaWRlcy5mZWVTZXJ2aWNlIHx8IGZlZVNlcnZpY2VJbnN0YW5jZSxcclxuICAgICAgICBvdmVycmlkZXMuZmVlTW9kZWxWZXJzaW9uIHx8IDAsXHJcbiAgICAgICAgY29udHJhY3RBZGRyZXNzZXMsXHJcbiAgICAgICAgTU9DS19XT1JLRVJfUkVHSVNUUllfQUREUkVTUyxcclxuICAgICAgICBvdmVycmlkZXMucmZxQmxvY2tjaGFpblV0aWxzIHx8IGluc3RhbmNlKHJmcUJsb2NrY2hhaW5VdGlsc01vY2spLFxyXG4gICAgICAgIG92ZXJyaWRlcy5kYlV0aWxzIHx8IGRiVXRpbHNNb2NrLFxyXG4gICAgICAgIG92ZXJyaWRlcy5wcm9kdWNlciB8fCBzcXNNb2NrLFxyXG4gICAgICAgIG92ZXJyaWRlcy5xdW90ZVNlcnZlckNsaWVudCB8fCBxdW90ZVNlcnZlckNsaWVudE1vY2ssXHJcbiAgICAgICAgREVGQVVMVF9NSU5fRVhQSVJZX0RVUkFUSU9OX01TLFxyXG4gICAgICAgIG92ZXJyaWRlcy5jYWNoZUNsaWVudCB8fCBpbnN0YW5jZShjYWNoZUNsaWVudE1vY2spLFxyXG4gICAgICAgIG92ZXJyaWRlcy5yZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgfHwgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxyXG4gICAgICAgIG92ZXJyaWRlcy5yZnFNYWtlck1hbmFnZXIgfHwgcmZxTWFrZXJNYW5hZ2VyTW9jayxcclxuICAgICAgICBvdmVycmlkZXMudG9rZW5NZXRhZGF0YU1hbmFnZXIgfHwgdG9rZW5NZXRhZGF0YU1hbmFnZXIsXHJcbiAgICApO1xyXG59O1xyXG5cclxuZGVzY3JpYmUoJ1JmcW1TZXJ2aWNlIEhUVFAgTG9naWMnLCAoKSA9PiB7XHJcbiAgICBkZXNjcmliZSgnc3VibWl0VGFrZXJTaWduZWRPdGNPcmRlckFzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCBpZiB0aGVyZSBpcyBhbHJlYWR5IGEgcGVuZGluZyB0cmFkZSBmb3IgdGhlIHRha2VyIGFuZCB0YWtlciB0b2tlbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXhwaXJ5ID0gbmV3IEJpZ051bWJlcihEYXRlLm5vdygpICsgMV8wMDBfMDAwKS5kaXZpZGVkQnkoT05FX1NFQ09ORF9NUykuZGVjaW1hbFBsYWNlcygwKTtcclxuICAgICAgICAgICAgY29uc3Qgb3RjT3JkZXIgPSBuZXcgT3RjT3JkZXIoe1xyXG4gICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXI6ICcweDExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEnLFxyXG4gICAgICAgICAgICAgICAgbWFrZXI6ICcweDIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMycsXHJcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHg0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0JyxcclxuICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShleHBpcnksIFpFUk8sIGV4cGlyeSksXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdKb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICBleHBpcnksXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJycsXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweDAwJyxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnMHhUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMTAwJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiBvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXIob3RjT3JkZXIpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHF1b3RlID0gbmV3IFJmcW1WMlF1b3RlRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IGV4aXN0aW5nSm9iLm9yZGVyLm9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgaXNVbndyYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYySm9ic1dpdGhTdGF0dXNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbZXhpc3RpbmdKb2JdKTtcclxuICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJRdW90ZUJ5T3JkZXJIYXNoQXN5bmMob3RjT3JkZXIuZ2V0SGFzaCgpKSkudGhlblJlc29sdmUocXVvdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJhbXM6IE90Y09yZGVyU3VibWl0UmZxbVNpZ25lZFF1b3RlUGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogR2FzbGVzc1R5cGVzLk90Y09yZGVyLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IG90Y09yZGVyLFxyXG4gICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtZXRhdHJhbnNhY3Rpb25Nb2NrID0gbW9jayhNZXRhVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICB3aGVuKG1ldGF0cmFuc2FjdGlvbk1vY2suZ2V0SGFzaCgpKS50aGVuUmV0dXJuKCcweG1ldGF0cmFuc2FjdGlvbmhhc2gnKTtcclxuICAgICAgICAgICAgd2hlbihtZXRhdHJhbnNhY3Rpb25Nb2NrLmV4cGlyYXRpb25UaW1lU2Vjb25kcykudGhlblJldHVybihORVZFUl9FWFBJUkVTKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSxcclxuICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMCxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3Qoc2VydmljZS5zdWJtaXRUYWtlclNpZ25lZE90Y09yZGVyQXN5bmMocGFyYW1zKSkudG8uYmUucmVqZWN0ZWRXaXRoKFxyXG4gICAgICAgICAgICAgICAgVG9vTWFueVJlcXVlc3RzRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAnYSBwZW5kaW5nIHRyYWRlIGZvciB0aGlzIHRha2VyIGFuZCB0YWtlcnRva2VuIGFscmVhZHkgZXhpc3RzJyxcclxuICAgICAgICAgICAgKTsgLy8gdHNsaW50OmRpc2FibGUtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGFsbG93IHR3byB0cmFkZXMgYnkgdGhlIHNhbWUgdGFrZXIgd2l0aCBkaWZmZXJlbnQgdGFrZXIgdG9rZW5zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0YWtlclByaXZhdGVLZXkgPSAnMHhlMTNhZTlmYTAxNjZiNTAxYTJhYjUwZTdiNmZiYjY1ODE5YWRkNzM3NmRhOWI0ZmJiM2JmM2FlNDhjZDlkY2QzJztcclxuICAgICAgICAgICAgY29uc3QgdGFrZXJBZGRyZXNzID0gJzB4NGUyMTQ1ZURDMjlmMjdFMTI2MTU0QjljNzE2RGY3MGM0MjlDMjkxQic7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyeSA9IG5ldyBCaWdOdW1iZXIoRGF0ZS5ub3coKSArIDFfMDAwXzAwMCkuZGl2aWRlZEJ5KE9ORV9TRUNPTkRfTVMpLmRlY2ltYWxQbGFjZXMoMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nT3RjT3JkZXIgPSBuZXcgT3RjT3JkZXIoe1xyXG4gICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIG1ha2VyOiAnMHgyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweDMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NCcsXHJcbiAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoZXhwaXJ5LCBaRVJPLCBleHBpcnkpLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld090Y09yZGVyID0gbmV3IE90Y09yZGVyKHtcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHRha2VyOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBtYWtlcjogJzB4MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHgzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzJyxcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTknLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKGV4cGlyeSwgWkVSTywgZXhwaXJ5KSxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0pvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgIGV4cGlyeSxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnJyxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4MDAnLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcweFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcxMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IG90Y09yZGVyVG9TdG9yZWRPdGNPcmRlcihleGlzdGluZ090Y09yZGVyKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMkpvYnNXaXRoU3RhdHVzZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW2V4aXN0aW5nSm9iXSk7XHJcbiAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYyUXVvdGVCeU9yZGVySGFzaEFzeW5jKG5ld090Y09yZGVyLmdldEhhc2goKSkpLnRoZW5SZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiBvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXIobmV3T3RjT3JkZXIpLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRha2VyU3BlY2lmaWVkU2lkZTogbnVsbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGF0cmFuc2FjdGlvbk1vY2sgPSBtb2NrKE1ldGFUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgIHdoZW4obWV0YXRyYW5zYWN0aW9uTW9jay5nZXRIYXNoKCkpLnRoZW5SZXR1cm4oJzB4bWV0YXRyYW5zYWN0aW9uaGFzaCcpO1xyXG4gICAgICAgICAgICB3aGVuKG1ldGF0cmFuc2FjdGlvbk1vY2suZXhwaXJhdGlvblRpbWVTZWNvbmRzKS50aGVuUmV0dXJuKE5FVkVSX0VYUElSRVMpO1xyXG4gICAgICAgICAgICBjb25zdCBibG9ja2NoYWluVXRpbHNNb2NrID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGJsb2NrY2hhaW5VdGlsc01vY2suZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBjb25zdCByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2suZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UoYmxvY2tjaGFpblV0aWxzTW9jayksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2spLFxyXG4gICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAwLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHN1Ym1pdFBhcmFtczogT3RjT3JkZXJTdWJtaXRSZnFtU2lnbmVkUXVvdGVQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBHYXNsZXNzVHlwZXMuT3RjT3JkZXIsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjogbmV3T3RjT3JkZXIsXHJcbiAgICAgICAgICAgICAgICBzaWduYXR1cmU6IGV0aFNpZ25IYXNoV2l0aEtleShuZXdPdGNPcmRlci5nZXRIYXNoKCksIHRha2VyUHJpdmF0ZUtleSksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2Uuc3VibWl0VGFrZXJTaWduZWRPdGNPcmRlckFzeW5jKHN1Ym1pdFBhcmFtcyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudHlwZSkudG8uZXF1YWwoJ290YycpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3N1Ym1pdFRha2VyU2lnbmVkT3RjT3JkZXJXaXRoQXBwcm92YWxBc3luYycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgaWYgYXBwcm92YWwgcGFyYW1zIGdlbmVyYXRlIGFuIGludmFsaWQgY2FsbGRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRha2VyQWRkcmVzcyA9ICcweDRlMjE0NWVEQzI5ZjI3RTEyNjE1NEI5YzcxNkRmNzBjNDI5QzI5MUInO1xyXG4gICAgICAgICAgICBjb25zdCBleHBpcnkgPSBuZXcgQmlnTnVtYmVyKERhdGUubm93KCkgKyAxXzAwMF8wMDApLmRpdmlkZWRCeShPTkVfU0VDT05EX01TKS5kZWNpbWFsUGxhY2VzKDApO1xyXG4gICAgICAgICAgICBjb25zdCBvdGNPcmRlciA9IG5ldyBPdGNPcmRlcih7XHJcbiAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICB0YWtlcjogJzB4MTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMScsXHJcbiAgICAgICAgICAgICAgICBtYWtlcjogJzB4MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHgzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzJyxcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQnLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKGV4cGlyeSwgWkVSTywgZXhwaXJ5KSxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBlaXA3MTJDb250ZXh0OiBFeGVjdXRlTWV0YVRyYW5zYWN0aW9uRWlwNzEyQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgRUlQNzEyRG9tYWluOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ25hbWUnLCB0eXBlOiAnc3RyaW5nJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICd2ZXJzaW9uJywgdHlwZTogJ3N0cmluZycgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAndmVyaWZ5aW5nQ29udHJhY3QnLCB0eXBlOiAnYWRkcmVzcycgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnc2FsdCcsIHR5cGU6ICdieXRlczMyJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgTWV0YVRyYW5zYWN0aW9uOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ25vbmNlJywgdHlwZTogJ3VpbnQyNTYnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ2Zyb20nLCB0eXBlOiAnYWRkcmVzcycgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnZnVuY3Rpb25TaWduYXR1cmUnLCB0eXBlOiAnYnl0ZXMnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwcmltYXJ5VHlwZTogJ01ldGFUcmFuc2FjdGlvbicsXHJcbiAgICAgICAgICAgICAgICBkb21haW46IHt9LFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZToge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiBleHBpcnkudG9OdW1iZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25TaWduYXR1cmU6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3Qgc3VibWl0UGFyYW1zOiBTdWJtaXRSZnFtU2lnbmVkUXVvdGVXaXRoQXBwcm92YWxQYXJhbXM8RXhlY3V0ZU1ldGFUcmFuc2FjdGlvbkVpcDcxMkNvbnRleHQ+ID0ge1xyXG4gICAgICAgICAgICAgICAgYXBwcm92YWw6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBHYXNsZXNzQXBwcm92YWxUeXBlcy5FeGVjdXRlTWV0YVRyYW5zYWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGVpcDcxMjogZWlwNzEyQ29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2OiAyOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FSVA3MTIsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0cmFkZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IEdhc2xlc3NUeXBlcy5PdGNPcmRlcixcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjogb3RjT3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMjgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGtpbmQ6IEdhc2xlc3NUeXBlcy5PdGNPcmRlcixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgYmxvY2tjaGFpblV0aWxzTW9jayA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihibG9ja2NoYWluVXRpbHNNb2NrLmdlbmVyYXRlQXBwcm92YWxDYWxsZGF0YUFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICcweGludmFsaWRjYWxsZGF0YScsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHdoZW4oYmxvY2tjaGFpblV0aWxzTW9jay5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVqZWN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMCxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UoYmxvY2tjaGFpblV0aWxzTW9jayksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VydmljZS5zdWJtaXRUYWtlclNpZ25lZE90Y09yZGVyV2l0aEFwcHJvdmFsQXN5bmMoc3VibWl0UGFyYW1zKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdzaG91bGQgZmFpbCBldGggY2FsbCBhcHByb3ZhbCB2YWxpZGF0aW9uJyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ0V0aCBjYWxsIGFwcHJvdmFsIHZhbGlkYXRpb24gZmFpbGVkJyk7XHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkoYmxvY2tjaGFpblV0aWxzTW9jay5nZW5lcmF0ZUFwcHJvdmFsQ2FsbGRhdGFBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkub25jZSgpO1xyXG4gICAgICAgICAgICAgICAgdmVyaWZ5KGJsb2NrY2hhaW5VdGlsc01vY2suZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhyaWNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpdCgnc2hvdWxkIHByb2NlZWQgd2l0aCB0cmFkZSBzdWJtaXNzaW9uIGlmIGFwcHJvdmFsIGlzIGVtcHR5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0YWtlclByaXZhdGVLZXkgPSAnMHhlMTNhZTlmYTAxNjZiNTAxYTJhYjUwZTdiNmZiYjY1ODE5YWRkNzM3NmRhOWI0ZmJiM2JmM2FlNDhjZDlkY2QzJztcclxuICAgICAgICAgICAgY29uc3QgdGFrZXJBZGRyZXNzID0gJzB4NGUyMTQ1ZURDMjlmMjdFMTI2MTU0QjljNzE2RGY3MGM0MjlDMjkxQic7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyeSA9IG5ldyBCaWdOdW1iZXIoRGF0ZS5ub3coKSArIDFfMDAwXzAwMCkuZGl2aWRlZEJ5KE9ORV9TRUNPTkRfTVMpLmRlY2ltYWxQbGFjZXMoMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG90Y09yZGVyID0gbmV3IE90Y09yZGVyKHtcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHRha2VyOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBtYWtlcjogJzB4MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHgzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzJyxcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQnLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKGV4cGlyeSwgWkVSTywgZXhwaXJ5KSxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMkpvYnNXaXRoU3RhdHVzZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMlF1b3RlQnlPcmRlckhhc2hBc3luYyhvdGNPcmRlci5nZXRIYXNoKCkpKS50aGVuUmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjogb3RjT3JkZXJUb1N0b3JlZE90Y09yZGVyKG90Y09yZGVyKSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNwZWNpZmllZFNpZGU6IG51bGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBibG9ja2NoYWluVXRpbHNNb2NrID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGJsb2NrY2hhaW5VdGlsc01vY2suZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBjb25zdCByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2suZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAwLFxyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShibG9ja2NoYWluVXRpbHNNb2NrKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UocmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBzdWJtaXRQYXJhbXM6IFN1Ym1pdFJmcW1TaWduZWRRdW90ZVdpdGhBcHByb3ZhbFBhcmFtczxcclxuICAgICAgICAgICAgICAgIEV4ZWN1dGVNZXRhVHJhbnNhY3Rpb25FaXA3MTJDb250ZXh0IHwgUGVybWl0RWlwNzEyQ29udGV4dFxyXG4gICAgICAgICAgICA+ID0ge1xyXG4gICAgICAgICAgICAgICAga2luZDogR2FzbGVzc1R5cGVzLk90Y09yZGVyLFxyXG4gICAgICAgICAgICAgICAgdHJhZGU6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBHYXNsZXNzVHlwZXMuT3RjT3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IG90Y09yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogZXRoU2lnbkhhc2hXaXRoS2V5KG90Y09yZGVyLmdldEhhc2goKSwgdGFrZXJQcml2YXRlS2V5KSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2Uuc3VibWl0VGFrZXJTaWduZWRPdGNPcmRlcldpdGhBcHByb3ZhbEFzeW5jKHN1Ym1pdFBhcmFtcyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudHlwZSkudG8uZXF1YWwoJ290YycpO1xyXG4gICAgICAgICAgICB2ZXJpZnkoZGJVdGlsc01vY2sud3JpdGVWMkpvYkFzeW5jKGFueXRoaW5nKCkpKS5vbmNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzYXZlIGpvYiB3aXRoIGV4ZWN1dGVNZXRhVHJhbnNhY3Rpb24gcGFyYW1zIHRvIERCJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0YWtlclByaXZhdGVLZXkgPSAnMHhlMTNhZTlmYTAxNjZiNTAxYTJhYjUwZTdiNmZiYjY1ODE5YWRkNzM3NmRhOWI0ZmJiM2JmM2FlNDhjZDlkY2QzJztcclxuICAgICAgICAgICAgY29uc3QgdGFrZXJBZGRyZXNzID0gJzB4NGUyMTQ1ZURDMjlmMjdFMTI2MTU0QjljNzE2RGY3MGM0MjlDMjkxQic7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyeSA9IG5ldyBCaWdOdW1iZXIoRGF0ZS5ub3coKSArIDFfMDAwXzAwMCkuZGl2aWRlZEJ5KE9ORV9TRUNPTkRfTVMpLmRlY2ltYWxQbGFjZXMoMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG90Y09yZGVyID0gbmV3IE90Y09yZGVyKHtcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHRha2VyOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBtYWtlcjogJzB4MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHgzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzJyxcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQnLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKGV4cGlyeSwgWkVSTywgZXhwaXJ5KSxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBlaXA3MTJDb250ZXh0OiBFeGVjdXRlTWV0YVRyYW5zYWN0aW9uRWlwNzEyQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgRUlQNzEyRG9tYWluOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ25hbWUnLCB0eXBlOiAnc3RyaW5nJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICd2ZXJzaW9uJywgdHlwZTogJ3N0cmluZycgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAndmVyaWZ5aW5nQ29udHJhY3QnLCB0eXBlOiAnYWRkcmVzcycgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnc2FsdCcsIHR5cGU6ICdieXRlczMyJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgTWV0YVRyYW5zYWN0aW9uOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ25vbmNlJywgdHlwZTogJ3VpbnQyNTYnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ2Zyb20nLCB0eXBlOiAnYWRkcmVzcycgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAnZnVuY3Rpb25TaWduYXR1cmUnLCB0eXBlOiAnYnl0ZXMnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwcmltYXJ5VHlwZTogJ01ldGFUcmFuc2FjdGlvbicsXHJcbiAgICAgICAgICAgICAgICBkb21haW46IHt9LFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblNpZ25hdHVyZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IGV4cGlyeS50b051bWJlcigpLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgZGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJKb2JzV2l0aFN0YXR1c2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJRdW90ZUJ5T3JkZXJIYXNoQXN5bmMob3RjT3JkZXIuZ2V0SGFzaCgpKSkudGhlblJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IG90Y09yZGVyVG9TdG9yZWRPdGNPcmRlcihvdGNPcmRlciksXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgaXNVbndyYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTcGVjaWZpZWRTaWRlOiBudWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgYmxvY2tjaGFpblV0aWxzTW9jayA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihibG9ja2NoYWluVXRpbHNNb2NrLmdldFRva2VuQmFsYW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW25ldyBCaWdOdW1iZXIoMTAwMDApXSk7XHJcbiAgICAgICAgICAgIHdoZW4oYmxvY2tjaGFpblV0aWxzTW9jay5nZW5lcmF0ZUFwcHJvdmFsQ2FsbGRhdGFBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAnMHh2YWxpZGNhbGxkYXRhJyxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgd2hlbihibG9ja2NoYWluVXRpbHNNb2NrLnNpbXVsYXRlVHJhbnNhY3Rpb25Bc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoKTtcclxuICAgICAgICAgICAgY29uc3QgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayA9IG1vY2soUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKTtcclxuICAgICAgICAgICAgd2hlbihyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMCxcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UoYmxvY2tjaGFpblV0aWxzTW9jayksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2spLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3Qgc3VibWl0UGFyYW1zOiBTdWJtaXRSZnFtU2lnbmVkUXVvdGVXaXRoQXBwcm92YWxQYXJhbXM8RXhlY3V0ZU1ldGFUcmFuc2FjdGlvbkVpcDcxMkNvbnRleHQ+ID0ge1xyXG4gICAgICAgICAgICAgICAgdHJhZGU6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBHYXNsZXNzVHlwZXMuT3RjT3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IG90Y09yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogZXRoU2lnbkhhc2hXaXRoS2V5KG90Y09yZGVyLmdldEhhc2goKSwgdGFrZXJQcml2YXRlS2V5KSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhcHByb3ZhbDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IEdhc2xlc3NBcHByb3ZhbFR5cGVzLkV4ZWN1dGVNZXRhVHJhbnNhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZWlwNzEyOiBlaXA3MTJDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogZWlwNzEyU2lnbkhhc2hXaXRoS2V5KG90Y09yZGVyLmdldEhhc2goKSwgdGFrZXJQcml2YXRlS2V5KSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBraW5kOiBHYXNsZXNzVHlwZXMuT3RjT3JkZXIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2Uuc3VibWl0VGFrZXJTaWduZWRPdGNPcmRlcldpdGhBcHByb3ZhbEFzeW5jKHN1Ym1pdFBhcmFtcyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQudHlwZSkudG8uZXF1YWwoJ290YycpO1xyXG4gICAgICAgICAgICB2ZXJpZnkoYmxvY2tjaGFpblV0aWxzTW9jay5nZXRNaW5PZkJhbGFuY2VzQW5kQWxsb3dhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS5uZXZlcigpO1xyXG4gICAgICAgICAgICB2ZXJpZnkoZGJVdGlsc01vY2sud3JpdGVWMkpvYkFzeW5jKGFueXRoaW5nKCkpKS5vbmNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzYXZlIGpvYiB3aXRoIHBlcm1pdCBwYXJhbXMgdG8gREInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRha2VyUHJpdmF0ZUtleSA9ICcweGUxM2FlOWZhMDE2NmI1MDFhMmFiNTBlN2I2ZmJiNjU4MTlhZGQ3Mzc2ZGE5YjRmYmIzYmYzYWU0OGNkOWRjZDMnO1xyXG4gICAgICAgICAgICBjb25zdCB0YWtlckFkZHJlc3MgPSAnMHg0ZTIxNDVlREMyOWYyN0UxMjYxNTRCOWM3MTZEZjcwYzQyOUMyOTFCJztcclxuICAgICAgICAgICAgY29uc3QgZXhwaXJ5ID0gbmV3IEJpZ051bWJlcihEYXRlLm5vdygpICsgMV8wMDBfMDAwKS5kaXZpZGVkQnkoT05FX1NFQ09ORF9NUykuZGVjaW1hbFBsYWNlcygwKTtcclxuICAgICAgICAgICAgY29uc3Qgb3RjT3JkZXIgPSBuZXcgT3RjT3JkZXIoe1xyXG4gICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIG1ha2VyOiAnMHgyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweDMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NCcsXHJcbiAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoZXhwaXJ5LCBaRVJPLCBleHBpcnkpLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVpcDcxMkNvbnRleHQ6IFBlcm1pdEVpcDcxMkNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIEVJUDcxMkRvbWFpbjogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICduYW1lJywgdHlwZTogJ3N0cmluZycgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAndmVyc2lvbicsIHR5cGU6ICdzdHJpbmcnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ3ZlcmlmeWluZ0NvbnRyYWN0JywgdHlwZTogJ2FkZHJlc3MnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ3NhbHQnLCB0eXBlOiAnYnl0ZXMzMicgfSxcclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIFBlcm1pdDogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdvd25lcicsIHR5cGU6ICdhZGRyZXNzJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICdzcGVuZGVyJywgdHlwZTogJ2FkZHJlc3MnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ3ZhbHVlJywgdHlwZTogJ3VpbnQyNTYnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ25vbmNlJywgdHlwZTogJ3VpbnQyNTYnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogJ2RlYWRsaW5lJywgdHlwZTogJ3VpbnQyNTYnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBwcmltYXJ5VHlwZTogJ1Blcm1pdCcsXHJcbiAgICAgICAgICAgICAgICBkb21haW46IHt9LFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYWRsaW5lOiAnMTIzNDUnLFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlbmRlcjogJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcweGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYnLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiBleHBpcnkudG9OdW1iZXIoKSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYySm9ic1dpdGhTdGF0dXNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYyUXVvdGVCeU9yZGVySGFzaEFzeW5jKG90Y09yZGVyLmdldEhhc2goKSkpLnRoZW5SZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiBvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXIob3RjT3JkZXIpLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRha2VyU3BlY2lmaWVkU2lkZTogbnVsbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrY2hhaW5VdGlsc01vY2sgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oYmxvY2tjaGFpblV0aWxzTW9jay5nZXRUb2tlbkJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtuZXcgQmlnTnVtYmVyKDEwMDAwKV0pO1xyXG4gICAgICAgICAgICB3aGVuKGJsb2NrY2hhaW5VdGlsc01vY2suZ2VuZXJhdGVBcHByb3ZhbENhbGxkYXRhQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgJzB4dmFsaWRjYWxsZGF0YScsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHdoZW4oYmxvY2tjaGFpblV0aWxzTW9jay5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgxMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2sgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgIHdoZW4ocmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jay5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDAsXHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShkYlV0aWxzTW9jayksXHJcbiAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKGJsb2NrY2hhaW5VdGlsc01vY2spLFxyXG4gICAgICAgICAgICAgICAgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlOiBpbnN0YW5jZShyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Ym1pdFBhcmFtczogU3VibWl0UmZxbVNpZ25lZFF1b3RlV2l0aEFwcHJvdmFsUGFyYW1zPFBlcm1pdEVpcDcxMkNvbnRleHQ+ID0ge1xyXG4gICAgICAgICAgICAgICAgdHJhZGU6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBHYXNsZXNzVHlwZXMuT3RjT3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IG90Y09yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogZXRoU2lnbkhhc2hXaXRoS2V5KG90Y09yZGVyLmdldEhhc2goKSwgdGFrZXJQcml2YXRlS2V5KSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhcHByb3ZhbDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IEdhc2xlc3NBcHByb3ZhbFR5cGVzLlBlcm1pdCxcclxuICAgICAgICAgICAgICAgICAgICBlaXA3MTI6IGVpcDcxMkNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlOiBlaXA3MTJTaWduSGFzaFdpdGhLZXkob3RjT3JkZXIuZ2V0SGFzaCgpLCB0YWtlclByaXZhdGVLZXkpLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGtpbmQ6IEdhc2xlc3NUeXBlcy5PdGNPcmRlcixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5zdWJtaXRUYWtlclNpZ25lZE90Y09yZGVyV2l0aEFwcHJvdmFsQXN5bmMoc3VibWl0UGFyYW1zKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC50eXBlKS50by5lcXVhbCgnb3RjJyk7XHJcbiAgICAgICAgICAgIHZlcmlmeShibG9ja2NoYWluVXRpbHNNb2NrLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLm5ldmVyKCk7XHJcbiAgICAgICAgICAgIHZlcmlmeShkYlV0aWxzTW9jay53cml0ZVYySm9iQXN5bmMoYW55dGhpbmcoKSkpLm9uY2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdmZXRjaEluZGljYXRpdmVRdW90ZUFzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgIGRlc2NyaWJlKCdzZWxscycsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCBmZXRjaCBpbmRpY2F0aXZlIHF1b3RlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJhY3RBZGRyZXNzZXMgPSBnZXRDb250cmFjdEFkZHJlc3Nlc0ZvckNoYWluT3JUaHJvdygxKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAxKSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBORVZFUl9FWFBJUkVTLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBNT0NLX01NX1VSSSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZVNlcnZlckNsaWVudE1vY2sgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4ocXVvdGVTZXJ2ZXJDbGllbnRNb2NrLmJhdGNoR2V0UHJpY2VWMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGUsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzZXJ2aWNlLmZldGNoSW5kaWNhdGl2ZVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoJ3JlcyBpcyBudWxsLCBidXQgbm90IGV4cGVjdGVkIHRvIGJlIG51bGwnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzLnNlbGxBbW91bnQudG9OdW1iZXIoKSkudG8uYmUuYXQubGVhc3QoMTAwKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMucHJpY2UudG9OdW1iZXIoKSkudG8uZXF1YWwoMS4wMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCByb3VuZCBwcmljZSB0byBzaXggZGVjaW1hbCBwbGFjZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGU6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDExMSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigzMzMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHF1b3RlU2VydmVyQ2xpZW50TW9jay5iYXRjaEdldFByaWNlVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTZXJ2ZXJDbGllbnQ6IGluc3RhbmNlKHF1b3RlU2VydmVyQ2xpZW50TW9jayksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAwLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc2VydmljZS5mZXRjaEluZGljYXRpdmVRdW90ZUFzeW5jKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yOiBNT0NLX0lOVEVHUkFUT1IsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbEFtb3VudDogbmV3IEJpZ051bWJlcigzMzMpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlcyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdyZXMgaXMgbnVsbCwgYnV0IG5vdCBleHBlY3RlZCB0byBiZSBudWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMucHJpY2UudG9OdW1iZXIoKSkudG8uZXF1YWwoMC4zMzMzMzMzKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIG9ubHkgcmV0dXJuIGFuIGluZGljYXRpdmUgcXVvdGUgdGhhdCBpcyAxMDAlIGZpbGxlZCB3aGVuIHNlbGxpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGUxOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcig1NSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcig1MCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBORVZFUl9FWFBJUkVTLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBNT0NLX01NX1VSSSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZTI6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwNSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHF1b3RlU2VydmVyQ2xpZW50TW9jay5iYXRjaEdldFByaWNlVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlMSxcclxuICAgICAgICAgICAgICAgICAgICBxdW90ZTIsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzZXJ2aWNlLmZldGNoSW5kaWNhdGl2ZVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoJ3JlcyBpcyBudWxsLCBidXQgbm90IGV4cGVjdGVkIHRvIGJlIG51bGwnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzLnNlbGxBbW91bnQudG9OdW1iZXIoKSkudG8uZXF1YWwoMTAwKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMucHJpY2UudG9OdW1iZXIoKSkudG8uZXF1YWwoMS4wNSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBpZiBubyBxdW90ZXMgYXJlIHZhbGlkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJhY3RBZGRyZXNzZXMgPSBnZXRDb250cmFjdEFkZHJlc3Nlc0ZvckNoYWluT3JUaHJvdygxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRpYWxGaWxsUXVvdGU6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDU1KSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDUwKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlU2VydmVyQ2xpZW50TW9jayA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihxdW90ZVNlcnZlckNsaWVudE1vY2suYmF0Y2hHZXRQcmljZVYyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsRmlsbFF1b3RlLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHsgcXVvdGVTZXJ2ZXJDbGllbnQ6IGluc3RhbmNlKHF1b3RlU2VydmVyQ2xpZW50TW9jaykgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc2VydmljZS5mZXRjaEluZGljYXRpdmVRdW90ZUFzeW5jKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yOiBNT0NLX0lOVEVHUkFUT1IsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzKS50by5lcXVhbChudWxsKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiB3ZSBtYXkgd2FudCB0byByZWludHJvZHVjZSB0aGlzIHRlc3QgdmVyeSBzb29uLiBIb3dldmVyLCBpZiBub3QgYWRkcmVzc2VkIGJ5IEp1bmUgMjAyMiwgcmVtb3ZlXHJcbiAgICAgICAgICAgIGl0LnNraXAoJ3Nob3VsZCByZXR1cm4gYW4gaW5kaWNhdGl2ZSBxdW90ZSB0aGF0IGNhbiBmaWxsIG1vcmUgdGhhbiAxMDAlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJhY3RBZGRyZXNzZXMgPSBnZXRDb250cmFjdEFkZHJlc3Nlc0ZvckNoYWluT3JUaHJvdygxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcnNlUXVvdGU6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmV0dGVyUXVvdGU6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXIyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigyMjIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMjAwKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlU2VydmVyQ2xpZW50TW9jayA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihxdW90ZVNlcnZlckNsaWVudE1vY2suYmF0Y2hHZXRQcmljZVYyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICB3b3JzZVF1b3RlLFxyXG4gICAgICAgICAgICAgICAgICAgIGJldHRlclF1b3RlLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHsgcXVvdGVTZXJ2ZXJDbGllbnQ6IGluc3RhbmNlKHF1b3RlU2VydmVyQ2xpZW50TW9jaykgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc2VydmljZS5mZXRjaEluZGljYXRpdmVRdW90ZUFzeW5jKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yOiBNT0NLX0lOVEVHUkFUT1IsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlcyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdyZXMgaXMgbnVsbCwgYnV0IG5vdCBleHBlY3RlZCB0byBiZSBudWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5zZWxsQW1vdW50LnRvTnVtYmVyKCkpLnRvLmVxdWFsKDIwMCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzLnByaWNlLnRvTnVtYmVyKCkpLnRvLmVxdWFsKDEuMTEpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgaWdub3JlIHF1b3RlcyB0aGF0IGFyZSBmb3IgdGhlIHdyb25nIHBhaXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd29yc2VRdW90ZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAxKSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBORVZFUl9FWFBJUkVTLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBNT0NLX01NX1VSSSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiZXR0ZXJRdW90ZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcjInLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweDExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDExMSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHF1b3RlU2VydmVyQ2xpZW50TW9jay5iYXRjaEdldFByaWNlVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcnNlUXVvdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgYmV0dGVyUXVvdGUsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzZXJ2aWNlLmZldGNoSW5kaWNhdGl2ZVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoJ3JlcyBpcyBudWxsLCBidXQgbm90IGV4cGVjdGVkIHRvIGJlIG51bGwnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzLnNlbGxBbW91bnQudG9OdW1iZXIoKSkudG8uZXF1YWwoMTAwKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMucHJpY2UudG9OdW1iZXIoKSkudG8uZXF1YWwoMS4wMSk7IC8vIFdvcnNlIHByaWNpbmcgd2lucyBiZWNhdXNlIGJldHRlciBwcmljaW5nIGlzIGZvciB3cm9uZyBwYWlyXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCBpZ25vcmUgcXVvdGVzIHRoYXQgZXhwaXJlIHdpdGhpbiAzIG1pbnV0ZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5PbmVNaW51dGUgPSAoRGF0ZS5ub3coKSArIE9ORV9NSU5VVEVfTVMpIC8gT05FX1NFQ09ORF9NUztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZXNTb29uOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMTEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoaW5PbmVNaW51dGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBNT0NLX01NX1VSSSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXZlckV4cGlyZXM6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXIyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlU2VydmVyQ2xpZW50TW9jayA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihxdW90ZVNlcnZlckNsaWVudE1vY2suYmF0Y2hHZXRQcmljZVYyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICBleHBpcmVzU29vbixcclxuICAgICAgICAgICAgICAgICAgICBuZXZlckV4cGlyZXMsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzZXJ2aWNlLmZldGNoSW5kaWNhdGl2ZVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoJ3JlcyBpcyBudWxsLCBidXQgbm90IGV4cGVjdGVkIHRvIGJlIG51bGwnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzLnNlbGxBbW91bnQudG9OdW1iZXIoKSkudG8uZXF1YWwoMTAwKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMucHJpY2UudG9OdW1iZXIoKSkudG8uZXF1YWwoMS4wMSk7IC8vIFdvcnNlIHByaWNpbmcgd2lucyBiZWNhdXNlIGJldHRlciBwcmljaW5nIGV4cGlyZXMgdG9vIHNvb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRlc2NyaWJlKCdidXlzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIGZldGNoIGluZGljYXRpdmUgcXVvdGUgd2hlbiBidXlpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGU6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcig4MCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBORVZFUl9FWFBJUkVTLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBNT0NLX01NX1VSSSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZVNlcnZlckNsaWVudE1vY2sgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4ocXVvdGVTZXJ2ZXJDbGllbnRNb2NrLmJhdGNoR2V0UHJpY2VWMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGUsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzZXJ2aWNlLmZldGNoSW5kaWNhdGl2ZVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBidXlBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgncmVzIGlzIG51bGwsIGJ1dCBub3QgZXhwZWN0ZWQgdG8gYmUgbnVsbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYnV5QW1vdW50LnRvTnVtYmVyKCkpLnRvLmJlLmF0LmxlYXN0KDEwMCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzLnByaWNlLnRvTnVtYmVyKCkpLnRvLmVxdWFsKDAuOCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCBvbmx5IHJldHVybiBhbiBpbmRpY2F0aXZlIHF1b3RlIHRoYXQgaXMgMTAwJSBmaWxsZWQgd2hlbiBidXlpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3ZlckZpbGxRdW90ZUdvb2RQcmljaW5nOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxNjApLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoODApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFydGlhbEZpbGxRdW90ZUdvb2RQcmljaW5nOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyMicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoODApLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoNDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZnVsbFF1b3RlOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyMycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDgwKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlU2VydmVyQ2xpZW50TW9jayA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihxdW90ZVNlcnZlckNsaWVudE1vY2suYmF0Y2hHZXRQcmljZVYyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyRmlsbFF1b3RlR29vZFByaWNpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbEZpbGxRdW90ZUdvb2RQcmljaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bGxRdW90ZSxcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7IHF1b3RlU2VydmVyQ2xpZW50OiBpbnN0YW5jZShxdW90ZVNlcnZlckNsaWVudE1vY2spIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlcnZpY2UuZmV0Y2hJbmRpY2F0aXZlUXVvdGVBc3luYyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcjogTU9DS19JTlRFR1JBVE9SLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eUFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlcyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdyZXMgaXMgbnVsbCwgYnV0IG5vdCBleHBlY3RlZCB0byBiZSBudWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5idXlBbW91bnQudG9OdW1iZXIoKSkudG8uZXF1YWwoMTAwKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMucHJpY2UudG9OdW1iZXIoKSkudG8uZXF1YWwoMC44KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZmV0Y2hGaXJtUXVvdGVBc3luYycsICgpID0+IHtcclxuICAgICAgICBjb25zdCB0YWtlckFkZHJlc3MgPSAnMHhmMDAzQTk0MThERTI2MjBmOTM1MTgxMjU5QzBGYTE1OTVFODcxMjM0JztcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB1c2UgYW4gYWZmaWxpYXRlIGFkZHJlc3MgcHJvdmlkZWQgaW4gdGhlIHF1b3RlIHJlcXVlc3QgZXZlbiBpZiBvbmUgaXMgcHJlc2VudCBpbiBjb25maWd1cmF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gbmV3IEJpZ051bWJlcigxMDApO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgICAgICAgICBjb25zdCBxdW90ZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgbWFrZXI6ICcweDY0QjkyZjVkOUU1YjVmMjA2MDNkZTg0OTgzODVjM2EzZDMwNDhFMjInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDEpLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYWNoZUNsaWVudE1vY2sgPSBtb2NrKENhY2hlQ2xpZW50KTtcclxuICAgICAgICAgICAgd2hlbihjYWNoZUNsaWVudE1vY2suZ2V0TmV4dE90Y09yZGVyQnVja2V0QXN5bmMoMTMzNykpLnRoZW5SZXNvbHZlKDQyMCk7XHJcbiAgICAgICAgICAgIHdoZW4oY2FjaGVDbGllbnRNb2NrLmdldE1ha2Vyc0luQ29vbGRvd25Gb3JQYWlyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIE1vY2sgb3V0IHRoZSBkYlV0aWxzXHJcbiAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2sud3JpdGVWMlF1b3RlQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiVXRpbHMgPSBpbnN0YW5jZShkYlV0aWxzTW9jayk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBxdW90ZVNlcnZlckNsaWVudE1vY2sgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgd2hlbihxdW90ZVNlcnZlckNsaWVudE1vY2suYmF0Y2hHZXRQcmljZVYyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtxdW90ZV0pO1xyXG4gICAgICAgICAgICBjb25zdCByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2suZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTUwKSxcclxuICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIHF1b3RlU2VydmVyQ2xpZW50OiBpbnN0YW5jZShxdW90ZVNlcnZlckNsaWVudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgZGJVdGlscyxcclxuICAgICAgICAgICAgICAgIGNhY2hlQ2xpZW50OiBpbnN0YW5jZShjYWNoZUNsaWVudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlOiBpbnN0YW5jZShyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCBzZXJ2aWNlLmZldGNoRmlybVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJzB4YWZmaWxpYXRlQWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICBidXlUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICBidXlUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgIGNoZWNrQXBwcm92YWw6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcjogeyAuLi5NT0NLX0lOVEVHUkFUT1IsIGFmZmlsaWF0ZUFkZHJlc3M6ICcweGFmZmlsaWF0ZUFkZHJlc3NOb3RUaGlzT25lJyB9LFxyXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudCxcclxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIHNlbGxUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB3cml0ZVYyUXVvdGVBcmdzID0gY2FwdHVyZShkYlV0aWxzTW9jay53cml0ZVYyUXVvdGVBc3luYykubGFzdCgpO1xyXG4gICAgICAgICAgICBleHBlY3Qod3JpdGVWMlF1b3RlQXJnc1swXVsnYWZmaWxpYXRlQWRkcmVzcyddKS50by5lcXVhbCgnMHhhZmZpbGlhdGVBZGRyZXNzJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgdXNlIGEgY29uZmlndXJlZCBhZmZpbGlhdGUgYWRkcmVzcyB3aGVuIG5vbmUgaXMgcHJvdmlkZSBpbiB0aGUgcXVvdGUgcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2VsbEFtb3VudCA9IG5ldyBCaWdOdW1iZXIoMTAwKTtcclxuICAgICAgICAgICAgY29uc3QgY29udHJhY3RBZGRyZXNzZXMgPSBnZXRDb250cmFjdEFkZHJlc3Nlc0ZvckNoYWluT3JUaHJvdygxKTtcclxuICAgICAgICAgICAgY29uc3QgcXVvdGU6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgIG1ha2VyOiAnMHg2NEI5MmY1ZDlFNWI1ZjIwNjAzZGU4NDk4Mzg1YzNhM2QzMDQ4RTIyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAxKSxcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBORVZFUl9FWFBJUkVTLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FjaGVDbGllbnRNb2NrID0gbW9jayhDYWNoZUNsaWVudCk7XHJcbiAgICAgICAgICAgIHdoZW4oY2FjaGVDbGllbnRNb2NrLmdldE5leHRPdGNPcmRlckJ1Y2tldEFzeW5jKDEzMzcpKS50aGVuUmVzb2x2ZSg0MjApO1xyXG4gICAgICAgICAgICB3aGVuKGNhY2hlQ2xpZW50TW9jay5nZXRNYWtlcnNJbkNvb2xkb3duRm9yUGFpckFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXSk7XHJcblxyXG4gICAgICAgICAgICAvLyBNb2NrIG91dCB0aGUgZGJVdGlsc1xyXG4gICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLndyaXRlVjJRdW90ZUFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBkYlV0aWxzID0gaW5zdGFuY2UoZGJVdGlsc01vY2spO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgIHdoZW4ocXVvdGVTZXJ2ZXJDbGllbnRNb2NrLmJhdGNoR2V0UHJpY2VWMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbcXVvdGVdKTtcclxuICAgICAgICAgICAgY29uc3QgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayA9IG1vY2soUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKTtcclxuICAgICAgICAgICAgd2hlbihyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDE1MCksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgIGRiVXRpbHMsXHJcbiAgICAgICAgICAgICAgICBjYWNoZUNsaWVudDogaW5zdGFuY2UoY2FjaGVDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UocmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgc2VydmljZS5mZXRjaEZpcm1RdW90ZUFzeW5jKHtcclxuICAgICAgICAgICAgICAgIGJ1eVRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgIGJ1eVRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgY2hlY2tBcHByb3ZhbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yOiB7IC4uLk1PQ0tfSU5URUdSQVRPUiwgYWZmaWxpYXRlQWRkcmVzczogJzB4YWZmaWxpYXRlQWRkcmVzcycgfSxcclxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnQsXHJcbiAgICAgICAgICAgICAgICBzZWxsVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBzZWxsVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgd3JpdGVWMlF1b3RlQXJncyA9IGNhcHR1cmUoZGJVdGlsc01vY2sud3JpdGVWMlF1b3RlQXN5bmMpLmxhc3QoKTtcclxuICAgICAgICAgICAgZXhwZWN0KHdyaXRlVjJRdW90ZUFyZ3NbMF1bJ2FmZmlsaWF0ZUFkZHJlc3MnXSkudG8uZXF1YWwoJzB4YWZmaWxpYXRlQWRkcmVzcycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkZXNjcmliZSgnc2VsbHMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgZmV0Y2ggYSBmaXJtIHF1b3RlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsbEFtb3VudCA9IG5ldyBCaWdOdW1iZXIoMTAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzc2VzID0gZ2V0Q29udHJhY3RBZGRyZXNzZXNGb3JDaGFpbk9yVGhyb3coMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHg2NEI5MmY1ZDlFNWI1ZjIwNjAzZGU4NDk4Mzg1YzNhM2QzMDQ4RTIyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUNsaWVudE1vY2sgPSBtb2NrKENhY2hlQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4oY2FjaGVDbGllbnRNb2NrLmdldE5leHRPdGNPcmRlckJ1Y2tldEFzeW5jKDEzMzcpKS50aGVuUmVzb2x2ZSg0MjApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihjYWNoZUNsaWVudE1vY2suZ2V0TWFrZXJzSW5Db29sZG93bkZvclBhaXJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1vY2sgb3V0IHRoZSBkYlV0aWxzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay53cml0ZVYyUXVvdGVBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHMgPSBpbnN0YW5jZShkYlV0aWxzTW9jayk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHF1b3RlU2VydmVyQ2xpZW50TW9jay5iYXRjaEdldFByaWNlVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxNTApLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTZXJ2ZXJDbGllbnQ6IGluc3RhbmNlKHF1b3RlU2VydmVyQ2xpZW50TW9jayksXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNsaWVudDogaW5zdGFuY2UoY2FjaGVDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2spLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBxdW90ZTogcmVzIH0gPSBhd2FpdCBzZXJ2aWNlLmZldGNoRmlybVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbEFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FwcHJvdmFsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMpLnRvLmV4aXN0OyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8udHlwZSkudG8uZXF1YWwoR2FzbGVzc1R5cGVzLk90Y09yZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5zZWxsQW1vdW50KS50by5lcXVhbChzZWxsQW1vdW50KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXM/LnByaWNlLnRvTnVtYmVyKCkpLnRvLmVxdWFsKDEuMDEpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8ub3JkZXJIYXNoKS50by5tYXRjaCgvXjB4WzAtOWEtZkEtRl0rLyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogd2UgbWF5IHdhbnQgdG8gcmVpbnRyb2R1Y2UgdGhpcyB0ZXN0IHZlcnkgc29vbi4gSG93ZXZlciwgaWYgbm90IGFkZHJlc3NlZCBieSBKdW5lIDIwMjIsIHJlbW92ZVxyXG4gICAgICAgICAgICBpdC5za2lwKCdzaG91bGQgc2NhbGUgYSBmaXJtIHF1b3RlIGlmIE1NIHJldHVybnMgdG9vIG11Y2gnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gbmV3IEJpZ051bWJlcigxMDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJhY3RBZGRyZXNzZXMgPSBnZXRDb250cmFjdEFkZHJlc3Nlc0ZvckNoYWluT3JUaHJvdygxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweDY0QjkyZjVkOUU1YjVmMjA2MDNkZTg0OTgzODVjM2EzZDMwNDhFMjInLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDIwMiksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigyMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQ2xpZW50TW9jayA9IG1vY2soQ2FjaGVDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihjYWNoZUNsaWVudE1vY2suZ2V0TmV4dE90Y09yZGVyQnVja2V0QXN5bmMoMTMzNykpLnRoZW5SZXNvbHZlKDQyMCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGNhY2hlQ2xpZW50TW9jay5nZXRNYWtlcnNJbkNvb2xkb3duRm9yUGFpckFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTW9jayBvdXQgdGhlIGRiVXRpbHNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLndyaXRlVjJRdW90ZUFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlscyA9IGluc3RhbmNlKGRiVXRpbHNNb2NrKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZVNlcnZlckNsaWVudE1vY2sgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4ocXVvdGVTZXJ2ZXJDbGllbnRNb2NrLmJhdGNoR2V0UHJpY2VWMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGUsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2sgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2suZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDE1MCksXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ2xpZW50OiBpbnN0YW5jZShjYWNoZUNsaWVudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UocmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHF1b3RlOiByZXMgfSA9IGF3YWl0IHNlcnZpY2UuZmV0Y2hGaXJtUXVvdGVBc3luYyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcjogTU9DS19JTlRFR1JBVE9SLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsQW1vdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrQXBwcm92YWw6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcykudG8uZXhpc3Q7IC8vIHRzbGludDpkaXNhYmxlLWxpbmU6IG5vLXVudXNlZC1leHByZXNzaW9uXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy50eXBlKS50by5lcXVhbChHYXNsZXNzVHlwZXMuT3RjT3JkZXIpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8uc2VsbEFtb3VudCkudG8uZXF1YWwoc2VsbEFtb3VudCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5idXlBbW91bnQudG9OdW1iZXIoKSkudG8uZXF1YWwoMTAxKTsgLy8gcmVzdWx0IGlzIHNjYWxlZFxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8ucHJpY2UudG9OdW1iZXIoKSkudG8uZXF1YWwoMS4wMSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5vcmRlckhhc2gpLnRvLm1hdGNoKC9eMHhbMC05YS1mQS1GXSsvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJvdW5kIHByaWNlIHRvIHNpeCBkZWNpbWFsIHBsYWNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzc2VzID0gZ2V0Q29udHJhY3RBZGRyZXNzZXNGb3JDaGFpbk9yVGhyb3coMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHg2NEI5MmY1ZDlFNWI1ZjIwNjAzZGU4NDk4Mzg1YzNhM2QzMDQ4RTIyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMTEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMzMzKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUNsaWVudE1vY2sgPSBtb2NrKENhY2hlQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4oY2FjaGVDbGllbnRNb2NrLmdldE5leHRPdGNPcmRlckJ1Y2tldEFzeW5jKDEzMzcpKS50aGVuUmVzb2x2ZSg0MjApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihjYWNoZUNsaWVudE1vY2suZ2V0TWFrZXJzSW5Db29sZG93bkZvclBhaXJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1vY2sgb3V0IHRoZSBkYlV0aWxzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay53cml0ZVYyUXVvdGVBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHMgPSBpbnN0YW5jZShkYlV0aWxzTW9jayk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHF1b3RlU2VydmVyQ2xpZW50TW9jay5iYXRjaEdldFByaWNlVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxNTApLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTZXJ2ZXJDbGllbnQ6IGluc3RhbmNlKHF1b3RlU2VydmVyQ2xpZW50TW9jayksXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNsaWVudDogaW5zdGFuY2UoY2FjaGVDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2spLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBxdW90ZTogcmVzIH0gPSBhd2FpdCBzZXJ2aWNlLmZldGNoRmlybVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbEFtb3VudDogbmV3IEJpZ051bWJlcigzMzMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrQXBwcm92YWw6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlcyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdyZXMgaXMgbnVsbCwgYnV0IG5vdCBleHBlY3RlZCB0byBiZSBudWxsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMucHJpY2UudG9OdW1iZXIoKSkudG8uZXF1YWwoMC4zMzMzMzMzKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIG5vdCBjYWxsIGBnZXRHYXNsZXNzQXBwcm92YWxSZXNwb25zZUFzeW5jYCBpZiBjaGVja0FwcHJvdmFsIGlzIGZhbHNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsbEFtb3VudCA9IG5ldyBCaWdOdW1iZXIoMTAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzc2VzID0gZ2V0Q29udHJhY3RBZGRyZXNzZXNGb3JDaGFpbk9yVGhyb3coMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHg2NEI5MmY1ZDlFNWI1ZjIwNjAzZGU4NDk4Mzg1YzNhM2QzMDQ4RTIyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUNsaWVudE1vY2sgPSBtb2NrKENhY2hlQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4oY2FjaGVDbGllbnRNb2NrLmdldE5leHRPdGNPcmRlckJ1Y2tldEFzeW5jKDEzMzcpKS50aGVuUmVzb2x2ZSg0MjApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihjYWNoZUNsaWVudE1vY2suZ2V0TWFrZXJzSW5Db29sZG93bkZvclBhaXJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1vY2sgb3V0IHRoZSBkYlV0aWxzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay53cml0ZVYyUXVvdGVBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHMgPSBpbnN0YW5jZShkYlV0aWxzTW9jayk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHF1b3RlU2VydmVyQ2xpZW50TW9jay5iYXRjaEdldFByaWNlVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxNTApLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTZXJ2ZXJDbGllbnQ6IGluc3RhbmNlKHF1b3RlU2VydmVyQ2xpZW50TW9jayksXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNsaWVudDogaW5zdGFuY2UoY2FjaGVDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2spLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGllZFNlcnZpY2UgPSBzcHkoc2VydmljZSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHNwaWVkU2VydmljZS5nZXRHYXNsZXNzQXBwcm92YWxSZXNwb25zZUFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuVGhyb3coXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEVycm9yKCdgZ2V0R2FzbGVzc0FwcHJvdmFsUmVzcG9uc2VBc3luY2Agc2hvdWxkIG5vdCBiZSBjYWxsZWQnKSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBxdW90ZTogcmVzIH0gPSBhd2FpdCBzZXJ2aWNlLmZldGNoRmlybVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbEFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FwcHJvdmFsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMpLnRvLmV4aXN0OyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8udHlwZSkudG8uZXF1YWwoR2FzbGVzc1R5cGVzLk90Y09yZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5zZWxsQW1vdW50KS50by5lcXVhbChzZWxsQW1vdW50KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXM/LnByaWNlLnRvTnVtYmVyKCkpLnRvLmVxdWFsKDEuMDEpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8ub3JkZXJIYXNoKS50by5tYXRjaCgvXjB4WzAtOWEtZkEtRl0rLyk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5hcHByb3ZhbCkudG8uZXF1YWwodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgY29ycmVjdCBhcHByb3ZhbCBpZiBjaGVja0FwcHJvdmFsIGlzIHRydWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxsQW1vdW50ID0gbmV3IEJpZ051bWJlcigxMDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJhY3RBZGRyZXNzZXMgPSBnZXRDb250cmFjdEFkZHJlc3Nlc0ZvckNoYWluT3JUaHJvdygxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweDY0QjkyZjVkOUU1YjVmMjA2MDNkZTg0OTgzODVjM2EzZDMwNDhFMjInLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQ2xpZW50TW9jayA9IG1vY2soQ2FjaGVDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihjYWNoZUNsaWVudE1vY2suZ2V0TmV4dE90Y09yZGVyQnVja2V0QXN5bmMoMTMzNykpLnRoZW5SZXNvbHZlKDQyMCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGNhY2hlQ2xpZW50TW9jay5nZXRNYWtlcnNJbkNvb2xkb3duRm9yUGFpckFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTW9jayBvdXQgdGhlIGRiVXRpbHNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLndyaXRlVjJRdW90ZUFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlscyA9IGluc3RhbmNlKGRiVXRpbHNNb2NrKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZVNlcnZlckNsaWVudE1vY2sgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4ocXVvdGVTZXJ2ZXJDbGllbnRNb2NrLmJhdGNoR2V0UHJpY2VWMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGUsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2sgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2suZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDE1MCksXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ2xpZW50OiBpbnN0YW5jZShjYWNoZUNsaWVudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UocmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsOiBBcHByb3ZhbFJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNHYXNsZXNzQXZhaWxhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLmtpbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgZWlwNzEyOiBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTC5laXA3MTIsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BpZWRTZXJ2aWNlID0gc3B5KHNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihzcGllZFNlcnZpY2UuZ2V0R2FzbGVzc0FwcHJvdmFsUmVzcG9uc2VBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcXVvdGU6IHJlcyB9ID0gYXdhaXQgc2VydmljZS5mZXRjaEZpcm1RdW90ZUFzeW5jKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yOiBNT0NLX0lOVEVHUkFUT1IsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxBbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tBcHByb3ZhbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMpLnRvLmV4aXN0OyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8udHlwZSkudG8uZXF1YWwoR2FzbGVzc1R5cGVzLk90Y09yZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5zZWxsQW1vdW50KS50by5lcXVhbChzZWxsQW1vdW50KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXM/LnByaWNlLnRvTnVtYmVyKCkpLnRvLmVxdWFsKDEuMDEpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8ub3JkZXJIYXNoKS50by5tYXRjaCgvXjB4WzAtOWEtZkEtRl0rLyk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5hcHByb3ZhbCkudG8uZXFsKGFwcHJvdmFsKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRlc2NyaWJlKCdidXlzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIGZldGNoIGEgZmlybSBxdW90ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1eUFtb3VudCA9IG5ldyBCaWdOdW1iZXIoMTAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzc2VzID0gZ2V0Q29udHJhY3RBZGRyZXNzZXNGb3JDaGFpbk9yVGhyb3coMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZTogSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHg2NEI5MmY1ZDlFNWI1ZjIwNjAzZGU4NDk4Mzg1YzNhM2QzMDQ4RTIyJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy56cnhUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoODApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogTU9DS19NTV9VUkksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlQ2xpZW50TW9jayA9IG1vY2soQ2FjaGVDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihjYWNoZUNsaWVudE1vY2suZ2V0TmV4dE90Y09yZGVyQnVja2V0QXN5bmMoMTMzNykpLnRoZW5SZXNvbHZlKDQyMCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGNhY2hlQ2xpZW50TW9jay5nZXRNYWtlcnNJbkNvb2xkb3duRm9yUGFpckFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTW9jayBvdXQgdGhlIGRiVXRpbHNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLndyaXRlVjJRdW90ZUFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlscyA9IGluc3RhbmNlKGRiVXRpbHNNb2NrKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZVNlcnZlckNsaWVudE1vY2sgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4ocXVvdGVTZXJ2ZXJDbGllbnRNb2NrLmJhdGNoR2V0UHJpY2VWMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGUsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2sgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2suZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDE1MCksXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UocXVvdGVTZXJ2ZXJDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ2xpZW50OiBpbnN0YW5jZShjYWNoZUNsaWVudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UocmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlTW9jayksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHF1b3RlOiByZXMgfSA9IGF3YWl0IHNlcnZpY2UuZmV0Y2hGaXJtUXVvdGVBc3luYyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcjogTU9DS19JTlRFR1JBVE9SLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuOiBjb250cmFjdEFkZHJlc3Nlcy5ldGhlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBidXlBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGVja0FwcHJvdmFsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXMpLnRvLmV4aXN0OyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8udHlwZSkudG8uZXF1YWwoR2FzbGVzc1R5cGVzLk90Y09yZGVyKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXM/LmJ1eUFtb3VudC50b051bWJlcigpKS50by5lcXVhbChidXlBbW91bnQudG9OdW1iZXIoKSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5wcmljZS50b051bWJlcigpKS50by5lcXVhbCgwLjgpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8ub3JkZXJIYXNoKS50by5tYXRjaCgvXjB4WzAtOWEtZkEtRl0rLyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogd2UgbWF5IHdhbnQgdG8gcmVpbnRyb2R1Y2UgdGhpcyB0ZXN0IHZlcnkgc29vbi4gSG93ZXZlciwgaWYgbm90IGFkZHJlc3NlZCBieSBKdW5lIDIwMjIsIHJlbW92ZVxyXG4gICAgICAgICAgICBpdC5za2lwKCdzaG91bGQgc2NhbGUgYSBmaXJtIHF1b3RlIHRvIGRlc2lyZWQgYnV5QW1vdW50IGlmIE1NIHJldHVybnMgdG9vIG11Y2gnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidXlBbW91bnQgPSBuZXcgQmlnTnVtYmVyKDEwMCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGU6IEluZGljYXRpdmVRdW90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4NjRCOTJmNWQ5RTViNWYyMDYwM2RlODQ5ODM4NWMzYTNkMzA0OEUyMicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTI1KSwgLy8gbW9yZSB0aGFuIGJ1eUFtb3VudFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IE5FVkVSX0VYUElSRVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUNsaWVudE1vY2sgPSBtb2NrKENhY2hlQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHdoZW4oY2FjaGVDbGllbnRNb2NrLmdldE5leHRPdGNPcmRlckJ1Y2tldEFzeW5jKDEzMzcpKS50aGVuUmVzb2x2ZSg0MjApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihjYWNoZUNsaWVudE1vY2suZ2V0TWFrZXJzSW5Db29sZG93bkZvclBhaXJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1vY2sgb3V0IHRoZSBkYlV0aWxzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay53cml0ZVYyUXVvdGVBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHMgPSBpbnN0YW5jZShkYlV0aWxzTW9jayk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKHF1b3RlU2VydmVyQ2xpZW50TW9jay5iYXRjaEdldFByaWNlVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihyZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2VNb2NrLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxNTApLFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVvdGVTZXJ2ZXJDbGllbnQ6IGluc3RhbmNlKHF1b3RlU2VydmVyQ2xpZW50TW9jayksXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNsaWVudDogaW5zdGFuY2UoY2FjaGVDbGllbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2spLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBxdW90ZTogcmVzIH0gPSBhd2FpdCBzZXJ2aWNlLmZldGNoRmlybVF1b3RlQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IE1PQ0tfSU5URUdSQVRPUixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5VG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLnpyeFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuZXRoZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBidXlUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgYnV5QW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tBcHByb3ZhbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzKS50by5leGlzdDsgLy8gdHNsaW50OmRpc2FibGUtbGluZTogbm8tdW51c2VkLWV4cHJlc3Npb25cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXM/LnR5cGUpLnRvLmVxdWFsKEdhc2xlc3NUeXBlcy5PdGNPcmRlcik7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5idXlBbW91bnQudG9OdW1iZXIoKSkudG8uZXF1YWwoYnV5QW1vdW50LnRvTnVtYmVyKCkpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlcz8uc2VsbEFtb3VudC50b051bWJlcigpKS50by5lcXVhbCg4MCk7IC8vIHJlc3VsdCBpcyBzY2FsZWRcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXM/LnByaWNlLnRvTnVtYmVyKCkpLnRvLmVxdWFsKDAuOCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzPy5vcmRlckhhc2gpLnRvLm1hdGNoKC9eMHhbMC05YS1mQS1GXSsvKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZ2V0R2FzbGVzc0FwcHJvdmFsUmVzcG9uc2VBc3luYycsICgpID0+IHtcclxuICAgICAgICBpdCgncmV0dXJucyBjb3JyZWN0IGFwcHJvdmFsIGZpZWxkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYXBwcm92YWwgPSBhd2FpdCBzZXJ2aWNlLmdldEdhc2xlc3NBcHByb3ZhbFJlc3BvbnNlQXN5bmMoXHJcbiAgICAgICAgICAgICAgICBNT0NLX1dPUktFUl9SRUdJU1RSWV9BRERSRVNTLFxyXG4gICAgICAgICAgICAgICAgTU9DS19UT0tFTixcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KGFwcHJvdmFsKS50by5lcWwoeyBpc1JlcXVpcmVkOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgICAgICAgIGFwcHJvdmFsID0gYXdhaXQgc2VydmljZS5nZXRHYXNsZXNzQXBwcm92YWxSZXNwb25zZUFzeW5jKFxyXG4gICAgICAgICAgICAgICAgTU9DS19XT1JLRVJfUkVHSVNUUllfQUREUkVTUyxcclxuICAgICAgICAgICAgICAgIE1PQ0tfVE9LRU4sXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChhcHByb3ZhbCkudG8uZXFsKHsgaXNSZXF1aXJlZDogdHJ1ZSwgaXNHYXNsZXNzQXZhaWxhYmxlOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgICAgICAgIGFwcHJvdmFsID0gYXdhaXQgc2VydmljZS5nZXRHYXNsZXNzQXBwcm92YWxSZXNwb25zZUFzeW5jKFxyXG4gICAgICAgICAgICAgICAgTU9DS19XT1JLRVJfUkVHSVNUUllfQUREUkVTUyxcclxuICAgICAgICAgICAgICAgIE1PQ0tfVE9LRU4sXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChhcHByb3ZhbCkudG8uZXFsKHtcclxuICAgICAgICAgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpc0dhc2xlc3NBdmFpbGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTC5raW5kLFxyXG4gICAgICAgICAgICAgICAgZWlwNzEyOiBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTC5laXA3MTIsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ3J1bkhlYWx0aENoZWNrQXN5bmMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3JldHVybnMgYWN0aXZlIHBhaXJzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRSZnFtV29ya2VySGVhcnRiZWF0c0FzeW5jKDEzMzcpKS50aGVuUmVzb2x2ZShbXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFNYWtlck1hbmFnZXJNb2NrID0gbW9jayhSZnFNYWtlck1hbmFnZXIpO1xyXG4gICAgICAgICAgICB3aGVuKHJmcU1ha2VyTWFuYWdlck1vY2suZ2V0UmZxbVYyTWFrZXJPZmZlcmluZ3MoKSkudGhlblJldHVybih7XHJcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9tb2NrLXJmcW0xLmNsdWInOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgWycweDg3MWRkN2MyYjRiMjVlMWFhMTg3MjhlOWQ1ZjJhZjRjNGU0MzFmNWMnLCAnMHgwYjFiYTBhZjgzMmQ3YzA1ZmQ2NDE2MWUwZGI3OGU4NTk3OGU4MDgyJ10sXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spLFxyXG4gICAgICAgICAgICAgICAgcmZxTWFrZXJNYW5hZ2VyOiBpbnN0YW5jZShyZnFNYWtlck1hbmFnZXJNb2NrKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnJ1bkhlYWx0aENoZWNrQXN5bmMoKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQucGFpcnMpLnRvLmhhdmUua2V5KFxyXG4gICAgICAgICAgICAgICAgJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4Mi0weDg3MWRkN2MyYjRiMjVlMWFhMTg3MjhlOWQ1ZjJhZjRjNGU0MzFmNWMnLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3QoXHJcbiAgICAgICAgICAgICAgICByZXN1bHQucGFpcnNbJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4Mi0weDg3MWRkN2MyYjRiMjVlMWFhMTg3MjhlOWQ1ZjJhZjRjNGU0MzFmNWMnXSxcclxuICAgICAgICAgICAgKS50by5lcXVhbChIZWFsdGhDaGVja1N0YXR1cy5PcGVyYXRpb25hbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnc3RhdHVzJywgKCkgPT4ge1xyXG4gICAgICAgIGRlc2NyaWJlKCd2MicsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXhwaXJ5ID0gbmV3IEJpZ051bWJlcihEYXRlLm5vdygpICsgMV8wMDBfMDAwKS5kaXZpZGVkQnkoT05FX1NFQ09ORF9NUykuZGVjaW1hbFBsYWNlcygwKTtcclxuICAgICAgICAgICAgY29uc3QgY2hhaW5JZCA9IDEzMzc7XHJcbiAgICAgICAgICAgIGNvbnN0IG90Y09yZGVyID0gbmV3IE90Y09yZGVyKHtcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgIHRha2VyOiAnMHgxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyOiAnMHgyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweDMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NCcsXHJcbiAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoZXhwaXJ5LCBaRVJPLCBleHBpcnkpLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZCxcclxuICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IEJBU0VfSk9CID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBjaGFpbklkLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICcnLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHgwMCcsXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlcjogb3RjT3JkZXJUb1N0b3JlZE90Y09yZGVyKG90Y09yZGVyKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhaWxlZCBmb3Igam9icyB0aGF0IGhhdmUgc2F0IGluIHF1ZXVlIHBhc3QgZXhwaXJ5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlZCA9IG5ldyBCaWdOdW1iZXIoRGF0ZS5ub3coKSAtIDEwMDAwKS5kaXZpZGVkQnkoT05FX1NFQ09ORF9NUykuZGVjaW1hbFBsYWNlcygwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9sZEpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoeyAuLi5CQVNFX0pPQiwgZXhwaXJ5OiBleHBpcmVkIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYySm9iQnlPcmRlckhhc2hBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUob2xkSm9iKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBkYlV0aWxzOiBpbnN0YW5jZShkYlV0aWxzTW9jaykgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iU3RhdHVzID0gYXdhaXQgc2VydmljZS5nZXRTdGF0dXNBc3luYygnMHgwMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqb2JTdGF0dXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBleGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYlN0YXR1cy5zdGF0dXMpLnRvLmVxdWFsKCdmYWlsZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzLnN0YXR1cyAhPT0gJ2ZhaWxlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBiZSBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2JTdGF0dXMudHJhbnNhY3Rpb25zKS50by5oYXZlLmxlbmd0aCgwKTsgLy8gdHNsaW50OmRpc2FibGUtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHBlbmRpbmcgZm9yIHVuZXhwaXJlZCBlbnF1ZXVlZCBqb2JzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Sm9iID0gQkFTRV9KT0I7IC8vIEJBU0VfSk9CIGhhcyBhIHZhbGlkIGV4cGlyeVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYySm9iQnlPcmRlckhhc2hBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUobmV3Sm9iKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBkYlV0aWxzOiBpbnN0YW5jZShkYlV0aWxzTW9jaykgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iU3RhdHVzID0gYXdhaXQgc2VydmljZS5nZXRTdGF0dXNBc3luYygnMHgwMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqb2JTdGF0dXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBleGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYlN0YXR1cy5zdGF0dXMpLnRvLmVxdWFsKCdwZW5kaW5nJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gcGVuZGluZyBmb3Igam9icyBpbiBwcm9jZXNzaW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7IC4uLkJBU0VfSk9CLCBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ1Byb2Nlc3NpbmcgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJKb2JCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShqb2IpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2JTdGF0dXMgPSBhd2FpdCBzZXJ2aWNlLmdldFN0YXR1c0FzeW5jKCcweDAwJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGpvYlN0YXR1cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdTdGF0dXMgc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoam9iU3RhdHVzLnN0YXR1cykudG8uZXF1YWwoJ3BlbmRpbmcnKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBzdWJtaXR0ZWQgd2l0aCB0cmFuc2FjdGlvbiBzdWJtaXNzaW9ucyBmb3Igc3VibWl0dGVkIGpvYnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDEwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24yVGltZSA9IG5vdyArIDIwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLkJBU0VfSk9CLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VibWlzc2lvbjEgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHRyYW5zYWN0aW9uMVRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDAxJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VibWlzc2lvbjIgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHRyYW5zYWN0aW9uMlRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDAyJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMkpvYkJ5T3JkZXJIYXNoQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKGpvYik7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHNNb2NrLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbc3VibWlzc2lvbjEsIHN1Ym1pc3Npb24yXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHsgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYlN0YXR1cyA9IGF3YWl0IHNlcnZpY2UuZ2V0U3RhdHVzQXN5bmMoJzB4MDAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoJ1N0YXR1cyBzaG91bGQgZXhpc3QnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzLnN0YXR1cyAhPT0gJ3N1Ym1pdHRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBiZSBzdWJtaXR0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2JTdGF0dXMudHJhbnNhY3Rpb25zKS50by5oYXZlLmxlbmd0aCgyKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2JTdGF0dXMudHJhbnNhY3Rpb25zKS50by5kZWVwLmluY2x1ZGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6ICcweDAxJyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICt0cmFuc2FjdGlvbjFUaW1lLnZhbHVlT2YoKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYlN0YXR1cy50cmFuc2FjdGlvbnMpLnRvLmRlZXAuaW5jbHVkZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzaDogJzB4MDInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogK3RyYW5zYWN0aW9uMlRpbWUudmFsdWVPZigpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2VlZGVkIGZvciBhIHN1Y2Nlc3NmdWwgam9iLCB3aXRoIHRoZSBzdWNjZWVkZWQgam9iJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uMVRpbWUgPSBub3cgKyAxMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uMlRpbWUgPSBub3cgKyAyMDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5CQVNFX0pPQixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkVW5jb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJtaXNzaW9uMSA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhbnNhY3Rpb24xVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5Ecm9wcGVkQW5kUmVwbGFjZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Ym1pc3Npb24yID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSh0cmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZFVuY29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAxLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYySm9iQnlPcmRlckhhc2hBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoam9iKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlsc01vY2suZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFtzdWJtaXNzaW9uMSwgc3VibWlzc2lvbjJdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBkYlV0aWxzOiBpbnN0YW5jZShkYlV0aWxzTW9jaykgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iU3RhdHVzID0gYXdhaXQgc2VydmljZS5nZXRTdGF0dXNBc3luYygnMHgwMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqb2JTdGF0dXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBleGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqb2JTdGF0dXMuc3RhdHVzICE9PSAnc3VjY2VlZGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdTdGF0dXMgc2hvdWxkIGJlIHN1Y2NlZWRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYlN0YXR1cy50cmFuc2FjdGlvbnNbMF0pLnRvLmNvbnRhaW4oeyBoYXNoOiAnMHgwMicsIHRpbWVzdGFtcDogK3RyYW5zYWN0aW9uMlRpbWUudmFsdWVPZigpIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvbmZpcm1lZCBmb3IgYSBzdWNjZXNzZnVsIGNvbmZpcm1lZCBqb2InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDEwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24yVGltZSA9IG5vdyArIDIwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLkJBU0VfSk9CLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJtaXNzaW9uMSA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhbnNhY3Rpb24xVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5Ecm9wcGVkQW5kUmVwbGFjZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Ym1pc3Npb24yID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSh0cmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMkpvYkJ5T3JkZXJIYXNoQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKGpvYik7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHNNb2NrLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbc3VibWlzc2lvbjEsIHN1Ym1pc3Npb24yXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHsgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYlN0YXR1cyA9IGF3YWl0IHNlcnZpY2UuZ2V0U3RhdHVzQXN5bmMoJzB4MDAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoJ1N0YXR1cyBzaG91bGQgZXhpc3QnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoam9iU3RhdHVzLnN0YXR1cyAhPT0gJ2NvbmZpcm1lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBiZSBjb25maXJtZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2JTdGF0dXMudHJhbnNhY3Rpb25zWzBdKS50by5jb250YWluKHsgaGFzaDogJzB4MDInLCB0aW1lc3RhbXA6ICt0cmFuc2FjdGlvbjJUaW1lLnZhbHVlT2YoKSB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHRocm93IGlmIHRoZSBqb2IgaXMgc3VjY2Vzc2Z1bCBidXQgdGhlcmUgYXJlIG5vIHN1Y2Nlc3NmdWwgdHJhbnNhY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uMVRpbWUgPSBub3cgKyAxMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uMlRpbWUgPSBub3cgKyAyMDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5CQVNFX0pPQixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkVW5jb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJtaXNzaW9uMSA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhbnNhY3Rpb24xVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5Ecm9wcGVkQW5kUmVwbGFjZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Ym1pc3Npb24yID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSh0cmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlJldmVydGVkVW5jb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDEsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJKb2JCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShqb2IpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzTW9jay5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW3N1Ym1pc3Npb24xLCBzdWJtaXNzaW9uMl0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlcnZpY2UuZ2V0U3RhdHVzQXN5bmMoJzB4MDAnKTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ0V4cGVjdGVkIGV4YWN0bHkgb25lIHN1Y2Nlc3NmdWwgdHJhbnNhY3Rpb24gc3VibWlzc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgdGhyb3cgaWYgdGhlIGpvYiBpcyBzdWNjZXNzZnVsIGJ1dCB0aGVyZSBhcmUgbXVsdGlwbGUgc3VjY2Vzc2Z1bCB0cmFuc2FjdGlvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDEwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24yVGltZSA9IG5vdyArIDIwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLkJBU0VfSk9CLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRVbmNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1Ym1pc3Npb24xID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSh0cmFuc2FjdGlvbjFUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMScsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZFVuY29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJtaXNzaW9uMiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhbnNhY3Rpb24yVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDInLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRVbmNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMkpvYkJ5T3JkZXJIYXNoQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKGpvYik7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHNNb2NrLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbc3VibWlzc2lvbjEsIHN1Ym1pc3Npb24yXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHsgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VydmljZS5nZXRTdGF0dXNBc3luYygnMHgwMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignRXhwZWN0ZWQgZXhhY3RseSBvbmUgc3VjY2Vzc2Z1bCB0cmFuc2FjdGlvbiBzdWJtaXNzaW9uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VibWl0dGVkIHdpdGggYXBwcm92YWwgYW5kIHRyYWRlIHRyYW5zYWN0aW9uIHN1Ym1pc3Npb25zIGZvciBzdWJtaXR0ZWQgam9icycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFRyYW5zYWN0aW9uMVRpbWUgPSBub3cgKyAzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgNztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlVHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDEwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgMjA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uQkFTRV9KT0IsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWw6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxTdWJtaXNzaW9uMSA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoYXBwcm92YWxUcmFuc2FjdGlvbjFUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMScsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsU3VibWlzc2lvbjIgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGFwcHJvdmFsVHJhbnNhY3Rpb24yVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDInLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAxLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFkZVN1Ym1pc3Npb24xID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSh0cmFkZVRyYW5zYWN0aW9uMVRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDAzJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVTdWJtaXNzaW9uMiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhZGVUcmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDMsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJKb2JCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShqb2IpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzTW9jay5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW2FwcHJvdmFsU3VibWlzc2lvbjEsIGFwcHJvdmFsU3VibWlzc2lvbjJdKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlsc01vY2suZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFt0cmFkZVN1Ym1pc3Npb24xLCB0cmFkZVN1Ym1pc3Npb24yXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHsgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yZGVyU3RhdHVzID0gYXdhaXQgc2VydmljZS5nZXRTdGF0dXNBc3luYygnMHgwMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcmRlclN0YXR1cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdTdGF0dXMgc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9yZGVyU3RhdHVzLnN0YXR1cyAhPT0gJ3N1Ym1pdHRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBiZSBzdWJtaXR0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV4cGVjdChvcmRlclN0YXR1cy5hcHByb3ZhbFRyYW5zYWN0aW9ucykudG8uaGF2ZS5sZW5ndGgoMik7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMuYXBwcm92YWxUcmFuc2FjdGlvbnMpLnRvLmRlZXAuaW5jbHVkZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzaDogJzB4MDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogK2FwcHJvdmFsVHJhbnNhY3Rpb24xVGltZS52YWx1ZU9mKCksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChvcmRlclN0YXR1cy5hcHByb3ZhbFRyYW5zYWN0aW9ucykudG8uZGVlcC5pbmNsdWRlKHtcclxuICAgICAgICAgICAgICAgICAgICBoYXNoOiAnMHgwMicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiArYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lLnZhbHVlT2YoKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG9yZGVyU3RhdHVzLnRyYW5zYWN0aW9ucykudG8uaGF2ZS5sZW5ndGgoMik7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMudHJhbnNhY3Rpb25zKS50by5kZWVwLmluY2x1ZGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6ICcweDAzJyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICt0cmFkZVRyYW5zYWN0aW9uMVRpbWUudmFsdWVPZigpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMudHJhbnNhY3Rpb25zKS50by5kZWVwLmluY2x1ZGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6ICcweDA0JyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICt0cmFkZVRyYW5zYWN0aW9uMlRpbWUudmFsdWVPZigpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFpbGVkIHdpdGggYXBwcm92YWwgYW5kIHRyYWRlIHRyYW5zYWN0aW9uIHN1Ym1pc3Npb25zIGZvciBmYWlsZWQgam9icycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFRyYW5zYWN0aW9uMVRpbWUgPSBub3cgKyAzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgNztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlVHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDEwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgMjA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uQkFTRV9KT0IsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWw6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRFeHBpcmVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxTdWJtaXNzaW9uMSA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoYXBwcm92YWxUcmFuc2FjdGlvbjFUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMScsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsU3VibWlzc2lvbjIgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGFwcHJvdmFsVHJhbnNhY3Rpb24yVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDInLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAxLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFkZVN1Ym1pc3Npb24xID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSh0cmFkZVRyYW5zYWN0aW9uMVRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDAzJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVTdWJtaXNzaW9uMiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhZGVUcmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDMsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJKb2JCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShqb2IpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzTW9jay5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW2FwcHJvdmFsU3VibWlzc2lvbjEsIGFwcHJvdmFsU3VibWlzc2lvbjJdKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlsc01vY2suZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFt0cmFkZVN1Ym1pc3Npb24xLCB0cmFkZVN1Ym1pc3Npb24yXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gYnVpbGRSZnFtU2VydmljZUZvclVuaXRUZXN0KHsgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yZGVyU3RhdHVzID0gYXdhaXQgc2VydmljZS5nZXRTdGF0dXNBc3luYygnMHgwMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcmRlclN0YXR1cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdTdGF0dXMgc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9yZGVyU3RhdHVzLnN0YXR1cyAhPT0gJ2ZhaWxlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBiZSBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV4cGVjdChvcmRlclN0YXR1cy5hcHByb3ZhbFRyYW5zYWN0aW9ucykudG8uaGF2ZS5sZW5ndGgoMik7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMuYXBwcm92YWxUcmFuc2FjdGlvbnMpLnRvLmRlZXAuaW5jbHVkZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzaDogJzB4MDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogK2FwcHJvdmFsVHJhbnNhY3Rpb24xVGltZS52YWx1ZU9mKCksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChvcmRlclN0YXR1cy5hcHByb3ZhbFRyYW5zYWN0aW9ucykudG8uZGVlcC5pbmNsdWRlKHtcclxuICAgICAgICAgICAgICAgICAgICBoYXNoOiAnMHgwMicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiArYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lLnZhbHVlT2YoKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG9yZGVyU3RhdHVzLnRyYW5zYWN0aW9ucykudG8uaGF2ZS5sZW5ndGgoMik7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMudHJhbnNhY3Rpb25zKS50by5kZWVwLmluY2x1ZGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6ICcweDAzJyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICt0cmFkZVRyYW5zYWN0aW9uMVRpbWUudmFsdWVPZigpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMudHJhbnNhY3Rpb25zKS50by5kZWVwLmluY2x1ZGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6ICcweDA0JyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICt0cmFkZVRyYW5zYWN0aW9uMlRpbWUudmFsdWVPZigpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZGVjbGluZWQgZm9yIGEgam9iIHRoYXQgd2FzIGRlY2xpbmVkIG9uIHRoZSBsYXN0IGxvb2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5CQVNFX0pPQixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuRmFpbGVkTGFzdExvb2tEZWNsaW5lZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICAvL3doYXQgaXMgdGhpcyBkdW1teSBmaXJzdCBhdHRlbXB0P1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJKb2JCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJKb2JCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShqb2IpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzTW9jay5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2JTdGF0dXMgPSBhd2FpdCBzZXJ2aWNlLmdldFN0YXR1c0FzeW5jKCcweDAwJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGpvYlN0YXR1cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdTdGF0dXMgc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYlN0YXR1cy5zdGF0dXMpLnRvLmVxKCdmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgIGlmIChqb2JTdGF0dXMuc3RhdHVzID09ICdmYWlsZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KGpvYlN0YXR1cy5yZWFzb24pLnRvLmVxKCdsYXN0X2xvb2tfZGVjbGluZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBzdWNjZWVkZWQgZm9yIGEgc3VjY2Vzc2Z1bCBqb2IsIHdpdGggdGhlIHN1Y2NlZWRlZCBqb2IgYW5kIGluY2x1ZGUgY29ycmVjdCBgdHJhbnNhY3Rpb25zYCBhbmQgYGFwcHJvdmFsVHJhbnNhY3Rpb25zYCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFRyYW5zYWN0aW9uMVRpbWUgPSBub3cgKyAzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgNztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlVHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDEwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgMjA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uQkFTRV9KT0IsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWw6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRVbmNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsU3VibWlzc2lvbjEgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGFwcHJvdmFsVHJhbnNhY3Rpb24xVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5Ecm9wcGVkQW5kUmVwbGFjZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsU3VibWlzc2lvbjIgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGFwcHJvdmFsVHJhbnNhY3Rpb24yVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDInLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRVbmNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVTdWJtaXNzaW9uMSA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhZGVUcmFuc2FjdGlvbjFUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLkRyb3BwZWRBbmRSZXBsYWNlZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVTdWJtaXNzaW9uMiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhZGVUcmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZFVuY29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAzLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYySm9iQnlPcmRlckhhc2hBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoam9iKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlsc01vY2suZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFthcHByb3ZhbFN1Ym1pc3Npb24xLCBhcHByb3ZhbFN1Ym1pc3Npb24yXSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHNNb2NrLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbdHJhZGVTdWJtaXNzaW9uMSwgdHJhZGVTdWJtaXNzaW9uMl0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcmRlclN0YXR1cyA9IGF3YWl0IHNlcnZpY2UuZ2V0U3RhdHVzQXN5bmMoJzB4MDAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3JkZXJTdGF0dXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBleGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcmRlclN0YXR1cy5zdGF0dXMgIT09ICdzdWNjZWVkZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoJ1N0YXR1cyBzaG91bGQgYmUgc3VjY2VlZGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFvcmRlclN0YXR1cy5hcHByb3ZhbFRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdBcHByb3ZhbCB0cmFuc2FjdGlvbnMgbm90IHByZXNlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMuYXBwcm92YWxUcmFuc2FjdGlvbnNbMF0pLnRvLmNvbnRhaW4oe1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6ICcweDAyJyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICthcHByb3ZhbFRyYW5zYWN0aW9uMlRpbWUudmFsdWVPZigpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMudHJhbnNhY3Rpb25zWzBdKS50by5jb250YWluKHtcclxuICAgICAgICAgICAgICAgICAgICBoYXNoOiAnMHgwNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiArdHJhZGVUcmFuc2FjdGlvbjJUaW1lLnZhbHVlT2YoKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvbmZpcm1lZCBmb3IgYSBzdWNjZXNzZnVsIGNvbmZpcm1lZCBqb2IgYW5kIGluY2x1ZGUgY29ycmVjdCBgdHJhbnNhY3Rpb25zYCBhbmQgYGFwcHJvdmFsVHJhbnNhY3Rpb25zYCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFRyYW5zYWN0aW9uMVRpbWUgPSBub3cgKyAzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgNztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlVHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDEwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgMjA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uQkFTRV9KT0IsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWw6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFN1Ym1pc3Npb24xID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShhcHByb3ZhbFRyYW5zYWN0aW9uMVRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDAxJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuRHJvcHBlZEFuZFJlcGxhY2VkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFN1Ym1pc3Npb24yID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShhcHByb3ZhbFRyYW5zYWN0aW9uMlRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDAyJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAxLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFkZVN1Ym1pc3Npb24xID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSh0cmFkZVRyYW5zYWN0aW9uMVRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDAzJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuRHJvcHBlZEFuZFJlcGxhY2VkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAyLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFkZVN1Ym1pc3Npb24yID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSh0cmFkZVRyYW5zYWN0aW9uMlRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDA0JyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAzLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYySm9iQnlPcmRlckhhc2hBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoam9iKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlsc01vY2suZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFthcHByb3ZhbFN1Ym1pc3Npb24xLCBhcHByb3ZhbFN1Ym1pc3Npb24yXSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHNNb2NrLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbdHJhZGVTdWJtaXNzaW9uMSwgdHJhZGVTdWJtaXNzaW9uMl0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcmRlclN0YXR1cyA9IGF3YWl0IHNlcnZpY2UuZ2V0U3RhdHVzQXN5bmMoJzB4MDAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3JkZXJTdGF0dXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgnU3RhdHVzIHNob3VsZCBleGlzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcmRlclN0YXR1cy5zdGF0dXMgIT09ICdjb25maXJtZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoJ1N0YXR1cyBzaG91bGQgYmUgY29uZmlybWVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFvcmRlclN0YXR1cy5hcHByb3ZhbFRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCdBcHByb3ZhbCB0cmFuc2FjdGlvbnMgbm90IHByZXNlbnQnKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMuYXBwcm92YWxUcmFuc2FjdGlvbnNbMF0pLnRvLmNvbnRhaW4oe1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6ICcweDAyJyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6ICthcHByb3ZhbFRyYW5zYWN0aW9uMlRpbWUudmFsdWVPZigpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qob3JkZXJTdGF0dXMudHJhbnNhY3Rpb25zWzBdKS50by5jb250YWluKHtcclxuICAgICAgICAgICAgICAgICAgICBoYXNoOiAnMHgwNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiArdHJhZGVUcmFuc2FjdGlvbjJUaW1lLnZhbHVlT2YoKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgdGhyb3cgaWYgdGhlIGpvYiBpcyBzdWNjZXNzZnVsIGJ1dCB0aGVyZSBhcmUgbm8gc3VjY2Vzc2Z1bCB0cmFuc2FjdGlvbnMgZm9yIGFwcHJvdmFsJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsVHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFRyYW5zYWN0aW9uMlRpbWUgPSBub3cgKyA3O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVUcmFuc2FjdGlvbjFUaW1lID0gbm93ICsgMTA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFkZVRyYW5zYWN0aW9uMlRpbWUgPSBub3cgKyAyMDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5CQVNFX0pPQixcclxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbDogTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQVBQUk9WQUwsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlN1Y2NlZWRlZFVuY29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxTdWJtaXNzaW9uMSA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoYXBwcm92YWxUcmFuc2FjdGlvbjFUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMScsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLkRyb3BwZWRBbmRSZXBsYWNlZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxTdWJtaXNzaW9uMiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlJldmVydGVkVW5jb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDEsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlU3VibWlzc2lvbjEgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHRyYWRlVHJhbnNhY3Rpb24xVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5Ecm9wcGVkQW5kUmVwbGFjZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlU3VibWlzc2lvbjIgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHRyYWRlVHJhbnNhY3Rpb24yVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRVbmNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMkpvYkJ5T3JkZXJIYXNoQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKGpvYik7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHNNb2NrLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbYXBwcm92YWxTdWJtaXNzaW9uMSwgYXBwcm92YWxTdWJtaXNzaW9uMl0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzTW9jay5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW3RyYWRlU3VibWlzc2lvbjEsIHRyYWRlU3VibWlzc2lvbjJdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBkYlV0aWxzOiBpbnN0YW5jZShkYlV0aWxzTW9jaykgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldFN0YXR1c0FzeW5jKCcweDAwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKCdFeHBlY3RlZCBleGFjdGx5IG9uZSBzdWNjZXNzZnVsIHRyYW5zYWN0aW9uIHN1Ym1pc3Npb24nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnc2hvdWxkIHRocm93IGlmIHRoZSBqb2IgaXMgc3VjY2Vzc2Z1bCBidXQgdGhlcmUgYXJlIG11bHRpcGxlIHN1Y2Nlc3NmdWwgdHJhbnNhY3Rpb25zIGZvciBhcHByb3ZhbCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFRyYW5zYWN0aW9uMVRpbWUgPSBub3cgKyAzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgNztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlVHJhbnNhY3Rpb24xVGltZSA9IG5vdyArIDEwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVUcmFuc2FjdGlvbjJUaW1lID0gbm93ICsgMjA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uQkFTRV9KT0IsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWw6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRVbmNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsU3VibWlzc2lvbjEgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGFwcHJvdmFsVHJhbnNhY3Rpb24xVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRVbmNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxTdWJtaXNzaW9uMiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoYXBwcm92YWxUcmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVTdWJtaXNzaW9uMSA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhZGVUcmFuc2FjdGlvbjFUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwMycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLkRyb3BwZWRBbmRSZXBsYWNlZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhZGVTdWJtaXNzaW9uMiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUodHJhZGVUcmFuc2FjdGlvbjJUaW1lKSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHgwNCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZFVuY29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAzLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZGJVdGlsc01vY2suZmluZFYySm9iQnlPcmRlckhhc2hBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoam9iKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlsc01vY2suZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFthcHByb3ZhbFN1Ym1pc3Npb24xLCBhcHByb3ZhbFN1Ym1pc3Npb24yXSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHNNb2NrLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbdHJhZGVTdWJtaXNzaW9uMSwgdHJhZGVTdWJtaXNzaW9uMl0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IGJ1aWxkUmZxbVNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlcnZpY2UuZ2V0U3RhdHVzQXN5bmMoJzB4MDAnKTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ0V4cGVjdGVkIGV4YWN0bHkgb25lIHN1Y2Nlc3NmdWwgdHJhbnNhY3Rpb24gc3VibWlzc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgdGhyb3cgaWYgdGhlIGpvYiBpcyBzdWNjZXNzZnVsIGJ1dCB0aGUgc3VjY2Vzc2Z1bCB0cmFuc2FjaXRvbiBoYXMgbm8gaGFzaCBmb3IgYXBwcm92YWwnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxUcmFuc2FjdGlvbjFUaW1lID0gbm93ICsgMztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsVHJhbnNhY3Rpb24yVGltZSA9IG5vdyArIDc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFkZVRyYW5zYWN0aW9uMVRpbWUgPSBub3cgKyAxMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlVHJhbnNhY3Rpb24yVGltZSA9IG5vdyArIDIwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLkJBU0VfSk9CLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsOiBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTCxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkVW5jb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFN1Ym1pc3Npb24xID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShhcHByb3ZhbFRyYW5zYWN0aW9uMVRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweDAxJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuRHJvcHBlZEFuZFJlcGxhY2VkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IGpvYi5vcmRlci5vcmRlci50eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0bzogam9iLm9yZGVyLm9yZGVyLnZlcmlmeWluZ0NvbnRyYWN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFN1Ym1pc3Npb24yID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShhcHByb3ZhbFRyYW5zYWN0aW9uMlRpbWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDEsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlU3VibWlzc2lvbjEgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHRyYWRlVHJhbnNhY3Rpb24xVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDMnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5Ecm9wcGVkQW5kUmVwbGFjZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogam9iLm9yZGVyLm9yZGVyLnR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiBqb2Iub3JkZXIub3JkZXIudmVyaWZ5aW5nQ29udHJhY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDIsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWRlU3VibWlzc2lvbjIgPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHRyYWRlVHJhbnNhY3Rpb24yVGltZSksXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4MDQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRVbmNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBqb2Iub3JkZXIub3JkZXIudHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IGpvYi5vcmRlci5vcmRlci52ZXJpZnlpbmdDb250cmFjdCxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMkpvYkJ5T3JkZXJIYXNoQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKGpvYik7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHNNb2NrLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbYXBwcm92YWxTdWJtaXNzaW9uMSwgYXBwcm92YWxTdWJtaXNzaW9uMl0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzTW9jay5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW3RyYWRlU3VibWlzc2lvbjEsIHRyYWRlU3VibWlzc2lvbjJdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBidWlsZFJmcW1TZXJ2aWNlRm9yVW5pdFRlc3QoeyBkYlV0aWxzOiBpbnN0YW5jZShkYlV0aWxzTW9jaykgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXJ2aWNlLmdldFN0YXR1c0FzeW5jKCcweDAwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKCdkb2VzIG5vdCBoYXZlIGEgaGFzaCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9
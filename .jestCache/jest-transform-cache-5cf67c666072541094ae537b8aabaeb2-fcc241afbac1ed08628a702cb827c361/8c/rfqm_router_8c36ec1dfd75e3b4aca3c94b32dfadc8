6ba0cdbe886cb6a03e9eec038bdd18bf
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createRfqmRouter = void 0;
const express = require("express");
const asyncHandler = require("express-async-handler");
const rfqm_handlers_1 = require("../handlers/rfqm_handlers");
// tslint:disable-next-line:completed-docs
function createRfqmRouter(rfqmServices, configManager) {
    const router = express.Router();
    const handlers = new rfqm_handlers_1.RfqmHandlers(rfqmServices, configManager);
    // Routes
    router.get('/healthz', asyncHandler(handlers.getHealthAsync.bind(handlers)));
    router.get('/price', asyncHandler(handlers.getIndicativeQuoteAsync.bind(handlers)));
    router.get('/quote', asyncHandler(handlers.getFirmQuoteAsync.bind(handlers)));
    router.get('/status/:orderHash', asyncHandler(handlers.getStatusAsync.bind(handlers)));
    router.post('/submit', asyncHandler(handlers.submitSignedQuoteAsync.bind(handlers)));
    router.post('/submit-with-approval', asyncHandler(handlers.submitSignedQuoteWithApprovalAsync.bind(handlers)));
    return router;
}
exports.createRfqmRouter = createRfqmRouter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3NyYy9yb3V0ZXJzL3JmcW1fcm91dGVyLnRzIiwibWFwcGluZ3MiOiI7OztBQUFBLG1DQUFtQztBQUNuQyxzREFBc0Q7QUFFdEQsNkRBQXlEO0FBSXpELDBDQUEwQztBQUMxQyxTQUFnQixnQkFBZ0IsQ0FBQyxZQUEwQixFQUFFLGFBQTRCO0lBQ3JGLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQyxNQUFNLFFBQVEsR0FBRyxJQUFJLDRCQUFZLENBQUMsWUFBWSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBRS9ELFNBQVM7SUFDVCxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxZQUFZLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdFLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwRixNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxZQUFZLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRSxZQUFZLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZGLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxRQUFRLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRixNQUFNLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLFlBQVksQ0FBQyxRQUFRLENBQUMsa0NBQWtDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUUvRyxPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBYkQsNENBYUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3NyYy9yb3V0ZXJzL3JmcW1fcm91dGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgKiBhcyBhc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJztcblxuaW1wb3J0IHsgUmZxbUhhbmRsZXJzIH0gZnJvbSAnLi4vaGFuZGxlcnMvcmZxbV9oYW5kbGVycyc7XG5pbXBvcnQgeyBDb25maWdNYW5hZ2VyIH0gZnJvbSAnLi4vdXRpbHMvY29uZmlnX21hbmFnZXInO1xuaW1wb3J0IHsgUmZxbVNlcnZpY2VzIH0gZnJvbSAnLi4vdXRpbHMvcmZxbV9zZXJ2aWNlX2J1aWxkZXInO1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tcGxldGVkLWRvY3NcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZnFtUm91dGVyKHJmcW1TZXJ2aWNlczogUmZxbVNlcnZpY2VzLCBjb25maWdNYW5hZ2VyOiBDb25maWdNYW5hZ2VyKTogZXhwcmVzcy5Sb3V0ZXIge1xuICAgIGNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4gICAgY29uc3QgaGFuZGxlcnMgPSBuZXcgUmZxbUhhbmRsZXJzKHJmcW1TZXJ2aWNlcywgY29uZmlnTWFuYWdlcik7XG5cbiAgICAvLyBSb3V0ZXNcbiAgICByb3V0ZXIuZ2V0KCcvaGVhbHRoeicsIGFzeW5jSGFuZGxlcihoYW5kbGVycy5nZXRIZWFsdGhBc3luYy5iaW5kKGhhbmRsZXJzKSkpO1xuICAgIHJvdXRlci5nZXQoJy9wcmljZScsIGFzeW5jSGFuZGxlcihoYW5kbGVycy5nZXRJbmRpY2F0aXZlUXVvdGVBc3luYy5iaW5kKGhhbmRsZXJzKSkpO1xuICAgIHJvdXRlci5nZXQoJy9xdW90ZScsIGFzeW5jSGFuZGxlcihoYW5kbGVycy5nZXRGaXJtUXVvdGVBc3luYy5iaW5kKGhhbmRsZXJzKSkpO1xuICAgIHJvdXRlci5nZXQoJy9zdGF0dXMvOm9yZGVySGFzaCcsIGFzeW5jSGFuZGxlcihoYW5kbGVycy5nZXRTdGF0dXNBc3luYy5iaW5kKGhhbmRsZXJzKSkpO1xuICAgIHJvdXRlci5wb3N0KCcvc3VibWl0JywgYXN5bmNIYW5kbGVyKGhhbmRsZXJzLnN1Ym1pdFNpZ25lZFF1b3RlQXN5bmMuYmluZChoYW5kbGVycykpKTtcbiAgICByb3V0ZXIucG9zdCgnL3N1Ym1pdC13aXRoLWFwcHJvdmFsJywgYXN5bmNIYW5kbGVyKGhhbmRsZXJzLnN1Ym1pdFNpZ25lZFF1b3RlV2l0aEFwcHJvdmFsQXN5bmMuYmluZChoYW5kbGVycykpKTtcblxuICAgIHJldHVybiByb3V0ZXI7XG59XG4iXSwidmVyc2lvbiI6M30=
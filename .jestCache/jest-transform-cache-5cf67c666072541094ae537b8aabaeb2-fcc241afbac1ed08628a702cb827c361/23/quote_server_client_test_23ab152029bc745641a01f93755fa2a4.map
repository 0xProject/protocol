{"file":"/Users/davidwalsh/code-local/0x-rfq-api/test/utils/quote_server_client_test.ts","mappings":"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","names":[],"sources":["/Users/davidwalsh/code-local/0x-rfq-api/test/utils/quote_server_client_test.ts"],"sourcesContent":["// tslint:disable:custom-no-magic-numbers\n// tslint:disable:no-empty\n// tslint:disable:max-file-line-count\n\nimport { ethSignHashWithKey, OtcOrder } from '@0x/protocol-utils';\nimport { BigNumber, NULL_ADDRESS } from '@0x/utils';\nimport Axios from 'axios';\nimport AxiosMockAdapter from 'axios-mock-adapter';\nimport * as HttpStatus from 'http-status-codes';\n\nimport { Integrator } from '../../src/config';\nimport { SignRequest } from '../../src/quote-server/types';\nimport { Fee, QuoteServerPriceParams } from '../../src/core/types';\nimport { QuoteServerClient } from '../../src/utils/quote_server_client';\nimport { CHAIN_ID, CONTRACT_ADDRESSES } from '../constants';\nimport { MarketOperation } from '@0x/types';\n\nconst makerUri = 'https://some-market-maker.xyz';\nconst integrator: Integrator = {\n    integratorId: 'some-integrator-id',\n    apiKeys: [],\n    allowedChainIds: [],\n    label: 'integrator',\n    plp: false,\n    rfqm: true,\n    rfqt: true,\n};\n\n// Maker\nconst makerAddress = '0xFDbEf5C1Ad7d173D191D565c14E28eBd5b50470e';\nconst makerPrivateKey = '0xf4559ca5152145f5e0b9762f12213c2e74020a4481953fb940413273051a89d3';\n\n// Taker\nconst takerAddress = '0xdA9AC423442169588DE6b4305f4E820D708d0cE5';\nconst takerPrivateKey = '0x653fa328df81be180b58e42737bc4cef037a19a3b9673b15d20ee2eebb2e509d';\n\n// Some tokens and amounts\nconst takerToken = '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2';\nconst makerToken = '0x6b175474e89094c44da98b954eedeac495271d0f';\nconst takerAmount = new BigNumber(100);\nconst makerAmount = new BigNumber(100_000);\n\n// An OtcOrder\nconst order = new OtcOrder({\n    maker: makerAddress,\n    taker: takerAddress,\n    makerAmount,\n    takerAmount,\n    makerToken,\n    takerToken,\n    expiryAndNonce: OtcOrder.encodeExpiryAndNonce(\n        new BigNumber(2634330177),\n        new BigNumber(1),\n        new BigNumber(1634330177),\n    ),\n});\nconst orderHash = order.getHash();\n\n// Signatures\nconst takerSignature = ethSignHashWithKey(orderHash, takerPrivateKey);\nconst makerSignature = ethSignHashWithKey(orderHash, makerPrivateKey);\n\ndescribe('QuoteServerClient', () => {\n    const axiosInstance = Axios.create();\n    const axiosMock = new AxiosMockAdapter(axiosInstance);\n\n    afterEach(() => {\n        axiosMock.reset();\n    });\n\n    describe('makeQueryParameters', () => {\n        it('should make RFQt request parameters', () => {\n            // Given\n            const marketOperation = MarketOperation.Sell;\n            const input = {\n                txOrigin: takerAddress,\n                takerAddress: NULL_ADDRESS,\n                marketOperation,\n                buyTokenAddress: makerToken,\n                sellTokenAddress: takerToken,\n                comparisonPrice: new BigNumber('42'),\n                assetFillAmount: new BigNumber('100000'),\n            };\n\n            // When\n            const params = QuoteServerClient.makeQueryParameters(input);\n\n            // Then\n            expect(params).toEqual({\n                buyTokenAddress: '0x6b175474e89094c44da98b954eedeac495271d0f',\n                protocolVersion: '4',\n                sellAmountBaseUnits: '100000',\n                sellTokenAddress: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n                takerAddress: '0x0000000000000000000000000000000000000000',\n                txOrigin: '0xdA9AC423442169588DE6b4305f4E820D708d0cE5',\n                comparisonPrice: '42',\n            });\n        });\n\n        it('should make RFQm request parameters', () => {\n            // Given\n            const txOrigin = '0x335e51687677C4f1389f3dEcA259af983529e82D';\n            const feeAmount = '100';\n            const otcOrderFee: Fee = {\n                amount: new BigNumber(feeAmount),\n                token: CONTRACT_ADDRESSES.etherToken,\n                type: 'fixed',\n            };\n            const marketOperation = MarketOperation.Sell;\n\n            // When\n            const params = QuoteServerClient.makeQueryParameters({\n                txOrigin,\n                takerAddress,\n                marketOperation,\n                buyTokenAddress: makerToken,\n                sellTokenAddress: takerToken,\n                assetFillAmount: new BigNumber('100000'),\n                isLastLook: true,\n                fee: otcOrderFee,\n            });\n\n            // Then\n            expect(params).toEqual({\n                buyTokenAddress: '0x6b175474e89094c44da98b954eedeac495271d0f',\n                feeAmount: '100',\n                feeToken: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                feeType: 'fixed',\n                isLastLook: 'true',\n                protocolVersion: '4',\n                sellAmountBaseUnits: '100000',\n                sellTokenAddress: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n                takerAddress: '0xdA9AC423442169588DE6b4305f4E820D708d0cE5',\n                txOrigin: '0x335e51687677C4f1389f3dEcA259af983529e82D',\n            });\n        });\n\n        it('should make RFQm request parameters with chain id', () => {\n            // Given\n            const txOrigin = '0x335e51687677C4f1389f3dEcA259af983529e82D';\n            const feeAmount = '100';\n            const otcOrderFee: Fee = {\n                amount: new BigNumber(feeAmount),\n                token: CONTRACT_ADDRESSES.etherToken,\n                type: 'fixed',\n            };\n            const marketOperation = MarketOperation.Sell;\n\n            // When\n            const params = QuoteServerClient.makeQueryParameters({\n                chainId: 10,\n                txOrigin,\n                takerAddress,\n                marketOperation,\n                buyTokenAddress: makerToken,\n                sellTokenAddress: takerToken,\n                assetFillAmount: new BigNumber('100000'),\n                isLastLook: true,\n                fee: otcOrderFee,\n            });\n\n            // Then\n            expect(params).toEqual({\n                chainId: '10',\n                buyTokenAddress: '0x6b175474e89094c44da98b954eedeac495271d0f',\n                feeAmount: '100',\n                feeToken: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',\n                feeType: 'fixed',\n                isLastLook: 'true',\n                protocolVersion: '4',\n                sellAmountBaseUnits: '100000',\n                sellTokenAddress: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n                takerAddress: '0xdA9AC423442169588DE6b4305f4E820D708d0cE5',\n                txOrigin: '0x335e51687677C4f1389f3dEcA259af983529e82D',\n            });\n        });\n    });\n\n    describe('OtcOrder', () => {\n        describe('getPriceV2Async', () => {\n            it('should return a valid indicative quote', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: QuoteServerPriceParams = {\n                    chainId: CHAIN_ID.toString(),\n                    sellTokenAddress: takerToken,\n                    buyTokenAddress: makerToken,\n                    takerAddress,\n                    sellAmountBaseUnits: takerAmount.toString(),\n                    protocolVersion: '4',\n                    txOrigin: takerAddress,\n                    isLastLook: 'true',\n                    feeAmount: '100',\n                    feeType: 'fixed',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    nonce: '1634322835',\n                    nonceBucket: '1',\n                };\n\n                const response = {\n                    maker: makerAddress,\n                    makerAmount,\n                    takerAmount,\n                    makerToken,\n                    takerToken,\n                    expiry: new BigNumber(9934322972),\n                };\n\n                axiosMock.onGet(`${makerUri}/rfqm/v2/price`).replyOnce(HttpStatus.OK, response);\n\n                // When\n                const indicativeQuote = await client.getPriceV2Async(\n                    makerUri,\n                    integrator,\n                    request,\n                    (uri) => `${uri}/rfqm/v2/price`,\n                );\n\n                // Then\n                const expectedResponse = {\n                    ...response,\n                    makerUri,\n                };\n                expect(indicativeQuote).toEqual(expectedResponse);\n            });\n\n            it('should return undefined for empty responses (not quoting)', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: QuoteServerPriceParams = {\n                    chainId: CHAIN_ID.toString(),\n                    sellTokenAddress: takerToken,\n                    buyTokenAddress: makerToken,\n                    takerAddress,\n                    sellAmountBaseUnits: takerAmount.toString(),\n                    protocolVersion: '4',\n                    txOrigin: takerAddress,\n                    isLastLook: 'true',\n                    feeAmount: '100',\n                    feeType: 'fixed',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    nonce: '1634322835',\n                    nonceBucket: '1',\n                };\n\n                const response = {}; // empty response\n\n                // When\n                axiosMock.onGet(`${makerUri}/rfqm/v2/price`).replyOnce(HttpStatus.OK, response);\n                const result = await client.getPriceV2Async(\n                    makerUri,\n                    integrator,\n                    request,\n                    (uri) => `${uri}/rfqm/v2/price`,\n                );\n\n                // Then\n                expect(result).toBe(undefined);\n            });\n\n            it('should return undefined when returning a 400 from axios', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: QuoteServerPriceParams = {\n                    chainId: CHAIN_ID.toString(),\n                    sellTokenAddress: takerToken,\n                    buyTokenAddress: makerToken,\n                    takerAddress,\n                    sellAmountBaseUnits: takerAmount.toString(),\n                    protocolVersion: '4',\n                    txOrigin: takerAddress,\n                    isLastLook: 'true',\n                    feeAmount: '100',\n                    feeType: 'fixed',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    nonce: '1634322835',\n                    nonceBucket: '1',\n                };\n\n                const response = {}; // empty response\n\n                axiosMock.onGet(`${makerUri}/rfqm/v2/price`).replyOnce(HttpStatus.BAD_REQUEST, response);\n\n                // When\n                const result = await client.getPriceV2Async(\n                    makerUri,\n                    integrator,\n                    request,\n                    (uri) => `${uri}/rfqm/v2/price`,\n                );\n\n                // Then\n                expect(result).toBe(undefined);\n            });\n\n            it('should throw an error for a malformed response', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: QuoteServerPriceParams = {\n                    chainId: CHAIN_ID.toString(),\n                    sellTokenAddress: takerToken,\n                    buyTokenAddress: makerToken,\n                    takerAddress,\n                    sellAmountBaseUnits: takerAmount.toString(),\n                    protocolVersion: '4',\n                    txOrigin: takerAddress,\n                    isLastLook: 'true',\n                    feeAmount: '100',\n                    feeType: 'fixed',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    nonce: '1634322835',\n                    nonceBucket: '1',\n                };\n\n                const response = {\n                    asdf: 'malformed response',\n                };\n\n                axiosMock.onGet(`${makerUri}/rfqm/v2/price`).replyOnce(HttpStatus.OK, response);\n\n                // When\n                await expect(async () => {\n                    await client.getPriceV2Async(makerUri, integrator, request, (uri) => `${uri}/rfqm/v2/price`);\n                }).rejects.toThrow();\n            });\n        });\n\n        describe('batchGetPriceV2Async', () => {\n            it('should return the valid indicative qutoes and filter out errors', async () => {\n                // Given\n                const makerUri1 = 'https://some-market-maker1.xyz';\n                const makerUri2 = 'https://some-market-maker2.xyz';\n                const makerUri3 = 'https://some-market-maker3.xyz';\n                const client = new QuoteServerClient(axiosInstance);\n                const request: QuoteServerPriceParams = {\n                    chainId: CHAIN_ID.toString(),\n                    sellTokenAddress: takerToken,\n                    buyTokenAddress: makerToken,\n                    takerAddress,\n                    sellAmountBaseUnits: takerAmount.toString(),\n                    protocolVersion: '4',\n                    txOrigin: takerAddress,\n                    isLastLook: 'true',\n                    feeAmount: '100',\n                    feeType: 'fixed',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    nonce: '1634322835',\n                    nonceBucket: '1',\n                };\n\n                const response = {\n                    maker: makerAddress,\n                    makerAmount,\n                    takerAmount,\n                    makerToken,\n                    takerToken,\n                    expiry: new BigNumber(9934322972),\n                };\n\n                axiosMock.onGet(`${makerUri1}/rfqm/v2/price`).replyOnce(HttpStatus.OK, response);\n                axiosMock.onGet(`${makerUri2}/rfqm/v2/price`).replyOnce(HttpStatus.NO_CONTENT, {});\n                axiosMock.onGet(`${makerUri3}/rfqm/v2/price`).replyOnce(HttpStatus.BAD_GATEWAY, {});\n\n                // When\n                const indicativeQuotes = await client.batchGetPriceV2Async(\n                    [makerUri1, makerUri2, makerUri3],\n                    integrator,\n                    request,\n                );\n\n                // Then\n                // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                expect(indicativeQuotes!.length).toEqual(1);\n                expect(indicativeQuotes[0].makerAmount.toNumber()).toEqual(response.makerAmount.toNumber());\n                expect(indicativeQuotes[0].maker).toEqual(makerAddress);\n            });\n        });\n\n        describe('signV2Async', () => {\n            it('should return a signature for valid response', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: SignRequest = {\n                    order,\n                    orderHash,\n                    fee: {\n                        amount: new BigNumber('100'),\n                        type: 'fixed',\n                        token: CONTRACT_ADDRESSES.etherToken,\n                    },\n                    expiry: order.expiry,\n                    takerSignature,\n                    trader: takerAddress,\n                    workflow: 'rfqm',\n                };\n\n                const actualRequest = {\n                    order,\n                    orderHash,\n                    feeAmount: '100',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    expiry: order.expiry,\n                    takerSignature,\n                    // trader: takerAddress,\n                    // workflow: 'rfqm',\n                };\n\n                const response = {\n                    feeAmount: '100',\n                    proceedWithFill: true,\n                    makerSignature,\n                };\n\n                axiosMock\n                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))\n                    .replyOnce(HttpStatus.OK, response);\n\n                // When\n                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);\n\n                // Then\n                expect(signature).toEqual(makerSignature);\n            });\n\n            it('should send takerSpecifiedSide when enabled and present in request', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: SignRequest = {\n                    order,\n                    orderHash,\n                    fee: {\n                        amount: new BigNumber('100'),\n                        type: 'fixed',\n                        token: CONTRACT_ADDRESSES.etherToken,\n                    },\n                    expiry: order.expiry,\n                    takerSpecifiedSide: 'makerToken',\n                    takerSignature,\n                    trader: takerAddress,\n                    workflow: 'rfqm',\n                };\n\n                const actualRequest = {\n                    order,\n                    orderHash,\n                    feeAmount: '100',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    expiry: order.expiry,\n                    takerSpecifiedSide: 'makerToken',\n                    takerSignature,\n                    // trader: takerAddress,\n                    // workflow: 'rfqm',\n                };\n\n                const response = {\n                    feeAmount: '100',\n                    proceedWithFill: true,\n                    makerSignature,\n                };\n\n                axiosMock\n                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))\n                    .replyOnce(HttpStatus.OK, response);\n\n                // When\n                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);\n\n                // Then\n                expect(signature).toEqual(makerSignature);\n            });\n\n            it('should return a signature for valid response even if the fee is higher than requested', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: SignRequest = {\n                    order,\n                    orderHash,\n                    fee: {\n                        amount: new BigNumber('100'),\n                        type: 'fixed',\n                        token: CONTRACT_ADDRESSES.etherToken,\n                    },\n                    expiry: order.expiry,\n                    takerSignature,\n                    trader: takerAddress,\n                    workflow: 'rfqm',\n                };\n\n                const actualRequest = {\n                    order,\n                    orderHash,\n                    feeAmount: '100',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    expiry: order.expiry,\n                    takerSignature,\n                    // trader: takerAddress,\n                    // workflow: 'rfqm',\n                };\n\n                const response = {\n                    feeAmount: '101', // higher than requested\n                    proceedWithFill: true,\n                    makerSignature,\n                };\n\n                axiosMock\n                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))\n                    .replyOnce(HttpStatus.OK, response);\n\n                // When\n                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);\n\n                // Then\n                expect(signature).toEqual(makerSignature);\n            });\n\n            it('should return a signature for valid response if the fee is 0 but no acknowledgement is returned', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: SignRequest = {\n                    order,\n                    orderHash,\n                    fee: {\n                        amount: new BigNumber('0'),\n                        type: 'fixed',\n                        token: CONTRACT_ADDRESSES.etherToken,\n                    },\n                    expiry: order.expiry,\n                    takerSignature,\n                    trader: takerAddress,\n                    workflow: 'rfqm',\n                };\n\n                const actualRequest = {\n                    order,\n                    orderHash,\n                    feeAmount: '0',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    expiry: order.expiry,\n                    takerSignature,\n                    // trader: takerAddress,\n                    // workflow: 'rfqm',\n                };\n\n                const response = {\n                    feeAmount: undefined, // no fee amount acknowledged\n                    proceedWithFill: true,\n                    makerSignature,\n                };\n\n                axiosMock\n                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))\n                    .replyOnce(HttpStatus.OK, response);\n\n                // When\n                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);\n\n                // Then\n                expect(signature).toEqual(makerSignature);\n            });\n\n            it('should throw an error for a malformed response', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: SignRequest = {\n                    order,\n                    orderHash,\n                    fee: {\n                        amount: new BigNumber('100'),\n                        type: 'fixed',\n                        token: CONTRACT_ADDRESSES.etherToken,\n                    },\n                    expiry: order.expiry,\n                    takerSignature,\n                    trader: takerAddress,\n                    workflow: 'rfqm',\n                };\n\n                const response = {\n                    asdf: 'I am broken',\n                };\n\n                axiosMock\n                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(request)))\n                    .replyOnce(HttpStatus.OK, response);\n\n                await expect(async () => {\n                    await client.signV2Async(makerUri, 'dummy-integrator-id', request);\n                }).rejects.toThrow();\n            });\n\n            it('should return undefined for an incorrect fee acknowledgement', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: SignRequest = {\n                    order,\n                    orderHash,\n                    fee: {\n                        amount: new BigNumber('100'),\n                        type: 'fixed',\n                        token: CONTRACT_ADDRESSES.etherToken,\n                    },\n                    expiry: order.expiry,\n                    takerSignature,\n                    trader: takerAddress,\n                    workflow: 'rfqm',\n                };\n\n                const actualRequest = {\n                    order,\n                    orderHash,\n                    feeAmount: '100',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    expiry: order.expiry,\n                    takerSignature,\n                    // trader: takerAddress,\n                    // workflow: 'rfqm',\n                };\n\n                const response = {\n                    feeAmount: '10', // Not the right fee\n                    proceedWithFill: true,\n                    makerSignature,\n                };\n\n                axiosMock\n                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))\n                    .replyOnce(HttpStatus.OK, response);\n\n                // When\n                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);\n\n                // Then\n                expect(signature).toBe(undefined);\n            });\n\n            it('should return undefined for explicitly rejected responses', async () => {\n                // Given\n                const client = new QuoteServerClient(axiosInstance);\n                const request: SignRequest = {\n                    order,\n                    orderHash,\n                    fee: {\n                        amount: new BigNumber('100'),\n                        type: 'fixed',\n                        token: CONTRACT_ADDRESSES.etherToken,\n                    },\n                    expiry: order.expiry,\n                    takerSignature,\n                    trader: takerAddress,\n                    workflow: 'rfqm',\n                };\n\n                const actualRequest = {\n                    order,\n                    orderHash,\n                    feeAmount: '100',\n                    feeToken: CONTRACT_ADDRESSES.etherToken,\n                    expiry: order.expiry,\n                    takerSignature,\n                    // trader: takerAddress,\n                    // workflow: 'rfqm',\n                };\n\n                const response = {\n                    proceedWithFill: false,\n                };\n\n                axiosMock\n                    .onPost(`${makerUri}/rfqm/v2/sign`, JSON.parse(JSON.stringify(actualRequest)))\n                    .replyOnce(HttpStatus.OK, response);\n\n                // When\n                const signature = await client.signV2Async(makerUri, 'dummy-integrator-id', request);\n\n                // Then\n                expect(signature).toBe(undefined);\n            });\n        });\n    });\n});\n"],"version":3}
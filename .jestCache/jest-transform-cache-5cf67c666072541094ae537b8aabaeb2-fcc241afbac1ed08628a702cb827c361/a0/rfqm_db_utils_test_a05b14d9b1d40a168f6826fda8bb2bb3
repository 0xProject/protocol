3fe18a2551cfc7480ea0c4f0a2e136f1
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable:custom-no-magic-numbers
const protocol_utils_1 = require("@0x/protocol-utils");
const utils_1 = require("@0x/utils");
const constants_1 = require("../../src/core/constants");
const fee_utils_1 = require("../../src/core/fee_utils");
const rfqm_db_utils_1 = require("../../src/utils/rfqm_db_utils");
describe('RFQM DB utils', () => {
    describe('storedOtcOrderToOtcOrder and otcOrderToStoredOtcOrder', () => {
        it('should map there and back without data corruption', () => {
            // it's expired if it's over 9000
            const expiry = new utils_1.BigNumber(9000);
            const nonce = new utils_1.BigNumber(1637085289);
            const chainId = 1;
            const order = new protocol_utils_1.OtcOrder({
                txOrigin: '0x0000000000000000000000000000000000000000',
                taker: '0x1111111111111111111111111111111111111111',
                maker: '0x2222222222222222222222222222222222222222',
                makerToken: '0x3333333333333333333333333333333333333333',
                takerToken: '0x4444444444444444444444444444444444444444',
                expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(expiry, constants_1.ZERO, nonce),
                chainId,
                verifyingContract: '0x0000000000000000000000000000000000000000',
            });
            const processedOrder = (0, rfqm_db_utils_1.storedOtcOrderToOtcOrder)((0, rfqm_db_utils_1.otcOrderToStoredOtcOrder)(order));
            expect(processedOrder).toEqual(order);
        });
    });
    describe('feeToStoredFee', () => {
        it('should convert Fee without details correctly', () => {
            // Given
            const fee = {
                token: '0xatoken',
                amount: new utils_1.BigNumber(5),
                type: 'fixed',
            };
            // When
            const storedFee = (0, fee_utils_1.feeToStoredFee)(fee);
            // Expect
            expect(storedFee.type).toEqual(fee.type);
            expect(storedFee.token).toEqual(fee.token);
            expect(storedFee.amount).toEqual(fee.amount.toString());
            expect(storedFee.details).toEqual(undefined);
            expect(storedFee.breakdown).toEqual(undefined);
            expect(storedFee.conversionRates).toEqual(undefined);
        });
        it('should convert Fee with gasOnly details correctly', () => {
            var _a, _b, _c;
            // Given
            const fee = {
                token: '0xatoken',
                amount: new utils_1.BigNumber(5),
                type: 'fixed',
                details: {
                    kind: 'gasOnly',
                    feeModelVersion: 0,
                    gasFeeAmount: new utils_1.BigNumber(5),
                    gasPrice: new utils_1.BigNumber(50),
                },
                breakdown: {
                    gas: {
                        amount: new utils_1.BigNumber(100),
                        details: {
                            gasPrice: new utils_1.BigNumber(50),
                            estimatedGas: new utils_1.BigNumber(1),
                        },
                    },
                },
                conversionRates: {
                    nativeTokenBaseUnitPriceUsd: null,
                    feeTokenBaseUnitPriceUsd: null,
                    takerTokenBaseUnitPriceUsd: null,
                    makerTokenBaseUnitPriceUsd: null,
                },
            };
            // When
            const storedFee = (0, fee_utils_1.feeToStoredFee)(fee);
            // Expect
            expect(storedFee.type).toEqual(fee.type);
            expect(storedFee.token).toEqual(fee.token);
            expect(storedFee.amount).toEqual(fee.amount.toString());
            expect(storedFee.details.kind).toEqual(fee.details.kind);
            expect(storedFee.details.feeModelVersion).toEqual(fee.details.feeModelVersion);
            expect(storedFee.details.gasFeeAmount).toEqual(fee.details.gasFeeAmount.toString());
            expect(storedFee.details.gasPrice).toEqual(fee.details.gasPrice.toString());
            expect(storedFee.breakdown.gas.amount).toEqual((_a = fee.breakdown.gas) === null || _a === void 0 ? void 0 : _a.amount.toString());
            expect(storedFee.breakdown.gas.details.gasPrice).toEqual((_b = fee.breakdown.gas) === null || _b === void 0 ? void 0 : _b.details.gasPrice.toString());
            expect(storedFee.breakdown.gas.details.estimatedGas).toEqual((_c = fee.breakdown.gas) === null || _c === void 0 ? void 0 : _c.details.estimatedGas.toString());
            expect(storedFee.breakdown.zeroEx).toEqual(undefined);
            expect(storedFee.conversionRates.nativeTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.conversionRates.feeTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.conversionRates.takerTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.conversionRates.makerTokenBaseUnitPriceUsd).toEqual(undefined);
        });
        it('should convert Fee with default details correctly', () => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
            // Given
            const fee = {
                token: '0xatoken',
                amount: new utils_1.BigNumber(5),
                type: 'fixed',
                details: {
                    kind: 'default',
                    feeModelVersion: 1,
                    gasFeeAmount: new utils_1.BigNumber(5),
                    gasPrice: new utils_1.BigNumber(50),
                    tradeSizeBps: 4,
                    zeroExFeeAmount: new utils_1.BigNumber(10),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    takerTokenBaseUnitPriceUsd: null,
                    makerTokenBaseUnitPriceUsd: new utils_1.BigNumber(1e-18),
                },
                breakdown: {
                    gas: {
                        amount: new utils_1.BigNumber(5),
                        details: {
                            gasPrice: new utils_1.BigNumber(50),
                            estimatedGas: new utils_1.BigNumber(1),
                        },
                    },
                    zeroEx: {
                        amount: new utils_1.BigNumber(10),
                        details: {
                            kind: 'volume',
                            tradeSizeBps: 4,
                        },
                    },
                },
                conversionRates: {
                    nativeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    takerTokenBaseUnitPriceUsd: null,
                    makerTokenBaseUnitPriceUsd: new utils_1.BigNumber(1e-18),
                },
            };
            // When
            const storedFee = (0, fee_utils_1.feeToStoredFee)(fee);
            // Expect
            expect(storedFee.type).toEqual(fee.type);
            expect(storedFee.token).toEqual(fee.token);
            expect(storedFee.amount).toEqual(fee.amount.toString());
            expect(storedFee.details.kind).toEqual(fee.details.kind);
            expect(storedFee.details.feeModelVersion).toEqual(fee.details.feeModelVersion);
            expect(storedFee.details.gasFeeAmount).toEqual(fee.details.gasFeeAmount.toString());
            expect(storedFee.details.gasPrice).toEqual(fee.details.gasPrice.toString());
            expect(storedFee.details.tradeSizeBps).toEqual(fee.details.tradeSizeBps);
            expect(storedFee.details.zeroExFeeAmount).toEqual(fee.details.zeroExFeeAmount.toString());
            expect(storedFee.details.feeTokenBaseUnitPriceUsd).toEqual((_a = fee.details.feeTokenBaseUnitPriceUsd) === null || _a === void 0 ? void 0 : _a.toString());
            expect(storedFee.details.takerTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.details.makerTokenBaseUnitPriceUsd).toEqual((_b = fee.details.makerTokenBaseUnitPriceUsd) === null || _b === void 0 ? void 0 : _b.toString());
            expect(storedFee.breakdown.gas.amount).toEqual((_c = fee.breakdown.gas) === null || _c === void 0 ? void 0 : _c.amount.toString());
            expect(storedFee.breakdown.gas.details.gasPrice).toEqual((_d = fee.breakdown.gas) === null || _d === void 0 ? void 0 : _d.details.gasPrice.toString());
            expect(storedFee.breakdown.gas.details.estimatedGas).toEqual((_e = fee.breakdown.gas) === null || _e === void 0 ? void 0 : _e.details.estimatedGas.toString());
            expect(storedFee.breakdown.zeroEx.amount).toEqual((_f = fee.breakdown.zeroEx) === null || _f === void 0 ? void 0 : _f.amount.toString());
            expect(storedFee.breakdown.zeroEx.details.kind).toEqual((_g = fee.breakdown.zeroEx) === null || _g === void 0 ? void 0 : _g.details.kind);
            expect(storedFee.breakdown.zeroEx.details.tradeSizeBps).toEqual(4);
            expect(storedFee.conversionRates.nativeTokenBaseUnitPriceUsd).toEqual((_h = fee.conversionRates.nativeTokenBaseUnitPriceUsd) === null || _h === void 0 ? void 0 : _h.toString());
            expect(storedFee.conversionRates.feeTokenBaseUnitPriceUsd).toEqual((_j = fee.conversionRates.feeTokenBaseUnitPriceUsd) === null || _j === void 0 ? void 0 : _j.toString());
            expect(storedFee.conversionRates.takerTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.conversionRates.makerTokenBaseUnitPriceUsd).toEqual((_k = fee.conversionRates.makerTokenBaseUnitPriceUsd) === null || _k === void 0 ? void 0 : _k.toString());
        });
        it('should convert Fee with margin based details correctly', () => {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;
            // Given
            const fee = {
                token: '0xatoken',
                amount: new utils_1.BigNumber(5),
                type: 'fixed',
                details: {
                    kind: 'margin',
                    feeModelVersion: 1,
                    gasFeeAmount: new utils_1.BigNumber(5),
                    gasPrice: new utils_1.BigNumber(50),
                    margin: new utils_1.BigNumber(4570),
                    marginRakeRatio: 0.35,
                    zeroExFeeAmount: new utils_1.BigNumber(10),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    takerTokenBaseUnitPriceUsd: new utils_1.BigNumber(1e-18),
                    makerTokenBaseUnitPriceUsd: null,
                },
                breakdown: {
                    gas: {
                        amount: new utils_1.BigNumber(5),
                        details: {
                            gasPrice: new utils_1.BigNumber(50),
                            estimatedGas: new utils_1.BigNumber(1),
                        },
                    },
                    zeroEx: {
                        amount: new utils_1.BigNumber(10),
                        details: {
                            kind: 'price_improvement',
                            priceImprovement: new utils_1.BigNumber(4570),
                            rakeRatio: 0.35,
                        },
                    },
                },
                conversionRates: {
                    nativeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    feeTokenBaseUnitPriceUsd: new utils_1.BigNumber(3e-15),
                    takerTokenBaseUnitPriceUsd: new utils_1.BigNumber(1e-18),
                    makerTokenBaseUnitPriceUsd: null,
                },
            };
            // When
            const storedFee = (0, fee_utils_1.feeToStoredFee)(fee);
            // Expect
            expect(storedFee.type).toEqual(fee.type);
            expect(storedFee.token).toEqual(fee.token);
            expect(storedFee.amount).toEqual(fee.amount.toString());
            expect(storedFee.details.kind).toEqual(fee.details.kind);
            expect(storedFee.details.feeModelVersion).toEqual(fee.details.feeModelVersion);
            expect(storedFee.details.gasFeeAmount).toEqual(fee.details.gasFeeAmount.toString());
            expect(storedFee.details.gasPrice).toEqual(fee.details.gasPrice.toString());
            expect(storedFee.details.margin).toEqual(fee.details.margin.toString());
            expect(storedFee.details.marginRakeRatio).toEqual(fee.details.marginRakeRatio);
            expect(storedFee.details.zeroExFeeAmount).toEqual(fee.details.zeroExFeeAmount.toString());
            expect(storedFee.details.feeTokenBaseUnitPriceUsd).toEqual((_a = fee.details.feeTokenBaseUnitPriceUsd) === null || _a === void 0 ? void 0 : _a.toString());
            expect(storedFee.details.takerTokenBaseUnitPriceUsd).toEqual((_b = fee.details.takerTokenBaseUnitPriceUsd) === null || _b === void 0 ? void 0 : _b.toString());
            expect(storedFee.details.makerTokenBaseUnitPriceUsd).toEqual(undefined);
            expect(storedFee.breakdown.gas.amount).toEqual((_c = fee.breakdown.gas) === null || _c === void 0 ? void 0 : _c.amount.toString());
            expect(storedFee.breakdown.gas.details.gasPrice).toEqual((_d = fee.breakdown.gas) === null || _d === void 0 ? void 0 : _d.details.gasPrice.toString());
            expect(storedFee.breakdown.gas.details.estimatedGas).toEqual((_e = fee.breakdown.gas) === null || _e === void 0 ? void 0 : _e.details.estimatedGas.toString());
            expect(storedFee.breakdown.zeroEx.amount).toEqual((_f = fee.breakdown.zeroEx) === null || _f === void 0 ? void 0 : _f.amount.toString());
            expect(storedFee.breakdown.zeroEx.details.kind).toEqual((_g = fee.breakdown.zeroEx) === null || _g === void 0 ? void 0 : _g.details.kind);
            expect(storedFee.breakdown.zeroEx.details.priceImprovement).toEqual('4570');
            expect(storedFee.breakdown.zeroEx.details.rakeRatio).toEqual(0.35);
            expect(storedFee.conversionRates.nativeTokenBaseUnitPriceUsd).toEqual((_h = fee.conversionRates.nativeTokenBaseUnitPriceUsd) === null || _h === void 0 ? void 0 : _h.toString());
            expect(storedFee.conversionRates.feeTokenBaseUnitPriceUsd).toEqual((_j = fee.conversionRates.feeTokenBaseUnitPriceUsd) === null || _j === void 0 ? void 0 : _j.toString());
            expect(storedFee.conversionRates.takerTokenBaseUnitPriceUsd).toEqual((_k = fee.conversionRates.takerTokenBaseUnitPriceUsd) === null || _k === void 0 ? void 0 : _k.toString());
            expect(storedFee.conversionRates.makerTokenBaseUnitPriceUsd).toEqual(undefined);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3QvdXRpbHMvcmZxbV9kYl91dGlsc190ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEseUNBQXlDO0FBRXpDLHVEQUE4QztBQUM5QyxxQ0FBc0M7QUFFdEMsd0RBQWdEO0FBQ2hELHdEQUEwRDtBQVExRCxpRUFBbUc7QUFFbkcsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7SUFDM0IsUUFBUSxDQUFDLHVEQUF1RCxFQUFFLEdBQUcsRUFBRTtRQUNuRSxFQUFFLENBQUMsbURBQW1ELEVBQUUsR0FBRyxFQUFFO1lBQ3pELGlDQUFpQztZQUNqQyxNQUFNLE1BQU0sR0FBRyxJQUFJLGlCQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkMsTUFBTSxLQUFLLEdBQUcsSUFBSSxpQkFBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sT0FBTyxHQUFHLENBQUMsQ0FBQztZQUNsQixNQUFNLEtBQUssR0FBRyxJQUFJLHlCQUFRLENBQUM7Z0JBQ3ZCLFFBQVEsRUFBRSw0Q0FBNEM7Z0JBQ3RELEtBQUssRUFBRSw0Q0FBNEM7Z0JBQ25ELEtBQUssRUFBRSw0Q0FBNEM7Z0JBQ25ELFVBQVUsRUFBRSw0Q0FBNEM7Z0JBQ3hELFVBQVUsRUFBRSw0Q0FBNEM7Z0JBQ3hELGNBQWMsRUFBRSx5QkFBUSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sRUFBRSxnQkFBSSxFQUFFLEtBQUssQ0FBQztnQkFDbEUsT0FBTztnQkFDUCxpQkFBaUIsRUFBRSw0Q0FBNEM7YUFDbEUsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxjQUFjLEdBQUcsSUFBQSx3Q0FBd0IsRUFBQyxJQUFBLHdDQUF3QixFQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDakYsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ0gsUUFBUSxDQUFD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LENBQUMsZUFBZSxDQUFDLDJCQUEyQixDQUFDLENBQUMsT0FBTyxDQUNqRSxNQUFBLEdBQUcsQ0FBQyxlQUFlLENBQUMsMkJBQTJCLDBDQUFFLFFBQVEsRUFBRSxDQUM5RCxDQUFDO1lBQ0YsTUFBTSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxPQUFPLENBQzlELE1BQUEsR0FBRyxDQUFDLGVBQWUsQ0FBQyx3QkFBd0IsMENBQUUsUUFBUSxFQUFFLENBQzNELENBQUM7WUFDRixNQUFNLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLE9BQU8sQ0FDaEUsTUFBQSxHQUFHLENBQUMsZUFBZSxDQUFDLDBCQUEwQiwwQ0FBRSxRQUFRLEVBQUUsQ0FDN0QsQ0FBQztZQUNGLE1BQU0sQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLDBCQUEwQixDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3BGLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZGF2aWR3YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvdGVzdC91dGlscy9yZnFtX2RiX3V0aWxzX3Rlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGU6Y3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcclxuXHJcbmltcG9ydCB7IE90Y09yZGVyIH0gZnJvbSAnQDB4L3Byb3RvY29sLXV0aWxzJztcclxuaW1wb3J0IHsgQmlnTnVtYmVyIH0gZnJvbSAnQDB4L3V0aWxzJztcclxuXHJcbmltcG9ydCB7IFpFUk8gfSBmcm9tICcuLi8uLi9zcmMvY29yZS9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBmZWVUb1N0b3JlZEZlZSB9IGZyb20gJy4uLy4uL3NyYy9jb3JlL2ZlZV91dGlscyc7XHJcbmltcG9ydCB7XHJcbiAgICBEZWZhdWx0RmVlRGV0YWlsc0RlcHJlY2F0ZWQsXHJcbiAgICBGZWUsXHJcbiAgICBGZWVXaXRoRGV0YWlscyxcclxuICAgIEdhc09ubHlGZWVEZXRhaWxzRGVwcmVjYXRlZCxcclxuICAgIE1hcmdpbkJhc2VkRmVlRGV0YWlsc0RlcHJlY2F0ZWQsXHJcbn0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgeyBvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXIsIHN0b3JlZE90Y09yZGVyVG9PdGNPcmRlciB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9yZnFtX2RiX3V0aWxzJztcclxuXHJcbmRlc2NyaWJlKCdSRlFNIERCIHV0aWxzJywgKCkgPT4ge1xyXG4gICAgZGVzY3JpYmUoJ3N0b3JlZE90Y09yZGVyVG9PdGNPcmRlciBhbmQgb3RjT3JkZXJUb1N0b3JlZE90Y09yZGVyJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgbWFwIHRoZXJlIGFuZCBiYWNrIHdpdGhvdXQgZGF0YSBjb3JydXB0aW9uJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBpdCdzIGV4cGlyZWQgaWYgaXQncyBvdmVyIDkwMDBcclxuICAgICAgICAgICAgY29uc3QgZXhwaXJ5ID0gbmV3IEJpZ051bWJlcig5MDAwKTtcclxuICAgICAgICAgICAgY29uc3Qgbm9uY2UgPSBuZXcgQmlnTnVtYmVyKDE2MzcwODUyODkpO1xyXG4gICAgICAgICAgICBjb25zdCBjaGFpbklkID0gMTtcclxuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBuZXcgT3RjT3JkZXIoe1xyXG4gICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgdGFrZXI6ICcweDExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEnLFxyXG4gICAgICAgICAgICAgICAgbWFrZXI6ICcweDIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMycsXHJcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHg0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0JyxcclxuICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShleHBpcnksIFpFUk8sIG5vbmNlKSxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQsXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRPcmRlciA9IHN0b3JlZE90Y09yZGVyVG9PdGNPcmRlcihvdGNPcmRlclRvU3RvcmVkT3RjT3JkZXIob3JkZXIpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHByb2Nlc3NlZE9yZGVyKS50b0VxdWFsKG9yZGVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoJ2ZlZVRvU3RvcmVkRmVlJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY29udmVydCBGZWUgd2l0aG91dCBkZXRhaWxzIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgICAgICAgICAgLy8gR2l2ZW5cclxuICAgICAgICAgICAgY29uc3QgZmVlOiBGZWUgPSB7XHJcbiAgICAgICAgICAgICAgICB0b2tlbjogJzB4YXRva2VuJyxcclxuICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyBXaGVuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZEZlZSA9IGZlZVRvU3RvcmVkRmVlKGZlZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBFeHBlY3RcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS50eXBlKS50b0VxdWFsKGZlZS50eXBlKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS50b2tlbikudG9FcXVhbChmZWUudG9rZW4pO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmFtb3VudCkudG9FcXVhbChmZWUuYW1vdW50LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMpLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24pLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMpLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjb252ZXJ0IEZlZSB3aXRoIGdhc09ubHkgZGV0YWlscyBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEdpdmVuXHJcbiAgICAgICAgICAgIGNvbnN0IGZlZTogRmVlV2l0aERldGFpbHMgJiB7IGRldGFpbHM6IEdhc09ubHlGZWVEZXRhaWxzRGVwcmVjYXRlZCB9ID0ge1xyXG4gICAgICAgICAgICAgICAgdG9rZW46ICcweGF0b2tlbicsXHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdnYXNPbmx5JyxcclxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzRmVlQW1vdW50OiBuZXcgQmlnTnVtYmVyKDUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiBuZXcgQmlnTnVtYmVyKDUwKSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBicmVha2Rvd246IHtcclxuICAgICAgICAgICAgICAgICAgICBnYXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiBuZXcgQmlnTnVtYmVyKDUwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdGltYXRlZEdhczogbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbnZlcnNpb25SYXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBmZWVUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gV2hlblxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRGZWUgPSBmZWVUb1N0b3JlZEZlZShmZWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gRXhwZWN0XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUudHlwZSkudG9FcXVhbChmZWUudHlwZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUudG9rZW4pLnRvRXF1YWwoZmVlLnRva2VuKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5hbW91bnQpLnRvRXF1YWwoZmVlLmFtb3VudC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLmtpbmQpLnRvRXF1YWwoZmVlLmRldGFpbHMua2luZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5mZWVNb2RlbFZlcnNpb24pLnRvRXF1YWwoZmVlLmRldGFpbHMuZmVlTW9kZWxWZXJzaW9uKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLmdhc0ZlZUFtb3VudCkudG9FcXVhbChmZWUuZGV0YWlscy5nYXNGZWVBbW91bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5nYXNQcmljZSkudG9FcXVhbChmZWUuZGV0YWlscy5nYXNQcmljZS50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5hbW91bnQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmFtb3VudC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uZ2FzLmRldGFpbHMuZ2FzUHJpY2UpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmRldGFpbHMuZ2FzUHJpY2UudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5kZXRhaWxzLmVzdGltYXRlZEdhcykudG9FcXVhbChcclxuICAgICAgICAgICAgICAgIGZlZS5icmVha2Rvd24uZ2FzPy5kZXRhaWxzLmVzdGltYXRlZEdhcy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmJyZWFrZG93bi56ZXJvRXgpLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLm5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbCh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmNvbnZlcnNpb25SYXRlcy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMudGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMubWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjb252ZXJ0IEZlZSB3aXRoIGRlZmF1bHQgZGV0YWlscyBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEdpdmVuXHJcbiAgICAgICAgICAgIGNvbnN0IGZlZTogRmVlV2l0aERldGFpbHMgJiB7IGRldGFpbHM6IERlZmF1bHRGZWVEZXRhaWxzRGVwcmVjYXRlZCB9ID0ge1xyXG4gICAgICAgICAgICAgICAgdG9rZW46ICcweGF0b2tlbicsXHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgZGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdkZWZhdWx0JyxcclxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzRmVlQW1vdW50OiBuZXcgQmlnTnVtYmVyKDUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiBuZXcgQmlnTnVtYmVyKDUwKSxcclxuICAgICAgICAgICAgICAgICAgICB0cmFkZVNpemVCcHM6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgemVyb0V4RmVlQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWVUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG5ldyBCaWdOdW1iZXIoM2UtMTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDFlLTE4KSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBicmVha2Rvd246IHtcclxuICAgICAgICAgICAgICAgICAgICBnYXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXNQcmljZTogbmV3IEJpZ051bWJlcig1MCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RpbWF0ZWRHYXM6IG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB6ZXJvRXg6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogJ3ZvbHVtZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFkZVNpemVCcHM6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb252ZXJzaW9uUmF0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICBuYXRpdmVUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG5ldyBCaWdOdW1iZXIoM2UtMTUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzZS0xNSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG5ldyBCaWdOdW1iZXIoMWUtMTgpLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdoZW5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkRmVlID0gZmVlVG9TdG9yZWRGZWUoZmVlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEV4cGVjdFxyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLnR5cGUpLnRvRXF1YWwoZmVlLnR5cGUpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLnRva2VuKS50b0VxdWFsKGZlZS50b2tlbik7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYW1vdW50KS50b0VxdWFsKGZlZS5hbW91bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5raW5kKS50b0VxdWFsKGZlZS5kZXRhaWxzLmtpbmQpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMuZmVlTW9kZWxWZXJzaW9uKS50b0VxdWFsKGZlZS5kZXRhaWxzLmZlZU1vZGVsVmVyc2lvbik7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5nYXNGZWVBbW91bnQpLnRvRXF1YWwoZmVlLmRldGFpbHMuZ2FzRmVlQW1vdW50LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMuZ2FzUHJpY2UpLnRvRXF1YWwoZmVlLmRldGFpbHMuZ2FzUHJpY2UudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy50cmFkZVNpemVCcHMpLnRvRXF1YWwoZmVlLmRldGFpbHMudHJhZGVTaXplQnBzKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLnplcm9FeEZlZUFtb3VudCkudG9FcXVhbChmZWUuZGV0YWlscy56ZXJvRXhGZWVBbW91bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwoXHJcbiAgICAgICAgICAgICAgICBmZWUuZGV0YWlscy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2Q/LnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy50YWtlclRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbCh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMubWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwoXHJcbiAgICAgICAgICAgICAgICBmZWUuZGV0YWlscy5tYWtlclRva2VuQmFzZVVuaXRQcmljZVVzZD8udG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5hbW91bnQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmFtb3VudC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uZ2FzLmRldGFpbHMuZ2FzUHJpY2UpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmRldGFpbHMuZ2FzUHJpY2UudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5kZXRhaWxzLmVzdGltYXRlZEdhcykudG9FcXVhbChcclxuICAgICAgICAgICAgICAgIGZlZS5icmVha2Rvd24uZ2FzPy5kZXRhaWxzLmVzdGltYXRlZEdhcy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmJyZWFrZG93bi56ZXJvRXguYW1vdW50KS50b0VxdWFsKGZlZS5icmVha2Rvd24uemVyb0V4Py5hbW91bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeC5kZXRhaWxzLmtpbmQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi56ZXJvRXg/LmRldGFpbHMua2luZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeC5kZXRhaWxzLnRyYWRlU2l6ZUJwcykudG9FcXVhbCg0KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLm5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcclxuICAgICAgICAgICAgICAgIGZlZS5jb252ZXJzaW9uUmF0ZXMubmF0aXZlVG9rZW5CYXNlVW5pdFByaWNlVXNkPy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmNvbnZlcnNpb25SYXRlcy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwoXHJcbiAgICAgICAgICAgICAgICBmZWUuY29udmVyc2lvblJhdGVzLmZlZVRva2VuQmFzZVVuaXRQcmljZVVzZD8udG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMudGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMubWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwoXHJcbiAgICAgICAgICAgICAgICBmZWUuY29udmVyc2lvblJhdGVzLm1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkPy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGNvbnZlcnQgRmVlIHdpdGggbWFyZ2luIGJhc2VkIGRldGFpbHMgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBHaXZlblxyXG4gICAgICAgICAgICBjb25zdCBmZWU6IEZlZVdpdGhEZXRhaWxzICYgeyBkZXRhaWxzOiBNYXJnaW5CYXNlZEZlZURldGFpbHNEZXByZWNhdGVkIH0gPSB7XHJcbiAgICAgICAgICAgICAgICB0b2tlbjogJzB4YXRva2VuJyxcclxuICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAga2luZDogJ21hcmdpbicsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc0ZlZUFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcclxuICAgICAgICAgICAgICAgICAgICBnYXNQcmljZTogbmV3IEJpZ051bWJlcig1MCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiBuZXcgQmlnTnVtYmVyKDQ1NzApLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpblJha2VSYXRpbzogMC4zNSxcclxuICAgICAgICAgICAgICAgICAgICB6ZXJvRXhGZWVBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzZS0xNSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG5ldyBCaWdOdW1iZXIoMWUtMTgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJyZWFrZG93bjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiBuZXcgQmlnTnVtYmVyKDUwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdGltYXRlZEdhczogbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHplcm9FeDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiAncHJpY2VfaW1wcm92ZW1lbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2VJbXByb3ZlbWVudDogbmV3IEJpZ051bWJlcig0NTcwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJha2VSYXRpbzogMC4zNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbnZlcnNpb25SYXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hdGl2ZVRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigzZS0xNSksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlVG9rZW5CYXNlVW5pdFByaWNlVXNkOiBuZXcgQmlnTnVtYmVyKDNlLTE1KSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuQmFzZVVuaXRQcmljZVVzZDogbmV3IEJpZ051bWJlcigxZS0xOCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gV2hlblxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRGZWUgPSBmZWVUb1N0b3JlZEZlZShmZWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gRXhwZWN0XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUudHlwZSkudG9FcXVhbChmZWUudHlwZSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUudG9rZW4pLnRvRXF1YWwoZmVlLnRva2VuKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5hbW91bnQpLnRvRXF1YWwoZmVlLmFtb3VudC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLmtpbmQpLnRvRXF1YWwoZmVlLmRldGFpbHMua2luZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5mZWVNb2RlbFZlcnNpb24pLnRvRXF1YWwoZmVlLmRldGFpbHMuZmVlTW9kZWxWZXJzaW9uKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLmdhc0ZlZUFtb3VudCkudG9FcXVhbChmZWUuZGV0YWlscy5nYXNGZWVBbW91bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5nYXNQcmljZSkudG9FcXVhbChmZWUuZGV0YWlscy5nYXNQcmljZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLm1hcmdpbikudG9FcXVhbChmZWUuZGV0YWlscy5tYXJnaW4udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5tYXJnaW5SYWtlUmF0aW8pLnRvRXF1YWwoZmVlLmRldGFpbHMubWFyZ2luUmFrZVJhdGlvKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5kZXRhaWxzLnplcm9FeEZlZUFtb3VudCkudG9FcXVhbChmZWUuZGV0YWlscy56ZXJvRXhGZWVBbW91bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwoXHJcbiAgICAgICAgICAgICAgICBmZWUuZGV0YWlscy5mZWVUb2tlbkJhc2VVbml0UHJpY2VVc2Q/LnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuZGV0YWlscy50YWtlclRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcclxuICAgICAgICAgICAgICAgIGZlZS5kZXRhaWxzLnRha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkPy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmRldGFpbHMubWFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2QpLnRvRXF1YWwodW5kZWZpbmVkKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5hbW91bnQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmFtb3VudC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uZ2FzLmRldGFpbHMuZ2FzUHJpY2UpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi5nYXM/LmRldGFpbHMuZ2FzUHJpY2UudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLmdhcy5kZXRhaWxzLmVzdGltYXRlZEdhcykudG9FcXVhbChcclxuICAgICAgICAgICAgICAgIGZlZS5icmVha2Rvd24uZ2FzPy5kZXRhaWxzLmVzdGltYXRlZEdhcy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmJyZWFrZG93bi56ZXJvRXguYW1vdW50KS50b0VxdWFsKGZlZS5icmVha2Rvd24uemVyb0V4Py5hbW91bnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeC5kZXRhaWxzLmtpbmQpLnRvRXF1YWwoZmVlLmJyZWFrZG93bi56ZXJvRXg/LmRldGFpbHMua2luZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuYnJlYWtkb3duLnplcm9FeC5kZXRhaWxzLnByaWNlSW1wcm92ZW1lbnQpLnRvRXF1YWwoJzQ1NzAnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5icmVha2Rvd24uemVyb0V4LmRldGFpbHMucmFrZVJhdGlvKS50b0VxdWFsKDAuMzUpO1xyXG5cclxuICAgICAgICAgICAgZXhwZWN0KHN0b3JlZEZlZS5jb252ZXJzaW9uUmF0ZXMubmF0aXZlVG9rZW5CYXNlVW5pdFByaWNlVXNkKS50b0VxdWFsKFxyXG4gICAgICAgICAgICAgICAgZmVlLmNvbnZlcnNpb25SYXRlcy5uYXRpdmVUb2tlbkJhc2VVbml0UHJpY2VVc2Q/LnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLmZlZVRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcclxuICAgICAgICAgICAgICAgIGZlZS5jb252ZXJzaW9uUmF0ZXMuZmVlVG9rZW5CYXNlVW5pdFByaWNlVXNkPy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoc3RvcmVkRmVlLmNvbnZlcnNpb25SYXRlcy50YWtlclRva2VuQmFzZVVuaXRQcmljZVVzZCkudG9FcXVhbChcclxuICAgICAgICAgICAgICAgIGZlZS5jb252ZXJzaW9uUmF0ZXMudGFrZXJUb2tlbkJhc2VVbml0UHJpY2VVc2Q/LnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzdG9yZWRGZWUuY29udmVyc2lvblJhdGVzLm1ha2VyVG9rZW5CYXNlVW5pdFByaWNlVXNkKS50b0VxdWFsKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==
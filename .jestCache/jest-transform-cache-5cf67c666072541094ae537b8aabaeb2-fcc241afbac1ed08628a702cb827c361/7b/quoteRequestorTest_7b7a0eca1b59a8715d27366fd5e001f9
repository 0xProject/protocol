67b3b70518f0498997cfd24251a34f9b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable max-file-line-count
const constants_1 = require("@0x/asset-swapper/lib/src/constants");
const types_1 = require("@0x/asset-swapper/lib/src/types");
const dev_utils_1 = require("@0x/dev-utils");
const protocol_utils_1 = require("@0x/protocol-utils");
const types_2 = require("@0x/types");
const utils_1 = require("@0x/utils");
const axios_1 = require("axios");
const chai_1 = require("chai");
const http_1 = require("http");
const https_1 = require("https");
const _ = require("lodash");
const constants_2 = require("../../core/constants");
const QuoteRequestor_1 = require("../QuoteRequestor");
const testHelpers_1 = require("./testHelpers");
const quoteRequestorHttpClient = axios_1.default.create({
    httpAgent: new http_1.Agent({ keepAlive: true, timeout: constants_1.KEEP_ALIVE_TTL }),
    httpsAgent: new https_1.Agent({ keepAlive: true, timeout: constants_1.KEEP_ALIVE_TTL }),
});
const ALT_MM_API_KEY = 'averysecurekey';
const ALT_PROFILE = 'acoolprofile';
const ALT_RFQ_CREDS = {
    altRfqApiKey: ALT_MM_API_KEY,
    altRfqProfile: ALT_PROFILE,
};
const CREATED_STATUS_CODE = 201;
function makeThreeMinuteExpiry() {
    const expiry = new Date(Date.now());
    // tslint:disable-next-line: custom-no-magic-numbers
    expiry.setMinutes(expiry.getMinutes() + 3);
    return new utils_1.BigNumber(Math.round(expiry.valueOf() / constants_1.constants.ONE_SECOND_MS));
}
describe('QuoteRequestor', () => {
    const [makerToken, takerToken, otherToken1] = dev_utils_1.tokenUtils.getDummyERC20TokenAddresses();
    const validSignature = { v: 28, r: '0x', s: '0x', signatureType: protocol_utils_1.SignatureType.EthSign };
    const altRfqAssetOfferings = {
        'https://132.0.0.1': [
            {
                id: 'XYZ-123',
                baseAsset: makerToken,
                quoteAsset: takerToken,
                baseAssetDecimals: 2,
                quoteAssetDecimals: 3,
            },
        ],
    };
    describe('requestRfqtFirmQuotesAsync for firm quotes', () => {
        it('should return successful RFQT requests', async () => {
            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';
            const txOrigin = takerAddress;
            const apiKey = 'my-ko0l-api-key';
            // Set up RFQT responses
            // tslint:disable-next-line:array-type
            const mockedRequests = [];
            const altMockedRequests = [];
            const expectedParams = {
                sellTokenAddress: takerToken,
                buyTokenAddress: makerToken,
                sellAmountBaseUnits: '10000',
                comparisonPrice: undefined,
                takerAddress,
                txOrigin,
                protocolVersion: '4',
            };
            const mockedDefaults = {
                requestApiKey: apiKey,
                requestParams: expectedParams,
                responseCode: types_2.StatusCodes.Success,
            };
            const validSignedOrder = {
                makerToken,
                takerToken,
                makerAmount: new utils_1.BigNumber('1000'),
                takerAmount: new utils_1.BigNumber('1000'),
                maker: takerAddress,
                taker: takerAddress,
                pool: '0x',
                salt: '0',
                chainId: 1,
                verifyingContract: takerAddress,
                txOrigin,
                expiry: makeThreeMinuteExpiry(),
                signature: validSignature,
            };
            // request is to sell 10000 units of the base token
            // 10 units at 3 decimals
            const altFirmRequestData = {
                market: 'XYZ-123',
                model: types_1.AltQuoteModel.Firm,
                profile: ALT_PROFILE,
                side: types_1.AltQuoteSide.Sell,
                meta: {
                    txOrigin,
                    taker: takerAddress,
                    client: apiKey,
                },
                value: '10',
            };
            const altFirmResponse = {
                ...altFirmRequestData,
                id: 'random_id',
                // tslint:disable-next-line:custom-no-magic-numbers
                price: new utils_1.BigNumber(10 / 100).toString(),
                status: 'active',
                data: {
                    '0xv4order': validSignedOrder,
                },
            };
            // Successful response
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://1337.0.0.1',
                responseData: {
                    signedOrder: validSignedOrder,
                },
            });
            // Another Successful response
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://37.0.0.1',
                responseData: { signedOrder: validSignedOrder },
            });
            // Test out a bad response code, ensure it doesnt cause throw
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://420.0.0.1',
                responseData: { error: 'bad request' },
                responseCode: types_2.StatusCodes.InternalError,
            });
            // Test out a successful response code but a partial order
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://421.0.0.1',
                responseData: { signedOrder: { makerToken: '123' } },
            });
            // A successful response code and invalid response data (encoding)
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://421.1.0.1',
                responseData: 'this is not JSON!',
            });
            // A successful response code and valid order, but for wrong maker asset data
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://422.0.0.1',
                responseData: { signedOrder: { ...validSignedOrder, makerToken: '0x1234' } },
            });
            // A successful response code and valid order, but for wrong taker asset data
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://423.0.0.1',
                responseData: { signedOrder: { ...validSignedOrder, takerToken: '0x1234' } },
            });
            // A successful response code and good order but its unsigned
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://424.0.0.1',
                responseData: { signedOrder: _.omit(validSignedOrder, ['signature']) },
            });
            // A successful response code and good order but for the wrong txOrigin
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://425.0.0.1',
                responseData: { signedOrder: { ...validSignedOrder, txOrigin: constants_2.NULL_ADDRESS } },
            });
            // A successful response code and order from an alt RFQ implementation
            altMockedRequests.push({
                endpoint: 'https://132.0.0.1',
                mmApiKey: ALT_MM_API_KEY,
                responseCode: CREATED_STATUS_CODE,
                requestData: altFirmRequestData,
                responseData: altFirmResponse,
            });
            const normalizedSuccessfulOrder = {
                order: {
                    ..._.omit(validSignedOrder, ['signature']),
                    makerAmount: new utils_1.BigNumber(validSignedOrder.makerAmount),
                    takerAmount: new utils_1.BigNumber(validSignedOrder.takerAmount),
                    expiry: new utils_1.BigNumber(validSignedOrder.expiry),
                    salt: new utils_1.BigNumber(validSignedOrder.salt),
                },
                signature: validSignedOrder.signature,
                type: protocol_utils_1.FillQuoteTransformerOrderType.Rfq,
            };
            return testHelpers_1.testHelpers.withMockedRfqQuotes(mockedRequests, altMockedRequests, testHelpers_1.RfqQuoteEndpoint.Firm, async () => {
                const qr = new QuoteRequestor_1.QuoteRequestor({
                    'https://1337.0.0.1': [[makerToken, takerToken]],
                    'https://420.0.0.1': [[makerToken, takerToken]],
                    'https://421.0.0.1': [[makerToken, takerToken]],
                    'https://421.1.0.1': [[makerToken, takerToken]],
                    'https://422.0.0.1': [[makerToken, takerToken]],
                    'https://423.0.0.1': [[makerToken, takerToken]],
                    'https://424.0.0.1': [[makerToken, takerToken]],
                    'https://425.0.0.1': [[makerToken, takerToken]],
                    'https://426.0.0.1': [] /* Shouldn't ping an RFQ-T provider when they don't support the requested asset pair. */,
                    'https://37.0.0.1': [[makerToken, takerToken]],
                }, quoteRequestorHttpClient, ALT_RFQ_CREDS);
                const resp = await qr.requestRfqtFirmQuotesAsync(makerToken, takerToken, new utils_1.BigNumber(10000), types_1.MarketOperation.Sell, undefined, {
                    integrator: {
                        integratorId: apiKey,
                        label: 'foo',
                    },
                    takerAddress,
                    txOrigin: takerAddress,
                    intentOnFilling: true,
                    altRfqAssetOfferings,
                });
                (0, chai_1.expect)(resp).to.deep.eq([
                    normalizedSuccessfulOrder,
                    normalizedSuccessfulOrder,
                    normalizedSuccessfulOrder,
                ]);
            }, quoteRequestorHttpClient);
        });
    });
    describe('requestRfqtIndicativeQuotesAsync for Indicative quotes', () => {
        it('should optionally accept a "comparisonPrice" parameter', async () => {
            const response = QuoteRequestor_1.QuoteRequestor.makeQueryParameters(otherToken1, // tx origin
            otherToken1, // taker
            types_1.MarketOperation.Sell, makerToken, takerToken, new utils_1.BigNumber(1000), new utils_1.BigNumber(300.2));
            (0, chai_1.expect)(response.comparisonPrice).to.eql('300.2');
        });
        it('should return successful RFQT requests', async () => {
            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';
            const apiKey = 'my-ko0l-api-key';
            // Set up RFQT responses
            // tslint:disable-next-line:array-type
            const mockedRequests = [];
            const expectedParams = {
                sellTokenAddress: takerToken,
                buyTokenAddress: makerToken,
                sellAmountBaseUnits: '10000',
                comparisonPrice: undefined,
                takerAddress,
                txOrigin: takerAddress,
                protocolVersion: '4',
            };
            const mockedDefaults = {
                requestApiKey: apiKey,
                requestParams: expectedParams,
                responseCode: types_2.StatusCodes.Success,
            };
            // Successful response
            const successfulQuote1 = {
                makerToken,
                takerToken,
                makerAmount: new utils_1.BigNumber(expectedParams.sellAmountBaseUnits),
                takerAmount: new utils_1.BigNumber(expectedParams.sellAmountBaseUnits),
                expiry: makeThreeMinuteExpiry(),
            };
            const goodMMUri1 = 'https://1337.0.0.1';
            const goodMMUri2 = 'https://37.0.0.1';
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: goodMMUri1,
                responseData: successfulQuote1,
            });
            // Test out a bad response code, ensure it doesnt cause throw
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://420.0.0.1',
                responseData: { error: 'bad request' },
                responseCode: types_2.StatusCodes.InternalError,
            });
            // Test out a successful response code but an invalid order
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://421.0.0.1',
                responseData: { makerToken: '123' },
            });
            // A successful response code and valid response data, but for wrong maker asset data
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://422.0.0.1',
                responseData: { ...successfulQuote1, makerToken: otherToken1 },
            });
            // A successful response code and valid response data, but for wrong taker asset data
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://423.0.0.1',
                responseData: { ...successfulQuote1, takerToken: otherToken1 },
            });
            // Another Successful response
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: goodMMUri2,
                responseData: successfulQuote1,
            });
            const assetOfferings = {
                'https://420.0.0.1': [[makerToken, takerToken]],
                'https://421.0.0.1': [[makerToken, takerToken]],
                'https://422.0.0.1': [[makerToken, takerToken]],
                'https://423.0.0.1': [[makerToken, takerToken]],
                'https://424.0.0.1': [[makerToken, takerToken]],
            };
            assetOfferings[goodMMUri1] = [[makerToken, takerToken]];
            assetOfferings[goodMMUri2] = [[makerToken, takerToken]];
            return testHelpers_1.testHelpers.withMockedRfqQuotes(mockedRequests, [], testHelpers_1.RfqQuoteEndpoint.Indicative, async () => {
                const qr = new QuoteRequestor_1.QuoteRequestor(assetOfferings, quoteRequestorHttpClient);
                const resp = await qr.requestRfqtIndicativeQuotesAsync(makerToken, takerToken, new utils_1.BigNumber(10000), types_1.MarketOperation.Sell, undefined, {
                    integrator: {
                        integratorId: apiKey,
                        label: 'foo',
                    },
                    takerAddress,
                    txOrigin: takerAddress,
                    intentOnFilling: true,
                });
                (0, chai_1.expect)(resp.sort()).to.eql([
                    { ...successfulQuote1, makerUri: goodMMUri1 },
                    { ...successfulQuote1, makerUri: goodMMUri2 },
                ].sort());
            }, quoteRequestorHttpClient);
        });
        it('should only return RFQT requests that meet the timeout', async () => {
            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';
            const apiKey = 'my-ko0l-api-key';
            const maxTimeoutMs = 10;
            // tslint:disable-next-line:custom-no-magic-numbers
            const exceedTimeoutMs = maxTimeoutMs + 50;
            // Set up RFQT responses
            // tslint:disable-next-line:array-type
            const mockedRequests = [];
            const expectedParams = {
                sellTokenAddress: takerToken,
                buyTokenAddress: makerToken,
                sellAmountBaseUnits: '10000',
                comparisonPrice: undefined,
                takerAddress,
                txOrigin: takerAddress,
                protocolVersion: '4',
            };
            const mockedDefaults = {
                requestApiKey: apiKey,
                requestParams: expectedParams,
                responseCode: types_2.StatusCodes.Success,
            };
            // Successful response
            const successfulQuote1 = {
                makerToken,
                takerToken,
                makerAmount: new utils_1.BigNumber(expectedParams.sellAmountBaseUnits),
                takerAmount: new utils_1.BigNumber(expectedParams.sellAmountBaseUnits),
                expiry: makeThreeMinuteExpiry(),
            };
            // One good request
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://1337.0.0.1',
                responseData: successfulQuote1,
            });
            // One request that will timeout
            mockedRequests.push({
                ...mockedDefaults,
                endpoint: 'https://420.0.0.1',
                responseData: successfulQuote1,
                callback: async () => {
                    // tslint:disable-next-line:no-inferred-empty-object-type
                    return new Promise((resolve, _reject) => {
                        setTimeout(() => {
                            resolve([types_2.StatusCodes.Success, successfulQuote1]);
                        }, exceedTimeoutMs);
                    });
                },
            });
            return testHelpers_1.testHelpers.withMockedRfqQuotes(mockedRequests, [], testHelpers_1.RfqQuoteEndpoint.Indicative, async () => {
                const qr = new QuoteRequestor_1.QuoteRequestor({
                    'https://1337.0.0.1': [[makerToken, takerToken]],
                    'https://420.0.0.1': [[makerToken, takerToken]],
                }, quoteRequestorHttpClient);
                const resp = await qr.requestRfqtIndicativeQuotesAsync(makerToken, takerToken, new utils_1.BigNumber(10000), types_1.MarketOperation.Sell, undefined, {
                    integrator: {
                        integratorId: apiKey,
                        label: 'foo',
                    },
                    takerAddress,
                    txOrigin: takerAddress,
                    intentOnFilling: true,
                    makerEndpointMaxResponseTimeMs: maxTimeoutMs,
                });
                (0, chai_1.expect)(resp.sort()).to.eql([{ ...successfulQuote1, makerUri: 'https://1337.0.0.1' }].sort()); // notice only one result, despite two requests made
            }, quoteRequestorHttpClient);
        });
        it('should return successful RFQT indicative quote requests (Buy)', async () => {
            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';
            const apiKey = 'my-ko0l-api-key';
            // Set up RFQT responses
            // tslint:disable-next-line:array-type
            const mockedRequests = [];
            const expectedParams = {
                sellTokenAddress: takerToken,
                buyTokenAddress: makerToken,
                buyAmountBaseUnits: '10000',
                comparisonPrice: undefined,
                takerAddress,
                txOrigin: takerAddress,
                protocolVersion: '4',
            };
            // Successful response
            const successfulQuote1 = {
                makerToken,
                takerToken,
                makerAmount: new utils_1.BigNumber(expectedParams.buyAmountBaseUnits),
                takerAmount: new utils_1.BigNumber(expectedParams.buyAmountBaseUnits),
                expiry: makeThreeMinuteExpiry(),
            };
            mockedRequests.push({
                endpoint: 'https://1337.0.0.1',
                requestApiKey: apiKey,
                requestParams: expectedParams,
                responseData: successfulQuote1,
                responseCode: types_2.StatusCodes.Success,
            });
            return testHelpers_1.testHelpers.withMockedRfqQuotes(mockedRequests, [], testHelpers_1.RfqQuoteEndpoint.Indicative, async () => {
                const qr = new QuoteRequestor_1.QuoteRequestor({ 'https://1337.0.0.1': [[makerToken, takerToken]] }, quoteRequestorHttpClient);
                const resp = await qr.requestRfqtIndicativeQuotesAsync(makerToken, takerToken, new utils_1.BigNumber(10000), types_1.MarketOperation.Buy, undefined, {
                    integrator: {
                        integratorId: apiKey,
                        label: 'foo',
                    },
                    takerAddress,
                    txOrigin: takerAddress,
                    intentOnFilling: true,
                });
                (0, chai_1.expect)(resp.sort()).to.eql([{ ...successfulQuote1, makerUri: 'https://1337.0.0.1' }].sort());
            }, quoteRequestorHttpClient);
        });
        it('should be able to handle and filter RFQ offerings', () => {
            const tests = [
                [['https://top.maker'], []],
                [undefined, ['https://foo.bar/', 'https://lorem.ipsum/']],
                [['https://lorem.ipsum/'], ['https://lorem.ipsum/']],
            ];
            for (const test of tests) {
                const [apiKeyWhitelist, results] = test;
                const response = QuoteRequestor_1.QuoteRequestor.getTypedMakerUrlsAndWhitelist({
                    integrator: {
                        integratorId: 'foo',
                        label: 'bar',
                        whitelistIntegratorUrls: apiKeyWhitelist,
                    },
                    altRfqAssetOfferings: {},
                }, {
                    'https://foo.bar/': [
                        [
                            '0xA6cD4cb8c62aCDe44739E3Ed0F1d13E0e31f2d94',
                            '0xF45107c0200a04A8aB9C600cc52A3C89AE5D0489',
                        ],
                    ],
                    'https://lorem.ipsum/': [
                        [
                            '0xA6cD4cb8c62aCDe44739E3Ed0F1d13E0e31f2d94',
                            '0xF45107c0200a04A8aB9C600cc52A3C89AE5D0489',
                        ],
                    ],
                });
                const typedUrls = response.map((typed) => typed.url);
                (0, chai_1.expect)(typedUrls).to.eql(results);
            }
        });
        it('should return successful alt indicative quotes', async () => {
            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';
            const txOrigin = '0xf209925defc99488e3afff1174e48b4fa628302a';
            const apiKey = 'my-ko0l-api-key';
            // base token has 2 decimals
            // quote token has 3 decimals
            const baseToken = makerToken;
            const quoteToken = takerToken;
            // Set up RFQT responses
            const altMockedRequests = [];
            const altScenarios = [];
            // SCENARIO 1
            // buy, base asset specified
            // requesting to buy 100 units (10000 base units) of the base token
            // returning a price of 0.01, which should mean 10000 maker, 1000 taker amount
            const buyAmountAltRequest = {
                market: 'XYZ-123',
                model: types_1.AltQuoteModel.Indicative,
                profile: ALT_PROFILE,
                side: types_1.AltQuoteSide.Sell,
                meta: {
                    txOrigin,
                    taker: takerAddress,
                    client: apiKey,
                },
                amount: '100',
            };
            // Successful response
            const buyAmountAltResponse = {
                ...buyAmountAltRequest,
                id: 'random_id',
                // tslint:disable-next-line:custom-no-magic-numbers
                price: new utils_1.BigNumber(0.01).toString(),
                status: 'live',
            };
            const successfulBuyAmountQuote = {
                makerToken: baseToken,
                takerToken: quoteToken,
                makerAmount: new utils_1.BigNumber(10000),
                takerAmount: new utils_1.BigNumber(1000),
                expiry: new utils_1.BigNumber(0),
            };
            altMockedRequests.push({
                endpoint: 'https://132.0.0.1',
                mmApiKey: ALT_MM_API_KEY,
                responseCode: CREATED_STATUS_CODE,
                requestData: buyAmountAltRequest,
                responseData: buyAmountAltResponse,
            });
            altScenarios.push({
                successfulQuote: successfulBuyAmountQuote,
                requestedMakerToken: baseToken,
                requestedTakerToken: quoteToken,
                requestedAmount: new utils_1.BigNumber(10000),
                requestedOperation: types_1.MarketOperation.Buy,
            });
            // SCENARIO 2
            // alt buy, quote asset specified
            // user is requesting to sell 1 unit of the quote token, or 1000 base units
            // returning a price of 0.01, which should mean 10000 maker amount, 1000 taker amount
            const buyValueAltRequest = {
                market: 'XYZ-123',
                model: types_1.AltQuoteModel.Indicative,
                profile: ALT_PROFILE,
                side: types_1.AltQuoteSide.Sell,
                meta: {
                    txOrigin,
                    taker: takerAddress,
                    client: apiKey,
                },
                value: '1',
            };
            // Successful response
            const buyValueAltResponse = {
                ...buyValueAltRequest,
                id: 'random_id',
                // tslint:disable-next-line:custom-no-magic-numbers
                price: new utils_1.BigNumber(0.01).toString(),
                status: 'live',
            };
            const successfulBuyValueQuote = {
                makerToken: baseToken,
                takerToken: quoteToken,
                makerAmount: new utils_1.BigNumber(10000),
                takerAmount: new utils_1.BigNumber(1000),
                expiry: new utils_1.BigNumber(0),
            };
            altMockedRequests.push({
                endpoint: 'https://132.0.0.1',
                mmApiKey: ALT_MM_API_KEY,
                responseCode: CREATED_STATUS_CODE,
                requestData: buyValueAltRequest,
                responseData: buyValueAltResponse,
            });
            altScenarios.push({
                successfulQuote: successfulBuyValueQuote,
                requestedMakerToken: baseToken,
                requestedTakerToken: quoteToken,
                requestedAmount: new utils_1.BigNumber(1000),
                requestedOperation: types_1.MarketOperation.Sell,
            });
            // SCENARIO 3
            // alt sell, base asset specified
            // user is requesting to sell 100 units (10000 base units) of the base token
            // returning a price of 0.01, which should mean 10000 taker amount, 1000 maker amount
            const sellAmountAltRequest = {
                market: 'XYZ-123',
                model: types_1.AltQuoteModel.Indicative,
                profile: ALT_PROFILE,
                side: types_1.AltQuoteSide.Buy,
                meta: {
                    txOrigin,
                    taker: takerAddress,
                    client: apiKey,
                },
                amount: '100',
            };
            // Successful response
            const sellAmountAltResponse = {
                ...sellAmountAltRequest,
                id: 'random_id',
                // tslint:disable-next-line:custom-no-magic-numbers
                price: new utils_1.BigNumber(0.01).toString(),
                status: 'live',
            };
            const successfulSellAmountQuote = {
                makerToken: quoteToken,
                takerToken: baseToken,
                makerAmount: new utils_1.BigNumber(1000),
                takerAmount: new utils_1.BigNumber(10000),
                expiry: new utils_1.BigNumber(0),
            };
            altMockedRequests.push({
                endpoint: 'https://132.0.0.1',
                mmApiKey: ALT_MM_API_KEY,
                responseCode: CREATED_STATUS_CODE,
                requestData: sellAmountAltRequest,
                responseData: sellAmountAltResponse,
            });
            altScenarios.push({
                successfulQuote: successfulSellAmountQuote,
                requestedMakerToken: quoteToken,
                requestedTakerToken: baseToken,
                requestedAmount: new utils_1.BigNumber(10000),
                requestedOperation: types_1.MarketOperation.Sell,
            });
            // SCENARIO 4
            // alt sell, quote asset specified
            // user is requesting to buy 1 unit (1000 base units) of the quote token
            // returning a price of 0.01, which should mean 10000 taker amount, 1000 maker amount
            const sellValueAltRequest = {
                market: 'XYZ-123',
                model: types_1.AltQuoteModel.Indicative,
                profile: ALT_PROFILE,
                side: types_1.AltQuoteSide.Buy,
                meta: {
                    txOrigin,
                    taker: takerAddress,
                    client: apiKey,
                },
                value: '1',
            };
            // Successful response
            const sellValueAltResponse = {
                ...sellValueAltRequest,
                id: 'random_id',
                // tslint:disable-next-line:custom-no-magic-numbers
                price: new utils_1.BigNumber(0.01).toString(),
                status: 'live',
            };
            const successfulSellValueQuote = {
                makerToken: quoteToken,
                takerToken: baseToken,
                makerAmount: new utils_1.BigNumber(1000),
                takerAmount: new utils_1.BigNumber(10000),
                expiry: new utils_1.BigNumber(0),
            };
            altMockedRequests.push({
                endpoint: 'https://132.0.0.1',
                mmApiKey: ALT_MM_API_KEY,
                responseCode: CREATED_STATUS_CODE,
                requestData: sellValueAltRequest,
                responseData: sellValueAltResponse,
            });
            altScenarios.push({
                successfulQuote: successfulSellValueQuote,
                requestedMakerToken: quoteToken,
                requestedTakerToken: baseToken,
                requestedAmount: new utils_1.BigNumber(1000),
                requestedOperation: types_1.MarketOperation.Buy,
            });
            let scenarioCounter = 1;
            for (const altScenario of altScenarios) {
                utils_1.logUtils.log(`Alt MM indicative scenario ${scenarioCounter}`);
                scenarioCounter += 1;
                await testHelpers_1.testHelpers.withMockedRfqQuotes([], altMockedRequests, testHelpers_1.RfqQuoteEndpoint.Indicative, async () => {
                    const qr = new QuoteRequestor_1.QuoteRequestor({}, quoteRequestorHttpClient, ALT_RFQ_CREDS);
                    const resp = await qr.requestRfqtIndicativeQuotesAsync(altScenario.requestedMakerToken, altScenario.requestedTakerToken, altScenario.requestedAmount, altScenario.requestedOperation, undefined, {
                        integrator: {
                            integratorId: apiKey,
                            label: 'foo',
                        },
                        takerAddress,
                        txOrigin,
                        intentOnFilling: true,
                        altRfqAssetOfferings,
                    });
                    // hack to get the expiry right, since it's dependent on the current timestamp
                    const expected = { ...altScenario.successfulQuote, expiry: resp[0].expiry };
                    (0, chai_1.expect)(resp.sort()).to.eql([expected].sort());
                }, quoteRequestorHttpClient);
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3NyYy9xdW90ZVJlcXVlc3Rvci9fX3Rlc3RzX18vcXVvdGVSZXF1ZXN0b3JUZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEscUNBQXFDO0FBQ3JDLG1FQUFnRjtBQUNoRiwyREFReUM7QUFDekMsNkNBQTJDO0FBQzNDLHVEQUFrRjtBQUNsRixxQ0FBd0M7QUFDeEMscUNBQWdEO0FBQ2hELGlDQUEwQjtBQUMxQiwrQkFBOEI7QUFDOUIsK0JBQTBDO0FBQzFDLGlDQUE0QztBQUM1Qyw0QkFBNEI7QUFFNUIsb0RBQW9EO0FBRXBELHNEQUFtRDtBQUVuRCwrQ0FBOEQ7QUFFOUQsTUFBTSx3QkFBd0IsR0FBRyxlQUFLLENBQUMsTUFBTSxDQUFDO0lBQzFDLFNBQVMsRUFBRSxJQUFJLFlBQVMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLDBCQUFjLEVBQUUsQ0FBQztJQUN0RSxVQUFVLEVBQUUsSUFBSSxhQUFVLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSwwQkFBYyxFQUFFLENBQUM7Q0FDM0UsQ0FBQyxDQUFDO0FBRUgsTUFBTSxjQUFjLEdBQUcsZ0JBQWdCLENBQUM7QUFDeEMsTUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDO0FBQ25DLE1BQU0sYUFBYSxHQUFHO0lBQ2xCLFlBQVksRUFBRSxjQUFjO0lBQzVCLGFBQWEsRUFBRSxXQUFXO0NBQzdCLENBQUM7QUFFRixNQUFNLG1CQUFtQixHQUFHLEdBQUcsQ0FBQztBQUVoQyxTQUFTLHFCQUFxQjtJQUMxQixNQUFNLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNwQyxvREFBb0Q7SUFDcEQsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDM0MsT0FBTyxJQUFJLGlCQUFTLENBQUMsSUFBSSxDQUFD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QztvQkFDM0UsTUFBTSxJQUFJLEdBQUcsTUFBTSxFQUFFLENBQUMsZ0NBQWdDLENBQ2xELFdBQVcsQ0FBQyxtQkFBbUIsRUFDL0IsV0FBVyxDQUFDLG1CQUFtQixFQUMvQixXQUFXLENBQUMsZUFBZSxFQUMzQixXQUFXLENBQUMsa0JBQWtCLEVBQzlCLFNBQVMsRUFDVDt3QkFDSSxVQUFVLEVBQUU7NEJBQ1IsWUFBWSxFQUFFLE1BQU07NEJBQ3BCLEtBQUssRUFBRSxLQUFLO3lCQUNmO3dCQUNELFlBQVk7d0JBQ1osUUFBUTt3QkFDUixlQUFlLEVBQUUsSUFBSTt3QkFDckIsb0JBQW9CO3FCQUN2QixDQUNKLENBQUM7b0JBQ0YsOEVBQThFO29CQUM5RSxNQUFNLFFBQVEsR0FBRyxFQUFFLEdBQUcsV0FBVyxDQUFDLGVBQWUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO29CQUM1RSxJQUFBLGFBQU0sRUFBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztnQkFDbEQsQ0FBQyxFQUNELHdCQUF3QixDQUMzQixDQUFDO2FBQ0w7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3NyYy9xdW90ZVJlcXVlc3Rvci9fX3Rlc3RzX18vcXVvdGVSZXF1ZXN0b3JUZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHRzbGludDpkaXNhYmxlIG1heC1maWxlLWxpbmUtY291bnRcclxuaW1wb3J0IHsgY29uc3RhbnRzLCBLRUVQX0FMSVZFX1RUTCB9IGZyb20gJ0AweC9hc3NldC1zd2FwcGVyL2xpYi9zcmMvY29uc3RhbnRzJztcclxuaW1wb3J0IHtcclxuICAgIEFsdE1vY2tlZFJmcVF1b3RlUmVzcG9uc2UsXHJcbiAgICBBbHRRdW90ZU1vZGVsLFxyXG4gICAgQWx0UXVvdGVSZXF1ZXN0RGF0YSxcclxuICAgIEFsdFF1b3RlU2lkZSxcclxuICAgIEFsdFJmcU1ha2VyQXNzZXRPZmZlcmluZ3MsXHJcbiAgICBNYXJrZXRPcGVyYXRpb24sXHJcbiAgICBNb2NrZWRSZnFRdW90ZVJlc3BvbnNlLFxyXG59IGZyb20gJ0AweC9hc3NldC1zd2FwcGVyL2xpYi9zcmMvdHlwZXMnO1xyXG5pbXBvcnQgeyB0b2tlblV0aWxzIH0gZnJvbSAnQDB4L2Rldi11dGlscyc7XHJcbmltcG9ydCB7IEZpbGxRdW90ZVRyYW5zZm9ybWVyT3JkZXJUeXBlLCBTaWduYXR1cmVUeXBlIH0gZnJvbSAnQDB4L3Byb3RvY29sLXV0aWxzJztcclxuaW1wb3J0IHsgU3RhdHVzQ29kZXMgfSBmcm9tICdAMHgvdHlwZXMnO1xyXG5pbXBvcnQgeyBCaWdOdW1iZXIsIGxvZ1V0aWxzIH0gZnJvbSAnQDB4L3V0aWxzJztcclxuaW1wb3J0IEF4aW9zIGZyb20gJ2F4aW9zJztcclxuaW1wb3J0IHsgZXhwZWN0IH0gZnJvbSAnY2hhaSc7XHJcbmltcG9ydCB7IEFnZW50IGFzIEh0dHBBZ2VudCB9IGZyb20gJ2h0dHAnO1xyXG5pbXBvcnQgeyBBZ2VudCBhcyBIdHRwc0FnZW50IH0gZnJvbSAnaHR0cHMnO1xyXG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XHJcblxyXG5pbXBvcnQgeyBOVUxMX0FERFJFU1MgfSBmcm9tICcuLi8uLi9jb3JlL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IFRha2VyUmVxdWVzdFF1ZXJ5UGFyYW1zVW5uZXN0ZWQsIFY0UkZRSW5kaWNhdGl2ZVF1b3RlIH0gZnJvbSAnLi4vLi4vcXVvdGUtc2VydmVyL3R5cGVzJztcclxuaW1wb3J0IHsgUXVvdGVSZXF1ZXN0b3IgfSBmcm9tICcuLi9RdW90ZVJlcXVlc3Rvcic7XHJcblxyXG5pbXBvcnQgeyBSZnFRdW90ZUVuZHBvaW50LCB0ZXN0SGVscGVycyB9IGZyb20gJy4vdGVzdEhlbHBlcnMnO1xyXG5cclxuY29uc3QgcXVvdGVSZXF1ZXN0b3JIdHRwQ2xpZW50ID0gQXhpb3MuY3JlYXRlKHtcclxuICAgIGh0dHBBZ2VudDogbmV3IEh0dHBBZ2VudCh7IGtlZXBBbGl2ZTogdHJ1ZSwgdGltZW91dDogS0VFUF9BTElWRV9UVEwgfSksXHJcbiAgICBodHRwc0FnZW50OiBuZXcgSHR0cHNBZ2VudCh7IGtlZXBBbGl2ZTogdHJ1ZSwgdGltZW91dDogS0VFUF9BTElWRV9UVEwgfSksXHJcbn0pO1xyXG5cclxuY29uc3QgQUxUX01NX0FQSV9LRVkgPSAnYXZlcnlzZWN1cmVrZXknO1xyXG5jb25zdCBBTFRfUFJPRklMRSA9ICdhY29vbHByb2ZpbGUnO1xyXG5jb25zdCBBTFRfUkZRX0NSRURTID0ge1xyXG4gICAgYWx0UmZxQXBpS2V5OiBBTFRfTU1fQVBJX0tFWSxcclxuICAgIGFsdFJmcVByb2ZpbGU6IEFMVF9QUk9GSUxFLFxyXG59O1xyXG5cclxuY29uc3QgQ1JFQVRFRF9TVEFUVVNfQ09ERSA9IDIwMTtcclxuXHJcbmZ1bmN0aW9uIG1ha2VUaHJlZU1pbnV0ZUV4cGlyeSgpOiBCaWdOdW1iZXIge1xyXG4gICAgY29uc3QgZXhwaXJ5ID0gbmV3IERhdGUoRGF0ZS5ub3coKSk7XHJcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICBleHBpcnkuc2V0TWludXRlcyhleHBpcnkuZ2V0TWludXRlcygpICsgMyk7XHJcbiAgICByZXR1cm4gbmV3IEJpZ051bWJlcihNYXRoLnJvdW5kKGV4cGlyeS52YWx1ZU9mKCkgLyBjb25zdGFudHMuT05FX1NFQ09ORF9NUykpO1xyXG59XHJcblxyXG5kZXNjcmliZSgnUXVvdGVSZXF1ZXN0b3InLCAoKSA9PiB7XHJcbiAgICBjb25zdCBbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbiwgb3RoZXJUb2tlbjFdID0gdG9rZW5VdGlscy5nZXREdW1teUVSQzIwVG9rZW5BZGRyZXNzZXMoKTtcclxuICAgIGNvbnN0IHZhbGlkU2lnbmF0dXJlID0geyB2OiAyOCwgcjogJzB4JywgczogJzB4Jywgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduIH07XHJcblxyXG4gICAgY29uc3QgYWx0UmZxQXNzZXRPZmZlcmluZ3M6IEFsdFJmcU1ha2VyQXNzZXRPZmZlcmluZ3MgPSB7XHJcbiAgICAgICAgJ2h0dHBzOi8vMTMyLjAuMC4xJzogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZDogJ1hZWi0xMjMnLFxyXG4gICAgICAgICAgICAgICAgYmFzZUFzc2V0OiBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldDogdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIGJhc2VBc3NldERlY2ltYWxzOiAyLFxyXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldERlY2ltYWxzOiAzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF0sXHJcbiAgICB9O1xyXG5cclxuICAgIGRlc2NyaWJlKCdyZXF1ZXN0UmZxdEZpcm1RdW90ZXNBc3luYyBmb3IgZmlybSBxdW90ZXMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2Vzc2Z1bCBSRlFUIHJlcXVlc3RzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0YWtlckFkZHJlc3MgPSAnMHhkMjA5OTI1ZGVmYzk5NDg4ZTNhZmZmMTE3NGU0OGI0ZmE2MjgzMDJhJztcclxuICAgICAgICAgICAgY29uc3QgdHhPcmlnaW4gPSB0YWtlckFkZHJlc3M7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9ICdteS1rbzBsLWFwaS1rZXknO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHVwIFJGUVQgcmVzcG9uc2VzXHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTphcnJheS10eXBlXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tlZFJlcXVlc3RzOiBNb2NrZWRSZnFRdW90ZVJlc3BvbnNlW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgYWx0TW9ja2VkUmVxdWVzdHM6IEFsdE1vY2tlZFJmcVF1b3RlUmVzcG9uc2VbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRQYXJhbXM6IFRha2VyUmVxdWVzdFF1ZXJ5UGFyYW1zVW5uZXN0ZWQgPSB7XHJcbiAgICAgICAgICAgICAgICBzZWxsVG9rZW5BZGRyZXNzOiB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgYnV5VG9rZW5BZGRyZXNzOiBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudEJhc2VVbml0czogJzEwMDAwJyxcclxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb25QcmljZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgdHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbFZlcnNpb246ICc0JyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja2VkRGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QXBpS2V5OiBhcGlLZXksXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0UGFyYW1zOiBleHBlY3RlZFBhcmFtcyxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29kZTogU3RhdHVzQ29kZXMuU3VjY2VzcyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgdmFsaWRTaWduZWRPcmRlciA9IHtcclxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoJzEwMDAnKSxcclxuICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKCcxMDAwJyksXHJcbiAgICAgICAgICAgICAgICBtYWtlcjogdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgdGFrZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIHBvb2w6ICcweCcsXHJcbiAgICAgICAgICAgICAgICBzYWx0OiAnMCcsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBtYWtlVGhyZWVNaW51dGVFeHBpcnkoKSxcclxuICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogdmFsaWRTaWduYXR1cmUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIHJlcXVlc3QgaXMgdG8gc2VsbCAxMDAwMCB1bml0cyBvZiB0aGUgYmFzZSB0b2tlblxyXG4gICAgICAgICAgICAvLyAxMCB1bml0cyBhdCAzIGRlY2ltYWxzXHJcbiAgICAgICAgICAgIGNvbnN0IGFsdEZpcm1SZXF1ZXN0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG1hcmtldDogJ1hZWi0xMjMnLFxyXG4gICAgICAgICAgICAgICAgbW9kZWw6IEFsdFF1b3RlTW9kZWwuRmlybSxcclxuICAgICAgICAgICAgICAgIHByb2ZpbGU6IEFMVF9QUk9GSUxFLFxyXG4gICAgICAgICAgICAgICAgc2lkZTogQWx0UXVvdGVTaWRlLlNlbGwsXHJcbiAgICAgICAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnQ6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogJzEwJyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgYWx0RmlybVJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICAgICAgLi4uYWx0RmlybVJlcXVlc3REYXRhLFxyXG4gICAgICAgICAgICAgICAgaWQ6ICdyYW5kb21faWQnLFxyXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICBwcmljZTogbmV3IEJpZ051bWJlcigxMCAvIDEwMCkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJzB4djRvcmRlcic6IHZhbGlkU2lnbmVkT3JkZXIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gU3VjY2Vzc2Z1bCByZXNwb25zZVxyXG4gICAgICAgICAgICBtb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIC4uLm1vY2tlZERlZmF1bHRzLFxyXG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovLzEzMzcuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmVkT3JkZXI6IHZhbGlkU2lnbmVkT3JkZXIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gQW5vdGhlciBTdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja2VkRGVmYXVsdHMsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vMzcuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhOiB7IHNpZ25lZE9yZGVyOiB2YWxpZFNpZ25lZE9yZGVyIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBUZXN0IG91dCBhIGJhZCByZXNwb25zZSBjb2RlLCBlbnN1cmUgaXQgZG9lc250IGNhdXNlIHRocm93XHJcbiAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja2VkRGVmYXVsdHMsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vNDIwLjAuMC4xJyxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogeyBlcnJvcjogJ2JhZCByZXF1ZXN0JyB9LFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VDb2RlOiBTdGF0dXNDb2Rlcy5JbnRlcm5hbEVycm9yLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gVGVzdCBvdXQgYSBzdWNjZXNzZnVsIHJlc3BvbnNlIGNvZGUgYnV0IGEgcGFydGlhbCBvcmRlclxyXG4gICAgICAgICAgICBtb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIC4uLm1vY2tlZERlZmF1bHRzLFxyXG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovLzQyMS4wLjAuMScsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZURhdGE6IHsgc2lnbmVkT3JkZXI6IHsgbWFrZXJUb2tlbjogJzEyMycgfSB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIHJlc3BvbnNlIGNvZGUgYW5kIGludmFsaWQgcmVzcG9uc2UgZGF0YSAoZW5jb2RpbmcpXHJcbiAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja2VkRGVmYXVsdHMsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vNDIxLjEuMC4xJyxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogJ3RoaXMgaXMgbm90IEpTT04hJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBjb2RlIGFuZCB2YWxpZCBvcmRlciwgYnV0IGZvciB3cm9uZyBtYWtlciBhc3NldCBkYXRhXHJcbiAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja2VkRGVmYXVsdHMsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vNDIyLjAuMC4xJyxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogeyBzaWduZWRPcmRlcjogeyAuLi52YWxpZFNpZ25lZE9yZGVyLCBtYWtlclRva2VuOiAnMHgxMjM0JyB9IH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgY29kZSBhbmQgdmFsaWQgb3JkZXIsIGJ1dCBmb3Igd3JvbmcgdGFrZXIgYXNzZXQgZGF0YVxyXG4gICAgICAgICAgICBtb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIC4uLm1vY2tlZERlZmF1bHRzLFxyXG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovLzQyMy4wLjAuMScsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZURhdGE6IHsgc2lnbmVkT3JkZXI6IHsgLi4udmFsaWRTaWduZWRPcmRlciwgdGFrZXJUb2tlbjogJzB4MTIzNCcgfSB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIHJlc3BvbnNlIGNvZGUgYW5kIGdvb2Qgb3JkZXIgYnV0IGl0cyB1bnNpZ25lZFxyXG4gICAgICAgICAgICBtb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIC4uLm1vY2tlZERlZmF1bHRzLFxyXG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovLzQyNC4wLjAuMScsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZURhdGE6IHsgc2lnbmVkT3JkZXI6IF8ub21pdCh2YWxpZFNpZ25lZE9yZGVyLCBbJ3NpZ25hdHVyZSddKSB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIHJlc3BvbnNlIGNvZGUgYW5kIGdvb2Qgb3JkZXIgYnV0IGZvciB0aGUgd3JvbmcgdHhPcmlnaW5cclxuICAgICAgICAgICAgbW9ja2VkUmVxdWVzdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrZWREZWZhdWx0cyxcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly80MjUuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhOiB7IHNpZ25lZE9yZGVyOiB7IC4uLnZhbGlkU2lnbmVkT3JkZXIsIHR4T3JpZ2luOiBOVUxMX0FERFJFU1MgfSB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIHJlc3BvbnNlIGNvZGUgYW5kIG9yZGVyIGZyb20gYW4gYWx0IFJGUSBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgICAgICBhbHRNb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly8xMzIuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgbW1BcGlLZXk6IEFMVF9NTV9BUElfS0VZLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VDb2RlOiBDUkVBVEVEX1NUQVRVU19DT0RFLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdERhdGE6IGFsdEZpcm1SZXF1ZXN0RGF0YSxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogYWx0RmlybVJlc3BvbnNlLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTdWNjZXNzZnVsT3JkZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLl8ub21pdCh2YWxpZFNpZ25lZE9yZGVyLCBbJ3NpZ25hdHVyZSddKSxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcih2YWxpZFNpZ25lZE9yZGVyLm1ha2VyQW1vdW50KSxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcih2YWxpZFNpZ25lZE9yZGVyLnRha2VyQW1vdW50KSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIodmFsaWRTaWduZWRPcmRlci5leHBpcnkpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNhbHQ6IG5ldyBCaWdOdW1iZXIodmFsaWRTaWduZWRPcmRlci5zYWx0KSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHZhbGlkU2lnbmVkT3JkZXIuc2lnbmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogRmlsbFF1b3RlVHJhbnNmb3JtZXJPcmRlclR5cGUuUmZxLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRlc3RIZWxwZXJzLndpdGhNb2NrZWRSZnFRdW90ZXMoXHJcbiAgICAgICAgICAgICAgICBtb2NrZWRSZXF1ZXN0cyxcclxuICAgICAgICAgICAgICAgIGFsdE1vY2tlZFJlcXVlc3RzLFxyXG4gICAgICAgICAgICAgICAgUmZxUXVvdGVFbmRwb2ludC5GaXJtLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHFyID0gbmV3IFF1b3RlUmVxdWVzdG9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly8xMzM3LjAuMC4xJzogW1ttYWtlclRva2VuLCB0YWtlclRva2VuXV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly80MjAuMC4wLjEnOiBbW21ha2VyVG9rZW4sIHRha2VyVG9rZW5dXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdodHRwczovLzQyMS4wLjAuMSc6IFtbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbl1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vNDIxLjEuMC4xJzogW1ttYWtlclRva2VuLCB0YWtlclRva2VuXV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly80MjIuMC4wLjEnOiBbW21ha2VyVG9rZW4sIHRha2VyVG9rZW5dXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdodHRwczovLzQyMy4wLjAuMSc6IFtbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbl1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vNDI0LjAuMC4xJzogW1ttYWtlclRva2VuLCB0YWtlclRva2VuXV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly80MjUuMC4wLjEnOiBbW21ha2VyVG9rZW4sIHRha2VyVG9rZW5dXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdodHRwczovLzQyNi4wLjAuMSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW10gLyogU2hvdWxkbid0IHBpbmcgYW4gUkZRLVQgcHJvdmlkZXIgd2hlbiB0aGV5IGRvbid0IHN1cHBvcnQgdGhlIHJlcXVlc3RlZCBhc3NldCBwYWlyLiAqLyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdodHRwczovLzM3LjAuMC4xJzogW1ttYWtlclRva2VuLCB0YWtlclRva2VuXV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlUmVxdWVzdG9ySHR0cENsaWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgQUxUX1JGUV9DUkVEUyxcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBxci5yZXF1ZXN0UmZxdEZpcm1RdW90ZXNBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hcmtldE9wZXJhdGlvbi5TZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ2ZvbycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdFJmcUFzc2V0T2ZmZXJpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3ApLnRvLmRlZXAuZXEoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkU3VjY2Vzc2Z1bE9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkU3VjY2Vzc2Z1bE9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkU3VjY2Vzc2Z1bE9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHF1b3RlUmVxdWVzdG9ySHR0cENsaWVudCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoJ3JlcXVlc3RSZnF0SW5kaWNhdGl2ZVF1b3Rlc0FzeW5jIGZvciBJbmRpY2F0aXZlIHF1b3RlcycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIG9wdGlvbmFsbHkgYWNjZXB0IGEgXCJjb21wYXJpc29uUHJpY2VcIiBwYXJhbWV0ZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gUXVvdGVSZXF1ZXN0b3IubWFrZVF1ZXJ5UGFyYW1ldGVycyhcclxuICAgICAgICAgICAgICAgIG90aGVyVG9rZW4xLCAvLyB0eCBvcmlnaW5cclxuICAgICAgICAgICAgICAgIG90aGVyVG9rZW4xLCAvLyB0YWtlclxyXG4gICAgICAgICAgICAgICAgTWFya2V0T3BlcmF0aW9uLlNlbGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMCksXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDMwMC4yKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmNvbXBhcmlzb25QcmljZSkudG8uZXFsKCczMDAuMicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHN1Y2Nlc3NmdWwgUkZRVCByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGFrZXJBZGRyZXNzID0gJzB4ZDIwOTkyNWRlZmM5OTQ4OGUzYWZmZjExNzRlNDhiNGZhNjI4MzAyYSc7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9ICdteS1rbzBsLWFwaS1rZXknO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHVwIFJGUVQgcmVzcG9uc2VzXHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTphcnJheS10eXBlXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tlZFJlcXVlc3RzOiBNb2NrZWRSZnFRdW90ZVJlc3BvbnNlW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRQYXJhbXM6IFRha2VyUmVxdWVzdFF1ZXJ5UGFyYW1zVW5uZXN0ZWQgPSB7XHJcbiAgICAgICAgICAgICAgICBzZWxsVG9rZW5BZGRyZXNzOiB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgYnV5VG9rZW5BZGRyZXNzOiBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgc2VsbEFtb3VudEJhc2VVbml0czogJzEwMDAwJyxcclxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb25QcmljZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgdHhPcmlnaW46IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIHByb3RvY29sVmVyc2lvbjogJzQnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrZWREZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RBcGlLZXk6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RQYXJhbXM6IGV4cGVjdGVkUGFyYW1zLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VDb2RlOiBTdGF0dXNDb2Rlcy5TdWNjZXNzLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gU3VjY2Vzc2Z1bCByZXNwb25zZVxyXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzZnVsUXVvdGUxID0ge1xyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcihleHBlY3RlZFBhcmFtcy5zZWxsQW1vdW50QmFzZVVuaXRzKSxcclxuICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKGV4cGVjdGVkUGFyYW1zLnNlbGxBbW91bnRCYXNlVW5pdHMpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBtYWtlVGhyZWVNaW51dGVFeHBpcnkoKSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdvb2RNTVVyaTEgPSAnaHR0cHM6Ly8xMzM3LjAuMC4xJztcclxuICAgICAgICAgICAgY29uc3QgZ29vZE1NVXJpMiA9ICdodHRwczovLzM3LjAuMC4xJztcclxuXHJcbiAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja2VkRGVmYXVsdHMsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogZ29vZE1NVXJpMSxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogc3VjY2Vzc2Z1bFF1b3RlMSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFRlc3Qgb3V0IGEgYmFkIHJlc3BvbnNlIGNvZGUsIGVuc3VyZSBpdCBkb2VzbnQgY2F1c2UgdGhyb3dcclxuICAgICAgICAgICAgbW9ja2VkUmVxdWVzdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrZWREZWZhdWx0cyxcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly80MjAuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhOiB7IGVycm9yOiAnYmFkIHJlcXVlc3QnIH0sXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZUNvZGU6IFN0YXR1c0NvZGVzLkludGVybmFsRXJyb3IsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBUZXN0IG91dCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgY29kZSBidXQgYW4gaW52YWxpZCBvcmRlclxyXG4gICAgICAgICAgICBtb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIC4uLm1vY2tlZERlZmF1bHRzLFxyXG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovLzQyMS4wLjAuMScsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZURhdGE6IHsgbWFrZXJUb2tlbjogJzEyMycgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBjb2RlIGFuZCB2YWxpZCByZXNwb25zZSBkYXRhLCBidXQgZm9yIHdyb25nIG1ha2VyIGFzc2V0IGRhdGFcclxuICAgICAgICAgICAgbW9ja2VkUmVxdWVzdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrZWREZWZhdWx0cyxcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly80MjIuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhOiB7IC4uLnN1Y2Nlc3NmdWxRdW90ZTEsIG1ha2VyVG9rZW46IG90aGVyVG9rZW4xIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgY29kZSBhbmQgdmFsaWQgcmVzcG9uc2UgZGF0YSwgYnV0IGZvciB3cm9uZyB0YWtlciBhc3NldCBkYXRhXHJcbiAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja2VkRGVmYXVsdHMsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vNDIzLjAuMC4xJyxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogeyAuLi5zdWNjZXNzZnVsUXVvdGUxLCB0YWtlclRva2VuOiBvdGhlclRva2VuMSB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gQW5vdGhlciBTdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja2VkRGVmYXVsdHMsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogZ29vZE1NVXJpMixcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogc3VjY2Vzc2Z1bFF1b3RlMSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhc3NldE9mZmVyaW5nczogeyBbazogc3RyaW5nXTogW1tzdHJpbmcsIHN0cmluZ11dIH0gPSB7XHJcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly80MjAuMC4wLjEnOiBbW21ha2VyVG9rZW4sIHRha2VyVG9rZW5dXSxcclxuICAgICAgICAgICAgICAgICdodHRwczovLzQyMS4wLjAuMSc6IFtbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbl1dLFxyXG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vNDIyLjAuMC4xJzogW1ttYWtlclRva2VuLCB0YWtlclRva2VuXV0sXHJcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly80MjMuMC4wLjEnOiBbW21ha2VyVG9rZW4sIHRha2VyVG9rZW5dXSxcclxuICAgICAgICAgICAgICAgICdodHRwczovLzQyNC4wLjAuMSc6IFtbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbl1dLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhc3NldE9mZmVyaW5nc1tnb29kTU1VcmkxXSA9IFtbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbl1dO1xyXG4gICAgICAgICAgICBhc3NldE9mZmVyaW5nc1tnb29kTU1VcmkyXSA9IFtbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbl1dO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRlc3RIZWxwZXJzLndpdGhNb2NrZWRSZnFRdW90ZXMoXHJcbiAgICAgICAgICAgICAgICBtb2NrZWRSZXF1ZXN0cyxcclxuICAgICAgICAgICAgICAgIFtdLFxyXG4gICAgICAgICAgICAgICAgUmZxUXVvdGVFbmRwb2ludC5JbmRpY2F0aXZlLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHFyID0gbmV3IFF1b3RlUmVxdWVzdG9yKGFzc2V0T2ZmZXJpbmdzLCBxdW90ZVJlcXVlc3Rvckh0dHBDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBxci5yZXF1ZXN0UmZxdEluZGljYXRpdmVRdW90ZXNBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hcmtldE9wZXJhdGlvbi5TZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ2ZvbycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXNwLnNvcnQoKSkudG8uZXFsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IC4uLnN1Y2Nlc3NmdWxRdW90ZTEsIG1ha2VyVXJpOiBnb29kTU1VcmkxIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IC4uLnN1Y2Nlc3NmdWxRdW90ZTEsIG1ha2VyVXJpOiBnb29kTU1VcmkyIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uc29ydCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcXVvdGVSZXF1ZXN0b3JIdHRwQ2xpZW50LFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGl0KCdzaG91bGQgb25seSByZXR1cm4gUkZRVCByZXF1ZXN0cyB0aGF0IG1lZXQgdGhlIHRpbWVvdXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRha2VyQWRkcmVzcyA9ICcweGQyMDk5MjVkZWZjOTk0ODhlM2FmZmYxMTc0ZTQ4YjRmYTYyODMwMmEnO1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSAnbXkta28wbC1hcGkta2V5JztcclxuICAgICAgICAgICAgY29uc3QgbWF4VGltZW91dE1zID0gMTA7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICBjb25zdCBleGNlZWRUaW1lb3V0TXMgPSBtYXhUaW1lb3V0TXMgKyA1MDtcclxuXHJcbiAgICAgICAgICAgIC8vIFNldCB1cCBSRlFUIHJlc3BvbnNlc1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6YXJyYXktdHlwZVxyXG4gICAgICAgICAgICBjb25zdCBtb2NrZWRSZXF1ZXN0czogTW9ja2VkUmZxUXVvdGVSZXNwb25zZVtdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUGFyYW1zOiBUYWtlclJlcXVlc3RRdWVyeVBhcmFtc1VubmVzdGVkID0ge1xyXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuQWRkcmVzczogdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIGJ1eVRva2VuQWRkcmVzczogbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIHNlbGxBbW91bnRCYXNlVW5pdHM6ICcxMDAwMCcsXHJcbiAgICAgICAgICAgICAgICBjb21wYXJpc29uUHJpY2U6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbFZlcnNpb246ICc0JyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja2VkRGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QXBpS2V5OiBhcGlLZXksXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0UGFyYW1zOiBleHBlY3RlZFBhcmFtcyxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29kZTogU3RhdHVzQ29kZXMuU3VjY2VzcyxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN1Y2Nlc3NmdWwgcmVzcG9uc2VcclxuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc2Z1bFF1b3RlMSA9IHtcclxuICAgICAgICAgICAgICAgIG1ha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoZXhwZWN0ZWRQYXJhbXMuc2VsbEFtb3VudEJhc2VVbml0cyksXHJcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcihleHBlY3RlZFBhcmFtcy5zZWxsQW1vdW50QmFzZVVuaXRzKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbWFrZVRocmVlTWludXRlRXhwaXJ5KCksXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyBPbmUgZ29vZCByZXF1ZXN0XHJcbiAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubW9ja2VkRGVmYXVsdHMsXHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vMTMzNy4wLjAuMScsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZURhdGE6IHN1Y2Nlc3NmdWxRdW90ZTEsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gT25lIHJlcXVlc3QgdGhhdCB3aWxsIHRpbWVvdXRcclxuICAgICAgICAgICAgbW9ja2VkUmVxdWVzdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAuLi5tb2NrZWREZWZhdWx0cyxcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly80MjAuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhOiBzdWNjZXNzZnVsUXVvdGUxLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8taW5mZXJyZWQtZW1wdHktb2JqZWN0LXR5cGVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIF9yZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKFtTdGF0dXNDb2Rlcy5TdWNjZXNzLCBzdWNjZXNzZnVsUXVvdGUxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGV4Y2VlZFRpbWVvdXRNcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0ZXN0SGVscGVycy53aXRoTW9ja2VkUmZxUXVvdGVzKFxyXG4gICAgICAgICAgICAgICAgbW9ja2VkUmVxdWVzdHMsXHJcbiAgICAgICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgICAgIFJmcVF1b3RlRW5kcG9pbnQuSW5kaWNhdGl2ZSxcclxuICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBxciA9IG5ldyBRdW90ZVJlcXVlc3RvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vMTMzNy4wLjAuMSc6IFtbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbl1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vNDIwLjAuMC4xJzogW1ttYWtlclRva2VuLCB0YWtlclRva2VuXV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlUmVxdWVzdG9ySHR0cENsaWVudCxcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBxci5yZXF1ZXN0UmZxdEluZGljYXRpdmVRdW90ZXNBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hcmtldE9wZXJhdGlvbi5TZWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ2ZvbycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyRW5kcG9pbnRNYXhSZXNwb25zZVRpbWVNczogbWF4VGltZW91dE1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3Auc29ydCgpKS50by5lcWwoW3sgLi4uc3VjY2Vzc2Z1bFF1b3RlMSwgbWFrZXJVcmk6ICdodHRwczovLzEzMzcuMC4wLjEnIH1dLnNvcnQoKSk7IC8vIG5vdGljZSBvbmx5IG9uZSByZXN1bHQsIGRlc3BpdGUgdHdvIHJlcXVlc3RzIG1hZGVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBxdW90ZVJlcXVlc3Rvckh0dHBDbGllbnQsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2Vzc2Z1bCBSRlFUIGluZGljYXRpdmUgcXVvdGUgcmVxdWVzdHMgKEJ1eSknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRha2VyQWRkcmVzcyA9ICcweGQyMDk5MjVkZWZjOTk0ODhlM2FmZmYxMTc0ZTQ4YjRmYTYyODMwMmEnO1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSAnbXkta28wbC1hcGkta2V5JztcclxuXHJcbiAgICAgICAgICAgIC8vIFNldCB1cCBSRlFUIHJlc3BvbnNlc1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6YXJyYXktdHlwZVxyXG4gICAgICAgICAgICBjb25zdCBtb2NrZWRSZXF1ZXN0czogTW9ja2VkUmZxUXVvdGVSZXNwb25zZVtdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkUGFyYW1zOiBUYWtlclJlcXVlc3RRdWVyeVBhcmFtc1VubmVzdGVkID0ge1xyXG4gICAgICAgICAgICAgICAgc2VsbFRva2VuQWRkcmVzczogdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIGJ1eVRva2VuQWRkcmVzczogbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIGJ1eUFtb3VudEJhc2VVbml0czogJzEwMDAwJyxcclxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb25QcmljZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgdHhPcmlnaW46IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIHByb3RvY29sVmVyc2lvbjogJzQnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBTdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NmdWxRdW90ZTEgPSB7XHJcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKGV4cGVjdGVkUGFyYW1zLmJ1eUFtb3VudEJhc2VVbml0cyksXHJcbiAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcihleHBlY3RlZFBhcmFtcy5idXlBbW91bnRCYXNlVW5pdHMpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBtYWtlVGhyZWVNaW51dGVFeHBpcnkoKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbW9ja2VkUmVxdWVzdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vMTMzNy4wLjAuMScsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QXBpS2V5OiBhcGlLZXksXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0UGFyYW1zOiBleHBlY3RlZFBhcmFtcyxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogc3VjY2Vzc2Z1bFF1b3RlMSxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29kZTogU3RhdHVzQ29kZXMuU3VjY2VzcyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGVzdEhlbHBlcnMud2l0aE1vY2tlZFJmcVF1b3RlcyhcclxuICAgICAgICAgICAgICAgIG1vY2tlZFJlcXVlc3RzLFxyXG4gICAgICAgICAgICAgICAgW10sXHJcbiAgICAgICAgICAgICAgICBSZnFRdW90ZUVuZHBvaW50LkluZGljYXRpdmUsXHJcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXIgPSBuZXcgUXVvdGVSZXF1ZXN0b3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgJ2h0dHBzOi8vMTMzNy4wLjAuMSc6IFtbbWFrZXJUb2tlbiwgdGFrZXJUb2tlbl1dIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlUmVxdWVzdG9ySHR0cENsaWVudCxcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBxci5yZXF1ZXN0UmZxdEluZGljYXRpdmVRdW90ZXNBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hcmtldE9wZXJhdGlvbi5CdXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnZm9vJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZW50T25GaWxsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3Auc29ydCgpKS50by5lcWwoW3sgLi4uc3VjY2Vzc2Z1bFF1b3RlMSwgbWFrZXJVcmk6ICdodHRwczovLzEzMzcuMC4wLjEnIH1dLnNvcnQoKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcXVvdGVSZXF1ZXN0b3JIdHRwQ2xpZW50LFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGl0KCdzaG91bGQgYmUgYWJsZSB0byBoYW5kbGUgYW5kIGZpbHRlciBSRlEgb2ZmZXJpbmdzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXN0czogW3N0cmluZ1tdIHwgdW5kZWZpbmVkLCBzdHJpbmdbXV1bXSA9IFtcclxuICAgICAgICAgICAgICAgIFtbJ2h0dHBzOi8vdG9wLm1ha2VyJ10sIFtdXSxcclxuICAgICAgICAgICAgICAgIFt1bmRlZmluZWQsIFsnaHR0cHM6Ly9mb28uYmFyLycsICdodHRwczovL2xvcmVtLmlwc3VtLyddXSxcclxuICAgICAgICAgICAgICAgIFtbJ2h0dHBzOi8vbG9yZW0uaXBzdW0vJ10sIFsnaHR0cHM6Ly9sb3JlbS5pcHN1bS8nXV0sXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGVzdCBvZiB0ZXN0cykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2FwaUtleVdoaXRlbGlzdCwgcmVzdWx0c10gPSB0ZXN0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBRdW90ZVJlcXVlc3Rvci5nZXRUeXBlZE1ha2VyVXJsc0FuZFdoaXRlbGlzdChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ2ZvbycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ2JhcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGl0ZWxpc3RJbnRlZ3JhdG9yVXJsczogYXBpS2V5V2hpdGVsaXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwczovL2Zvby5iYXIvJzogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcweEE2Y0Q0Y2I4YzYyYUNEZTQ0NzM5RTNFZDBGMWQxM0UwZTMxZjJkOTQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcweEY0NTEwN2MwMjAwYTA0QThhQjlDNjAwY2M1MkEzQzg5QUU1RDA0ODknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vbG9yZW0uaXBzdW0vJzogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcweEE2Y0Q0Y2I4YzYyYUNEZTQ0NzM5RTNFZDBGMWQxM0UwZTMxZjJkOTQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcweEY0NTEwN2MwMjAwYTA0QThhQjlDNjAwY2M1MkEzQzg5QUU1RDA0ODknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkVXJscyA9IHJlc3BvbnNlLm1hcCgodHlwZWQpID0+IHR5cGVkLnVybCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QodHlwZWRVcmxzKS50by5lcWwocmVzdWx0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc3VjY2Vzc2Z1bCBhbHQgaW5kaWNhdGl2ZSBxdW90ZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRha2VyQWRkcmVzcyA9ICcweGQyMDk5MjVkZWZjOTk0ODhlM2FmZmYxMTc0ZTQ4YjRmYTYyODMwMmEnO1xyXG4gICAgICAgICAgICBjb25zdCB0eE9yaWdpbiA9ICcweGYyMDk5MjVkZWZjOTk0ODhlM2FmZmYxMTc0ZTQ4YjRmYTYyODMwMmEnO1xyXG4gICAgICAgICAgICBjb25zdCBhcGlLZXkgPSAnbXkta28wbC1hcGkta2V5JztcclxuXHJcbiAgICAgICAgICAgIC8vIGJhc2UgdG9rZW4gaGFzIDIgZGVjaW1hbHNcclxuICAgICAgICAgICAgLy8gcXVvdGUgdG9rZW4gaGFzIDMgZGVjaW1hbHNcclxuICAgICAgICAgICAgY29uc3QgYmFzZVRva2VuID0gbWFrZXJUb2tlbjtcclxuICAgICAgICAgICAgY29uc3QgcXVvdGVUb2tlbiA9IHRha2VyVG9rZW47XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgdXAgUkZRVCByZXNwb25zZXNcclxuICAgICAgICAgICAgY29uc3QgYWx0TW9ja2VkUmVxdWVzdHM6IEFsdE1vY2tlZFJmcVF1b3RlUmVzcG9uc2VbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBhbHRTY2VuYXJpb3M6IHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWxRdW90ZTogVjRSRlFJbmRpY2F0aXZlUXVvdGU7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRNYWtlclRva2VuOiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRUYWtlclRva2VuOiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRBbW91bnQ6IEJpZ051bWJlcjtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZE9wZXJhdGlvbjogTWFya2V0T3BlcmF0aW9uO1xyXG4gICAgICAgICAgICB9W10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNDRU5BUklPIDFcclxuICAgICAgICAgICAgLy8gYnV5LCBiYXNlIGFzc2V0IHNwZWNpZmllZFxyXG4gICAgICAgICAgICAvLyByZXF1ZXN0aW5nIHRvIGJ1eSAxMDAgdW5pdHMgKDEwMDAwIGJhc2UgdW5pdHMpIG9mIHRoZSBiYXNlIHRva2VuXHJcbiAgICAgICAgICAgIC8vIHJldHVybmluZyBhIHByaWNlIG9mIDAuMDEsIHdoaWNoIHNob3VsZCBtZWFuIDEwMDAwIG1ha2VyLCAxMDAwIHRha2VyIGFtb3VudFxyXG4gICAgICAgICAgICBjb25zdCBidXlBbW91bnRBbHRSZXF1ZXN0OiBBbHRRdW90ZVJlcXVlc3REYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgbWFya2V0OiAnWFlaLTEyMycsXHJcbiAgICAgICAgICAgICAgICBtb2RlbDogQWx0UXVvdGVNb2RlbC5JbmRpY2F0aXZlLFxyXG4gICAgICAgICAgICAgICAgcHJvZmlsZTogQUxUX1BST0ZJTEUsXHJcbiAgICAgICAgICAgICAgICBzaWRlOiBBbHRRdW90ZVNpZGUuU2VsbCxcclxuICAgICAgICAgICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbixcclxuICAgICAgICAgICAgICAgICAgICB0YWtlcjogdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudDogYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFtb3VudDogJzEwMCcsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIFN1Y2Nlc3NmdWwgcmVzcG9uc2VcclxuICAgICAgICAgICAgY29uc3QgYnV5QW1vdW50QWx0UmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi5idXlBbW91bnRBbHRSZXF1ZXN0LFxyXG4gICAgICAgICAgICAgICAgaWQ6ICdyYW5kb21faWQnLFxyXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICBwcmljZTogbmV3IEJpZ051bWJlcigwLjAxKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnbGl2ZScsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NmdWxCdXlBbW91bnRRdW90ZTogVjRSRlFJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICBtYWtlclRva2VuOiBiYXNlVG9rZW4sXHJcbiAgICAgICAgICAgICAgICB0YWtlclRva2VuOiBxdW90ZVRva2VuLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoMCksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGFsdE1vY2tlZFJlcXVlc3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovLzEzMi4wLjAuMScsXHJcbiAgICAgICAgICAgICAgICBtbUFwaUtleTogQUxUX01NX0FQSV9LRVksXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZUNvZGU6IENSRUFURURfU1RBVFVTX0NPREUsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0RGF0YTogYnV5QW1vdW50QWx0UmVxdWVzdCxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogYnV5QW1vdW50QWx0UmVzcG9uc2UsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhbHRTY2VuYXJpb3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzZnVsUXVvdGU6IHN1Y2Nlc3NmdWxCdXlBbW91bnRRdW90ZSxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZE1ha2VyVG9rZW46IGJhc2VUb2tlbixcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZFRha2VyVG9rZW46IHF1b3RlVG9rZW4sXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkT3BlcmF0aW9uOiBNYXJrZXRPcGVyYXRpb24uQnV5LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNDRU5BUklPIDJcclxuICAgICAgICAgICAgLy8gYWx0IGJ1eSwgcXVvdGUgYXNzZXQgc3BlY2lmaWVkXHJcbiAgICAgICAgICAgIC8vIHVzZXIgaXMgcmVxdWVzdGluZyB0byBzZWxsIDEgdW5pdCBvZiB0aGUgcXVvdGUgdG9rZW4sIG9yIDEwMDAgYmFzZSB1bml0c1xyXG4gICAgICAgICAgICAvLyByZXR1cm5pbmcgYSBwcmljZSBvZiAwLjAxLCB3aGljaCBzaG91bGQgbWVhbiAxMDAwMCBtYWtlciBhbW91bnQsIDEwMDAgdGFrZXIgYW1vdW50XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1eVZhbHVlQWx0UmVxdWVzdDogQWx0UXVvdGVSZXF1ZXN0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG1hcmtldDogJ1hZWi0xMjMnLFxyXG4gICAgICAgICAgICAgICAgbW9kZWw6IEFsdFF1b3RlTW9kZWwuSW5kaWNhdGl2ZSxcclxuICAgICAgICAgICAgICAgIHByb2ZpbGU6IEFMVF9QUk9GSUxFLFxyXG4gICAgICAgICAgICAgICAgc2lkZTogQWx0UXVvdGVTaWRlLlNlbGwsXHJcbiAgICAgICAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnQ6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogJzEnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBTdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGJ1eVZhbHVlQWx0UmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi5idXlWYWx1ZUFsdFJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICBpZDogJ3JhbmRvbV9pZCcsXHJcbiAgICAgICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcclxuICAgICAgICAgICAgICAgIHByaWNlOiBuZXcgQmlnTnVtYmVyKDAuMDEpLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdsaXZlJyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc2Z1bEJ1eVZhbHVlUXVvdGU6IFY0UkZRSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogYmFzZVRva2VuLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogcXVvdGVUb2tlbixcclxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDAwKSxcclxuICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhbHRNb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly8xMzIuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgbW1BcGlLZXk6IEFMVF9NTV9BUElfS0VZLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VDb2RlOiBDUkVBVEVEX1NUQVRVU19DT0RFLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdERhdGE6IGJ1eVZhbHVlQWx0UmVxdWVzdCxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YTogYnV5VmFsdWVBbHRSZXNwb25zZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFsdFNjZW5hcmlvcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWxRdW90ZTogc3VjY2Vzc2Z1bEJ1eVZhbHVlUXVvdGUsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRNYWtlclRva2VuOiBiYXNlVG9rZW4sXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRUYWtlclRva2VuOiBxdW90ZVRva2VuLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkT3BlcmF0aW9uOiBNYXJrZXRPcGVyYXRpb24uU2VsbCxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTQ0VOQVJJTyAzXHJcbiAgICAgICAgICAgIC8vIGFsdCBzZWxsLCBiYXNlIGFzc2V0IHNwZWNpZmllZFxyXG4gICAgICAgICAgICAvLyB1c2VyIGlzIHJlcXVlc3RpbmcgdG8gc2VsbCAxMDAgdW5pdHMgKDEwMDAwIGJhc2UgdW5pdHMpIG9mIHRoZSBiYXNlIHRva2VuXHJcbiAgICAgICAgICAgIC8vIHJldHVybmluZyBhIHByaWNlIG9mIDAuMDEsIHdoaWNoIHNob3VsZCBtZWFuIDEwMDAwIHRha2VyIGFtb3VudCwgMTAwMCBtYWtlciBhbW91bnRcclxuICAgICAgICAgICAgY29uc3Qgc2VsbEFtb3VudEFsdFJlcXVlc3Q6IEFsdFF1b3RlUmVxdWVzdERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXQ6ICdYWVotMTIzJyxcclxuICAgICAgICAgICAgICAgIG1vZGVsOiBBbHRRdW90ZU1vZGVsLkluZGljYXRpdmUsXHJcbiAgICAgICAgICAgICAgICBwcm9maWxlOiBBTFRfUFJPRklMRSxcclxuICAgICAgICAgICAgICAgIHNpZGU6IEFsdFF1b3RlU2lkZS5CdXksXHJcbiAgICAgICAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnQ6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBhbW91bnQ6ICcxMDAnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBTdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGxBbW91bnRBbHRSZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgICAgIC4uLnNlbGxBbW91bnRBbHRSZXF1ZXN0LFxyXG4gICAgICAgICAgICAgICAgaWQ6ICdyYW5kb21faWQnLFxyXG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICBwcmljZTogbmV3IEJpZ051bWJlcigwLjAxKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnbGl2ZScsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NmdWxTZWxsQW1vdW50UXVvdGU6IFY0UkZRSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogcXVvdGVUb2tlbixcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGJhc2VUb2tlbixcclxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhbHRNb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly8xMzIuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgbW1BcGlLZXk6IEFMVF9NTV9BUElfS0VZLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VDb2RlOiBDUkVBVEVEX1NUQVRVU19DT0RFLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdERhdGE6IHNlbGxBbW91bnRBbHRSZXF1ZXN0LFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhOiBzZWxsQW1vdW50QWx0UmVzcG9uc2UsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhbHRTY2VuYXJpb3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzZnVsUXVvdGU6IHN1Y2Nlc3NmdWxTZWxsQW1vdW50UXVvdGUsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRNYWtlclRva2VuOiBxdW90ZVRva2VuLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkVGFrZXJUb2tlbjogYmFzZVRva2VuLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDAwKSxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZE9wZXJhdGlvbjogTWFya2V0T3BlcmF0aW9uLlNlbGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU0NFTkFSSU8gNFxyXG4gICAgICAgICAgICAvLyBhbHQgc2VsbCwgcXVvdGUgYXNzZXQgc3BlY2lmaWVkXHJcbiAgICAgICAgICAgIC8vIHVzZXIgaXMgcmVxdWVzdGluZyB0byBidXkgMSB1bml0ICgxMDAwIGJhc2UgdW5pdHMpIG9mIHRoZSBxdW90ZSB0b2tlblxyXG4gICAgICAgICAgICAvLyByZXR1cm5pbmcgYSBwcmljZSBvZiAwLjAxLCB3aGljaCBzaG91bGQgbWVhbiAxMDAwMCB0YWtlciBhbW91bnQsIDEwMDAgbWFrZXIgYW1vdW50XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGxWYWx1ZUFsdFJlcXVlc3Q6IEFsdFF1b3RlUmVxdWVzdERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXQ6ICdYWVotMTIzJyxcclxuICAgICAgICAgICAgICAgIG1vZGVsOiBBbHRRdW90ZU1vZGVsLkluZGljYXRpdmUsXHJcbiAgICAgICAgICAgICAgICBwcm9maWxlOiBBTFRfUFJPRklMRSxcclxuICAgICAgICAgICAgICAgIHNpZGU6IEFsdFF1b3RlU2lkZS5CdXksXHJcbiAgICAgICAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBjbGllbnQ6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogJzEnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBTdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGxWYWx1ZUFsdFJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICAgICAgLi4uc2VsbFZhbHVlQWx0UmVxdWVzdCxcclxuICAgICAgICAgICAgICAgIGlkOiAncmFuZG9tX2lkJyxcclxuICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgcHJpY2U6IG5ldyBCaWdOdW1iZXIoMC4wMSkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2xpdmUnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBzdWNjZXNzZnVsU2VsbFZhbHVlUXVvdGU6IFY0UkZRSW5kaWNhdGl2ZVF1b3RlID0ge1xyXG4gICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogcXVvdGVUb2tlbixcclxuICAgICAgICAgICAgICAgIHRha2VyVG9rZW46IGJhc2VUb2tlbixcclxuICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBhbHRNb2NrZWRSZXF1ZXN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly8xMzIuMC4wLjEnLFxyXG4gICAgICAgICAgICAgICAgbW1BcGlLZXk6IEFMVF9NTV9BUElfS0VZLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VDb2RlOiBDUkVBVEVEX1NUQVRVU19DT0RFLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdERhdGE6IHNlbGxWYWx1ZUFsdFJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZURhdGE6IHNlbGxWYWx1ZUFsdFJlc3BvbnNlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYWx0U2NlbmFyaW9zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bFF1b3RlOiBzdWNjZXNzZnVsU2VsbFZhbHVlUXVvdGUsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRNYWtlclRva2VuOiBxdW90ZVRva2VuLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkVGFrZXJUb2tlbjogYmFzZVRva2VuLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkT3BlcmF0aW9uOiBNYXJrZXRPcGVyYXRpb24uQnV5LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzY2VuYXJpb0NvdW50ZXIgPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFsdFNjZW5hcmlvIG9mIGFsdFNjZW5hcmlvcykge1xyXG4gICAgICAgICAgICAgICAgbG9nVXRpbHMubG9nKGBBbHQgTU0gaW5kaWNhdGl2ZSBzY2VuYXJpbyAke3NjZW5hcmlvQ291bnRlcn1gKTtcclxuICAgICAgICAgICAgICAgIHNjZW5hcmlvQ291bnRlciArPSAxO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGVzdEhlbHBlcnMud2l0aE1vY2tlZFJmcVF1b3RlcyhcclxuICAgICAgICAgICAgICAgICAgICBbXSxcclxuICAgICAgICAgICAgICAgICAgICBhbHRNb2NrZWRSZXF1ZXN0cyxcclxuICAgICAgICAgICAgICAgICAgICBSZnFRdW90ZUVuZHBvaW50LkluZGljYXRpdmUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxciA9IG5ldyBRdW90ZVJlcXVlc3Rvcih7fSwgcXVvdGVSZXF1ZXN0b3JIdHRwQ2xpZW50LCBBTFRfUkZRX0NSRURTKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHFyLnJlcXVlc3RSZnF0SW5kaWNhdGl2ZVF1b3Rlc0FzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0U2NlbmFyaW8ucmVxdWVzdGVkTWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdFNjZW5hcmlvLnJlcXVlc3RlZFRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRTY2VuYXJpby5yZXF1ZXN0ZWRBbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRTY2VuYXJpby5yZXF1ZXN0ZWRPcGVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6IGFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdmb28nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5ncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhY2sgdG8gZ2V0IHRoZSBleHBpcnkgcmlnaHQsIHNpbmNlIGl0J3MgZGVwZW5kZW50IG9uIHRoZSBjdXJyZW50IHRpbWVzdGFtcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBlY3RlZCA9IHsgLi4uYWx0U2NlbmFyaW8uc3VjY2Vzc2Z1bFF1b3RlLCBleHBpcnk6IHJlc3BbMF0uZXhwaXJ5IH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXNwLnNvcnQoKSkudG8uZXFsKFtleHBlY3RlZF0uc29ydCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHF1b3RlUmVxdWVzdG9ySHR0cENsaWVudCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuIl0sInZlcnNpb24iOjN9
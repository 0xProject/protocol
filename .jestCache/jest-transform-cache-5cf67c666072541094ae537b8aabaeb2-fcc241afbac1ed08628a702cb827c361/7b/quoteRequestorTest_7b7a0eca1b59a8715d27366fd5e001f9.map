{"file":"/Users/davidwalsh/code-local/0x-rfq-api/src/quoteRequestor/__tests__/quoteRequestorTest.ts","mappings":"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","names":[],"sources":["/Users/davidwalsh/code-local/0x-rfq-api/src/quoteRequestor/__tests__/quoteRequestorTest.ts"],"sourcesContent":["// tslint:disable max-file-line-count\r\nimport { constants, KEEP_ALIVE_TTL } from '@0x/asset-swapper/lib/src/constants';\r\nimport {\r\n    AltMockedRfqQuoteResponse,\r\n    AltQuoteModel,\r\n    AltQuoteRequestData,\r\n    AltQuoteSide,\r\n    AltRfqMakerAssetOfferings,\r\n    MarketOperation,\r\n    MockedRfqQuoteResponse,\r\n} from '@0x/asset-swapper/lib/src/types';\r\nimport { tokenUtils } from '@0x/dev-utils';\r\nimport { FillQuoteTransformerOrderType, SignatureType } from '@0x/protocol-utils';\r\nimport { StatusCodes } from '@0x/types';\r\nimport { BigNumber, logUtils } from '@0x/utils';\r\nimport Axios from 'axios';\r\nimport { expect } from 'chai';\r\nimport { Agent as HttpAgent } from 'http';\r\nimport { Agent as HttpsAgent } from 'https';\r\nimport * as _ from 'lodash';\r\n\r\nimport { NULL_ADDRESS } from '../../core/constants';\r\nimport { TakerRequestQueryParamsUnnested, V4RFQIndicativeQuote } from '../../quote-server/types';\r\nimport { QuoteRequestor } from '../QuoteRequestor';\r\n\r\nimport { RfqQuoteEndpoint, testHelpers } from './testHelpers';\r\n\r\nconst quoteRequestorHttpClient = Axios.create({\r\n    httpAgent: new HttpAgent({ keepAlive: true, timeout: KEEP_ALIVE_TTL }),\r\n    httpsAgent: new HttpsAgent({ keepAlive: true, timeout: KEEP_ALIVE_TTL }),\r\n});\r\n\r\nconst ALT_MM_API_KEY = 'averysecurekey';\r\nconst ALT_PROFILE = 'acoolprofile';\r\nconst ALT_RFQ_CREDS = {\r\n    altRfqApiKey: ALT_MM_API_KEY,\r\n    altRfqProfile: ALT_PROFILE,\r\n};\r\n\r\nconst CREATED_STATUS_CODE = 201;\r\n\r\nfunction makeThreeMinuteExpiry(): BigNumber {\r\n    const expiry = new Date(Date.now());\r\n    // tslint:disable-next-line: custom-no-magic-numbers\r\n    expiry.setMinutes(expiry.getMinutes() + 3);\r\n    return new BigNumber(Math.round(expiry.valueOf() / constants.ONE_SECOND_MS));\r\n}\r\n\r\ndescribe('QuoteRequestor', () => {\r\n    const [makerToken, takerToken, otherToken1] = tokenUtils.getDummyERC20TokenAddresses();\r\n    const validSignature = { v: 28, r: '0x', s: '0x', signatureType: SignatureType.EthSign };\r\n\r\n    const altRfqAssetOfferings: AltRfqMakerAssetOfferings = {\r\n        'https://132.0.0.1': [\r\n            {\r\n                id: 'XYZ-123',\r\n                baseAsset: makerToken,\r\n                quoteAsset: takerToken,\r\n                baseAssetDecimals: 2,\r\n                quoteAssetDecimals: 3,\r\n            },\r\n        ],\r\n    };\r\n\r\n    describe('requestRfqtFirmQuotesAsync for firm quotes', () => {\r\n        it('should return successful RFQT requests', async () => {\r\n            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';\r\n            const txOrigin = takerAddress;\r\n            const apiKey = 'my-ko0l-api-key';\r\n\r\n            // Set up RFQT responses\r\n            // tslint:disable-next-line:array-type\r\n            const mockedRequests: MockedRfqQuoteResponse[] = [];\r\n            const altMockedRequests: AltMockedRfqQuoteResponse[] = [];\r\n\r\n            const expectedParams: TakerRequestQueryParamsUnnested = {\r\n                sellTokenAddress: takerToken,\r\n                buyTokenAddress: makerToken,\r\n                sellAmountBaseUnits: '10000',\r\n                comparisonPrice: undefined,\r\n                takerAddress,\r\n                txOrigin,\r\n                protocolVersion: '4',\r\n            };\r\n            const mockedDefaults = {\r\n                requestApiKey: apiKey,\r\n                requestParams: expectedParams,\r\n                responseCode: StatusCodes.Success,\r\n            };\r\n            const validSignedOrder = {\r\n                makerToken,\r\n                takerToken,\r\n                makerAmount: new BigNumber('1000'),\r\n                takerAmount: new BigNumber('1000'),\r\n                maker: takerAddress,\r\n                taker: takerAddress,\r\n                pool: '0x',\r\n                salt: '0',\r\n                chainId: 1,\r\n                verifyingContract: takerAddress,\r\n                txOrigin,\r\n                expiry: makeThreeMinuteExpiry(),\r\n                signature: validSignature,\r\n            };\r\n            // request is to sell 10000 units of the base token\r\n            // 10 units at 3 decimals\r\n            const altFirmRequestData = {\r\n                market: 'XYZ-123',\r\n                model: AltQuoteModel.Firm,\r\n                profile: ALT_PROFILE,\r\n                side: AltQuoteSide.Sell,\r\n                meta: {\r\n                    txOrigin,\r\n                    taker: takerAddress,\r\n                    client: apiKey,\r\n                },\r\n                value: '10',\r\n            };\r\n            const altFirmResponse = {\r\n                ...altFirmRequestData,\r\n                id: 'random_id',\r\n                // tslint:disable-next-line:custom-no-magic-numbers\r\n                price: new BigNumber(10 / 100).toString(),\r\n                status: 'active',\r\n                data: {\r\n                    '0xv4order': validSignedOrder,\r\n                },\r\n            };\r\n\r\n            // Successful response\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://1337.0.0.1',\r\n                responseData: {\r\n                    signedOrder: validSignedOrder,\r\n                },\r\n            });\r\n            // Another Successful response\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://37.0.0.1',\r\n                responseData: { signedOrder: validSignedOrder },\r\n            });\r\n            // Test out a bad response code, ensure it doesnt cause throw\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://420.0.0.1',\r\n                responseData: { error: 'bad request' },\r\n                responseCode: StatusCodes.InternalError,\r\n            });\r\n            // Test out a successful response code but a partial order\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://421.0.0.1',\r\n                responseData: { signedOrder: { makerToken: '123' } },\r\n            });\r\n            // A successful response code and invalid response data (encoding)\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://421.1.0.1',\r\n                responseData: 'this is not JSON!',\r\n            });\r\n            // A successful response code and valid order, but for wrong maker asset data\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://422.0.0.1',\r\n                responseData: { signedOrder: { ...validSignedOrder, makerToken: '0x1234' } },\r\n            });\r\n            // A successful response code and valid order, but for wrong taker asset data\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://423.0.0.1',\r\n                responseData: { signedOrder: { ...validSignedOrder, takerToken: '0x1234' } },\r\n            });\r\n            // A successful response code and good order but its unsigned\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://424.0.0.1',\r\n                responseData: { signedOrder: _.omit(validSignedOrder, ['signature']) },\r\n            });\r\n            // A successful response code and good order but for the wrong txOrigin\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://425.0.0.1',\r\n                responseData: { signedOrder: { ...validSignedOrder, txOrigin: NULL_ADDRESS } },\r\n            });\r\n            // A successful response code and order from an alt RFQ implementation\r\n            altMockedRequests.push({\r\n                endpoint: 'https://132.0.0.1',\r\n                mmApiKey: ALT_MM_API_KEY,\r\n                responseCode: CREATED_STATUS_CODE,\r\n                requestData: altFirmRequestData,\r\n                responseData: altFirmResponse,\r\n            });\r\n\r\n            const normalizedSuccessfulOrder = {\r\n                order: {\r\n                    ..._.omit(validSignedOrder, ['signature']),\r\n                    makerAmount: new BigNumber(validSignedOrder.makerAmount),\r\n                    takerAmount: new BigNumber(validSignedOrder.takerAmount),\r\n                    expiry: new BigNumber(validSignedOrder.expiry),\r\n                    salt: new BigNumber(validSignedOrder.salt),\r\n                },\r\n                signature: validSignedOrder.signature,\r\n                type: FillQuoteTransformerOrderType.Rfq,\r\n            };\r\n\r\n            return testHelpers.withMockedRfqQuotes(\r\n                mockedRequests,\r\n                altMockedRequests,\r\n                RfqQuoteEndpoint.Firm,\r\n                async () => {\r\n                    const qr = new QuoteRequestor(\r\n                        {\r\n                            'https://1337.0.0.1': [[makerToken, takerToken]],\r\n                            'https://420.0.0.1': [[makerToken, takerToken]],\r\n                            'https://421.0.0.1': [[makerToken, takerToken]],\r\n                            'https://421.1.0.1': [[makerToken, takerToken]],\r\n                            'https://422.0.0.1': [[makerToken, takerToken]],\r\n                            'https://423.0.0.1': [[makerToken, takerToken]],\r\n                            'https://424.0.0.1': [[makerToken, takerToken]],\r\n                            'https://425.0.0.1': [[makerToken, takerToken]],\r\n                            'https://426.0.0.1':\r\n                                [] /* Shouldn't ping an RFQ-T provider when they don't support the requested asset pair. */,\r\n                            'https://37.0.0.1': [[makerToken, takerToken]],\r\n                        },\r\n                        quoteRequestorHttpClient,\r\n                        ALT_RFQ_CREDS,\r\n                    );\r\n                    const resp = await qr.requestRfqtFirmQuotesAsync(\r\n                        makerToken,\r\n                        takerToken,\r\n                        new BigNumber(10000),\r\n                        MarketOperation.Sell,\r\n                        undefined,\r\n                        {\r\n                            integrator: {\r\n                                integratorId: apiKey,\r\n                                label: 'foo',\r\n                            },\r\n                            takerAddress,\r\n                            txOrigin: takerAddress,\r\n                            intentOnFilling: true,\r\n                            altRfqAssetOfferings,\r\n                        },\r\n                    );\r\n                    expect(resp).to.deep.eq([\r\n                        normalizedSuccessfulOrder,\r\n                        normalizedSuccessfulOrder,\r\n                        normalizedSuccessfulOrder,\r\n                    ]);\r\n                },\r\n                quoteRequestorHttpClient,\r\n            );\r\n        });\r\n    });\r\n    describe('requestRfqtIndicativeQuotesAsync for Indicative quotes', () => {\r\n        it('should optionally accept a \"comparisonPrice\" parameter', async () => {\r\n            const response = QuoteRequestor.makeQueryParameters(\r\n                otherToken1, // tx origin\r\n                otherToken1, // taker\r\n                MarketOperation.Sell,\r\n                makerToken,\r\n                takerToken,\r\n                new BigNumber(1000),\r\n                new BigNumber(300.2),\r\n            );\r\n            expect(response.comparisonPrice).to.eql('300.2');\r\n        });\r\n        it('should return successful RFQT requests', async () => {\r\n            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';\r\n            const apiKey = 'my-ko0l-api-key';\r\n\r\n            // Set up RFQT responses\r\n            // tslint:disable-next-line:array-type\r\n            const mockedRequests: MockedRfqQuoteResponse[] = [];\r\n            const expectedParams: TakerRequestQueryParamsUnnested = {\r\n                sellTokenAddress: takerToken,\r\n                buyTokenAddress: makerToken,\r\n                sellAmountBaseUnits: '10000',\r\n                comparisonPrice: undefined,\r\n                takerAddress,\r\n                txOrigin: takerAddress,\r\n                protocolVersion: '4',\r\n            };\r\n            const mockedDefaults = {\r\n                requestApiKey: apiKey,\r\n                requestParams: expectedParams,\r\n                responseCode: StatusCodes.Success,\r\n            };\r\n\r\n            // Successful response\r\n            const successfulQuote1 = {\r\n                makerToken,\r\n                takerToken,\r\n                makerAmount: new BigNumber(expectedParams.sellAmountBaseUnits),\r\n                takerAmount: new BigNumber(expectedParams.sellAmountBaseUnits),\r\n                expiry: makeThreeMinuteExpiry(),\r\n            };\r\n\r\n            const goodMMUri1 = 'https://1337.0.0.1';\r\n            const goodMMUri2 = 'https://37.0.0.1';\r\n\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: goodMMUri1,\r\n                responseData: successfulQuote1,\r\n            });\r\n            // Test out a bad response code, ensure it doesnt cause throw\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://420.0.0.1',\r\n                responseData: { error: 'bad request' },\r\n                responseCode: StatusCodes.InternalError,\r\n            });\r\n            // Test out a successful response code but an invalid order\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://421.0.0.1',\r\n                responseData: { makerToken: '123' },\r\n            });\r\n            // A successful response code and valid response data, but for wrong maker asset data\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://422.0.0.1',\r\n                responseData: { ...successfulQuote1, makerToken: otherToken1 },\r\n            });\r\n            // A successful response code and valid response data, but for wrong taker asset data\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://423.0.0.1',\r\n                responseData: { ...successfulQuote1, takerToken: otherToken1 },\r\n            });\r\n            // Another Successful response\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: goodMMUri2,\r\n                responseData: successfulQuote1,\r\n            });\r\n\r\n            const assetOfferings: { [k: string]: [[string, string]] } = {\r\n                'https://420.0.0.1': [[makerToken, takerToken]],\r\n                'https://421.0.0.1': [[makerToken, takerToken]],\r\n                'https://422.0.0.1': [[makerToken, takerToken]],\r\n                'https://423.0.0.1': [[makerToken, takerToken]],\r\n                'https://424.0.0.1': [[makerToken, takerToken]],\r\n            };\r\n            assetOfferings[goodMMUri1] = [[makerToken, takerToken]];\r\n            assetOfferings[goodMMUri2] = [[makerToken, takerToken]];\r\n\r\n            return testHelpers.withMockedRfqQuotes(\r\n                mockedRequests,\r\n                [],\r\n                RfqQuoteEndpoint.Indicative,\r\n                async () => {\r\n                    const qr = new QuoteRequestor(assetOfferings, quoteRequestorHttpClient);\r\n                    const resp = await qr.requestRfqtIndicativeQuotesAsync(\r\n                        makerToken,\r\n                        takerToken,\r\n                        new BigNumber(10000),\r\n                        MarketOperation.Sell,\r\n                        undefined,\r\n                        {\r\n                            integrator: {\r\n                                integratorId: apiKey,\r\n                                label: 'foo',\r\n                            },\r\n                            takerAddress,\r\n                            txOrigin: takerAddress,\r\n                            intentOnFilling: true,\r\n                        },\r\n                    );\r\n                    expect(resp.sort()).to.eql(\r\n                        [\r\n                            { ...successfulQuote1, makerUri: goodMMUri1 },\r\n                            { ...successfulQuote1, makerUri: goodMMUri2 },\r\n                        ].sort(),\r\n                    );\r\n                },\r\n                quoteRequestorHttpClient,\r\n            );\r\n        });\r\n        it('should only return RFQT requests that meet the timeout', async () => {\r\n            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';\r\n            const apiKey = 'my-ko0l-api-key';\r\n            const maxTimeoutMs = 10;\r\n            // tslint:disable-next-line:custom-no-magic-numbers\r\n            const exceedTimeoutMs = maxTimeoutMs + 50;\r\n\r\n            // Set up RFQT responses\r\n            // tslint:disable-next-line:array-type\r\n            const mockedRequests: MockedRfqQuoteResponse[] = [];\r\n            const expectedParams: TakerRequestQueryParamsUnnested = {\r\n                sellTokenAddress: takerToken,\r\n                buyTokenAddress: makerToken,\r\n                sellAmountBaseUnits: '10000',\r\n                comparisonPrice: undefined,\r\n                takerAddress,\r\n                txOrigin: takerAddress,\r\n                protocolVersion: '4',\r\n            };\r\n            const mockedDefaults = {\r\n                requestApiKey: apiKey,\r\n                requestParams: expectedParams,\r\n                responseCode: StatusCodes.Success,\r\n            };\r\n\r\n            // Successful response\r\n            const successfulQuote1 = {\r\n                makerToken,\r\n                takerToken,\r\n                makerAmount: new BigNumber(expectedParams.sellAmountBaseUnits),\r\n                takerAmount: new BigNumber(expectedParams.sellAmountBaseUnits),\r\n                expiry: makeThreeMinuteExpiry(),\r\n            };\r\n\r\n            // One good request\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://1337.0.0.1',\r\n                responseData: successfulQuote1,\r\n            });\r\n\r\n            // One request that will timeout\r\n            mockedRequests.push({\r\n                ...mockedDefaults,\r\n                endpoint: 'https://420.0.0.1',\r\n                responseData: successfulQuote1,\r\n                callback: async () => {\r\n                    // tslint:disable-next-line:no-inferred-empty-object-type\r\n                    return new Promise((resolve, _reject) => {\r\n                        setTimeout(() => {\r\n                            resolve([StatusCodes.Success, successfulQuote1]);\r\n                        }, exceedTimeoutMs);\r\n                    });\r\n                },\r\n            });\r\n\r\n            return testHelpers.withMockedRfqQuotes(\r\n                mockedRequests,\r\n                [],\r\n                RfqQuoteEndpoint.Indicative,\r\n                async () => {\r\n                    const qr = new QuoteRequestor(\r\n                        {\r\n                            'https://1337.0.0.1': [[makerToken, takerToken]],\r\n                            'https://420.0.0.1': [[makerToken, takerToken]],\r\n                        },\r\n                        quoteRequestorHttpClient,\r\n                    );\r\n                    const resp = await qr.requestRfqtIndicativeQuotesAsync(\r\n                        makerToken,\r\n                        takerToken,\r\n                        new BigNumber(10000),\r\n                        MarketOperation.Sell,\r\n                        undefined,\r\n                        {\r\n                            integrator: {\r\n                                integratorId: apiKey,\r\n                                label: 'foo',\r\n                            },\r\n                            takerAddress,\r\n                            txOrigin: takerAddress,\r\n                            intentOnFilling: true,\r\n                            makerEndpointMaxResponseTimeMs: maxTimeoutMs,\r\n                        },\r\n                    );\r\n                    expect(resp.sort()).to.eql([{ ...successfulQuote1, makerUri: 'https://1337.0.0.1' }].sort()); // notice only one result, despite two requests made\r\n                },\r\n                quoteRequestorHttpClient,\r\n            );\r\n        });\r\n        it('should return successful RFQT indicative quote requests (Buy)', async () => {\r\n            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';\r\n            const apiKey = 'my-ko0l-api-key';\r\n\r\n            // Set up RFQT responses\r\n            // tslint:disable-next-line:array-type\r\n            const mockedRequests: MockedRfqQuoteResponse[] = [];\r\n            const expectedParams: TakerRequestQueryParamsUnnested = {\r\n                sellTokenAddress: takerToken,\r\n                buyTokenAddress: makerToken,\r\n                buyAmountBaseUnits: '10000',\r\n                comparisonPrice: undefined,\r\n                takerAddress,\r\n                txOrigin: takerAddress,\r\n                protocolVersion: '4',\r\n            };\r\n            // Successful response\r\n            const successfulQuote1 = {\r\n                makerToken,\r\n                takerToken,\r\n                makerAmount: new BigNumber(expectedParams.buyAmountBaseUnits),\r\n                takerAmount: new BigNumber(expectedParams.buyAmountBaseUnits),\r\n                expiry: makeThreeMinuteExpiry(),\r\n            };\r\n            mockedRequests.push({\r\n                endpoint: 'https://1337.0.0.1',\r\n                requestApiKey: apiKey,\r\n                requestParams: expectedParams,\r\n                responseData: successfulQuote1,\r\n                responseCode: StatusCodes.Success,\r\n            });\r\n\r\n            return testHelpers.withMockedRfqQuotes(\r\n                mockedRequests,\r\n                [],\r\n                RfqQuoteEndpoint.Indicative,\r\n                async () => {\r\n                    const qr = new QuoteRequestor(\r\n                        { 'https://1337.0.0.1': [[makerToken, takerToken]] },\r\n                        quoteRequestorHttpClient,\r\n                    );\r\n                    const resp = await qr.requestRfqtIndicativeQuotesAsync(\r\n                        makerToken,\r\n                        takerToken,\r\n                        new BigNumber(10000),\r\n                        MarketOperation.Buy,\r\n                        undefined,\r\n                        {\r\n                            integrator: {\r\n                                integratorId: apiKey,\r\n                                label: 'foo',\r\n                            },\r\n                            takerAddress,\r\n                            txOrigin: takerAddress,\r\n                            intentOnFilling: true,\r\n                        },\r\n                    );\r\n                    expect(resp.sort()).to.eql([{ ...successfulQuote1, makerUri: 'https://1337.0.0.1' }].sort());\r\n                },\r\n                quoteRequestorHttpClient,\r\n            );\r\n        });\r\n        it('should be able to handle and filter RFQ offerings', () => {\r\n            const tests: [string[] | undefined, string[]][] = [\r\n                [['https://top.maker'], []],\r\n                [undefined, ['https://foo.bar/', 'https://lorem.ipsum/']],\r\n                [['https://lorem.ipsum/'], ['https://lorem.ipsum/']],\r\n            ];\r\n            for (const test of tests) {\r\n                const [apiKeyWhitelist, results] = test;\r\n                const response = QuoteRequestor.getTypedMakerUrlsAndWhitelist(\r\n                    {\r\n                        integrator: {\r\n                            integratorId: 'foo',\r\n                            label: 'bar',\r\n                            whitelistIntegratorUrls: apiKeyWhitelist,\r\n                        },\r\n                        altRfqAssetOfferings: {},\r\n                    },\r\n                    {\r\n                        'https://foo.bar/': [\r\n                            [\r\n                                '0xA6cD4cb8c62aCDe44739E3Ed0F1d13E0e31f2d94',\r\n                                '0xF45107c0200a04A8aB9C600cc52A3C89AE5D0489',\r\n                            ],\r\n                        ],\r\n                        'https://lorem.ipsum/': [\r\n                            [\r\n                                '0xA6cD4cb8c62aCDe44739E3Ed0F1d13E0e31f2d94',\r\n                                '0xF45107c0200a04A8aB9C600cc52A3C89AE5D0489',\r\n                            ],\r\n                        ],\r\n                    },\r\n                );\r\n                const typedUrls = response.map((typed) => typed.url);\r\n                expect(typedUrls).to.eql(results);\r\n            }\r\n        });\r\n\r\n        it('should return successful alt indicative quotes', async () => {\r\n            const takerAddress = '0xd209925defc99488e3afff1174e48b4fa628302a';\r\n            const txOrigin = '0xf209925defc99488e3afff1174e48b4fa628302a';\r\n            const apiKey = 'my-ko0l-api-key';\r\n\r\n            // base token has 2 decimals\r\n            // quote token has 3 decimals\r\n            const baseToken = makerToken;\r\n            const quoteToken = takerToken;\r\n\r\n            // Set up RFQT responses\r\n            const altMockedRequests: AltMockedRfqQuoteResponse[] = [];\r\n            const altScenarios: {\r\n                successfulQuote: V4RFQIndicativeQuote;\r\n                requestedMakerToken: string;\r\n                requestedTakerToken: string;\r\n                requestedAmount: BigNumber;\r\n                requestedOperation: MarketOperation;\r\n            }[] = [];\r\n\r\n            // SCENARIO 1\r\n            // buy, base asset specified\r\n            // requesting to buy 100 units (10000 base units) of the base token\r\n            // returning a price of 0.01, which should mean 10000 maker, 1000 taker amount\r\n            const buyAmountAltRequest: AltQuoteRequestData = {\r\n                market: 'XYZ-123',\r\n                model: AltQuoteModel.Indicative,\r\n                profile: ALT_PROFILE,\r\n                side: AltQuoteSide.Sell,\r\n                meta: {\r\n                    txOrigin,\r\n                    taker: takerAddress,\r\n                    client: apiKey,\r\n                },\r\n                amount: '100',\r\n            };\r\n            // Successful response\r\n            const buyAmountAltResponse = {\r\n                ...buyAmountAltRequest,\r\n                id: 'random_id',\r\n                // tslint:disable-next-line:custom-no-magic-numbers\r\n                price: new BigNumber(0.01).toString(),\r\n                status: 'live',\r\n            };\r\n            const successfulBuyAmountQuote: V4RFQIndicativeQuote = {\r\n                makerToken: baseToken,\r\n                takerToken: quoteToken,\r\n                makerAmount: new BigNumber(10000),\r\n                takerAmount: new BigNumber(1000),\r\n                expiry: new BigNumber(0),\r\n            };\r\n            altMockedRequests.push({\r\n                endpoint: 'https://132.0.0.1',\r\n                mmApiKey: ALT_MM_API_KEY,\r\n                responseCode: CREATED_STATUS_CODE,\r\n                requestData: buyAmountAltRequest,\r\n                responseData: buyAmountAltResponse,\r\n            });\r\n            altScenarios.push({\r\n                successfulQuote: successfulBuyAmountQuote,\r\n                requestedMakerToken: baseToken,\r\n                requestedTakerToken: quoteToken,\r\n                requestedAmount: new BigNumber(10000),\r\n                requestedOperation: MarketOperation.Buy,\r\n            });\r\n\r\n            // SCENARIO 2\r\n            // alt buy, quote asset specified\r\n            // user is requesting to sell 1 unit of the quote token, or 1000 base units\r\n            // returning a price of 0.01, which should mean 10000 maker amount, 1000 taker amount\r\n            const buyValueAltRequest: AltQuoteRequestData = {\r\n                market: 'XYZ-123',\r\n                model: AltQuoteModel.Indicative,\r\n                profile: ALT_PROFILE,\r\n                side: AltQuoteSide.Sell,\r\n                meta: {\r\n                    txOrigin,\r\n                    taker: takerAddress,\r\n                    client: apiKey,\r\n                },\r\n                value: '1',\r\n            };\r\n            // Successful response\r\n            const buyValueAltResponse = {\r\n                ...buyValueAltRequest,\r\n                id: 'random_id',\r\n                // tslint:disable-next-line:custom-no-magic-numbers\r\n                price: new BigNumber(0.01).toString(),\r\n                status: 'live',\r\n            };\r\n            const successfulBuyValueQuote: V4RFQIndicativeQuote = {\r\n                makerToken: baseToken,\r\n                takerToken: quoteToken,\r\n                makerAmount: new BigNumber(10000),\r\n                takerAmount: new BigNumber(1000),\r\n                expiry: new BigNumber(0),\r\n            };\r\n            altMockedRequests.push({\r\n                endpoint: 'https://132.0.0.1',\r\n                mmApiKey: ALT_MM_API_KEY,\r\n                responseCode: CREATED_STATUS_CODE,\r\n                requestData: buyValueAltRequest,\r\n                responseData: buyValueAltResponse,\r\n            });\r\n            altScenarios.push({\r\n                successfulQuote: successfulBuyValueQuote,\r\n                requestedMakerToken: baseToken,\r\n                requestedTakerToken: quoteToken,\r\n                requestedAmount: new BigNumber(1000),\r\n                requestedOperation: MarketOperation.Sell,\r\n            });\r\n\r\n            // SCENARIO 3\r\n            // alt sell, base asset specified\r\n            // user is requesting to sell 100 units (10000 base units) of the base token\r\n            // returning a price of 0.01, which should mean 10000 taker amount, 1000 maker amount\r\n            const sellAmountAltRequest: AltQuoteRequestData = {\r\n                market: 'XYZ-123',\r\n                model: AltQuoteModel.Indicative,\r\n                profile: ALT_PROFILE,\r\n                side: AltQuoteSide.Buy,\r\n                meta: {\r\n                    txOrigin,\r\n                    taker: takerAddress,\r\n                    client: apiKey,\r\n                },\r\n                amount: '100',\r\n            };\r\n            // Successful response\r\n            const sellAmountAltResponse = {\r\n                ...sellAmountAltRequest,\r\n                id: 'random_id',\r\n                // tslint:disable-next-line:custom-no-magic-numbers\r\n                price: new BigNumber(0.01).toString(),\r\n                status: 'live',\r\n            };\r\n            const successfulSellAmountQuote: V4RFQIndicativeQuote = {\r\n                makerToken: quoteToken,\r\n                takerToken: baseToken,\r\n                makerAmount: new BigNumber(1000),\r\n                takerAmount: new BigNumber(10000),\r\n                expiry: new BigNumber(0),\r\n            };\r\n            altMockedRequests.push({\r\n                endpoint: 'https://132.0.0.1',\r\n                mmApiKey: ALT_MM_API_KEY,\r\n                responseCode: CREATED_STATUS_CODE,\r\n                requestData: sellAmountAltRequest,\r\n                responseData: sellAmountAltResponse,\r\n            });\r\n            altScenarios.push({\r\n                successfulQuote: successfulSellAmountQuote,\r\n                requestedMakerToken: quoteToken,\r\n                requestedTakerToken: baseToken,\r\n                requestedAmount: new BigNumber(10000),\r\n                requestedOperation: MarketOperation.Sell,\r\n            });\r\n\r\n            // SCENARIO 4\r\n            // alt sell, quote asset specified\r\n            // user is requesting to buy 1 unit (1000 base units) of the quote token\r\n            // returning a price of 0.01, which should mean 10000 taker amount, 1000 maker amount\r\n            const sellValueAltRequest: AltQuoteRequestData = {\r\n                market: 'XYZ-123',\r\n                model: AltQuoteModel.Indicative,\r\n                profile: ALT_PROFILE,\r\n                side: AltQuoteSide.Buy,\r\n                meta: {\r\n                    txOrigin,\r\n                    taker: takerAddress,\r\n                    client: apiKey,\r\n                },\r\n                value: '1',\r\n            };\r\n            // Successful response\r\n            const sellValueAltResponse = {\r\n                ...sellValueAltRequest,\r\n                id: 'random_id',\r\n                // tslint:disable-next-line:custom-no-magic-numbers\r\n                price: new BigNumber(0.01).toString(),\r\n                status: 'live',\r\n            };\r\n            const successfulSellValueQuote: V4RFQIndicativeQuote = {\r\n                makerToken: quoteToken,\r\n                takerToken: baseToken,\r\n                makerAmount: new BigNumber(1000),\r\n                takerAmount: new BigNumber(10000),\r\n                expiry: new BigNumber(0),\r\n            };\r\n            altMockedRequests.push({\r\n                endpoint: 'https://132.0.0.1',\r\n                mmApiKey: ALT_MM_API_KEY,\r\n                responseCode: CREATED_STATUS_CODE,\r\n                requestData: sellValueAltRequest,\r\n                responseData: sellValueAltResponse,\r\n            });\r\n            altScenarios.push({\r\n                successfulQuote: successfulSellValueQuote,\r\n                requestedMakerToken: quoteToken,\r\n                requestedTakerToken: baseToken,\r\n                requestedAmount: new BigNumber(1000),\r\n                requestedOperation: MarketOperation.Buy,\r\n            });\r\n\r\n            let scenarioCounter = 1;\r\n            for (const altScenario of altScenarios) {\r\n                logUtils.log(`Alt MM indicative scenario ${scenarioCounter}`);\r\n                scenarioCounter += 1;\r\n                await testHelpers.withMockedRfqQuotes(\r\n                    [],\r\n                    altMockedRequests,\r\n                    RfqQuoteEndpoint.Indicative,\r\n                    async () => {\r\n                        const qr = new QuoteRequestor({}, quoteRequestorHttpClient, ALT_RFQ_CREDS);\r\n                        const resp = await qr.requestRfqtIndicativeQuotesAsync(\r\n                            altScenario.requestedMakerToken,\r\n                            altScenario.requestedTakerToken,\r\n                            altScenario.requestedAmount,\r\n                            altScenario.requestedOperation,\r\n                            undefined,\r\n                            {\r\n                                integrator: {\r\n                                    integratorId: apiKey,\r\n                                    label: 'foo',\r\n                                },\r\n                                takerAddress,\r\n                                txOrigin,\r\n                                intentOnFilling: true,\r\n                                altRfqAssetOfferings,\r\n                            },\r\n                        );\r\n                        // hack to get the expiry right, since it's dependent on the current timestamp\r\n                        const expected = { ...altScenario.successfulQuote, expiry: resp[0].expiry };\r\n                        expect(resp.sort()).to.eql([expected].sort());\r\n                    },\r\n                    quoteRequestorHttpClient,\r\n                );\r\n            }\r\n        });\r\n    });\r\n});\r\n"],"version":3}
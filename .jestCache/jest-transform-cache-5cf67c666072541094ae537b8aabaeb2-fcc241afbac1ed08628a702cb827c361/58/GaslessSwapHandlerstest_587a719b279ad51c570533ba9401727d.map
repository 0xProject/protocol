{"file":"/Users/davidwalsh/code-local/0x-rfq-api/src/handlers/__tests__/GaslessSwapHandlers.test.ts","mappings":"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","names":[],"sources":["/Users/davidwalsh/code-local/0x-rfq-api/src/handlers/__tests__/GaslessSwapHandlers.test.ts"],"sourcesContent":["// tslint:disable: max-file-line-count\nimport { ValidationErrorCodes } from '@0x/api-utils';\nimport { ethSignHashWithKey, MetaTransaction, OtcOrder } from '@0x/protocol-utils';\nimport { BigNumber } from '@0x/utils';\nimport { AxiosInstance } from 'axios';\nimport * as express from 'express';\nimport * as HttpStatus from 'http-status-codes';\nimport Redis from 'ioredis';\nimport { mapValues } from 'lodash';\nimport { Producer } from 'sqs-producer';\nimport * as supertest from 'supertest';\n\nimport { Integrator } from '../../config';\nimport { TX_RELAY_V1_PATH, ZERO_G_ALIAS_PATH, ZERO_G_PATH } from '../../core/constants';\nimport { GaslessTypes } from '../../core/types';\nimport { TruncatedFees } from '../../core/types/meta_transaction_fees';\nimport { errorHandler } from '../../middleware/error_handling';\nimport { createTxRelayV1Router, createZeroGRouter } from '../../routers/GaslessSwapRouter';\nimport { GaslessSwapService } from '../../services/GaslessSwapService';\nimport { RfqmService } from '../../services/rfqm_service';\nimport {\n    FetchIndicativeQuoteResponse,\n    LiquiditySource,\n    MetaTransactionV1QuoteResponse,\n    MetaTransactionV2,\n    MetaTransactionV2QuoteResponse,\n    OtcOrderRfqmQuoteResponse,\n    SubmitMetaTransactionSignedQuoteResponse,\n    SubmitMetaTransactionV2SignedQuoteResponse,\n} from '../../services/types';\nimport { ConfigManager } from '../../utils/config_manager';\nimport { RfqmDbUtils } from '../../utils/rfqm_db_utils';\nimport { RfqBlockchainUtils } from '../../utils/rfq_blockchain_utils';\n\njest.mock('../../services/GaslessSwapService', () => {\n    return {\n        GaslessSwapService: jest.fn().mockImplementation(() => {\n            return {\n                fetchPriceAsync: jest.fn(),\n                fetchQuoteAsync: jest.fn(),\n                processSubmitAsync: jest.fn(),\n                // tslint:disable-next-line: custom-no-magic-numbers\n                getTokenDecimalsAsync: jest.fn().mockResolvedValue(18),\n            };\n        }),\n    };\n});\n\njest.mock('../../utils/config_manager', () => {\n    return {\n        ConfigManager: jest.fn().mockImplementation(() => {\n            return {\n                getRfqmApiKeyWhitelist: jest.fn().mockReturnValue(new Set(['integrator-api-key'])),\n                getIntegratorIdForApiKey: jest.fn().mockReturnValue('integrator-id'),\n                getIntegratorByIdOrThrow: jest.fn().mockImplementation((id) => {\n                    if (id !== 'integrator-id') {\n                        throw new Error();\n                    }\n                    const integrator: Integrator = {\n                        apiKeys: ['integrator-api-key'],\n                        allowedChainIds: [420, 1337], // tslint:disable-line: custom-no-magic-numbers\n                        integratorId: 'integrator-id',\n                        label: 'test integrator',\n                        plp: false,\n                        rfqt: false,\n                        rfqm: true,\n                    };\n                    return integrator;\n                }),\n            };\n        }),\n    };\n});\n\n// tslint:disable: no-object-literal-type-assertion\nconst mockGaslessSwapService = jest.mocked(\n    new GaslessSwapService(\n        0,\n        {} as RfqmService,\n        new URL('http://meta.transaction.service'),\n        {} as AxiosInstance,\n        {} as Redis,\n        {} as RfqmDbUtils,\n        {} as RfqBlockchainUtils,\n        {} as Producer,\n    ),\n);\nconst mockConfigManager = jest.mocked(new ConfigManager());\n// tslint:enable: no-object-literal-type-assertion\n\nconst testChainId = 1337;\n\n/**\n * Verifies the proper response to a request using a mocked `GaslessSwapService`.\n *\n * Each case sets up its own little Express app to avoid coupiling this\n * test to the upstream router.\n */\ndescribe('GaslessSwapHandlers', () => {\n    const takerAddress = '0x4c42a706410f1190f97d26fe3c999c90070aa40f';\n    const takerPrivateKey = '0xd2c2349e10170e4219d9febd1c663ea5c7334f79c38d25f4f52c85af796c7c05';\n    const feeRecipient = '0x5fb321349ace5303c82f0d1d491041e042f2ad22';\n    const app = express()\n        .use(express.json())\n        .use(ZERO_G_PATH, createZeroGRouter(new Map([[testChainId, mockGaslessSwapService]]), mockConfigManager))\n        .use(ZERO_G_ALIAS_PATH, createZeroGRouter(new Map([[testChainId, mockGaslessSwapService]]), mockConfigManager))\n        .use(\n            TX_RELAY_V1_PATH,\n            createTxRelayV1Router(new Map([[testChainId, mockGaslessSwapService]]), mockConfigManager),\n        )\n        .use(errorHandler);\n\n    afterEach(() => {\n        jest.clearAllMocks();\n    });\n\n    describe('parameter verification', () => {\n        it('throws if a required parameter is missing', async () => {\n            const response = await supertest(app)\n                .get(`${ZERO_G_ALIAS_PATH}/price`)\n                .query({ makerToken: '0xmakertoken' })\n                .set('Accept', 'application/json');\n\n            expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.RequiredField);\n            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n        });\n\n        it('throws if the chain ID is invalid', async () => {\n            const response = await supertest(app)\n                .get(`${ZERO_G_ALIAS_PATH}/price`)\n                .set('Content-type', 'application/json')\n                .set('0x-api-key', 'integrator-api-key')\n                .set('0x-chain-id', '420') // tslint:disable-line: custom-no-magic-numbers\n                .query({\n                    buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                    sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                    buyAmount: 1000,\n                    takerAddress,\n                    intentOnFilling: 'false',\n                    skipValidation: 'true',\n                });\n\n            expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.FieldInvalid);\n            expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n        });\n\n        describe('zero-g', () => {\n            it('throws if the `slippagePercentage` is out of range for /price', async () => {\n                const response = await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 2.1,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.ValueOutOfRange);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `slippagePercentage` is out of range for /quote', async () => {\n                const response = await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 0.00001,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.ValueOutOfRange);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `slippagePercentage` is invalid for /quote', async () => {\n                const response = await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 'invalid',\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.IncorrectFormat);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n        });\n\n        describe('tx relay v1', () => {\n            it('throws if the `slippagePercentage` is out of range for /price', async () => {\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 101,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.ValueOutOfRange);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `slippagePercentage` is out of range for /quote', async () => {\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 0.001,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.ValueOutOfRange);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `slippagePercentage` is invalid for /quote', async () => {\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 'invalid',\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.IncorrectFormat);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `feeType` is invalid for /quote', async () => {\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 10,\n                        feeType: 'invalid',\n                        feeSellTokenPercentage: 10,\n                        feeRecipient,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.ValueOutOfRange);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `feeSellTokenPercentage` is undefined when `feeType` is provided for /quote', async () => {\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 10,\n                        feeType: 'volume',\n                        feeRecipient,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.RequiredField);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `feeSellTokenPercentage` is out of range for /quote', async () => {\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 10,\n                        feeType: 'volume',\n                        feeSellTokenPercentage: 101,\n                        feeRecipient,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.ValueOutOfRange);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `feeSellTokenPercentage` is out of range for /price', async () => {\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 10,\n                        feeType: 'volume',\n                        feeSellTokenPercentage: 101,\n                        feeRecipient,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.ValueOutOfRange);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n\n            it('throws if the `feeRecipient` is undefined when `feeType` is provided for /quote', async () => {\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337') // tslint:disable-line: custom-no-magic-numbers\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        slippagePercentage: 10,\n                        feeType: 'volume',\n                        feeSellTokenPercentage: 5,\n                    });\n\n                expect(response.body.validationErrors[0].code).toEqual(ValidationErrorCodes.RequiredField);\n                expect(response.statusCode).toEqual(HttpStatus.BAD_REQUEST);\n            });\n        });\n    });\n\n    describe('getPriceAsync', () => {\n        describe('zero-g', () => {\n            it('responds with an error if the underlying service call fails', async () => {\n                mockGaslessSwapService.fetchPriceAsync.mockRejectedValueOnce(new Error('The service blew up'));\n\n                const response = await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        intentOnFilling: 'false',\n                        skipValidation: 'true',\n                    });\n\n                expect(response.statusCode).toEqual(HttpStatus.INTERNAL_SERVER_ERROR);\n            });\n\n            it('passes calls on to Gasless Swap Service', async () => {\n                mockGaslessSwapService.fetchPriceAsync.mockResolvedValue(null);\n\n                await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        intentOnFilling: 'false',\n                        skipValidation: 'true',\n                    });\n\n                expect(mockGaslessSwapService.fetchPriceAsync.mock.calls[0]).toMatchInlineSnapshot(`\n                    Array [\n                      Object {\n                        \"affiliateAddress\": undefined,\n                        \"buyAmount\": \"1000\",\n                        \"buyToken\": \"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619\",\n                        \"buyTokenDecimals\": 18,\n                        \"feeRecipient\": undefined,\n                        \"feeSellTokenPercentage\": undefined,\n                        \"feeType\": undefined,\n                        \"integrator\": Object {\n                          \"allowedChainIds\": Array [\n                            420,\n                            1337,\n                          ],\n                          \"apiKeys\": Array [\n                            \"integrator-api-key\",\n                          ],\n                          \"integratorId\": \"integrator-id\",\n                          \"label\": \"test integrator\",\n                          \"plp\": false,\n                          \"rfqm\": true,\n                          \"rfqt\": false,\n                        },\n                        \"sellAmount\": undefined,\n                        \"sellToken\": \"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\",\n                        \"sellTokenDecimals\": 18,\n                        \"slippagePercentage\": undefined,\n                        \"takerAddress\": \"0x4c42a706410f1190f97d26fe3c999c90070aa40f\",\n                      },\n                      \"metatransaction\",\n                    ]\n                `);\n            });\n\n            it('returns returns an RFQ Price', async () => {\n                const price: FetchIndicativeQuoteResponse & { liquiditySource: 'rfq' } = {\n                    allowanceTarget: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\n                    buyAmount: new BigNumber(1000),\n                    sellAmount: new BigNumber(2000),\n                    buyTokenAddress: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                    sellTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                    gas: new BigNumber(1043459),\n                    price: new BigNumber(2),\n                    liquiditySource: 'rfq',\n                };\n\n                mockGaslessSwapService.fetchPriceAsync.mockResolvedValue(price);\n\n                const response = await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        intentOnFilling: 'false',\n                        skipValidation: 'true',\n                    });\n\n                expect(response.body).toStrictEqual({ ...convertBigNumbersToJson(price), liquidityAvailable: true });\n                expect(response.statusCode).toEqual(HttpStatus.OK);\n            });\n\n            it('returns returns an AMM Price', async () => {\n                const price: FetchIndicativeQuoteResponse & { liquiditySource: 'amm' } = {\n                    allowanceTarget: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\n                    buyAmount: new BigNumber(1000),\n                    sellAmount: new BigNumber(2000),\n                    buyTokenAddress: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                    sellTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                    gas: new BigNumber(1043459),\n                    price: new BigNumber(2),\n                    liquiditySource: 'amm',\n                };\n\n                mockGaslessSwapService.fetchPriceAsync.mockResolvedValue(price);\n\n                const response = await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        intentOnFilling: 'false',\n                        skipValidation: 'true',\n                    });\n\n                expect(response.body).toStrictEqual({ ...convertBigNumbersToJson(price), liquidityAvailable: true });\n                expect(response.statusCode).toEqual(HttpStatus.OK);\n            });\n        });\n\n        describe('tx relay v1', () => {\n            it('passes calls on to Gasless Swap Service', async () => {\n                mockGaslessSwapService.fetchPriceAsync.mockResolvedValue(null);\n\n                await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        intentOnFilling: 'false',\n                        skipValidation: 'true',\n                        feeType: 'volume',\n                        feeSellTokenPercentage: 10,\n                        feeRecipient,\n                    });\n\n                expect(mockGaslessSwapService.fetchPriceAsync.mock.calls[0]).toMatchInlineSnapshot(`\n                    Array [\n                      Object {\n                        \"affiliateAddress\": undefined,\n                        \"buyAmount\": \"1000\",\n                        \"buyToken\": \"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619\",\n                        \"buyTokenDecimals\": 18,\n                        \"feeRecipient\": \"${feeRecipient}\",\n                        \"feeSellTokenPercentage\": \"10\",\n                        \"feeType\": \"volume\",\n                        \"integrator\": Object {\n                          \"allowedChainIds\": Array [\n                            420,\n                            1337,\n                          ],\n                          \"apiKeys\": Array [\n                            \"integrator-api-key\",\n                          ],\n                          \"integratorId\": \"integrator-id\",\n                          \"label\": \"test integrator\",\n                          \"plp\": false,\n                          \"rfqm\": true,\n                          \"rfqt\": false,\n                        },\n                        \"sellAmount\": undefined,\n                        \"sellToken\": \"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\",\n                        \"sellTokenDecimals\": 18,\n                        \"slippagePercentage\": undefined,\n                        \"takerAddress\": \"0x4c42a706410f1190f97d26fe3c999c90070aa40f\",\n                      },\n                      \"metatransaction_v2\",\n                    ]\n                `);\n            });\n\n            it('returns returns a meta-transaction price', async () => {\n                const price: FetchIndicativeQuoteResponse & { sources: LiquiditySource[]; fees?: TruncatedFees } = {\n                    allowanceTarget: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\n                    buyAmount: new BigNumber(1000),\n                    sellAmount: new BigNumber(2000),\n                    buyTokenAddress: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                    sellTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                    gas: new BigNumber(1043459),\n                    price: new BigNumber(2),\n                    sources: [\n                        {\n                            name: 'QuickSwap',\n                            proportion: new BigNumber(0.2308),\n                        },\n                        {\n                            name: 'DODO_V2',\n                            proportion: new BigNumber(0.07692),\n                        },\n                        {\n                            name: 'Uniswap_V3',\n                            proportion: new BigNumber(0.6923),\n                        },\n                    ],\n                    fees: {\n                        integratorFee: {\n                            feeType: 'volume',\n                            feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n                            feeAmount: new BigNumber(100),\n                        },\n                        zeroExFee: {\n                            feeType: 'integrator_share',\n                            feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n                            feeAmount: new BigNumber(10),\n                        },\n                        gasFee: {\n                            feeType: 'gas',\n                            feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n                            feeAmount: new BigNumber(1),\n                        },\n                    },\n                };\n\n                mockGaslessSwapService.fetchPriceAsync.mockResolvedValue(price);\n\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/price`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        intentOnFilling: 'false',\n                        skipValidation: 'true',\n                    });\n\n                expect(response.body).toStrictEqual({ ...convertBigNumbersToJson(price), liquidityAvailable: true });\n                expect(response.statusCode).toEqual(HttpStatus.OK);\n            });\n        });\n    });\n\n    describe('getQuoteAsync', () => {\n        describe('zero-g', () => {\n            it('passes calls on to Gasless Swap Service', async () => {\n                mockGaslessSwapService.fetchQuoteAsync.mockResolvedValue(null);\n\n                await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        intentOnFilling: 'false',\n                        skipValidation: 'true',\n                    });\n\n                expect(mockGaslessSwapService.fetchQuoteAsync.mock.calls[0]).toMatchInlineSnapshot(`\n                    Array [\n                      Object {\n                        \"affiliateAddress\": undefined,\n                        \"buyAmount\": \"1000\",\n                        \"buyToken\": \"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619\",\n                        \"buyTokenDecimals\": 18,\n                        \"checkApproval\": false,\n                        \"feeRecipient\": undefined,\n                        \"feeSellTokenPercentage\": undefined,\n                        \"feeType\": undefined,\n                        \"integrator\": Object {\n                          \"allowedChainIds\": Array [\n                            420,\n                            1337,\n                          ],\n                          \"apiKeys\": Array [\n                            \"integrator-api-key\",\n                          ],\n                          \"integratorId\": \"integrator-id\",\n                          \"label\": \"test integrator\",\n                          \"plp\": false,\n                          \"rfqm\": true,\n                          \"rfqt\": false,\n                        },\n                        \"sellAmount\": undefined,\n                        \"sellToken\": \"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\",\n                        \"sellTokenDecimals\": 18,\n                        \"slippagePercentage\": undefined,\n                        \"takerAddress\": \"0x4c42a706410f1190f97d26fe3c999c90070aa40f\",\n                      },\n                      \"metatransaction\",\n                    ]\n                `);\n            });\n\n            it('returns an RFQ quote', async () => {\n                const quote: OtcOrderRfqmQuoteResponse & { liquiditySource: 'rfq' } = {\n                    buyAmount: new BigNumber('1800054805473'),\n                    buyTokenAddress: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                    gas: new BigNumber('1043459'),\n                    order: new OtcOrder({\n                        chainId: 1337,\n                        expiryAndNonce: new BigNumber(\n                            '62771017353866807638357894232076664161023554444640345128970000000000000000',\n                        ),\n                        maker: '0x2222222222222222222222222222222222222222',\n                        makerAmount: new BigNumber('0'),\n                        makerToken: '0x3333333333333333333333333333333333333333',\n                        taker: '0x1111111111111111111111111111111111111111',\n                        takerAmount: new BigNumber('0'),\n                        takerToken: '0x4444444444444444444444444444444444444444',\n                        txOrigin: '0x0000000000000000000000000000000000000000',\n                        verifyingContract: '0x0000000000000000000000000000000000000000',\n                    }),\n                    orderHash: '0x69b784087387d37e2361a40146420a5a68b08375238a5ba0329f612d5673b2ea',\n                    price: new BigNumber('1800.054805'),\n                    sellAmount: new BigNumber('1000000000000000000000'),\n                    sellTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                    type: GaslessTypes.OtcOrder,\n                    liquiditySource: 'rfq',\n                };\n                mockGaslessSwapService.fetchQuoteAsync.mockResolvedValue(quote);\n\n                const response = await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1800054805473,\n                        takerAddress,\n                        intentOnFilling: 'true',\n                        skipValidation: 'true',\n                    });\n\n                expect(response.body).toStrictEqual({ ...convertBigNumbersToJson(quote), liquidityAvailable: true });\n                expect(response.statusCode).toEqual(HttpStatus.OK);\n            });\n\n            it('returns an AMM quote', async () => {\n                const quote: MetaTransactionV1QuoteResponse & { liquiditySource: 'amm' } = {\n                    buyAmount: new BigNumber('1800054805473'),\n                    buyTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                    gas: new BigNumber('1043459'),\n                    metaTransaction: new MetaTransaction({\n                        callData:\n                            '0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000017b9e2a304f00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac18858000000000000000000000000000000000000000000000000000000039d0b9efd1000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001c94ebec37000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001db5156c13000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000190522016f044a05b0000000000000000000000000000000000000000000000000000000b08217af9400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000000c829100b78224ef50000000000000000000000000000000000000000000000000000000570157389f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c6300000000000000000000000000000000000000000000005b89d96b4863067a6b',\n                        chainId: 137,\n                        expirationTimeSeconds: new BigNumber('9990868679'),\n                        feeAmount: new BigNumber('0'),\n                        feeToken: '0x0000000000000000000000000000000000000000',\n                        maxGasPrice: new BigNumber('4294967296'),\n                        minGasPrice: new BigNumber('1'),\n                        salt: new BigNumber(\n                            '32606650794224190000000000000000000000000000000000000000000000000000000000000',\n                        ),\n                        sender: '0x0000000000000000000000000000000000000000',\n                        signer: '0x4c42a706410f1190f97d26fe3c999c90070aa40f',\n                        value: new BigNumber('0'),\n                        verifyingContract: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\n                    }),\n                    metaTransactionHash: '0xde5a11983edd012047dd3107532f007a73ae488bfb354f35b8a40580e2a775a1',\n                    price: new BigNumber('1800.054805'),\n                    sellAmount: new BigNumber('1000000000000000000000'),\n                    sellTokenAddress: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n                    type: GaslessTypes.MetaTransaction,\n                    liquiditySource: 'amm',\n                };\n                mockGaslessSwapService.fetchQuoteAsync.mockResolvedValue(quote);\n\n                const response = await supertest(app)\n                    .get(`${ZERO_G_ALIAS_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1800054805473,\n                        takerAddress,\n                        intentOnFilling: 'true',\n                        skipValidation: 'true',\n                    });\n\n                expect(response.body).toStrictEqual({ ...convertBigNumbersToJson(quote), liquidityAvailable: true });\n                expect(response.statusCode).toEqual(HttpStatus.OK);\n            });\n        });\n\n        describe('tx relay v1', () => {\n            it('passes calls on to Gasless Swap Service', async () => {\n                mockGaslessSwapService.fetchQuoteAsync.mockResolvedValue(null);\n\n                await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1000,\n                        takerAddress,\n                        intentOnFilling: 'false',\n                        skipValidation: 'true',\n                        feeType: 'volume',\n                        feeSellTokenPercentage: 10,\n                        feeRecipient,\n                    });\n\n                expect(mockGaslessSwapService.fetchQuoteAsync.mock.calls[0]).toMatchInlineSnapshot(`\n                    Array [\n                      Object {\n                        \"affiliateAddress\": undefined,\n                        \"buyAmount\": \"1000\",\n                        \"buyToken\": \"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619\",\n                        \"buyTokenDecimals\": 18,\n                        \"checkApproval\": false,\n                        \"feeRecipient\": \"${feeRecipient}\",\n                        \"feeSellTokenPercentage\": \"10\",\n                        \"feeType\": \"volume\",\n                        \"integrator\": Object {\n                          \"allowedChainIds\": Array [\n                            420,\n                            1337,\n                          ],\n                          \"apiKeys\": Array [\n                            \"integrator-api-key\",\n                          ],\n                          \"integratorId\": \"integrator-id\",\n                          \"label\": \"test integrator\",\n                          \"plp\": false,\n                          \"rfqm\": true,\n                          \"rfqt\": false,\n                        },\n                        \"sellAmount\": undefined,\n                        \"sellToken\": \"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\",\n                        \"sellTokenDecimals\": 18,\n                        \"slippagePercentage\": undefined,\n                        \"takerAddress\": \"0x4c42a706410f1190f97d26fe3c999c90070aa40f\",\n                      },\n                      \"metatransaction_v2\",\n                    ]\n                `);\n            });\n\n            it('returns a meta-transaction quote', async () => {\n                const quote: MetaTransactionV2QuoteResponse = {\n                    buyAmount: new BigNumber('1800054805473'),\n                    buyTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                    gas: new BigNumber('1043459'),\n                    trade: {\n                        kind: GaslessTypes.MetaTransaction,\n                        hash: '0xde5a11983edd012047dd3107532f007a73ae488bfb354f35b8a40580e2a775a1',\n                        metaTransaction: new MetaTransaction({\n                            callData:\n                                '0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000017b9e2a304f00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac18858000000000000000000000000000000000000000000000000000000039d0b9efd1000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001c94ebec37000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001db5156c13000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000190522016f044a05b0000000000000000000000000000000000000000000000000000000b08217af9400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000000c829100b78224ef50000000000000000000000000000000000000000000000000000000570157389f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c6300000000000000000000000000000000000000000000005b89d96b4863067a6b',\n                            chainId: 137,\n                            expirationTimeSeconds: new BigNumber('9990868679'),\n                            feeAmount: new BigNumber('0'),\n                            feeToken: '0x0000000000000000000000000000000000000000',\n                            maxGasPrice: new BigNumber('4294967296'),\n                            minGasPrice: new BigNumber('1'),\n                            salt: new BigNumber(\n                                '32606650794224190000000000000000000000000000000000000000000000000000000000000',\n                            ),\n                            sender: '0x0000000000000000000000000000000000000000',\n                            signer: '0x4c42a706410f1190f97d26fe3c999c90070aa40f',\n                            value: new BigNumber('0'),\n                            verifyingContract: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\n                        }),\n                    },\n                    price: new BigNumber('1800.054805'),\n                    sellAmount: new BigNumber('1000000000000000000000'),\n                    sellTokenAddress: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n                    sources: [\n                        {\n                            name: 'QuickSwap',\n                            proportion: new BigNumber(0.2308),\n                        },\n                        {\n                            name: 'DODO_V2',\n                            proportion: new BigNumber(0.07692),\n                        },\n                        {\n                            name: 'Uniswap_V3',\n                            proportion: new BigNumber(0.6923),\n                        },\n                    ],\n                    fees: {\n                        integratorFee: {\n                            feeType: 'volume',\n                            feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n                            feeAmount: new BigNumber(100),\n                        },\n                        zeroExFee: {\n                            feeType: 'integrator_share',\n                            feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n                            feeAmount: new BigNumber(10),\n                        },\n                        gasFee: {\n                            feeType: 'gas',\n                            feeToken: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n                            feeAmount: new BigNumber(1),\n                        },\n                    },\n                };\n                mockGaslessSwapService.fetchQuoteAsync.mockResolvedValue(quote);\n                const response = await supertest(app)\n                    .get(`${TX_RELAY_V1_PATH}/quote`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .query({\n                        buyToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619',\n                        sellToken: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',\n                        buyAmount: 1800054805473,\n                        takerAddress,\n                        intentOnFilling: 'true',\n                        skipValidation: 'true',\n                    });\n\n                expect(response.body).toStrictEqual({ ...convertBigNumbersToJson(quote), liquidityAvailable: true });\n                expect(response.statusCode).toEqual(HttpStatus.OK);\n            });\n        });\n    });\n\n    describe('processSubmitAsync', () => {\n        describe('zero-g', () => {\n            it('returns a metatransaction result', async () => {\n                const metaTransaction = new MetaTransaction({\n                    callData:\n                        '0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000017b9e2a304f00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac18858000000000000000000000000000000000000000000000000000000039d0b9efd1000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001c94ebec37000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001db5156c13000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000190522016f044a05b0000000000000000000000000000000000000000000000000000000b08217af9400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000000c829100b78224ef50000000000000000000000000000000000000000000000000000000570157389f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c6300000000000000000000000000000000000000000000005b89d96b4863067a6b',\n                    chainId: 137,\n                    expirationTimeSeconds: new BigNumber('9990868679'),\n                    feeAmount: new BigNumber('0'),\n                    feeToken: '0x0000000000000000000000000000000000000000',\n                    maxGasPrice: new BigNumber('4294967296'),\n                    minGasPrice: new BigNumber('1'),\n                    salt: new BigNumber(\n                        '32606650794224190000000000000000000000000000000000000000000000000000000000000',\n                    ),\n                    sender: '0x0000000000000000000000000000000000000000',\n                    signer: '0x4c42a706410f1190f97d26fe3c999c90070aa40f',\n                    value: new BigNumber('0'),\n                    verifyingContract: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\n                });\n                const submitResult: SubmitMetaTransactionSignedQuoteResponse = {\n                    metaTransactionHash: '0xde5a11983edd012047dd3107532f007a73ae488bfb354f35b8a40580e2a775a1',\n                    type: GaslessTypes.MetaTransaction,\n                };\n\n                mockGaslessSwapService.processSubmitAsync.mockResolvedValue(submitResult);\n\n                const response = await supertest(app)\n                    .post(`${ZERO_G_ALIAS_PATH}/submit`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .send({\n                        kind: GaslessTypes.MetaTransaction,\n                        trade: {\n                            metaTransaction,\n                            type: GaslessTypes.MetaTransaction,\n                            signature: ethSignHashWithKey(metaTransaction.getHash(), takerPrivateKey),\n                        },\n                    });\n\n                expect(mockGaslessSwapService.processSubmitAsync.mock.calls[0]).toMatchInlineSnapshot(`\n                    Array [\n                      Object {\n                        \"kind\": \"metatransaction\",\n                        \"trade\": Object {\n                          \"metaTransaction\": MetaTransaction {\n                            \"callData\": \"0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000017b9e2a304f00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac18858000000000000000000000000000000000000000000000000000000039d0b9efd1000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001c94ebec37000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001db5156c13000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000190522016f044a05b0000000000000000000000000000000000000000000000000000000b08217af9400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000000c829100b78224ef50000000000000000000000000000000000000000000000000000000570157389f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c6300000000000000000000000000000000000000000000005b89d96b4863067a6b\",\n                            \"chainId\": 137,\n                            \"expirationTimeSeconds\": \"9990868679\",\n                            \"feeAmount\": \"0\",\n                            \"feeToken\": \"0x0000000000000000000000000000000000000000\",\n                            \"maxGasPrice\": \"4294967296\",\n                            \"minGasPrice\": \"1\",\n                            \"salt\": \"32606650794224190000000000000000000000000000000000000000000000000000000000000\",\n                            \"sender\": \"0x0000000000000000000000000000000000000000\",\n                            \"signer\": \"0x4c42a706410f1190f97d26fe3c999c90070aa40f\",\n                            \"value\": \"0\",\n                            \"verifyingContract\": \"0xdef1c0ded9bec7f1a1670819833240f027b25eff\",\n                          },\n                          \"signature\": Object {\n                            \"r\": \"0x7247ed156081c767781834b122d4e9317f3cc2d5ed529cb74aaaa11d8b5a93f8\",\n                            \"s\": \"0x19a0b795609483b9fcbc42b574e4401401308b4c24347b0bda8a2cf2332efd78\",\n                            \"signatureType\": 3,\n                            \"v\": 28,\n                          },\n                          \"type\": \"metatransaction\",\n                        },\n                      },\n                      \"integrator-id\",\n                    ]\n                `);\n                expect(response.statusCode).toEqual(HttpStatus.CREATED);\n                expect(response.body).toEqual(submitResult);\n            });\n        });\n\n        describe('tx relay v1', () => {\n            it('returns a metatransaction result', async () => {\n                const metaTransaction = new MetaTransactionV2({\n                    callData:\n                        '0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000017b9e2a304f00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac18858000000000000000000000000000000000000000000000000000000039d0b9efd1000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001c94ebec37000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001db5156c13000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000190522016f044a05b0000000000000000000000000000000000000000000000000000000b08217af9400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000000c829100b78224ef50000000000000000000000000000000000000000000000000000000570157389f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c6300000000000000000000000000000000000000000000005b89d96b4863067a6b',\n                    chainId: 137,\n                    expirationTimeSeconds: new BigNumber('9990868679'),\n                    feeAmount: new BigNumber('0'),\n                    feeToken: '0x0000000000000000000000000000000000000000',\n                    maxGasPrice: new BigNumber('4294967296'),\n                    minGasPrice: new BigNumber('1'),\n                    salt: new BigNumber(\n                        '32606650794224190000000000000000000000000000000000000000000000000000000000000',\n                    ),\n                    sender: '0x0000000000000000000000000000000000000000',\n                    signer: '0x4c42a706410f1190f97d26fe3c999c90070aa40f',\n                    value: new BigNumber('0'),\n                    verifyingContract: '0xdef1c0ded9bec7f1a1670819833240f027b25eff',\n                });\n                const submitResult: SubmitMetaTransactionV2SignedQuoteResponse = {\n                    metaTransactionHash: '0xde5a11983edd012047dd3107532f007a73ae488bfb354f35b8a40580e2a775a1',\n                    type: GaslessTypes.MetaTransactionV2,\n                };\n\n                mockGaslessSwapService.processSubmitAsync.mockResolvedValue(submitResult);\n\n                const response = await supertest(app)\n                    .post(`${TX_RELAY_V1_PATH}/submit`)\n                    .set('Content-type', 'application/json')\n                    .set('0x-api-key', 'integrator-api-key')\n                    .set('0x-chain-id', '1337')\n                    .send({\n                        kind: GaslessTypes.MetaTransactionV2,\n                        trade: {\n                            metaTransaction,\n                            type: GaslessTypes.MetaTransactionV2,\n                            signature: ethSignHashWithKey(metaTransaction.getHash(), takerPrivateKey),\n                        },\n                    });\n\n                expect(mockGaslessSwapService.processSubmitAsync.mock.calls[0]).toMatchInlineSnapshot(`\n                    Array [\n                      Object {\n                        \"kind\": \"metatransaction_v2\",\n                        \"trade\": Object {\n                          \"metaTransaction\": MetaTransactionV2 {\n                            \"callData\": \"0x415565b00000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000017b9e2a304f00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000940000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008a0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000860000000000000000000000000000000000000000000000000000000000000086000000000000000000000000000000000000000000000000000000000000007c000000000000000000000000000000000000000000000003635c9adc5dea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000003400000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000002517569636b5377617000000000000000000000000000000000000000000000000000000000000008570b55cfac18858000000000000000000000000000000000000000000000000000000039d0b9efd1000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa8417400000000000000000000000000000002517569636b53776170000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001c94ebec37000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000030000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf12700000000000000000000000002791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000b446f646f5632000000000000000000000000000000000000000000000000000000000000000000042b85aae7d60c42c00000000000000000000000000000000000000000000000000000001db5156c13000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005333eb1e32522f1893b7c9fea3c263807a02d561000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000012556e69737761705633000000000000000000000000000000000000000000000000000000000000190522016f044a05b0000000000000000000000000000000000000000000000000000000b08217af9400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e592427a0aece92de3edee1f18e0157c058615640000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012556e697377617056330000000000000000000000000000000000000000000000000000000000000c829100b78224ef50000000000000000000000000000000000000000000000000000000570157389f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000427ceb23fd6bc0add59e62ac25578270cff1b9f6190001f41bfd67037b42cf73acf2047067bd4f2c47d9bfd6000bb82791bca1f2de4661ed88a30c99a7a9449aa841740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000000000000000000000869584cd0000000000000000000000008c611defbd838a13de3a5923693c58a7c1807c6300000000000000000000000000000000000000000000005b89d96b4863067a6b\",\n                            \"chainId\": 137,\n                            \"expirationTimeSeconds\": \"9990868679\",\n                            \"feeAmount\": \"0\",\n                            \"feeToken\": \"0x0000000000000000000000000000000000000000\",\n                            \"maxGasPrice\": \"4294967296\",\n                            \"minGasPrice\": \"1\",\n                            \"salt\": \"32606650794224190000000000000000000000000000000000000000000000000000000000000\",\n                            \"sender\": \"0x0000000000000000000000000000000000000000\",\n                            \"signer\": \"0x4c42a706410f1190f97d26fe3c999c90070aa40f\",\n                            \"value\": \"0\",\n                            \"verifyingContract\": \"0xdef1c0ded9bec7f1a1670819833240f027b25eff\",\n                          },\n                          \"signature\": Object {\n                            \"r\": \"0x7247ed156081c767781834b122d4e9317f3cc2d5ed529cb74aaaa11d8b5a93f8\",\n                            \"s\": \"0x19a0b795609483b9fcbc42b574e4401401308b4c24347b0bda8a2cf2332efd78\",\n                            \"signatureType\": 3,\n                            \"v\": 28,\n                          },\n                          \"type\": \"metatransaction_v2\",\n                        },\n                      },\n                      \"integrator-id\",\n                    ]\n                `);\n                expect(response.statusCode).toEqual(HttpStatus.CREATED);\n                expect(response.body).toEqual(submitResult);\n            });\n        });\n    });\n});\n\n/**\n * Deeply transforms object keys from BigNumber to JSON\n */\n// $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction convertBigNumbersToJson(x: Record<string, any>): Record<string, any> {\n    return mapValues(x, (v) => {\n        if (v instanceof BigNumber) {\n            return v.toJSON();\n        }\n        if (v instanceof Array) {\n            const jsonArray = [];\n            for (const item of v) {\n                jsonArray.push(convertBigNumbersToJson(item));\n            }\n            return jsonArray;\n        }\n        if (v instanceof Object) {\n            return convertBigNumbersToJson(v);\n        }\n        return v;\n    });\n}\n"],"version":3}
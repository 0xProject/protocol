237b0c8de01e4bf89571c951646f6294
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const asset_swapper_1 = require("@0x/asset-swapper");
const contract_addresses_1 = require("@0x/contract-addresses");
const protocol_utils_1 = require("@0x/protocol-utils");
const utils_1 = require("@0x/utils");
const chai_1 = require("chai");
const ethers_1 = require("ethers");
const _ = require("lodash");
const sqs_producer_1 = require("sqs-producer");
const ts_mockito_1 = require("ts-mockito");
const constants_1 = require("../../src/core/constants");
const entities_1 = require("../../src/entities");
const MetaTransactionSubmissionEntity_1 = require("../../src/entities/MetaTransactionSubmissionEntity");
const types_1 = require("../../src/entities/types");
const logger_1 = require("../../src/logger");
const rfq_maker_balance_cache_service_1 = require("../../src/services/rfq_maker_balance_cache_service");
const WorkerService_1 = require("../../src/services/WorkerService");
const cache_client_1 = require("../../src/utils/cache_client");
const GasStationAttendantEthereum_1 = require("../../src/utils/GasStationAttendantEthereum");
const quote_server_client_1 = require("../../src/utils/quote_server_client");
const rfqm_db_utils_1 = require("../../src/utils/rfqm_db_utils");
const rfq_blockchain_utils_1 = require("../../src/utils/rfq_blockchain_utils");
const rfq_maker_manager_1 = require("../../src/utils/rfq_maker_manager");
const signature_utils_1 = require("../../src/utils/signature_utils");
const SubmissionContext_1 = require("../../src/utils/SubmissionContext");
const constants_2 = require("../constants");
// $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
// eslint-disable-next-line @typescript-eslint/no-loss-of-precision
const NEVER_EXPIRES = new utils_1.BigNumber(9999999999999999);
const MOCK_WORKER_REGISTRY_ADDRESS = '0x1023331a469c6391730ff1E2749422CE8873EC38';
const MOCK_GAS_PRICE = new utils_1.BigNumber(100);
const MOCK_MM_URI = 'https://mm-address';
const TEST_RFQM_TRANSACTION_WATCHER_SLEEP_TIME_MS = 50;
const WORKER_FULL_BALANCE_WEI = new utils_1.BigNumber(1).shiftedBy(constants_1.ETH_DECIMALS);
let loggerSpy;
const buildWorkerServiceForUnitTest = (overrides = {}) => {
    const contractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1);
    const quoteRequestorMock = (0, ts_mockito_1.mock)(asset_swapper_1.QuoteRequestor);
    (0, ts_mockito_1.when)(quoteRequestorMock.requestRfqmIndicativeQuotesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
        {
            makerToken: contractAddresses.zrxToken,
            makerAmount: new utils_1.BigNumber(101),
            takerToken: contractAddresses.etherToken,
            takerAmount: new utils_1.BigNumber(100),
            expiry: NEVER_EXPIRES,
            makerUri: MOCK_MM_URI,
        },
    ]);
    const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
    (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(MOCK_GAS_PRICE);
    const gasStationAttendantInstance = (0, ts_mockito_1.instance)(gasStationAttendantMock);
    const rfqBlockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
    (0, ts_mockito_1.when)(rfqBlockchainUtilsMock.getAccountBalanceAsync(MOCK_WORKER_REGISTRY_ADDRESS)).thenResolve(WORKER_FULL_BALANCE_WEI);
    const sqsMock = (0, ts_mockito_1.mock)(sqs_producer_1.Producer);
    (0, ts_mockito_1.when)(sqsMock.queueSize()).thenResolve(0);
    const quoteServerClientMock = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
    const cacheClientMock = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
    const defaultDbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
    const rfqMakerBalanceCacheServiceMock = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
    const rfqMakerManagerMock = (0, ts_mockito_1.mock)(rfq_maker_manager_1.RfqMakerManager);
    return new WorkerService_1.WorkerService(1, overrides.gasStationAttendant || gasStationAttendantInstance, MOCK_WORKER_REGISTRY_ADDRESS, overrides.rfqBlockchainUtils || (0, ts_mockito_1.instance)(rfqBlockchainUtilsMock), overrides.dbUtils || (0, ts_mockito_1.instance)(defaultDbUtilsMock), overrides.quoteServerClient || quoteServerClientMock, TEST_RFQM_TRANSACTION_WATCHER_SLEEP_TIME_MS, overrides.cacheClient || cacheClientMock, overrides.rfqMakerBalanceCacheService || (0, ts_mockito_1.instance)(rfqMakerBalanceCacheServiceMock), overrides.rfqMakerManager || rfqMakerManagerMock, overrides.initialMaxPriorityFeePerGasGwei || 2, overrides.maxFeePerGasGwei || 128, overrides.enableAccessList);
};
const createMeaTrsanctionJobEntity = (opts, id) => {
    const job = new entities_1.MetaTransactionJobEntity(opts);
    job.id = id;
    return job;
};
const createMetaTransactionSubmissionEntity = (opts, id) => {
    const submission = new MetaTransactionSubmissionEntity_1.MetaTransactionSubmissionEntity(opts);
    submission.id = id;
    return submission;
};
const fakeClockMs = 1637722898000;
const fakeOneMinuteAgoS = fakeClockMs / constants_1.ONE_SECOND_MS - 60;
const fakeFiveMinutesLater = fakeClockMs / constants_1.ONE_SECOND_MS + 300;
const maker = '0xbb004090d26845b672f17c6da4b7d162df3bfc5e';
const orderHash = '0x112160fb0933ecde720f63b50b303ce64e52ded702bef78b9c20361f3652a462';
// This sig actually belongs to the maker above
const validEIP712Sig = {
    signatureType: asset_swapper_1.SignatureType.EIP712,
    v: 28,
    r: '0xdc158f7b53b940863bc7b001552a90282e51033f29b73d44a2701bd16faa19d2',
    s: '0x55f6c5470e41b39a5ddeb63c22f8ba1d34748f93265715b9dc4a0f10138985a6',
};
// This is a real signature that had a missing byte
const missingByteSig = {
    r: '0x568b31076e1c65954adb1bccc723718b3460f1b699ce1252f8a83bda0d521005',
    s: '0x0307cc7f4161df812f7e5a651b23dbd33981c0410df0dd820a52f61be7a5ab',
    v: 28,
    signatureType: asset_swapper_1.SignatureType.EthSign,
};
jest.setTimeout(constants_1.ONE_SECOND_MS * 120);
describe('WorkerService', () => {
    beforeEach(() => {
        loggerSpy = (0, ts_mockito_1.spy)(logger_1.logger);
    });
    describe('workerBeforeLogicAsync', () => {
        it('calls `processJobAsync` with the correct arguments', async () => {
            const workerIndex = 0;
            const workerAddress = MOCK_WORKER_REGISTRY_ADDRESS;
            const jobId = 'jobId';
            const metaTransactionJob = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const rfqmV2Job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress,
            });
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const blockchainUtilsMock = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(blockchainUtilsMock.getAccountBalanceAsync(workerAddress)).thenResolve(WORKER_FULL_BALANCE_WEI);
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2UnresolvedJobsAsync(workerAddress, (0, ts_mockito_1.anything)())).thenResolve([rfqmV2Job]);
            (0, ts_mockito_1.when)(dbUtilsMock.findUnresolvedMetaTransactionJobsAsync(workerAddress, (0, ts_mockito_1.anything)())).thenResolve([
                metaTransactionJob,
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(blockchainUtilsMock),
                gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
            });
            const spiedRfqmService = (0, ts_mockito_1.spy)(rfqmService);
            (0, ts_mockito_1.when)(spiedRfqmService.processJobAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve();
            await rfqmService.workerBeforeLogicAsync(workerIndex, workerAddress);
            (0, ts_mockito_1.verify)(spiedRfqmService.processJobAsync(orderHash, workerAddress, 'rfqm_v2_job')).once();
            (0, ts_mockito_1.verify)(spiedRfqmService.processJobAsync(jobId, workerAddress, 'meta_transaction_job')).once();
        });
    });
    describe('processJobAsync', () => {
        it('fails if no rfqm v2 job is found', async () => {
            // Return `undefined` for v1 and v2 job for orderhash
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync('0xorderhash')).thenResolve(null);
            const rfqmService = buildWorkerServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
            await rfqmService.processJobAsync('0xorderhash', '0xworkeraddress');
            (0, chai_1.expect)((0, ts_mockito_1.capture)(loggerSpy.error).last()[0]).to.include({
                errorMessage: 'No job found for identifier',
            });
        });
        it('fails if a worker ends up with a job assigned to a different worker for a rfqm v2 job', async () => {
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findV2JobByOrderHashAsync('0xorderhash')).thenResolve(new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeOneMinuteAgoS),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeOneMinuteAgoS.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '',
                        makerAmount: '',
                        makerToken: '',
                        taker: '',
                        takerAmount: '',
                        takerToken: '',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                updatedAt: new Date(),
                workerAddress: '0xwrongworkeraddress',
            }));
            const rfqmService = buildWorkerServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
            await rfqmService.processJobAsync('0xorderhash', '0xworkeraddress');
            (0, chai_1.expect)((0, ts_mockito_1.capture)(loggerSpy.error).last()[0]).to.include({
                errorMessage: 'Worker was sent a job claimed by a different worker',
            });
        });
        it('fails if no meta-transaction job is found', async () => {
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const jobId = 'jobId';
            (0, ts_mockito_1.when)(dbUtilsMock.findMetaTransactionJobByIdAsync(jobId)).thenResolve(null);
            const rfqmService = buildWorkerServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
            await rfqmService.processJobAsync(jobId, '0xworkeraddress', 'meta_transaction_job');
            (0, chai_1.expect)((0, ts_mockito_1.capture)(loggerSpy.error).last()[0]).to.include({
                errorMessage: 'No job found for identifier',
            });
        });
        it('fails if a worker ends up with a job assigned to a different worker for a meta-transaction job', async () => {
            const jobId = 'jobId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: 'inputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xwrongworkeraddress',
                approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                approvalSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
            }, jobId);
            const dbUtilsMock = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(dbUtilsMock.findMetaTransactionJobByIdAsync(jobId)).thenResolve(job);
            const rfqmService = buildWorkerServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(dbUtilsMock) });
            await rfqmService.processJobAsync(jobId, '0xworkeraddress', 'meta_transaction_job');
            (0, chai_1.expect)((0, ts_mockito_1.capture)(loggerSpy.error).last()[0]).to.include({
                errorMessage: 'Worker was sent a job claimed by a different worker',
            });
        });
    });
    describe('processApprovalAndTradeAsync', () => {
        it('throws if non-approval job is supplied to the method for a rfqm v2 job', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const rfqmService = buildWorkerServiceForUnitTest();
            try {
                await rfqmService.processApprovalAndTradeAsync(job, '0xworkeraddress');
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Non-approval job should not be processed by `processApprovalAndTradeAsync`');
            }
        });
        it('should not proceed to trade transaction if the status of approval transaction is not `SucceededConfirmed` for a rfqm v2 job', async () => {
            const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(nowS + 10),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS + 10), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
                approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                approvalSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
            });
            const mockPresubmitTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                createdAt: new Date(1233),
                from: '0xworkeraddress',
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                orderHash: '0xorderhash',
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xpresubmittransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Approval,
            });
            const mockTransactionReceipt = {
                blockHash: '0xblockhash',
                blockNumber: 1,
                byzantium: true,
                confirmations: 3,
                contractAddress: '0xexchangeproxyaddress',
                cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                effectiveGasPrice: ethers_1.BigNumber.from(1000),
                from: '0xworkeraddress',
                gasUsed: ethers_1.BigNumber.from(10000),
                logs: [],
                logsBloom: '',
                status: 0,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xpresubmittransactionhash',
                transactionIndex: 0,
                type: 2,
            };
            const mockMinedBlock = {
                _difficulty: ethers_1.BigNumber.from(2),
                difficulty: 2,
                extraData: '',
                gasLimit: ethers_1.BigNumber.from(1000),
                gasUsed: ethers_1.BigNumber.from(1000),
                hash: '0xblockhash',
                miner: '0xminer',
                nonce: '0x000',
                number: 21,
                parentHash: '0xparentblockhash',
                timestamp: 12345,
                transactions: ['0xpresubmittransactionhash'],
            };
            const mockNonce = 0;
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            // when(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync(anything())).thenResolve([]);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync((0, ts_mockito_1.anything)(), types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([mockPresubmitTransaction]);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(validEIP712Sig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.isValidOrderSignerAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(true);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getTokenBalancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(1000000000)]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve('0xcalldata');
            (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xpresubmittransactionhash']))).thenResolve([
                mockTransactionReceipt,
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getBlockAsync('0xblockhash')).thenResolve(mockMinedBlock);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn({
                event: '',
                logIndex: null,
                transactionIndex: null,
                transactionHash: '',
                blockHash: '',
                address: '',
                data: '',
                blockNumber: 0,
                topics: [],
                args: {
                    maker: '',
                    makerToken: '',
                    makerTokenFilledAmount: new utils_1.BigNumber(1234),
                    orderHash: '',
                    pool: '',
                    taker: '',
                    takerToken: '',
                    takerTokenFilledAmount: new utils_1.BigNumber(5),
                },
            });
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            await rfqmService.processApprovalAndTradeAsync(job, '0xworkeraddress');
            (0, chai_1.expect)(updateRfqmJobCalledArgs[0].status).to.equal(types_1.RfqmJobStatus.PendingProcessing);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[1].status).to.equal(types_1.RfqmJobStatus.PendingLastLookAccepted);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[updateRfqmJobCalledArgs.length - 1].status).to.equal(types_1.RfqmJobStatus.FailedRevertedConfirmed);
            (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.FailedRevertedConfirmed);
        });
        it('should proceed to trade transaction if the status of approval transaction is `SucceededConfirmed` for a rfqm v2 job', async () => {
            const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(nowS + 10),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS + 10), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
                approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                approvalSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
            });
            const mockPresubmitApprovalTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                createdAt: new Date(1233),
                from: '0xworkeraddress',
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                orderHash: '0xorderhash',
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xpresubmittransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Approval,
            });
            const mockPresubmitTradeTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                createdAt: new Date(1233),
                from: '0xworkeraddress',
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                orderHash: '0xorderhash',
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xpresubmittransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Trade,
            });
            const mockTransactionReceipt = {
                blockHash: '0xblockhash',
                blockNumber: 1,
                byzantium: true,
                confirmations: 3,
                contractAddress: '0xexchangeproxyaddress',
                cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                effectiveGasPrice: ethers_1.BigNumber.from(1000),
                from: '0xworkeraddress',
                gasUsed: ethers_1.BigNumber.from(10000),
                logs: [],
                logsBloom: '',
                status: 1,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xpresubmittransactionhash',
                transactionIndex: 0,
                type: 2,
            };
            const mockMinedBlock = {
                _difficulty: ethers_1.BigNumber.from(2),
                difficulty: 2,
                extraData: '',
                gasLimit: ethers_1.BigNumber.from(1000),
                gasUsed: ethers_1.BigNumber.from(1000),
                hash: '0xblockhash',
                miner: '0xminer',
                nonce: '0x000',
                number: 21,
                parentHash: '0xparentblockhash',
                timestamp: 12345,
                transactions: ['0xpresubmittransactionhash'],
            };
            const mockNonce = 0;
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            // when(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync(anything())).thenResolve([]);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync((0, ts_mockito_1.anything)(), types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([mockPresubmitApprovalTransaction]);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync((0, ts_mockito_1.anything)(), types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([mockPresubmitTradeTransaction]);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve([
                mockPresubmitTradeTransaction,
            ]);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(validEIP712Sig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.isValidOrderSignerAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(true);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getTokenBalancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(1000000000)]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForFillTakerSignedOtcOrderAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateTakerSignedOtcOrderCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xcalldata');
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve('0xcalldata');
            (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xpresubmittransactionhash']))).thenResolve([
                mockTransactionReceipt,
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getBlockAsync('0xblockhash')).thenResolve(mockMinedBlock);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn({
                event: '',
                logIndex: null,
                transactionIndex: null,
                transactionHash: '',
                blockHash: '',
                address: '',
                data: '',
                blockNumber: 0,
                topics: [],
                args: {
                    maker: '',
                    makerToken: '',
                    makerTokenFilledAmount: new utils_1.BigNumber(1234),
                    orderHash: '',
                    pool: '',
                    taker: '',
                    takerToken: '',
                    takerTokenFilledAmount: new utils_1.BigNumber(5),
                },
            });
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            await rfqmService.processApprovalAndTradeAsync(job, '0xworkeraddress');
            (0, chai_1.expect)(updateRfqmJobCalledArgs[0].status).to.equal(types_1.RfqmJobStatus.PendingProcessing);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[1].status).to.equal(types_1.RfqmJobStatus.PendingLastLookAccepted);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[2].status).to.equal(types_1.RfqmJobStatus.PendingSubmitted);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[updateRfqmJobCalledArgs.length - 1].status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
            (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
        });
        it('throws if non-approval job is supplied to the method for a meta-transaction job', async () => {
            const jobId = 'jobId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const rfqmService = buildWorkerServiceForUnitTest();
            try {
                await rfqmService.processApprovalAndTradeAsync(job, '0xworkeraddress');
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Non-approval job should not be processed by `processApprovalAndTradeAsync`');
            }
        });
        it('should not proceed to trade transaction if the status of approval transaction is not `SucceededConfirmed` for a meta-transaction job', async () => {
            const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
            const jobId = 'jobId';
            const transactionSubmissionId = 'submissionId';
            const inputToken = '0xinputToken';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(nowS + 600),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken,
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
                approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                approvalSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
            }, jobId);
            const mockTransaction = createMetaTransactionSubmissionEntity({
                from: '0xworkeraddress',
                metaTransactionJobId: jobId,
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Approval,
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
            }, transactionSubmissionId);
            const mockTransactionReceipt = {
                blockHash: '0xblockhash',
                blockNumber: 1,
                byzantium: true,
                confirmations: 3,
                contractAddress: '0xexchangeproxyaddress',
                cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                effectiveGasPrice: ethers_1.BigNumber.from(1000),
                from: '0xworkeraddress',
                gasUsed: ethers_1.BigNumber.from(10000),
                logs: [],
                logsBloom: '',
                status: 0,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash',
                transactionIndex: 0,
                type: 2,
            };
            const mockMinedBlock = {
                _difficulty: ethers_1.BigNumber.from(2),
                difficulty: 2,
                extraData: '',
                gasLimit: ethers_1.BigNumber.from(1000),
                gasUsed: ethers_1.BigNumber.from(1000),
                hash: '0xblockhash',
                miner: '0xminer',
                nonce: '0x000',
                number: 21,
                parentHash: '0xparentblockhash',
                timestamp: 12345,
                transactions: ['0xsignedtransactionhash'],
            };
            const mockNonce = 0;
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([mockTransaction]);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.isValidOrderSignerAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(true);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getTokenBalancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(1000000000)]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync(inputToken, (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve('0xcalldata');
            (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                mockTransactionReceipt,
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getBlockAsync('0xblockhash')).thenResolve(mockMinedBlock);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            await rfqmService.processApprovalAndTradeAsync(job, '0xworkeraddress');
            (0, chai_1.expect)(updateRfqmJobCalledArgs[0].status).to.equal(types_1.RfqmJobStatus.PendingProcessing);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[updateRfqmJobCalledArgs.length - 1].status).to.equal(types_1.RfqmJobStatus.FailedRevertedConfirmed);
            (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.FailedRevertedConfirmed);
        });
        it('should proceed to trade transaction if the status of approval transaction is `SucceededConfirmed` for a meta-transaction job', async () => {
            const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
            const jobId = 'jobId';
            const transactionSubmissionId1 = 'submissionId1';
            const transactionSubmissionId2 = 'submissionId2';
            const inputToken = '0xinputToken';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(nowS + 600),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken,
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
                approval: constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL,
                approvalSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
            }, jobId);
            const mockApprovalTransaction = createMetaTransactionSubmissionEntity({
                from: '0xworkeraddress',
                metaTransactionJobId: jobId,
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash1',
                type: types_1.RfqmTransactionSubmissionType.Approval,
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
            }, transactionSubmissionId1);
            const mockTradeTransaction = createMetaTransactionSubmissionEntity({
                from: '0xworkeraddress',
                metaTransactionJobId: jobId,
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash2',
                type: types_1.RfqmTransactionSubmissionType.Trade,
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
            }, transactionSubmissionId2);
            const mockApprovalTransactionReceipt = {
                blockHash: '0xblockhash',
                blockNumber: 1,
                byzantium: true,
                confirmations: 3,
                contractAddress: '0xexchangeproxyaddress',
                cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                effectiveGasPrice: ethers_1.BigNumber.from(1000),
                from: '0xworkeraddress',
                gasUsed: ethers_1.BigNumber.from(10000),
                logs: [],
                logsBloom: '',
                status: 1,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash1',
                transactionIndex: 0,
                type: 2,
            };
            const mockTradeTransactionReceipt = {
                blockHash: '0xblockhash',
                blockNumber: 1,
                byzantium: true,
                confirmations: 3,
                contractAddress: '0xexchangeproxyaddress',
                cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                effectiveGasPrice: ethers_1.BigNumber.from(1000),
                from: '0xworkeraddress',
                gasUsed: ethers_1.BigNumber.from(10000),
                logs: [],
                logsBloom: '',
                status: 1,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash2',
                transactionIndex: 0,
                type: 2,
            };
            const mockMinedBlock = {
                _difficulty: ethers_1.BigNumber.from(2),
                difficulty: 2,
                extraData: '',
                gasLimit: ethers_1.BigNumber.from(1000),
                gasUsed: ethers_1.BigNumber.from(1000),
                hash: '0xblockhash',
                miner: '0xminer',
                nonce: '0x000',
                number: 21,
                parentHash: '0xparentblockhash',
                timestamp: 12345,
                transactions: ['0xsignedtransactionhash1', '0xsignedtransactionhash2'],
            };
            const mockNonce = 0;
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([mockApprovalTransaction]);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([mockTradeTransaction]);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId)).thenResolve([mockTradeTransaction]);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.isValidOrderSignerAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(true);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getTokenBalancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(1000000000)]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateMetaTransactionCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xcalldata');
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve('0xcalldata');
            (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash1']))).thenResolve([
                mockApprovalTransactionReceipt,
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash2']))).thenResolve([
                mockTradeTransactionReceipt,
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getBlockAsync('0xblockhash')).thenResolve(mockMinedBlock);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            await rfqmService.processApprovalAndTradeAsync(job, '0xworkeraddress');
            (0, chai_1.expect)(updateRfqmJobCalledArgs[0].status).to.equal(types_1.RfqmJobStatus.PendingProcessing);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[1].status).to.equal(types_1.RfqmJobStatus.PendingSubmitted);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[updateRfqmJobCalledArgs.length - 1].status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
            (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
        });
    });
    describe('processTradeAsync', () => {
        it('should process a rfqm v2 job trade successfully', async () => {
            const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(nowS + 10),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS + 10), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '0xworkeraddress',
            });
            const mockTransactionRequest = {};
            const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                from: '0xworkeraddress',
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                orderHash: '0xorderhash',
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Trade,
            });
            const mockTransactionReceipt = {
                blockHash: '0xblockhash',
                blockNumber: 1,
                byzantium: true,
                confirmations: 3,
                contractAddress: '0xexchangeproxyaddress',
                cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                effectiveGasPrice: ethers_1.BigNumber.from(1000),
                from: '0xworkeraddress',
                gasUsed: ethers_1.BigNumber.from(10000),
                logs: [],
                logsBloom: '',
                status: 1,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash',
                transactionIndex: 0,
                type: 2,
            };
            const mockMinedBlock = {
                _difficulty: ethers_1.BigNumber.from(2),
                difficulty: 2,
                extraData: '',
                gasLimit: ethers_1.BigNumber.from(1000),
                gasUsed: ethers_1.BigNumber.from(1000),
                hash: '0xblockhash',
                miner: '0xminer',
                nonce: '0x000',
                number: 21,
                parentHash: '0xparentblockhash',
                timestamp: 12345,
                transactions: ['0xpresubmittransactionhash'],
            };
            const mockNonce = 0;
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve([]);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync((0, ts_mockito_1.anything)(), types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([]);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionByTransactionHashAsync('0xsignedtransactionhash')).thenResolve(_.cloneDeep(mockTransaction));
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(validEIP712Sig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateTakerSignedOtcOrderCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xcalldata');
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForFillTakerSignedOtcOrderAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
            (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
            (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
            (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                signedTransaction: 'signedTransaction',
                transactionHash: '0xsignedtransactionhash',
            });
            (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                mockTransactionReceipt,
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getBlockAsync('0xblockhash')).thenResolve(mockMinedBlock);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            await rfqmService.processTradeAsync(job, '0xworkeraddress');
            (0, chai_1.expect)(updateRfqmJobCalledArgs[0].status).to.equal(types_1.RfqmJobStatus.PendingProcessing);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[1].status).to.equal(types_1.RfqmJobStatus.PendingLastLookAccepted);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[2].status).to.equal(types_1.RfqmJobStatus.PendingSubmitted);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[updateRfqmJobCalledArgs.length - 1].status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
            (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
        });
        it('should process a meta-transaction job trade successfully', async () => {
            const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
            const jobId = 'jobId';
            const transactionSubmissionId = 'submissionId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(nowS + 600),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const mockTransactionRequest = {};
            const mockTransaction = createMetaTransactionSubmissionEntity({
                from: '0xworkeraddress',
                metaTransactionJobId: jobId,
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Trade,
            }, transactionSubmissionId);
            const mockTransactionReceipt = {
                blockHash: '0xblockhash',
                blockNumber: 1,
                byzantium: true,
                confirmations: 3,
                contractAddress: '0xexchangeproxyaddress',
                cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                effectiveGasPrice: ethers_1.BigNumber.from(1000),
                from: '0xworkeraddress',
                gasUsed: ethers_1.BigNumber.from(10000),
                logs: [],
                logsBloom: '',
                status: 1,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash',
                transactionIndex: 0,
                type: 2,
            };
            const mockMinedBlock = {
                _difficulty: ethers_1.BigNumber.from(2),
                difficulty: 2,
                extraData: '',
                gasLimit: ethers_1.BigNumber.from(1000),
                gasUsed: ethers_1.BigNumber.from(1000),
                hash: '0xblockhash',
                miner: '0xminer',
                nonce: '0x000',
                number: 21,
                parentHash: '0xparentblockhash',
                timestamp: 12345,
                transactions: ['0xpresubmittransactionhash'],
            };
            const mockNonce = 0;
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId)).thenResolve([]);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([]);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByTransactionHashAsync('0xsignedtransactionhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([_.cloneDeep(mockTransaction)]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateMetaTransactionCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xcalldata');
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
            (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
            (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
            (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                signedTransaction: 'signedTransaction',
                transactionHash: '0xsignedtransactionhash',
            });
            (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                mockTransactionReceipt,
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getBlockAsync('0xblockhash')).thenResolve(mockMinedBlock);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            await rfqmService.processTradeAsync(job, '0xworkeraddress');
            (0, chai_1.expect)(updateRfqmJobCalledArgs[0].status).to.equal(types_1.RfqmJobStatus.PendingProcessing);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[1].status).to.equal(types_1.RfqmJobStatus.PendingSubmitted);
            (0, chai_1.expect)(updateRfqmJobCalledArgs[updateRfqmJobCalledArgs.length - 1].status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
            (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
        });
    });
    describe('validate job methods', () => {
        it('should return null for valid, unexpired v2 jobs', () => {
            const fakeInFiveMinutesS = fakeClockMs / constants_1.ONE_SECOND_MS + 360;
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeInFiveMinutesS),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(
                        /* expiry */ new utils_1.BigNumber(fakeInFiveMinutesS), 
                        /* nonceBucket */ new utils_1.BigNumber(21), 
                        /* nonce */ new utils_1.BigNumber(0)).toString(),
                        maker: '',
                        makerAmount: '',
                        makerToken: '',
                        taker: '',
                        takerAmount: '',
                        takerToken: '',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const result = WorkerService_1.WorkerService.validateRfqmV2Job(job, new Date(fakeClockMs));
            (0, chai_1.expect)(result).to.equal(null);
        });
        it('should return a No Taker Signature status for v2 jobs with no taker signature', () => {
            const fakeInFiveMinutesS = fakeClockMs / constants_1.ONE_SECOND_MS + 360;
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeInFiveMinutesS),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(
                        /* expiry */ new utils_1.BigNumber(fakeInFiveMinutesS), 
                        /* nonceBucket */ new utils_1.BigNumber(21), 
                        /* nonce */ new utils_1.BigNumber(0)).toString(),
                        maker: '',
                        makerAmount: '',
                        makerToken: '',
                        taker: '',
                        takerAmount: '',
                        takerToken: '',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: null,
                updatedAt: new Date(),
                workerAddress: '',
            });
            const result = WorkerService_1.WorkerService.validateRfqmV2Job(job, new Date(fakeClockMs));
            (0, chai_1.expect)(result).to.equal(types_1.RfqmJobStatus.FailedValidationNoTakerSignature);
        });
        it('should return null for a valid, unexpired meta-transaction job', () => {
            const fakeInFiveMinutesS = fakeClockMs / constants_1.ONE_SECOND_MS + 360;
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeInFiveMinutesS),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, 'jobId');
            const result = WorkerService_1.WorkerService.validateMetaTransactionJob(job, new Date(fakeClockMs));
            (0, chai_1.expect)(result).to.equal(null);
        });
        it('should return a failed expired status for a meta-transaction job that expires', () => {
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeClockMs / constants_1.ONE_SECOND_MS),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, 'jobId');
            const result = WorkerService_1.WorkerService.validateMetaTransactionJob(job, new Date(fakeClockMs + 1000000));
            (0, chai_1.expect)(result).to.equal(types_1.RfqmJobStatus.FailedExpired);
        });
    });
    describe('shouldResubmitTransaction', () => {
        it('should return false if new gas price < 10% greater than previous', async () => {
            const gasFees = { maxFeePerGas: new utils_1.BigNumber(100), maxPriorityFeePerGas: new utils_1.BigNumber(10) };
            const newGasPrice = new utils_1.BigNumber(105);
            (0, chai_1.expect)(WorkerService_1.WorkerService.shouldResubmitTransaction(gasFees, newGasPrice)).to.equal(false);
        });
        it('should return true if new gas price is 10% greater than previous', async () => {
            const gasFees = { maxFeePerGas: new utils_1.BigNumber(100), maxPriorityFeePerGas: new utils_1.BigNumber(10) };
            const newGasPrice = new utils_1.BigNumber(110);
            (0, chai_1.expect)(WorkerService_1.WorkerService.shouldResubmitTransaction(gasFees, newGasPrice)).to.equal(true);
        });
        it('should return true if new gas price > 10% greater than previous', async () => {
            const gasFees = { maxFeePerGas: new utils_1.BigNumber(100), maxPriorityFeePerGas: new utils_1.BigNumber(10) };
            const newGasPrice = new utils_1.BigNumber(120);
            (0, chai_1.expect)(WorkerService_1.WorkerService.shouldResubmitTransaction(gasFees, newGasPrice)).to.equal(true);
        });
    });
    describe('checkJobPreprocessingAsync', () => {
        it('should update job staus and throw error if job validation failed for a rfqm v2 job', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeOneMinuteAgoS),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeOneMinuteAgoS.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
            });
            try {
                await rfqmService.checkJobPreprocessingAsync(job, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Job failed validation');
                (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.FailedExpired);
            }
        });
        it('should throw error if there is no taker signature for a rfqm v2 job', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: null,
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
            });
            try {
                await rfqmService.checkJobPreprocessingAsync(job, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Job failed validation');
                (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.FailedValidationNoTakerSignature);
            }
        });
        it('should update job staus to `PendingProcessing` if job status is `PendingEnqueued` for a rfqm v2 job', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
            });
            await rfqmService.checkJobPreprocessingAsync(job, new Date(fakeClockMs));
            (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.PendingProcessing);
        });
        it('should update job staus and throw error if job validation failed for a meta-transaction job', async () => {
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeOneMinuteAgoS),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, 'jobId');
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
            });
            try {
                await rfqmService.checkJobPreprocessingAsync(job, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Job failed validation');
                (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.FailedExpired);
            }
        });
        it('should update job staus to `PendingProcessing` if job status is `PendingEnqueued` for a meta-transaction job', async () => {
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, 'jobId');
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
            });
            await rfqmService.checkJobPreprocessingAsync(job, new Date(fakeClockMs));
            (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.PendingProcessing);
        });
    });
    describe('prepareApprovalAsync', () => {
        it('should throw exception if there are submitted transactions but job maker signature is null for a rfqm v2 job', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                createdAt: new Date(1233),
                from: '0xworkeraddress',
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                orderHash: '0xorderhash',
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xpresubmittransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Trade,
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([mockTransaction]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            try {
                await rfqmService.prepareApprovalAsync(job, '0xtoken', constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL, {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                });
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Encountered a job with submissions but no maker signature');
            }
        });
        it('should return generated calldata if there are submitted transactions for a rfqm v2 job', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                createdAt: new Date(1233),
                from: '0xworkeraddress',
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                orderHash: '0xorderhash',
                status: types_1.RfqmTransactionSubmissionStatus.Submitted,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xpresubmittransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Trade,
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([mockTransaction]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            const calldata = await rfqmService.prepareApprovalAsync(job, '0xtoken', constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL, {
                signatureType: asset_swapper_1.SignatureType.EthSign,
                v: 1,
                r: '',
                s: '',
            });
            (0, chai_1.expect)(calldata).to.deep.equal(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
        });
        it('should throw exception if eth_call failed for a rfqm v2 job', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenThrow(new Error('error'));
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            try {
                await rfqmService.prepareApprovalAsync(job, '0xtoken', constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL, {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                });
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Eth call approval validation failed');
                (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.FailedEthCallFailed);
            }
        });
        it('should return correct calldata if there is no submitted transaction for a rfqm v2 job', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(10);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            const calldata = await rfqmService.prepareApprovalAsync(job, '0xtoken', constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL, {
                signatureType: asset_swapper_1.SignatureType.EthSign,
                v: 1,
                r: '',
                s: '',
            });
            (0, chai_1.expect)(calldata).to.deep.equal(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
        });
        it('should return generated calldata if there are submitted transactions for a meta-transaction job', async () => {
            const jobId = 'jobId';
            const transactionSubmissionId = 'submissionId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const mockTransaction = createMetaTransactionSubmissionEntity({
                from: '0xworkeraddress',
                metaTransactionJobId: jobId,
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Approval,
            }, transactionSubmissionId);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([mockTransaction]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            const calldata = await rfqmService.prepareApprovalAsync(job, '0xtoken', constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL, {
                signatureType: asset_swapper_1.SignatureType.EthSign,
                v: 1,
                r: '',
                s: '',
            });
            (0, chai_1.expect)(calldata).to.deep.equal(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
            (0, ts_mockito_1.verify)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).never();
        });
        it('should throw exception if eth_call failed for a meta-transaction job', async () => {
            const jobId = 'jobId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenThrow(new Error('error'));
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            try {
                await rfqmService.prepareApprovalAsync(job, '0xtoken', constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL, {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                });
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Eth call approval validation failed');
                (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.FailedEthCallFailed);
            }
        });
        it('should return correct calldata if there is no submitted transaction for a meta-transaction job', async () => {
            const jobId = 'jobId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Approval)).thenResolve([]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateApprovalCalldataAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(10);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            const calldata = await rfqmService.prepareApprovalAsync(job, '0xtoken', constants_2.MOCK_EXECUTE_META_TRANSACTION_APPROVAL, {
                signatureType: asset_swapper_1.SignatureType.EthSign,
                v: 1,
                r: '',
                s: '',
            });
            (0, chai_1.expect)(calldata).to.deep.equal(constants_2.MOCK_EXECUTE_META_TRANSACTION_CALLDATA);
        });
    });
    describe('preparerfqmV2TradeAsync', () => {
        it('updates the job and throws upon validation failure when `shouldCheckLastLook` is true', async () => {
            const expiredJob = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeOneMinuteAgoS),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeOneMinuteAgoS.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '',
                        makerAmount: '',
                        makerToken: '',
                        taker: '',
                        takerAmount: '',
                        takerToken: '',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(expiredJob);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash')).thenResolve([]);
            const rfqmService = buildWorkerServiceForUnitTest({ dbUtils: (0, ts_mockito_1.instance)(mockDbUtils) });
            try {
                await rfqmService.preparerfqmV2TradeAsync(expiredJob, '0xworkeraddress', true, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Job failed validation');
                (0, chai_1.expect)(expiredJob).to.deep.equal({ ..._job, status: types_1.RfqmJobStatus.FailedExpired });
            }
        });
        it('handles a balance check failure', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash')).thenResolve([]);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(100)]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(5),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Order failed pre-sign validation');
                (0, chai_1.expect)(updateRfqmJobCalledArgs[0]).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.PendingProcessing,
                });
                (0, chai_1.expect)(updateRfqmJobCalledArgs[1]).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedPresignValidationFailed,
                });
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedPresignValidationFailed,
                });
            }
        });
        it('handles a decline to sign', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash')).thenResolve([]);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(undefined);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Market Maker declined to sign');
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    lastLookResult: false,
                    status: types_1.RfqmJobStatus.FailedLastLookDeclined,
                });
            }
        });
        it('handles a signature failure', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash')).thenResolve([]);
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReject(new Error('fake timeout'));
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Job failed during market maker sign attempt');
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedSignFailed,
                });
            }
        });
        it('handles signer is not the maker', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync(orderHash)).thenResolve([]);
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            const invalidEIP712Sig = _.cloneDeep(validEIP712Sig);
            invalidEIP712Sig.r = '0xdc158f7b53b940863bc7b001552a90282e51033f29b73d44a2701bd16faa19d3';
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(invalidEIP712Sig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Invalid order signer address');
                (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.FailedSignFailed);
            }
        });
        it('handles an eth_call failure', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync(orderHash)).thenResolve([]);
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(validEIP712Sig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForFillTakerSignedOtcOrderAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReject(new Error('fake eth call failure'));
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Eth call validation failed');
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    lastLookResult: true,
                    makerSignature: validEIP712Sig,
                    status: types_1.RfqmJobStatus.FailedEthCallFailed,
                });
            }
        });
        it('updates market maker signatures missing bytes', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve([]);
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(missingByteSig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.isValidOrderSignerAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(true);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForFillTakerSignedOtcOrderAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateTakerSignedOtcOrderCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xvalidcalldata');
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
            (0, chai_1.expect)(job).to.deep.equal({
                ..._job,
                lastLookResult: true,
                makerSignature: (0, signature_utils_1.padSignature)(missingByteSig),
                status: types_1.RfqmJobStatus.PendingLastLookAccepted,
            });
        });
        it('skips the eth_call for jobs with existing submissions', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: true,
                makerUri: 'http://foo.bar',
                makerSignature: validEIP712Sig,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const transaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                orderHash,
                to: '0xexchangeproxyaddress',
                from: '0xworkeraddress',
                transactionHash: '0xsignedtransactionhash',
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 21,
                type: types_1.RfqmTransactionSubmissionType.Trade,
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash')).thenResolve([transaction]);
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(validEIP712Sig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateTakerSignedOtcOrderCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xvalidcalldata');
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            const calldata = await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
            (0, chai_1.expect)(job).to.deep.equal({
                ..._job,
                lastLookResult: true,
                makerSignature: validEIP712Sig,
                status: types_1.RfqmJobStatus.PendingLastLookAccepted,
            });
            (0, chai_1.expect)(calldata).to.equal('0xvalidcalldata');
            (0, ts_mockito_1.verify)(mockBlockchainUtils.estimateGasForFillTakerSignedOtcOrderAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).never();
        });
        it('lets expired jobs with existing submissions fall through', async () => {
            // If the job isn't in a terminal status but there are existing submissions,
            // `prepareTradeAsync` will let the job continue to the submission step which
            // will allow the worker to check receipts for those submissions.
            const expiredJob = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeOneMinuteAgoS),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: true,
                makerUri: 'http://foo.bar',
                makerSignature: {
                    r: '',
                    s: '',
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                },
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeOneMinuteAgoS.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingSubmitted,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const transaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                orderHash: '0xorderhash',
                to: '0xexchangeproxyaddress',
                from: '0xworkeraddress',
                transactionHash: '0xsignedtransactionhash',
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 21,
                type: types_1.RfqmTransactionSubmissionType.Trade,
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash')).thenResolve([transaction]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateTakerSignedOtcOrderCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xvalidcalldata');
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
            });
            await rfqmService.preparerfqmV2TradeAsync(expiredJob, '0xworkeraddress', true, new Date(fakeClockMs));
            (0, chai_1.expect)(expiredJob.status).to.equal(types_1.RfqmJobStatus.PendingSubmitted);
        });
        it('successfully prepares a job when checking last look', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '0xworkeraddress',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync(orderHash)).thenResolve([]);
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(validEIP712Sig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForFillTakerSignedOtcOrderAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateTakerSignedOtcOrderCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xvalidcalldata');
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            const calldata = await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
            (0, chai_1.expect)(job).to.deep.equal({
                ..._job,
                lastLookResult: true,
                makerSignature: validEIP712Sig,
                status: types_1.RfqmJobStatus.PendingLastLookAccepted,
            });
            (0, chai_1.expect)(calldata).to.equal('0xvalidcalldata');
            (0, chai_1.expect)(updateRfqmJobCalledArgs[0]).to.deep.equal({
                ..._job,
                status: types_1.RfqmJobStatus.PendingProcessing,
            });
            (0, chai_1.expect)(updateRfqmJobCalledArgs[1]).to.deep.equal({
                ..._job,
                lastLookResult: true,
                makerSignature: validEIP712Sig,
                status: types_1.RfqmJobStatus.PendingLastLookAccepted,
            });
        });
        it('successfully prepares a job if no last look is necessary', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: true,
                makerUri: 'http://foo.bar',
                makerSignature: validEIP712Sig,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '0xworkeraddress',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync(orderHash)).thenResolve([]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForFillTakerSignedOtcOrderAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateTakerSignedOtcOrderCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xvalidcalldata');
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            const spiedRfqmService = (0, ts_mockito_1.spy)(rfqmService);
            const calldata = await rfqmService.preparerfqmV2TradeAsync(job, '0xworkeraddress', false, new Date(fakeClockMs));
            (0, chai_1.expect)(job).to.deep.equal(_job);
            (0, chai_1.expect)(calldata).to.equal('0xvalidcalldata');
            (0, ts_mockito_1.verify)(spiedRfqmService.checkJobPreprocessingAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).never();
            (0, ts_mockito_1.verify)(spiedRfqmService.checkLastLookAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).never();
        });
    });
    describe('prepareMetaTransactionTradeAsync', () => {
        it('updates the job and throws upon validation failure if `shouldValidateJob` is true', async () => {
            const jobId = 'jobId';
            const expiredJob = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeOneMinuteAgoS),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const _job = _.cloneDeep(expiredJob);
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId)).thenResolve([]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
            });
            try {
                await rfqmService.prepareMetaTransactionTradeAsync(expiredJob, '0xworkeraddress', true, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Job failed validation');
                (0, chai_1.expect)(expiredJob).to.deep.equal({ ..._job, status: types_1.RfqmJobStatus.FailedExpired });
            }
        });
        it('handles an eth_call failure', async () => {
            const jobId = 'jobId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const _job = _.cloneDeep(job);
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId)).thenResolve([]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenReject(new Error('fake eth call failure'));
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
            });
            try {
                await rfqmService.prepareMetaTransactionTradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Eth call validation failed');
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedEthCallFailed,
                });
            }
        });
        it('skips the eth_call for jobs with existing submissions', async () => {
            const jobId = 'jobId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingProcessing,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const transaction = createMetaTransactionSubmissionEntity({
                from: '0xworkeraddress',
                metaTransactionJobId: jobId,
                maxFeePerGas: new utils_1.BigNumber(100000),
                maxPriorityFeePerGas: new utils_1.BigNumber(100),
                nonce: 0,
                to: '0xexchangeproxyaddress',
                transactionHash: '0xsignedtransactionhash',
                type: types_1.RfqmTransactionSubmissionType.Trade,
            }, 'submissionId');
            const _job = _.cloneDeep(job);
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId)).thenResolve([transaction]);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateMetaTransactionCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xvalidcalldata');
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
            });
            const calldata = await rfqmService.prepareMetaTransactionTradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
            (0, chai_1.expect)(job).to.deep.equal(_job);
            (0, chai_1.expect)(calldata).to.equal('0xvalidcalldata');
            (0, ts_mockito_1.verify)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).never();
        });
        it('successfully prepares a job if `shouldValidateJob` is true', async () => {
            const jobId = 'jobId';
            const job = createMeaTrsanctionJobEntity({
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: new utils_1.BigNumber(0),
                    token: '',
                    type: 'fixed',
                },
                inputToken: '0xinputToken',
                inputTokenAmount: new utils_1.BigNumber(10),
                integratorId: '0xintegrator',
                metaTransaction: constants_2.MOCK_META_TRANSACTION,
                metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                minOutputTokenAmount: new utils_1.BigNumber(10),
                outputToken: '0xoutputToken',
                takerAddress: '0xtakerAddress',
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                status: types_1.RfqmJobStatus.PendingEnqueued,
                workerAddress: '0xworkeraddress',
            }, jobId);
            const _job = _.cloneDeep(job);
            const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
            (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId)).thenResolve([]);
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateMetaTransactionCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xvalidcalldata');
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
            });
            const calldata = await rfqmService.prepareMetaTransactionTradeAsync(job, '0xworkeraddress', true, new Date(fakeClockMs));
            (0, chai_1.expect)(job).to.deep.equal({
                ..._job,
                status: types_1.RfqmJobStatus.PendingProcessing,
            });
            (0, chai_1.expect)(calldata).to.equal('0xvalidcalldata');
            (0, chai_1.expect)(updateRfqmJobCalledArgs[0]).to.deep.equal({
                ..._job,
                status: types_1.RfqmJobStatus.PendingProcessing,
            });
        });
    });
    describe('checkLastLookAsync', () => {
        it('should call `getMinOfBalancesAndAllowancesAsync` when `shouldCheckAllowance` is true and throws when balance check fails', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingProcessing,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(100)]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(5),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.checkLastLookAsync(job, '0xworkeraddress', true);
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Order failed pre-sign validation');
                (0, chai_1.expect)(updateRfqmJobCalledArgs[0]).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedPresignValidationFailed,
                });
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedPresignValidationFailed,
                });
                (0, ts_mockito_1.verify)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).once();
                (0, ts_mockito_1.verify)(mockBlockchainUtils.getTokenBalancesAsync((0, ts_mockito_1.anything)())).never();
            }
        });
        it('should call `getTokenBalancesAsync` when `shouldCheckAllowance` is false and throws when balance check fails', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingProcessing,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getTokenBalancesAsync((0, ts_mockito_1.anything)())).thenResolve([new utils_1.BigNumber(100)]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(5),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.checkLastLookAsync(job, '0xworkeraddress', false);
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Order failed pre-sign validation');
                (0, chai_1.expect)(updateRfqmJobCalledArgs[0]).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedPresignValidationFailed,
                });
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedPresignValidationFailed,
                });
                (0, ts_mockito_1.verify)(mockBlockchainUtils.getTokenBalancesAsync((0, ts_mockito_1.anything)())).once();
                (0, ts_mockito_1.verify)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).never();
            }
        });
        it('should throw when taker signature is not present', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingProcessing,
                takerSignature: null,
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.checkLastLookAsync(job, '0xworkeraddress', true);
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Order failed pre-sign validation due to empty takerSignature');
                (0, chai_1.expect)(updateRfqmJobCalledArgs[0]).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedPresignValidationFailed,
                });
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedPresignValidationFailed,
                });
            }
        });
        it('handles decline to sign', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash')).thenResolve([]);
            (0, ts_mockito_1.when)(mockDbUtils.findV2QuoteByOrderHashAsync('0xorderhash')).thenResolve(new entities_1.RfqmV2QuoteEntity({
                createdAt: new Date(),
                chainId: job.chainId,
                fee: job.fee,
                makerUri: job.makerUri,
                order: job.order,
                orderHash: job.orderHash,
            }));
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(undefined);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const mockCacheClient = (0, ts_mockito_1.mock)(cache_client_1.CacheClient);
            const mockRfqMakerManager = (0, ts_mockito_1.mock)(rfq_maker_manager_1.RfqMakerManager);
            (0, ts_mockito_1.when)(mockRfqMakerManager.findMakerIdWithRfqmUri(job.makerUri)).thenReturn('makerId1');
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
                rfqMakerManager: (0, ts_mockito_1.instance)(mockRfqMakerManager),
                cacheClient: (0, ts_mockito_1.instance)(mockCacheClient),
            });
            try {
                await rfqmService.checkLastLookAsync(job, '0xworkeraddress', true);
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Market Maker declined to sign');
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    lastLookResult: false,
                    status: types_1.RfqmJobStatus.FailedLastLookDeclined,
                });
                (0, ts_mockito_1.verify)(mockCacheClient.addMakerToCooldownAsync('makerId1', (0, ts_mockito_1.anything)(), job.chainId, job.order.order.makerToken, job.order.order.takerToken)).once();
                (0, ts_mockito_1.verify)(mockDbUtils.writeV2LastLookRejectionCooldownAsync('makerId1', job.chainId, job.order.order.makerToken, job.order.order.takerToken, (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), job.orderHash)).once();
            }
        });
        it('handles a signature failure', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker: '0xmaker',
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash: '0xorderhash',
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash')).thenResolve([]);
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReject(new Error('fake timeout'));
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.checkLastLookAsync(job, '0xworkeraddress', true);
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Job failed during market maker sign attempt');
                (0, chai_1.expect)(job).to.deep.equal({
                    ..._job,
                    status: types_1.RfqmJobStatus.FailedSignFailed,
                });
            }
        });
        it('handles signer is not the maker', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            const updateRfqmJobCalledArgs = [];
            (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
            });
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync(orderHash)).thenResolve([]);
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            const invalidEIP712Sig = _.cloneDeep(validEIP712Sig);
            invalidEIP712Sig.r = '0xdc158f7b53b940863bc7b001552a90282e51033f29b73d44a2701bd16faa19d3';
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(invalidEIP712Sig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            try {
                await rfqmService.checkLastLookAsync(job, '0xworkeraddress', true);
                chai_1.expect.fail();
            }
            catch (e) {
                (0, chai_1.expect)(e.message).to.contain('Invalid order signer address');
                (0, chai_1.expect)(job.status).to.deep.equal(types_1.RfqmJobStatus.FailedSignFailed);
            }
        });
        it('updates market maker signatures missing bytes', async () => {
            const job = new entities_1.RfqmV2JobEntity({
                affiliateAddress: '',
                chainId: 1,
                createdAt: new Date(),
                expiry: new utils_1.BigNumber(fakeFiveMinutesLater),
                fee: {
                    amount: '0',
                    token: '',
                    type: 'fixed',
                },
                integratorId: '',
                lastLookResult: null,
                makerUri: 'http://foo.bar',
                makerSignature: null,
                order: {
                    order: {
                        chainId: '1',
                        expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(fakeFiveMinutesLater.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                        maker,
                        makerAmount: '1000000',
                        makerToken: '0xmakertoken',
                        taker: '0xtaker',
                        takerAmount: '10000000',
                        takerToken: '0xtakertoken',
                        txOrigin: '',
                        verifyingContract: '',
                    },
                    type: types_1.RfqmOrderTypes.Otc,
                },
                orderHash,
                status: types_1.RfqmJobStatus.PendingEnqueued,
                takerSignature: {
                    signatureType: asset_swapper_1.SignatureType.EthSign,
                    v: 1,
                    r: '',
                    s: '',
                },
                updatedAt: new Date(),
                workerAddress: '',
            });
            const _job = _.cloneDeep(job);
            const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
            (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync((0, ts_mockito_1.anything)())).thenResolve([]);
            const mockQuoteServerClient = (0, ts_mockito_1.mock)(quote_server_client_1.QuoteServerClient);
            (0, ts_mockito_1.when)(mockQuoteServerClient.signV2Async((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(missingByteSig);
            const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
            (0, ts_mockito_1.when)(mockBlockchainUtils.isValidOrderSignerAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(true);
            (0, ts_mockito_1.when)(mockBlockchainUtils.getMinOfBalancesAndAllowancesAsync((0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForFillTakerSignedOtcOrderAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve(0);
            (0, ts_mockito_1.when)(mockBlockchainUtils.generateTakerSignedOtcOrderCallData((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn('0xvalidcalldata');
            const mockRfqMakerBalanceCacheService = (0, ts_mockito_1.mock)(rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService);
            (0, ts_mockito_1.when)(mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenResolve([
                new utils_1.BigNumber(1000000000),
            ]);
            const rfqmService = buildWorkerServiceForUnitTest({
                dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                quoteServerClient: (0, ts_mockito_1.instance)(mockQuoteServerClient),
                rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                rfqMakerBalanceCacheService: (0, ts_mockito_1.instance)(mockRfqMakerBalanceCacheService),
            });
            await rfqmService.checkLastLookAsync(job, '0xworkeraddress', true);
            (0, chai_1.expect)(job).to.deep.equal({
                ..._job,
                lastLookResult: true,
                makerSignature: (0, signature_utils_1.padSignature)(missingByteSig),
                status: types_1.RfqmJobStatus.PendingLastLookAccepted,
            });
        });
    });
    describe('submitToChainAsync', () => {
        describe('kind is `rfqm_v2_job`', () => {
            it('submits a transaction successfully when there is no previous transaction', async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const job = new entities_1.RfqmV2JobEntity({
                    affiliateAddress: '',
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS + 600),
                    fee: {
                        amount: '0',
                        token: '',
                        type: 'fixed',
                    },
                    integratorId: '',
                    lastLookResult: true,
                    makerUri: 'http://foo.bar',
                    order: {
                        order: {
                            chainId: '1',
                            expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS + 600), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                            maker: '0xmaker',
                            makerAmount: '1000000',
                            makerToken: '0xmakertoken',
                            taker: '0xtaker',
                            takerAmount: '10000000',
                            takerToken: '0xtakertoken',
                            txOrigin: '',
                            verifyingContract: '',
                        },
                        type: types_1.RfqmOrderTypes.Otc,
                    },
                    orderHash: '0xorderhash',
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    updatedAt: new Date(),
                    workerAddress: '',
                });
                const mockTransactionRequest = {};
                const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xsignedtransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const mockTransactionReceipt = {
                    to: '0xto',
                    from: '0xfrom',
                    contractAddress: '0xexchangeproxyaddress',
                    transactionIndex: 0,
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logsBloom: '',
                    blockHash: '0xblockhash',
                    transactionHash: '0xsignedtransactionhash',
                    logs: [],
                    blockNumber: 1,
                    confirmations: 3,
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    byzantium: true,
                    type: 2,
                    status: 1,
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([]);
                const updateRfqmJobCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                    updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
                });
                const writeV2RfqmTransactionSubmissionToDbCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.writeV2RfqmTransactionSubmissionToDbAsync((0, ts_mockito_1.anything)())).thenCall(async (transactionArg) => {
                    writeV2RfqmTransactionSubmissionToDbCalledArgs.push(_.cloneDeep(transactionArg));
                    return _.cloneDeep(mockTransaction);
                });
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionByTransactionHashAsync('0xsignedtransactionhash')).thenResolve(_.cloneDeep(mockTransaction));
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
                (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
                (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                    signedTransaction: 'signedTransaction',
                    transactionHash: '0xsignedtransactionhash',
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
                (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn({
                    event: '',
                    logIndex: null,
                    transactionIndex: null,
                    transactionHash: '',
                    blockHash: '',
                    address: '',
                    data: '',
                    blockNumber: 0,
                    topics: [],
                    args: {
                        maker: '',
                        makerToken: '',
                        makerTokenFilledAmount: new utils_1.BigNumber(1234),
                        orderHash: '',
                        pool: '',
                        taker: '',
                        takerToken: '',
                        takerTokenFilledAmount: new utils_1.BigNumber(5),
                    },
                });
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                await rfqmService.submitToChainAsync({
                    kind: job.kind,
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    calldata: '0xcalldata',
                    expiry: job.expiry,
                    identifier: job.orderHash,
                    submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                    onSubmissionContextStatusUpdate: callback,
                });
                (0, ts_mockito_1.verify)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)()));
                // eth_createAccessList should not be called when not enabled
                (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).never();
                (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
                (0, chai_1.expect)(writeV2RfqmTransactionSubmissionToDbCalledArgs[0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Presubmit);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[0][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[1][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
            });
            it("ignores an existing PRESUBMIT transaction which isn't found in the mempool or on chain", async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const job = new entities_1.RfqmV2JobEntity({
                    affiliateAddress: '',
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS + 600),
                    fee: {
                        amount: '0',
                        token: '',
                        type: 'fixed',
                    },
                    integratorId: '',
                    lastLookResult: true,
                    makerUri: 'http://foo.bar',
                    order: {
                        order: {
                            chainId: '1',
                            expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS + 600), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                            maker: '0xmaker',
                            makerAmount: '1000000',
                            makerToken: '0xmakertoken',
                            taker: '0xtaker',
                            takerAmount: '10000000',
                            takerToken: '0xtakertoken',
                            txOrigin: '',
                            verifyingContract: '',
                        },
                        type: types_1.RfqmOrderTypes.Otc,
                    },
                    orderHash: '0xorderhash',
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    updatedAt: new Date(),
                    workerAddress: '',
                });
                const mockPresubmitTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(1233),
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    status: types_1.RfqmTransactionSubmissionStatus.Presubmit,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xpresubmittransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const mockTransactionRequest = {};
                const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xsignedtransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const mockTransactionReceipt = {
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    contractAddress: '0xexchangeproxyaddress',
                    transactionIndex: 0,
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logsBloom: '',
                    blockHash: '0xblockhash',
                    transactionHash: '0xsignedtransactionhash',
                    logs: [],
                    blockNumber: 1,
                    confirmations: 3,
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    byzantium: true,
                    type: 2,
                    status: 1,
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([mockPresubmitTransaction]);
                const updateRfqmJobCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                    updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
                });
                const writeV2RfqmTransactionSubmissionToDbCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.writeV2RfqmTransactionSubmissionToDbAsync((0, ts_mockito_1.anything)())).thenCall(async (transactionArg) => {
                    writeV2RfqmTransactionSubmissionToDbCalledArgs.push(_.cloneDeep(transactionArg));
                    return _.cloneDeep(mockTransaction);
                });
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionByTransactionHashAsync('0xsignedtransactionhash')).thenResolve(_.cloneDeep(mockTransaction));
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                // This mock response indicates that the presubmit transaction can't be found
                // on chain or in the mempool
                (0, ts_mockito_1.when)(mockBlockchainUtils.getTransactionAsync('0xpresubmittransactionhash')).thenResolve(null);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
                (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
                (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                    signedTransaction: 'signedTransaction',
                    transactionHash: '0xsignedtransactionhash',
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
                (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn({
                    event: '',
                    logIndex: null,
                    transactionIndex: null,
                    transactionHash: '',
                    blockHash: '',
                    address: '',
                    data: '',
                    blockNumber: 0,
                    topics: [],
                    args: {
                        maker: '',
                        makerToken: '',
                        makerTokenFilledAmount: new utils_1.BigNumber(1234),
                        orderHash: '',
                        pool: '',
                        taker: '',
                        takerToken: '',
                        takerTokenFilledAmount: new utils_1.BigNumber(5),
                    },
                });
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                await rfqmService.submitToChainAsync({
                    kind: job.kind,
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    calldata: '0xcalldata',
                    expiry: job.expiry,
                    identifier: job.orderHash,
                    submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                    onSubmissionContextStatusUpdate: callback,
                });
                // eth_createAccessList should not be called when not enabled
                (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).never();
                (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
                // Expectations are the same as if the presubmit transaction never existed
                (0, chai_1.expect)(writeV2RfqmTransactionSubmissionToDbCalledArgs[0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Presubmit);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[0][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[1][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
            });
            it("marks a PRESUBMIT job as expired when existing transactions aren't found in \
            the mempool or on chain and the expiration time has passed", async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const job = new entities_1.RfqmV2JobEntity({
                    affiliateAddress: '',
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS - 60),
                    fee: {
                        amount: '0',
                        token: '',
                        type: 'fixed',
                    },
                    integratorId: '',
                    lastLookResult: true,
                    makerUri: 'http://foo.bar',
                    order: {
                        order: {
                            chainId: '1',
                            expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS - 60), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                            maker: '0xmaker',
                            makerAmount: '1000000',
                            makerToken: '0xmakertoken',
                            taker: '0xtaker',
                            takerAmount: '10000000',
                            takerToken: '0xtakertoken',
                            txOrigin: '',
                            verifyingContract: '',
                        },
                        type: types_1.RfqmOrderTypes.Otc,
                    },
                    orderHash: '0xorderhash',
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    updatedAt: new Date(),
                    workerAddress: '',
                });
                const mockPresubmitTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(1233),
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    status: types_1.RfqmTransactionSubmissionStatus.Presubmit,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xpresubmittransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const mockTransactionRequest = {};
                const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xsignedtransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const mockTransactionReceipt = {
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    contractAddress: '0xexchangeproxyaddress',
                    transactionIndex: 0,
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logsBloom: '',
                    blockHash: '0xblockhash',
                    transactionHash: '0xsignedtransactionhash',
                    logs: [],
                    blockNumber: 1,
                    confirmations: 3,
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    byzantium: true,
                    type: 2,
                    status: 1,
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([mockPresubmitTransaction]);
                const updateRfqmJobCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                    updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
                });
                const writeV2RfqmTransactionSubmissionToDbCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.writeV2RfqmTransactionSubmissionToDbAsync((0, ts_mockito_1.anything)())).thenCall(async (transactionArg) => {
                    writeV2RfqmTransactionSubmissionToDbCalledArgs.push(_.cloneDeep(transactionArg));
                    return _.cloneDeep(mockTransaction);
                });
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionByTransactionHashAsync('0xsignedtransactionhash')).thenResolve(_.cloneDeep(mockTransaction));
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                // This mock response indicates that the presubmit transaction can't be found
                // on chain or in the mempool
                (0, ts_mockito_1.when)(mockBlockchainUtils.getTransactionAsync('0xpresubmittransactionhash')).thenResolve(null);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
                (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
                (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                    signedTransaction: 'signedTransaction',
                    transactionHash: '0xsignedtransactionhash',
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
                (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn({
                    event: '',
                    logIndex: null,
                    transactionIndex: null,
                    transactionHash: '',
                    blockHash: '',
                    address: '',
                    data: '',
                    blockNumber: 0,
                    topics: [],
                    args: {
                        maker: '',
                        makerToken: '',
                        makerTokenFilledAmount: new utils_1.BigNumber(1234),
                        orderHash: '',
                        pool: '',
                        taker: '',
                        takerToken: '',
                        takerTokenFilledAmount: new utils_1.BigNumber(5),
                    },
                });
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                try {
                    await rfqmService.submitToChainAsync({
                        kind: job.kind,
                        to: '0xexchangeproxyaddress',
                        from: '0xworkeraddress',
                        calldata: '0xcalldata',
                        expiry: job.expiry,
                        identifier: job.orderHash,
                        submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                        onSubmissionContextStatusUpdate: callback,
                    });
                    chai_1.expect.fail();
                }
                catch (e) {
                    (0, chai_1.expect)(e.message).to.contain('Exceed expiry');
                    // eth_createAccessList should not be called when not enabled
                    (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).never();
                    (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.FailedExpired);
                }
            });
            it('recovers a PRESUBMIT transaction which actually submitted', async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const job = new entities_1.RfqmV2JobEntity({
                    affiliateAddress: '',
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS + 600),
                    fee: {
                        amount: '0',
                        token: '',
                        type: 'fixed',
                    },
                    integratorId: '',
                    lastLookResult: true,
                    makerUri: 'http://foo.bar',
                    order: {
                        order: {
                            chainId: '1',
                            expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS + 600), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                            maker: '0xmaker',
                            makerAmount: '1000000',
                            makerToken: '0xmakertoken',
                            taker: '0xtaker',
                            takerAmount: '10000000',
                            takerToken: '0xtakertoken',
                            txOrigin: '',
                            verifyingContract: '',
                        },
                        type: types_1.RfqmOrderTypes.Otc,
                    },
                    orderHash: '0xorderhash',
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    updatedAt: new Date(),
                    workerAddress: '',
                });
                const mockPresubmitTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(1233),
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    status: types_1.RfqmTransactionSubmissionStatus.Presubmit,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xpresubmittransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const mockTransactionReceipt = {
                    blockHash: '0xblockhash',
                    blockNumber: 1,
                    byzantium: true,
                    confirmations: 3,
                    contractAddress: '0xexchangeproxyaddress',
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    from: '0xworkeraddress',
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logs: [],
                    logsBloom: '',
                    status: 1,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xpresubmittransactionhash',
                    transactionIndex: 0,
                    type: 2,
                };
                const mockTransactionResponse = {
                    chainId: 1,
                    confirmations: 0,
                    data: '',
                    from: '0xworkeraddress',
                    gasLimit: ethers_1.BigNumber.from(1000000),
                    hash: '0xpresubmittransactionhash',
                    nonce: 0,
                    type: 2,
                    value: ethers_1.BigNumber.from(0),
                    wait: (_confirmations) => Promise.resolve(mockTransactionReceipt),
                };
                const mockMinedBlock = {
                    _difficulty: ethers_1.BigNumber.from(2),
                    difficulty: 2,
                    extraData: '',
                    gasLimit: ethers_1.BigNumber.from(1000),
                    gasUsed: ethers_1.BigNumber.from(1000),
                    hash: '0xblockhash',
                    miner: '0xminer',
                    nonce: '0x000',
                    number: 21,
                    parentHash: '0xparentblockhash',
                    timestamp: 12345,
                    transactions: ['0xpresubmittransactionhash'],
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([mockPresubmitTransaction]);
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                // This mock response indicates that the transaction is present in the mempool
                (0, ts_mockito_1.when)(mockBlockchainUtils.getTransactionAsync('0xpresubmittransactionhash')).thenResolve(mockTransactionResponse);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenReject(new Error('estimateGasForAsync called during recovery'));
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xpresubmittransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getBlockAsync('0xblockhash')).thenResolve(mockMinedBlock);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn({
                    event: '',
                    logIndex: null,
                    transactionIndex: null,
                    transactionHash: '',
                    blockHash: '',
                    address: '',
                    data: '',
                    blockNumber: 0,
                    topics: [],
                    args: {
                        maker: '',
                        makerToken: '',
                        makerTokenFilledAmount: new utils_1.BigNumber(1234),
                        orderHash: '',
                        pool: '',
                        taker: '',
                        takerToken: '',
                        takerTokenFilledAmount: new utils_1.BigNumber(5),
                    },
                });
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                await rfqmService.submitToChainAsync({
                    kind: job.kind,
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    calldata: '0xcalldata',
                    expiry: job.expiry,
                    identifier: job.orderHash,
                    submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                    onSubmissionContextStatusUpdate: callback,
                });
                // eth_createAccessList should not be called when not enabled
                (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).never();
                // Logic should first check to see if the transaction was actually sent.
                // If it was (and it is being mock so in this test) then the logic first
                // updates the status of the transaction to "Submitted"
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[0][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
                // The logic then enters the watch loop. On the first check, a transaction
                // receipt exists for this transaction and it will be marked "confirmed"
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[1][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
                (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
            });
            it('finalizes a job to FAILED_EXPIRED once the expiration window has passed', async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const ninetySecondsAgo = nowS - 100;
                const job = new entities_1.RfqmV2JobEntity({
                    affiliateAddress: '',
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(ninetySecondsAgo),
                    fee: {
                        amount: '0',
                        token: '',
                        type: 'fixed',
                    },
                    integratorId: '',
                    lastLookResult: true,
                    makerUri: 'http://foo.bar',
                    order: {
                        order: {
                            chainId: '1',
                            expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(ninetySecondsAgo.toString()), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                            maker: '0xmaker',
                            makerAmount: '1000000',
                            makerToken: '0xmakertoken',
                            taker: '0xtaker',
                            takerAmount: '10000000',
                            takerToken: '0xtakertoken',
                            txOrigin: '',
                            verifyingContract: '',
                        },
                        type: types_1.RfqmOrderTypes.Otc,
                    },
                    orderHash: '0xorderhash',
                    status: types_1.RfqmJobStatus.PendingSubmitted,
                    updatedAt: new Date(),
                    workerAddress: '',
                });
                const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    createdAt: new Date(1233),
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    status: types_1.RfqmTransactionSubmissionStatus.Submitted,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xpresubmittransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([mockTransaction]);
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xpresubmittransactionhash']))).thenResolve([]);
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                try {
                    await rfqmService.submitToChainAsync({
                        kind: job.kind,
                        to: '0xexchangeproxyaddress',
                        from: '0xworkeraddress',
                        calldata: '0xcalldata',
                        expiry: job.expiry,
                        identifier: job.orderHash,
                        submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                        onSubmissionContextStatusUpdate: callback,
                    });
                }
                catch (e) {
                    (0, chai_1.expect)(e.message).to.contain('Exceed expiry');
                    // eth_createAccessList should not be called when not enabled
                    (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).never();
                    (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.FailedExpired);
                }
            });
            it('should call createAccessListForAsync and should not affect the overall method when RPC returns properly', async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const job = new entities_1.RfqmV2JobEntity({
                    affiliateAddress: '',
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS + 600),
                    fee: {
                        amount: '0',
                        token: '',
                        type: 'fixed',
                    },
                    integratorId: '',
                    lastLookResult: true,
                    makerUri: 'http://foo.bar',
                    order: {
                        order: {
                            chainId: '1',
                            expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS + 600), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                            maker: '0xmaker',
                            makerAmount: '1000000',
                            makerToken: '0xmakertoken',
                            taker: '0xtaker',
                            takerAmount: '10000000',
                            takerToken: '0xtakertoken',
                            txOrigin: '',
                            verifyingContract: '',
                        },
                        type: types_1.RfqmOrderTypes.Otc,
                    },
                    orderHash: '0xorderhash',
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    updatedAt: new Date(),
                    workerAddress: '',
                });
                const mockTransactionRequest = {};
                const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xsignedtransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const mockTransactionReceipt = {
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    contractAddress: '0xexchangeproxyaddress',
                    transactionIndex: 0,
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logsBloom: '',
                    blockHash: '0xblockhash',
                    transactionHash: '0xsignedtransactionhash',
                    logs: [],
                    blockNumber: 1,
                    confirmations: 3,
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    byzantium: true,
                    type: 2,
                    status: 1,
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([]);
                const updateRfqmJobCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                    updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
                });
                const writeV2RfqmTransactionSubmissionToDbCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.writeV2RfqmTransactionSubmissionToDbAsync((0, ts_mockito_1.anything)())).thenCall(async (transactionArg) => {
                    writeV2RfqmTransactionSubmissionToDbCalledArgs.push(_.cloneDeep(transactionArg));
                    return _.cloneDeep(mockTransaction);
                });
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionByTransactionHashAsync('0xsignedtransactionhash')).thenResolve(_.cloneDeep(mockTransaction));
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
                (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
                (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                    signedTransaction: 'signedTransaction',
                    transactionHash: '0xsignedtransactionhash',
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
                (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn({
                    event: '',
                    logIndex: null,
                    transactionIndex: null,
                    transactionHash: '',
                    blockHash: '',
                    address: '',
                    data: '',
                    blockNumber: 0,
                    topics: [],
                    args: {
                        maker: '',
                        makerToken: '',
                        makerTokenFilledAmount: new utils_1.BigNumber(1234),
                        orderHash: '',
                        pool: '',
                        taker: '',
                        takerToken: '',
                        takerTokenFilledAmount: new utils_1.BigNumber(5),
                    },
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).thenResolve({
                    accessList: {
                        '0x1234': ['0x0'],
                        '0x12345': ['0x1'],
                    },
                    gasEstimate: 1000,
                });
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                    enableAccessList: true,
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                await rfqmService.submitToChainAsync({
                    kind: job.kind,
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    calldata: '0xcalldata',
                    expiry: job.expiry,
                    identifier: job.orderHash,
                    submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                    onSubmissionContextStatusUpdate: callback,
                });
                (0, ts_mockito_1.verify)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)()));
                (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).once();
                (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
                (0, chai_1.expect)(writeV2RfqmTransactionSubmissionToDbCalledArgs[0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Presubmit);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[0][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[1][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
            });
            it('should call createAccessListForAsync and should not affect the overall method when RPC errors out', async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const job = new entities_1.RfqmV2JobEntity({
                    affiliateAddress: '',
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS + 600),
                    fee: {
                        amount: '0',
                        token: '',
                        type: 'fixed',
                    },
                    integratorId: '',
                    lastLookResult: true,
                    makerUri: 'http://foo.bar',
                    order: {
                        order: {
                            chainId: '1',
                            expiryAndNonce: protocol_utils_1.OtcOrder.encodeExpiryAndNonce(new utils_1.BigNumber(nowS + 600), new utils_1.BigNumber(1), new utils_1.BigNumber(1)).toString(),
                            maker: '0xmaker',
                            makerAmount: '1000000',
                            makerToken: '0xmakertoken',
                            taker: '0xtaker',
                            takerAmount: '10000000',
                            takerToken: '0xtakertoken',
                            txOrigin: '',
                            verifyingContract: '',
                        },
                        type: types_1.RfqmOrderTypes.Otc,
                    },
                    orderHash: '0xorderhash',
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    updatedAt: new Date(),
                    workerAddress: '',
                });
                const mockTransactionRequest = {};
                const mockTransaction = new entities_1.RfqmV2TransactionSubmissionEntity({
                    from: '0xworkeraddress',
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    orderHash: '0xorderhash',
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xsignedtransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                });
                const mockTransactionReceipt = {
                    to: '0xto',
                    from: '0xfrom',
                    contractAddress: '0xexchangeproxyaddress',
                    transactionIndex: 0,
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logsBloom: '',
                    blockHash: '0xblockhash',
                    transactionHash: '0xsignedtransactionhash',
                    logs: [],
                    blockNumber: 1,
                    confirmations: 3,
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    byzantium: true,
                    type: 2,
                    status: 1,
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionsByOrderHashAsync('0xorderhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([]);
                const updateRfqmJobCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                    updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
                });
                const writeV2RfqmTransactionSubmissionToDbCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.writeV2RfqmTransactionSubmissionToDbAsync((0, ts_mockito_1.anything)())).thenCall(async (transactionArg) => {
                    writeV2RfqmTransactionSubmissionToDbCalledArgs.push(_.cloneDeep(transactionArg));
                    return _.cloneDeep(mockTransaction);
                });
                (0, ts_mockito_1.when)(mockDbUtils.findV2TransactionSubmissionByTransactionHashAsync('0xsignedtransactionhash')).thenResolve(_.cloneDeep(mockTransaction));
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
                (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
                (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                    signedTransaction: 'signedTransaction',
                    transactionHash: '0xsignedtransactionhash',
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
                (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getDecodedRfqOrderFillEventLogFromLogs((0, ts_mockito_1.anything)())).thenReturn({
                    event: '',
                    logIndex: null,
                    transactionIndex: null,
                    transactionHash: '',
                    blockHash: '',
                    address: '',
                    data: '',
                    blockNumber: 0,
                    topics: [],
                    args: {
                        maker: '',
                        makerToken: '',
                        makerTokenFilledAmount: new utils_1.BigNumber(1234),
                        orderHash: '',
                        pool: '',
                        taker: '',
                        takerToken: '',
                        takerTokenFilledAmount: new utils_1.BigNumber(5),
                    },
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).thenReject(new Error('error'));
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                    enableAccessList: true,
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                await rfqmService.submitToChainAsync({
                    kind: job.kind,
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    calldata: '0xcalldata',
                    expiry: job.expiry,
                    identifier: job.orderHash,
                    submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                    onSubmissionContextStatusUpdate: callback,
                });
                (0, ts_mockito_1.verify)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)()));
                (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).once();
                (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
                (0, chai_1.expect)(writeV2RfqmTransactionSubmissionToDbCalledArgs[0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Presubmit);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[0][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[1][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
            });
        });
        // Not all tests from test block 'kind is `rfqm_v2_job`' is included here as most of the tests are similiar.
        // The tests below specifically test if corresponding methods are called for job kind `meta_transaction_job`.
        describe('kind is `meta_transaction_job`', () => {
            it('submits a transaction successfully when there is no previous transaction', async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const jobId = 'jobId';
                const transactionSubmissionId = 'submissionId';
                const job = createMeaTrsanctionJobEntity({
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS + 600),
                    fee: {
                        amount: new utils_1.BigNumber(0),
                        token: '',
                        type: 'fixed',
                    },
                    inputToken: '0xinputToken',
                    inputTokenAmount: new utils_1.BigNumber(10),
                    integratorId: '0xintegrator',
                    metaTransaction: constants_2.MOCK_META_TRANSACTION,
                    metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                    minOutputTokenAmount: new utils_1.BigNumber(10),
                    outputToken: '0xoutputToken',
                    takerAddress: '0xtakerAddress',
                    takerSignature: {
                        signatureType: asset_swapper_1.SignatureType.EthSign,
                        v: 1,
                        r: '',
                        s: '',
                    },
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    workerAddress: '0xworkeraddress',
                }, jobId);
                const mockTransactionRequest = {};
                const mockTransaction = createMetaTransactionSubmissionEntity({
                    from: '0xworkeraddress',
                    metaTransactionJobId: jobId,
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xsignedtransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                }, transactionSubmissionId);
                const mockTransactionReceipt = {
                    to: '0xto',
                    from: '0xfrom',
                    contractAddress: '0xexchangeproxyaddress',
                    transactionIndex: 0,
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logsBloom: '',
                    blockHash: '0xblockhash',
                    transactionHash: '0xsignedtransactionhash',
                    logs: [],
                    blockNumber: 1,
                    confirmations: 3,
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    byzantium: true,
                    type: 2,
                    status: 1,
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([]);
                const updateRfqmJobCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                    updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
                });
                const writeMetaTransactionSubmissionAsyncCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.writeMetaTransactionSubmissionAsync((0, ts_mockito_1.anything)())).thenCall(async (transactionArg) => {
                    writeMetaTransactionSubmissionAsyncCalledArgs.push(_.cloneDeep(transactionArg));
                    return _.cloneDeep(mockTransaction);
                });
                (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByTransactionHashAsync('0xsignedtransactionhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([_.cloneDeep(mockTransaction)]);
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
                (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
                (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                    signedTransaction: 'signedTransaction',
                    transactionHash: '0xsignedtransactionhash',
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
                (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                await rfqmService.submitToChainAsync({
                    kind: job.kind,
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    calldata: '0xcalldata',
                    expiry: job.expiry,
                    identifier: job.id,
                    submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                    onSubmissionContextStatusUpdate: callback,
                });
                (0, ts_mockito_1.verify)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)()));
                // eth_createAccessList should not be called when not enabled
                (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).never();
                (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
                (0, chai_1.expect)(writeMetaTransactionSubmissionAsyncCalledArgs[0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Presubmit);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[0][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[1][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
            });
            it('recovers a PRESUBMIT transaction which actually submitted', async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const jobId = 'jobId';
                const transactionSubmissionId = 'submissionId';
                const job = createMeaTrsanctionJobEntity({
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS + 600),
                    fee: {
                        amount: new utils_1.BigNumber(0),
                        token: '',
                        type: 'fixed',
                    },
                    inputToken: '0xinputToken',
                    inputTokenAmount: new utils_1.BigNumber(10),
                    integratorId: '0xintegrator',
                    metaTransaction: constants_2.MOCK_META_TRANSACTION,
                    metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                    minOutputTokenAmount: new utils_1.BigNumber(10),
                    outputToken: '0xoutputToken',
                    takerAddress: '0xtakerAddress',
                    takerSignature: {
                        signatureType: asset_swapper_1.SignatureType.EthSign,
                        v: 1,
                        r: '',
                        s: '',
                    },
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    workerAddress: '0xworkeraddress',
                }, jobId);
                const mockPresubmitTransaction = createMetaTransactionSubmissionEntity({
                    from: '0xworkeraddress',
                    metaTransactionJobId: jobId,
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    status: types_1.RfqmTransactionSubmissionStatus.Presubmit,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xpresubmittransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                }, transactionSubmissionId);
                const mockTransactionReceipt = {
                    blockHash: '0xblockhash',
                    blockNumber: 1,
                    byzantium: true,
                    confirmations: 3,
                    contractAddress: '0xexchangeproxyaddress',
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    from: '0xworkeraddress',
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logs: [],
                    logsBloom: '',
                    status: 1,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xpresubmittransactionhash',
                    transactionIndex: 0,
                    type: 2,
                };
                const mockTransactionResponse = {
                    chainId: 1,
                    confirmations: 0,
                    data: '',
                    from: '0xworkeraddress',
                    gasLimit: ethers_1.BigNumber.from(1000000),
                    hash: '0xpresubmittransactionhash',
                    nonce: 0,
                    type: 2,
                    value: ethers_1.BigNumber.from(0),
                    wait: (_confirmations) => Promise.resolve(mockTransactionReceipt),
                };
                const mockMinedBlock = {
                    _difficulty: ethers_1.BigNumber.from(2),
                    difficulty: 2,
                    extraData: '',
                    gasLimit: ethers_1.BigNumber.from(1000),
                    gasUsed: ethers_1.BigNumber.from(1000),
                    hash: '0xblockhash',
                    miner: '0xminer',
                    nonce: '0x000',
                    number: 21,
                    parentHash: '0xparentblockhash',
                    timestamp: 12345,
                    transactions: ['0xpresubmittransactionhash'],
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([mockPresubmitTransaction]);
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                // This mock response indicates that the transaction is present in the mempool
                (0, ts_mockito_1.when)(mockBlockchainUtils.getTransactionAsync('0xpresubmittransactionhash')).thenResolve(mockTransactionResponse);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenReject(new Error('estimateGasForAsync called during recovery'));
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xpresubmittransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getBlockAsync('0xblockhash')).thenResolve(mockMinedBlock);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                await rfqmService.submitToChainAsync({
                    kind: job.kind,
                    to: '0xexchangeproxyaddress',
                    from: '0xworkeraddress',
                    calldata: '0xcalldata',
                    expiry: job.expiry,
                    identifier: job.id,
                    submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                    onSubmissionContextStatusUpdate: callback,
                });
                // eth_createAccessList should not be called when not enabled
                (0, ts_mockito_1.verify)(mockBlockchainUtils.createAccessListForAsync((0, ts_mockito_1.anything)())).never();
                // Logic should first check to see if the transaction was actually sent.
                // If it was (and it is being mock so in this test) then the logic first
                // updates the status of the transaction to "Submitted"
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[0][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.Submitted);
                // The logic then enters the watch loop. On the first check, a transaction
                // receipt exists for this transaction and it will be marked "confirmed"
                (0, chai_1.expect)(updateRfqmTransactionSubmissionsCalledArgs[1][0].status).to.equal(types_1.RfqmTransactionSubmissionStatus.SucceededConfirmed);
                (0, chai_1.expect)(job.status).to.equal(types_1.RfqmJobStatus.SucceededConfirmed);
            });
            it('throws exception if there are more than 1 transaction submissions with the same transaction hash', async () => {
                const nowS = Math.round(new Date().getTime() / constants_1.ONE_SECOND_MS);
                const jobId = 'jobId';
                const transactionSubmissionId = 'submissionId';
                const job = createMeaTrsanctionJobEntity({
                    chainId: 1,
                    createdAt: new Date(),
                    expiry: new utils_1.BigNumber(nowS + 600),
                    fee: {
                        amount: new utils_1.BigNumber(0),
                        token: '',
                        type: 'fixed',
                    },
                    inputToken: '0xinputToken',
                    inputTokenAmount: new utils_1.BigNumber(10),
                    integratorId: '0xintegrator',
                    metaTransaction: constants_2.MOCK_META_TRANSACTION,
                    metaTransactionHash: constants_2.MOCK_META_TRANSACTION.getHash(),
                    minOutputTokenAmount: new utils_1.BigNumber(10),
                    outputToken: '0xoutputToken',
                    takerAddress: '0xtakerAddress',
                    takerSignature: {
                        signatureType: asset_swapper_1.SignatureType.EthSign,
                        v: 1,
                        r: '',
                        s: '',
                    },
                    status: types_1.RfqmJobStatus.PendingLastLookAccepted,
                    workerAddress: '0xworkeraddress',
                }, jobId);
                const mockTransactionRequest = {};
                const mockTransaction = createMetaTransactionSubmissionEntity({
                    from: '0xworkeraddress',
                    metaTransactionJobId: jobId,
                    maxFeePerGas: new utils_1.BigNumber(100000),
                    maxPriorityFeePerGas: new utils_1.BigNumber(100),
                    nonce: 0,
                    to: '0xexchangeproxyaddress',
                    transactionHash: '0xsignedtransactionhash',
                    type: types_1.RfqmTransactionSubmissionType.Trade,
                }, transactionSubmissionId);
                const mockTransactionReceipt = {
                    to: '0xto',
                    from: '0xfrom',
                    contractAddress: '0xexchangeproxyaddress',
                    transactionIndex: 0,
                    gasUsed: ethers_1.BigNumber.from(10000),
                    logsBloom: '',
                    blockHash: '0xblockhash',
                    transactionHash: '0xsignedtransactionhash',
                    logs: [],
                    blockNumber: 1,
                    confirmations: 3,
                    cumulativeGasUsed: ethers_1.BigNumber.from(1000),
                    effectiveGasPrice: ethers_1.BigNumber.from(1000),
                    byzantium: true,
                    type: 2,
                    status: 1,
                };
                const mockNonce = 0;
                const gasStationAttendantMock = (0, ts_mockito_1.mock)(GasStationAttendantEthereum_1.GasStationAttendantEthereum);
                (0, ts_mockito_1.when)(gasStationAttendantMock.getExpectedTransactionGasRateAsync()).thenResolve(new utils_1.BigNumber(10).shiftedBy(constants_1.GWEI_DECIMALS));
                const mockDbUtils = (0, ts_mockito_1.mock)(rfqm_db_utils_1.RfqmDbUtils);
                (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByJobIdAsync(jobId, types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([]);
                const updateRfqmJobCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmJobAsync((0, ts_mockito_1.anything)())).thenCall(async (jobArg) => {
                    updateRfqmJobCalledArgs.push(_.cloneDeep(jobArg));
                });
                const writeMetaTransactionSubmissionAsyncCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.writeMetaTransactionSubmissionAsync((0, ts_mockito_1.anything)())).thenCall(async (transactionArg) => {
                    writeMetaTransactionSubmissionAsyncCalledArgs.push(_.cloneDeep(transactionArg));
                    return _.cloneDeep(mockTransaction);
                });
                (0, ts_mockito_1.when)(mockDbUtils.findMetaTransactionSubmissionsByTransactionHashAsync('0xsignedtransactionhash', types_1.RfqmTransactionSubmissionType.Trade)).thenResolve([_.cloneDeep(mockTransaction), _.cloneDeep(mockTransaction)]);
                const updateRfqmTransactionSubmissionsCalledArgs = [];
                (0, ts_mockito_1.when)(mockDbUtils.updateRfqmTransactionSubmissionsAsync((0, ts_mockito_1.anything)())).thenCall(async (tranactionArg) => {
                    updateRfqmTransactionSubmissionsCalledArgs.push(_.cloneDeep(tranactionArg));
                });
                const mockBlockchainUtils = (0, ts_mockito_1.mock)(rfq_blockchain_utils_1.RfqBlockchainUtils);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getNonceAsync('0xworkeraddress')).thenResolve(mockNonce);
                (0, ts_mockito_1.when)(mockBlockchainUtils.estimateGasForAsync((0, ts_mockito_1.anything)())).thenResolve(100);
                (0, ts_mockito_1.when)(mockBlockchainUtils.transformTxDataToTransactionRequest((0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)(), (0, ts_mockito_1.anything)())).thenReturn(mockTransactionRequest);
                (0, ts_mockito_1.when)(mockBlockchainUtils.signTransactionAsync((0, ts_mockito_1.anything)())).thenResolve({
                    signedTransaction: 'signedTransaction',
                    transactionHash: '0xsignedtransactionhash',
                });
                (0, ts_mockito_1.when)(mockBlockchainUtils.getExchangeProxyAddress()).thenReturn('0xexchangeproxyaddress');
                (0, ts_mockito_1.when)(mockBlockchainUtils.submitSignedTransactionAsync((0, ts_mockito_1.anything)())).thenResolve('0xsignedtransactionhash');
                (0, ts_mockito_1.when)(mockBlockchainUtils.getReceiptsAsync((0, ts_mockito_1.deepEqual)(['0xsignedtransactionhash']))).thenResolve([
                    mockTransactionReceipt,
                ]);
                (0, ts_mockito_1.when)(mockBlockchainUtils.getCurrentBlockAsync()).thenResolve(4);
                const rfqmService = buildWorkerServiceForUnitTest({
                    dbUtils: (0, ts_mockito_1.instance)(mockDbUtils),
                    gasStationAttendant: (0, ts_mockito_1.instance)(gasStationAttendantMock),
                    rfqBlockchainUtils: (0, ts_mockito_1.instance)(mockBlockchainUtils),
                });
                const callback = async (newSubmissionContextStatus, oldSubmissionContextStatus) => {
                    if (newSubmissionContextStatus !== oldSubmissionContextStatus) {
                        const newJobStatus = SubmissionContext_1.SubmissionContext.tradeSubmissionContextStatusToJobStatus(newSubmissionContextStatus);
                        job.status = newJobStatus;
                        await mockDbUtils.updateRfqmJobAsync(job);
                    }
                };
                try {
                    await rfqmService.submitToChainAsync({
                        kind: job.kind,
                        to: '0xexchangeproxyaddress',
                        from: '0xworkeraddress',
                        calldata: '0xcalldata',
                        expiry: job.expiry,
                        identifier: job.id,
                        submissionType: types_1.RfqmTransactionSubmissionType.Trade,
                        onSubmissionContextStatusUpdate: callback,
                    });
                    chai_1.expect.fail();
                }
                catch (e) {
                    (0, chai_1.expect)(e.message).to.contain('Transaction hash have been submitted not exactly once');
                }
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3Qvc2VydmljZXMvV29ya2VyU2VydmljZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBS0EscURBQWtFO0FBQ2xFLCtEQUE2RTtBQUM3RSx1REFBOEM7QUFDOUMscUNBQXNDO0FBQ3RDLCtCQUE4QjtBQUM5QixtQ0FBaUU7QUFDakUsNEJBQTRCO0FBQzVCLCtDQUF3QztBQUN4QywyQ0FBNkY7QUFFN0Ysd0RBQXNGO0FBQ3RGLGlEQU80QjtBQUU1Qix3R0FHNEQ7QUFDNUQsb0RBTWtDO0FBQ2xDLDZDQUEwQztBQUMxQyx3R0FBaUc7QUFDakcsb0VBQWlFO0FBQ2pFLCtEQUEyRDtBQUUzRCw2RkFBMEY7QUFDMUYsNkVBQXdFO0FBQ3hFLGlFQUE0RDtBQUM1RCwrRUFBMEU7QUFDMUUseUVBQW9FO0FBQ3BFLHFFQUErRDtBQUMvRCx5RUFBc0U7QUFDdEUsNENBSXNCO0FBRXRCLDZEQUE2RDtBQUM3RCxtRUFBbUU7QUFDbkUsTUFBTSxhQUFhLEdBQUcsSUFBSSxpQkFBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDdEQsTUFBTSw0QkFBNEIsR0FBRyw0Q0FBNEMsQ0FBQztBQUNsRixNQUFNLGNBQWMsR0FBRyxJQUFJLGlCQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDMUMsTUFBTSxXQUFXLEdBQUcsb0JBQW9CLENBQUM7QUFDekMsTUFBTSwyQ0FBMkMsR0FBRyxFQUFFLENBQUM7QUFDdkQsTUFBTSx1QkFBdUIsR0FBRyxJQUFJLGlCQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLHdCQUFZLENBQUMsQ0FBQztBQUN6RSxJQUFJLFNBQXNCLENBQUM7QUFFM0IsTUFBTSw2QkFBNkIsR0FBRyxDQUNsQyxZQVdJLEVBQUUsRUFDTyxFQUFFO0lBQ2YsTUFBTSxpQkFBaUIsR0FBRyxJQUFBLHdEQUFtQyxFQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLE1BQU0sa0JBQWtCLEdBQUcsSUFBQSxpQkFBSSxFQUFD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QUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyx1REFBdUQsQ0FBQyxDQUFDO2lCQUN6RjtZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZHdhbHNoL2NvZGUtbG9jYWwvMHgtcmZxLWFwaS90ZXN0L3NlcnZpY2VzL1dvcmtlclNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0c2xpbnQ6ZGlzYWJsZTpjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4vLyB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eVxyXG4vLyB0c2xpbnQ6ZGlzYWJsZTptYXgtZmlsZS1saW5lLWNvdW50XHJcblxyXG5pbXBvcnQgeyBwaW5vIH0gZnJvbSAnQDB4L2FwaS11dGlscyc7XHJcbmltcG9ydCB7IFF1b3RlUmVxdWVzdG9yLCBTaWduYXR1cmVUeXBlIH0gZnJvbSAnQDB4L2Fzc2V0LXN3YXBwZXInO1xyXG5pbXBvcnQgeyBnZXRDb250cmFjdEFkZHJlc3Nlc0ZvckNoYWluT3JUaHJvdyB9IGZyb20gJ0AweC9jb250cmFjdC1hZGRyZXNzZXMnO1xyXG5pbXBvcnQgeyBPdGNPcmRlciB9IGZyb20gJ0AweC9wcm90b2NvbC11dGlscyc7XHJcbmltcG9ydCB7IEJpZ051bWJlciB9IGZyb20gJ0AweC91dGlscyc7XHJcbmltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknO1xyXG5pbXBvcnQgeyBCaWdOdW1iZXIgYXMgRXRoZXJzQmlnTnVtYmVyLCBwcm92aWRlcnMgfSBmcm9tICdldGhlcnMnO1xyXG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XHJcbmltcG9ydCB7IFByb2R1Y2VyIH0gZnJvbSAnc3FzLXByb2R1Y2VyJztcclxuaW1wb3J0IHsgYW55dGhpbmcsIGNhcHR1cmUsIGRlZXBFcXVhbCwgaW5zdGFuY2UsIG1vY2ssIHNweSwgdmVyaWZ5LCB3aGVuIH0gZnJvbSAndHMtbW9ja2l0byc7XHJcblxyXG5pbXBvcnQgeyBFVEhfREVDSU1BTFMsIEdXRUlfREVDSU1BTFMsIE9ORV9TRUNPTkRfTVMgfSBmcm9tICcuLi8uLi9zcmMvY29yZS9jb25zdGFudHMnO1xyXG5pbXBvcnQge1xyXG4gICAgTWV0YVRyYW5zYWN0aW9uSm9iRW50aXR5LFxyXG4gICAgUmZxbUpvYkVudGl0eSxcclxuICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHksXHJcbiAgICBSZnFtVjJKb2JFbnRpdHksXHJcbiAgICBSZnFtVjJRdW90ZUVudGl0eSxcclxuICAgIFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSxcclxufSBmcm9tICcuLi8uLi9zcmMvZW50aXRpZXMnO1xyXG5pbXBvcnQgeyBNZXRhVHJhbnNhY3Rpb25Kb2JDb25zdHJ1Y3Rvck9wdHMgfSBmcm9tICcuLi8uLi9zcmMvZW50aXRpZXMvTWV0YVRyYW5zYWN0aW9uSm9iRW50aXR5JztcclxuaW1wb3J0IHtcclxuICAgIE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHksXHJcbiAgICBNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5Q29uc3RydWN0b3JPcHRzLFxyXG59IGZyb20gJy4uLy4uL3NyYy9lbnRpdGllcy9NZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5JztcclxuaW1wb3J0IHtcclxuICAgIFJmcW1Kb2JTdGF0dXMsXHJcbiAgICBSZnFtT3JkZXJUeXBlcyxcclxuICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMsXHJcbiAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZSxcclxuICAgIFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG59IGZyb20gJy4uLy4uL3NyYy9lbnRpdGllcy90eXBlcyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uLy4uL3NyYy9sb2dnZXInO1xyXG5pbXBvcnQgeyBSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvcmZxX21ha2VyX2JhbGFuY2VfY2FjaGVfc2VydmljZSc7XHJcbmltcG9ydCB7IFdvcmtlclNlcnZpY2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvV29ya2VyU2VydmljZSc7XHJcbmltcG9ydCB7IENhY2hlQ2xpZW50IH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL2NhY2hlX2NsaWVudCc7XHJcbmltcG9ydCB7IEdhc1N0YXRpb25BdHRlbmRhbnQgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvR2FzU3RhdGlvbkF0dGVuZGFudCc7XHJcbmltcG9ydCB7IEdhc1N0YXRpb25BdHRlbmRhbnRFdGhlcmV1bSB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9HYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0nO1xyXG5pbXBvcnQgeyBRdW90ZVNlcnZlckNsaWVudCB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9xdW90ZV9zZXJ2ZXJfY2xpZW50JztcclxuaW1wb3J0IHsgUmZxbURiVXRpbHMgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvcmZxbV9kYl91dGlscyc7XHJcbmltcG9ydCB7IFJmcUJsb2NrY2hhaW5VdGlscyB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9yZnFfYmxvY2tjaGFpbl91dGlscyc7XHJcbmltcG9ydCB7IFJmcU1ha2VyTWFuYWdlciB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9yZnFfbWFrZXJfbWFuYWdlcic7XHJcbmltcG9ydCB7IHBhZFNpZ25hdHVyZSB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9zaWduYXR1cmVfdXRpbHMnO1xyXG5pbXBvcnQgeyBTdWJtaXNzaW9uQ29udGV4dCB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9TdWJtaXNzaW9uQ29udGV4dCc7XHJcbmltcG9ydCB7XHJcbiAgICBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTCxcclxuICAgIE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0NBTExEQVRBLFxyXG4gICAgTU9DS19NRVRBX1RSQU5TQUNUSU9OLFxyXG59IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcblxyXG4vLyAkZXNsaW50LWZpeC1tZSBodHRwczovL2dpdGh1Yi5jb20vcmhpbm9kYXZpZC9lc2xpbnQtZml4LW1lXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbG9zcy1vZi1wcmVjaXNpb25cclxuY29uc3QgTkVWRVJfRVhQSVJFUyA9IG5ldyBCaWdOdW1iZXIoOTk5OTk5OTk5OTk5OTk5OSk7XHJcbmNvbnN0IE1PQ0tfV09SS0VSX1JFR0lTVFJZX0FERFJFU1MgPSAnMHgxMDIzMzMxYTQ2OWM2MzkxNzMwZmYxRTI3NDk0MjJDRTg4NzNFQzM4JztcclxuY29uc3QgTU9DS19HQVNfUFJJQ0UgPSBuZXcgQmlnTnVtYmVyKDEwMCk7XHJcbmNvbnN0IE1PQ0tfTU1fVVJJID0gJ2h0dHBzOi8vbW0tYWRkcmVzcyc7XHJcbmNvbnN0IFRFU1RfUkZRTV9UUkFOU0FDVElPTl9XQVRDSEVSX1NMRUVQX1RJTUVfTVMgPSA1MDtcclxuY29uc3QgV09SS0VSX0ZVTExfQkFMQU5DRV9XRUkgPSBuZXcgQmlnTnVtYmVyKDEpLnNoaWZ0ZWRCeShFVEhfREVDSU1BTFMpO1xyXG5sZXQgbG9nZ2VyU3B5OiBwaW5vLkxvZ2dlcjtcclxuXHJcbmNvbnN0IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0ID0gKFxyXG4gICAgb3ZlcnJpZGVzOiB7XHJcbiAgICAgICAgY2FjaGVDbGllbnQ/OiBDYWNoZUNsaWVudDtcclxuICAgICAgICBkYlV0aWxzPzogUmZxbURiVXRpbHM7XHJcbiAgICAgICAgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlPzogUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlO1xyXG4gICAgICAgIHJmcU1ha2VyTWFuYWdlcj86IFJmcU1ha2VyTWFuYWdlcjtcclxuICAgICAgICBnYXNTdGF0aW9uQXR0ZW5kYW50PzogR2FzU3RhdGlvbkF0dGVuZGFudDtcclxuICAgICAgICBxdW90ZVNlcnZlckNsaWVudD86IFF1b3RlU2VydmVyQ2xpZW50O1xyXG4gICAgICAgIHJmcUJsb2NrY2hhaW5VdGlscz86IFJmcUJsb2NrY2hhaW5VdGlscztcclxuICAgICAgICBpbml0aWFsTWF4UHJpb3JpdHlGZWVQZXJHYXNHd2VpPzogbnVtYmVyO1xyXG4gICAgICAgIG1heEZlZVBlckdhc0d3ZWk/OiBudW1iZXI7XHJcbiAgICAgICAgZW5hYmxlQWNjZXNzTGlzdD86IGJvb2xlYW47XHJcbiAgICB9ID0ge30sXHJcbik6IFdvcmtlclNlcnZpY2UgPT4ge1xyXG4gICAgY29uc3QgY29udHJhY3RBZGRyZXNzZXMgPSBnZXRDb250cmFjdEFkZHJlc3Nlc0ZvckNoYWluT3JUaHJvdygxKTtcclxuICAgIGNvbnN0IHF1b3RlUmVxdWVzdG9yTW9jayA9IG1vY2soUXVvdGVSZXF1ZXN0b3IpO1xyXG4gICAgd2hlbihcclxuICAgICAgICBxdW90ZVJlcXVlc3Rvck1vY2sucmVxdWVzdFJmcW1JbmRpY2F0aXZlUXVvdGVzQXN5bmMoXHJcbiAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgKSxcclxuICAgICkudGhlblJlc29sdmUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWFrZXJUb2tlbjogY29udHJhY3RBZGRyZXNzZXMuenJ4VG9rZW4sXHJcbiAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMSksXHJcbiAgICAgICAgICAgIHRha2VyVG9rZW46IGNvbnRyYWN0QWRkcmVzc2VzLmV0aGVyVG9rZW4sXHJcbiAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgIGV4cGlyeTogTkVWRVJfRVhQSVJFUyxcclxuICAgICAgICAgICAgbWFrZXJVcmk6IE1PQ0tfTU1fVVJJLFxyXG4gICAgICAgIH0sXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCBnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayA9IG1vY2soR2FzU3RhdGlvbkF0dGVuZGFudEV0aGVyZXVtKTtcclxuICAgIHdoZW4oZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2suZ2V0RXhwZWN0ZWRUcmFuc2FjdGlvbkdhc1JhdGVBc3luYygpKS50aGVuUmVzb2x2ZShNT0NLX0dBU19QUklDRSk7XHJcbiAgICBjb25zdCBnYXNTdGF0aW9uQXR0ZW5kYW50SW5zdGFuY2UgPSBpbnN0YW5jZShnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayk7XHJcblxyXG4gICAgY29uc3QgcmZxQmxvY2tjaGFpblV0aWxzTW9jayA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgIHdoZW4ocmZxQmxvY2tjaGFpblV0aWxzTW9jay5nZXRBY2NvdW50QmFsYW5jZUFzeW5jKE1PQ0tfV09SS0VSX1JFR0lTVFJZX0FERFJFU1MpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICBXT1JLRVJfRlVMTF9CQUxBTkNFX1dFSSxcclxuICAgICk7XHJcbiAgICBjb25zdCBzcXNNb2NrID0gbW9jayhQcm9kdWNlcik7XHJcbiAgICB3aGVuKHNxc01vY2sucXVldWVTaXplKCkpLnRoZW5SZXNvbHZlKDApO1xyXG4gICAgY29uc3QgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcblxyXG4gICAgY29uc3QgY2FjaGVDbGllbnRNb2NrID0gbW9jayhDYWNoZUNsaWVudCk7XHJcbiAgICBjb25zdCBkZWZhdWx0RGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgIGNvbnN0IHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2sgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICBjb25zdCByZnFNYWtlck1hbmFnZXJNb2NrID0gbW9jayhSZnFNYWtlck1hbmFnZXIpO1xyXG5cclxuICAgIHJldHVybiBuZXcgV29ya2VyU2VydmljZShcclxuICAgICAgICAxLFxyXG4gICAgICAgIG92ZXJyaWRlcy5nYXNTdGF0aW9uQXR0ZW5kYW50IHx8IGdhc1N0YXRpb25BdHRlbmRhbnRJbnN0YW5jZSxcclxuICAgICAgICBNT0NLX1dPUktFUl9SRUdJU1RSWV9BRERSRVNTLFxyXG4gICAgICAgIG92ZXJyaWRlcy5yZnFCbG9ja2NoYWluVXRpbHMgfHwgaW5zdGFuY2UocmZxQmxvY2tjaGFpblV0aWxzTW9jayksXHJcbiAgICAgICAgb3ZlcnJpZGVzLmRiVXRpbHMgfHwgaW5zdGFuY2UoZGVmYXVsdERiVXRpbHNNb2NrKSxcclxuICAgICAgICBvdmVycmlkZXMucXVvdGVTZXJ2ZXJDbGllbnQgfHwgcXVvdGVTZXJ2ZXJDbGllbnRNb2NrLFxyXG4gICAgICAgIFRFU1RfUkZRTV9UUkFOU0FDVElPTl9XQVRDSEVSX1NMRUVQX1RJTUVfTVMsXHJcbiAgICAgICAgb3ZlcnJpZGVzLmNhY2hlQ2xpZW50IHx8IGNhY2hlQ2xpZW50TW9jayxcclxuICAgICAgICBvdmVycmlkZXMucmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlIHx8IGluc3RhbmNlKHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZU1vY2spLFxyXG4gICAgICAgIG92ZXJyaWRlcy5yZnFNYWtlck1hbmFnZXIgfHwgcmZxTWFrZXJNYW5hZ2VyTW9jayxcclxuICAgICAgICBvdmVycmlkZXMuaW5pdGlhbE1heFByaW9yaXR5RmVlUGVyR2FzR3dlaSB8fCAyLFxyXG4gICAgICAgIG92ZXJyaWRlcy5tYXhGZWVQZXJHYXNHd2VpIHx8IDEyOCxcclxuICAgICAgICBvdmVycmlkZXMuZW5hYmxlQWNjZXNzTGlzdCxcclxuICAgICk7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVNZWFUcnNhbmN0aW9uSm9iRW50aXR5ID0gKFxyXG4gICAgb3B0czogTWV0YVRyYW5zYWN0aW9uSm9iQ29uc3RydWN0b3JPcHRzLFxyXG4gICAgaWQ6IHN0cmluZyxcclxuKTogTWV0YVRyYW5zYWN0aW9uSm9iRW50aXR5ID0+IHtcclxuICAgIGNvbnN0IGpvYiA9IG5ldyBNZXRhVHJhbnNhY3Rpb25Kb2JFbnRpdHkob3B0cyk7XHJcbiAgICBqb2IuaWQgPSBpZDtcclxuICAgIHJldHVybiBqb2I7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5ID0gKFxyXG4gICAgb3B0czogTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eUNvbnN0cnVjdG9yT3B0cyxcclxuICAgIGlkOiBzdHJpbmcsXHJcbik6IE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkgPT4ge1xyXG4gICAgY29uc3Qgc3VibWlzc2lvbiA9IG5ldyBNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KG9wdHMpO1xyXG4gICAgc3VibWlzc2lvbi5pZCA9IGlkO1xyXG4gICAgcmV0dXJuIHN1Ym1pc3Npb247XHJcbn07XHJcblxyXG5jb25zdCBmYWtlQ2xvY2tNcyA9IDE2Mzc3MjI4OTgwMDA7XHJcbmNvbnN0IGZha2VPbmVNaW51dGVBZ29TID0gZmFrZUNsb2NrTXMgLyBPTkVfU0VDT05EX01TIC0gNjA7XHJcbmNvbnN0IGZha2VGaXZlTWludXRlc0xhdGVyID0gZmFrZUNsb2NrTXMgLyBPTkVfU0VDT05EX01TICsgMzAwO1xyXG5cclxuY29uc3QgbWFrZXIgPSAnMHhiYjAwNDA5MGQyNjg0NWI2NzJmMTdjNmRhNGI3ZDE2MmRmM2JmYzVlJztcclxuY29uc3Qgb3JkZXJIYXNoID0gJzB4MTEyMTYwZmIwOTMzZWNkZTcyMGY2M2I1MGIzMDNjZTY0ZTUyZGVkNzAyYmVmNzhiOWMyMDM2MWYzNjUyYTQ2Mic7XHJcblxyXG4vLyBUaGlzIHNpZyBhY3R1YWxseSBiZWxvbmdzIHRvIHRoZSBtYWtlciBhYm92ZVxyXG5jb25zdCB2YWxpZEVJUDcxMlNpZyA9IHtcclxuICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRUlQNzEyLFxyXG4gICAgdjogMjgsXHJcbiAgICByOiAnMHhkYzE1OGY3YjUzYjk0MDg2M2JjN2IwMDE1NTJhOTAyODJlNTEwMzNmMjliNzNkNDRhMjcwMWJkMTZmYWExOWQyJyxcclxuICAgIHM6ICcweDU1ZjZjNTQ3MGU0MWIzOWE1ZGRlYjYzYzIyZjhiYTFkMzQ3NDhmOTMyNjU3MTViOWRjNGEwZjEwMTM4OTg1YTYnLFxyXG59O1xyXG5cclxuLy8gVGhpcyBpcyBhIHJlYWwgc2lnbmF0dXJlIHRoYXQgaGFkIGEgbWlzc2luZyBieXRlXHJcbmNvbnN0IG1pc3NpbmdCeXRlU2lnID0ge1xyXG4gICAgcjogJzB4NTY4YjMxMDc2ZTFjNjU5NTRhZGIxYmNjYzcyMzcxOGIzNDYwZjFiNjk5Y2UxMjUyZjhhODNiZGEwZDUyMTAwNScsXHJcbiAgICBzOiAnMHgwMzA3Y2M3ZjQxNjFkZjgxMmY3ZTVhNjUxYjIzZGJkMzM5ODFjMDQxMGRmMGRkODIwYTUyZjYxYmU3YTVhYicsXHJcbiAgICB2OiAyOCxcclxuICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxufTtcclxuXHJcbmplc3Quc2V0VGltZW91dChPTkVfU0VDT05EX01TICogMTIwKTtcclxuXHJcbmRlc2NyaWJlKCdXb3JrZXJTZXJ2aWNlJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgbG9nZ2VyU3B5ID0gc3B5KGxvZ2dlcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnd29ya2VyQmVmb3JlTG9naWNBc3luYycsICgpID0+IHtcclxuICAgICAgICBpdCgnY2FsbHMgYHByb2Nlc3NKb2JBc3luY2Agd2l0aCB0aGUgY29ycmVjdCBhcmd1bWVudHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmtlckluZGV4ID0gMDtcclxuICAgICAgICAgICAgY29uc3Qgd29ya2VyQWRkcmVzcyA9IE1PQ0tfV09SS0VSX1JFR0lTVFJZX0FERFJFU1M7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gJ2pvYklkJztcclxuICAgICAgICAgICAgY29uc3QgbWV0YVRyYW5zYWN0aW9uSm9iID0gY3JlYXRlTWVhVHJzYW5jdGlvbkpvYkVudGl0eShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW46ICcweGlucHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJzB4aW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSGFzaDogTU9DS19NRVRBX1RSQU5TQUNUSU9OLmdldEhhc2goKSxcclxuICAgICAgICAgICAgICAgICAgICBtaW5PdXRwdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW46ICcweG91dHB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyQWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGpvYklkLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCByZnFtVjJKb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2sgPSBtb2NrKEdhc1N0YXRpb25BdHRlbmRhbnRFdGhlcmV1bSk7XHJcbiAgICAgICAgICAgIHdoZW4oZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2suZ2V0RXhwZWN0ZWRUcmFuc2FjdGlvbkdhc1JhdGVBc3luYygpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTApLnNoaWZ0ZWRCeShHV0VJX0RFQ0lNQUxTKSxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrY2hhaW5VdGlsc01vY2sgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oYmxvY2tjaGFpblV0aWxzTW9jay5nZXRBY2NvdW50QmFsYW5jZUFzeW5jKHdvcmtlckFkZHJlc3MpKS50aGVuUmVzb2x2ZShXT1JLRVJfRlVMTF9CQUxBTkNFX1dFSSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMlVucmVzb2x2ZWRKb2JzQXN5bmMod29ya2VyQWRkcmVzcywgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtyZnFtVjJKb2JdKTtcclxuICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVW5yZXNvbHZlZE1ldGFUcmFuc2FjdGlvbkpvYnNBc3luYyh3b3JrZXJBZGRyZXNzLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSm9iLFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShibG9ja2NoYWluVXRpbHNNb2NrKSxcclxuICAgICAgICAgICAgICAgIGdhc1N0YXRpb25BdHRlbmRhbnQ6IGluc3RhbmNlKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrKSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwaWVkUmZxbVNlcnZpY2UgPSBzcHkocmZxbVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKHNwaWVkUmZxbVNlcnZpY2UucHJvY2Vzc0pvYkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2Uud29ya2VyQmVmb3JlTG9naWNBc3luYyh3b3JrZXJJbmRleCwgd29ya2VyQWRkcmVzcyk7XHJcbiAgICAgICAgICAgIHZlcmlmeShzcGllZFJmcW1TZXJ2aWNlLnByb2Nlc3NKb2JBc3luYyhvcmRlckhhc2gsIHdvcmtlckFkZHJlc3MsICdyZnFtX3YyX2pvYicpKS5vbmNlKCk7XHJcbiAgICAgICAgICAgIHZlcmlmeShzcGllZFJmcW1TZXJ2aWNlLnByb2Nlc3NKb2JBc3luYyhqb2JJZCwgd29ya2VyQWRkcmVzcywgJ21ldGFfdHJhbnNhY3Rpb25fam9iJykpLm9uY2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdwcm9jZXNzSm9iQXN5bmMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ2ZhaWxzIGlmIG5vIHJmcW0gdjIgam9iIGlzIGZvdW5kJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gYHVuZGVmaW5lZGAgZm9yIHYxIGFuZCB2MiBqb2IgZm9yIG9yZGVyaGFzaFxyXG4gICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRWMkpvYkJ5T3JkZXJIYXNoQXN5bmMoJzB4b3JkZXJoYXNoJykpLnRoZW5SZXNvbHZlKG51bGwpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByb2Nlc3NKb2JBc3luYygnMHhvcmRlcmhhc2gnLCAnMHh3b3JrZXJhZGRyZXNzJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjYXB0dXJlKGxvZ2dlclNweS5lcnJvcikubGFzdCgpWzBdKS50by5pbmNsdWRlKHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ05vIGpvYiBmb3VuZCBmb3IgaWRlbnRpZmllcicsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnZmFpbHMgaWYgYSB3b3JrZXIgZW5kcyB1cCB3aXRoIGEgam9iIGFzc2lnbmVkIHRvIGEgZGlmZmVyZW50IHdvcmtlciBmb3IgYSByZnFtIHYyIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGJVdGlsc01vY2sgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kVjJKb2JCeU9yZGVySGFzaEFzeW5jKCcweG9yZGVyaGFzaCcpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgIG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlT25lTWludXRlQWdvUyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihmYWtlT25lTWludXRlQWdvUy50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJzB4d3Jvbmd3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByb2Nlc3NKb2JBc3luYygnMHhvcmRlcmhhc2gnLCAnMHh3b3JrZXJhZGRyZXNzJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjYXB0dXJlKGxvZ2dlclNweS5lcnJvcikubGFzdCgpWzBdKS50by5pbmNsdWRlKHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ1dvcmtlciB3YXMgc2VudCBhIGpvYiBjbGFpbWVkIGJ5IGEgZGlmZmVyZW50IHdvcmtlcicsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnZmFpbHMgaWYgbm8gbWV0YS10cmFuc2FjdGlvbiBqb2IgaXMgZm91bmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiVXRpbHNNb2NrID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gJ2pvYklkJztcclxuICAgICAgICAgICAgd2hlbihkYlV0aWxzTW9jay5maW5kTWV0YVRyYW5zYWN0aW9uSm9iQnlJZEFzeW5jKGpvYklkKSkudGhlblJlc29sdmUobnVsbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHsgZGJVdGlsczogaW5zdGFuY2UoZGJVdGlsc01vY2spIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UucHJvY2Vzc0pvYkFzeW5jKGpvYklkLCAnMHh3b3JrZXJhZGRyZXNzJywgJ21ldGFfdHJhbnNhY3Rpb25fam9iJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjYXB0dXJlKGxvZ2dlclNweS5lcnJvcikubGFzdCgpWzBdKS50by5pbmNsdWRlKHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ05vIGpvYiBmb3VuZCBmb3IgaWRlbnRpZmllcicsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnZmFpbHMgaWYgYSB3b3JrZXIgZW5kcyB1cCB3aXRoIGEgam9iIGFzc2lnbmVkIHRvIGEgZGlmZmVyZW50IHdvcmtlciBmb3IgYSBtZXRhLXRyYW5zYWN0aW9uIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iSWQgPSAnam9iSWQnO1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBjcmVhdGVNZWFUcnNhbmN0aW9uSm9iRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbjogJ2lucHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJzB4aW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSGFzaDogTU9DS19NRVRBX1RSQU5TQUNUSU9OLmdldEhhc2goKSxcclxuICAgICAgICAgICAgICAgICAgICBtaW5PdXRwdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW46ICcweG91dHB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyQWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdyb25nd29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWw6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgam9iSWQsXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYlV0aWxzTW9jayA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKGRiVXRpbHNNb2NrLmZpbmRNZXRhVHJhbnNhY3Rpb25Kb2JCeUlkQXN5bmMoam9iSWQpKS50aGVuUmVzb2x2ZShqb2IpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7IGRiVXRpbHM6IGluc3RhbmNlKGRiVXRpbHNNb2NrKSB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByb2Nlc3NKb2JBc3luYyhqb2JJZCwgJzB4d29ya2VyYWRkcmVzcycsICdtZXRhX3RyYW5zYWN0aW9uX2pvYicpO1xyXG4gICAgICAgICAgICBleHBlY3QoY2FwdHVyZShsb2dnZXJTcHkuZXJyb3IpLmxhc3QoKVswXSkudG8uaW5jbHVkZSh7XHJcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICdXb3JrZXIgd2FzIHNlbnQgYSBqb2IgY2xhaW1lZCBieSBhIGRpZmZlcmVudCB3b3JrZXInLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdwcm9jZXNzQXBwcm92YWxBbmRUcmFkZUFzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCd0aHJvd3MgaWYgbm9uLWFwcHJvdmFsIGpvYiBpcyBzdXBwbGllZCB0byB0aGUgbWV0aG9kIGZvciBhIHJmcW0gdjIgam9iJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KCk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UucHJvY2Vzc0FwcHJvdmFsQW5kVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJ05vbi1hcHByb3ZhbCBqb2Igc2hvdWxkIG5vdCBiZSBwcm9jZXNzZWQgYnkgYHByb2Nlc3NBcHByb3ZhbEFuZFRyYWRlQXN5bmNgJyxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBub3QgcHJvY2VlZCB0byB0cmFkZSB0cmFuc2FjdGlvbiBpZiB0aGUgc3RhdHVzIG9mIGFwcHJvdmFsIHRyYW5zYWN0aW9uIGlzIG5vdCBgU3VjY2VlZGVkQ29uZmlybWVkYCBmb3IgYSByZnFtIHYyIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgbm93UyA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyBPTkVfU0VDT05EX01TKTtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIobm93UyArIDEwKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihub3dTICsgMTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgYXBwcm92YWw6IE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAgYXBwcm92YWxTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUHJlc3VibWl0VHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoMTIzMyksXHJcbiAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvblJlY2VpcHQ6IHByb3ZpZGVycy5UcmFuc2FjdGlvblJlY2VpcHQgPSB7XHJcbiAgICAgICAgICAgICAgICBibG9ja0hhc2g6ICcweGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMSxcclxuICAgICAgICAgICAgICAgIGJ5emFudGl1bTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbnM6IDMsXHJcbiAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGVmZmVjdGl2ZUdhc1ByaWNlOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgbG9nczogW10sXHJcbiAgICAgICAgICAgICAgICBsb2dzQmxvb206ICcnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxyXG4gICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4cHJlc3VibWl0dHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAyLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrTWluZWRCbG9jazogcHJvdmlkZXJzLkJsb2NrID0ge1xyXG4gICAgICAgICAgICAgICAgX2RpZmZpY3VsdHk6IEV0aGVyc0JpZ051bWJlci5mcm9tKDIpLFxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eTogMixcclxuICAgICAgICAgICAgICAgIGV4dHJhRGF0YTogJycsXHJcbiAgICAgICAgICAgICAgICBnYXNMaW1pdDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBnYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGhhc2g6ICcweGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICBtaW5lcjogJzB4bWluZXInLFxyXG4gICAgICAgICAgICAgICAgbm9uY2U6ICcweDAwMCcsXHJcbiAgICAgICAgICAgICAgICBudW1iZXI6IDIxLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50SGFzaDogJzB4cGFyZW50YmxvY2toYXNoJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogMTIzNDUsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnM6IFsnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnXSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja05vbmNlID0gMDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrID0gbW9jayhHYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0pO1xyXG4gICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwKS5zaGlmdGVkQnkoR1dFSV9ERUNJTUFMUyksXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAvLyB3aGVuKG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbbW9ja1ByZXN1Ym1pdFRyYW5zYWN0aW9uXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzOiBSZnFtSm9iRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja1F1b3RlU2VydmVyQ2xpZW50ID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1F1b3RlU2VydmVyQ2xpZW50LnNpZ25WMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSh2YWxpZEVJUDcxMlNpZyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuaXNWYWxpZE9yZGVyU2lnbmVyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRUb2tlbkJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDApXSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZW5lcmF0ZUFwcHJvdmFsQ2FsbGRhdGFBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAnMHhjYWxsZGF0YScsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXROb25jZUFzeW5jKCcweHdvcmtlcmFkZHJlc3MnKSkudGhlblJlc29sdmUobW9ja05vbmNlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0LFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEJsb2NrQXN5bmMoJzB4YmxvY2toYXNoJykpLnRoZW5SZXNvbHZlKG1vY2tNaW5lZEJsb2NrKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEN1cnJlbnRCbG9ja0FzeW5jKCkpLnRoZW5SZXNvbHZlKDQpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0RGVjb2RlZFJmcU9yZGVyRmlsbEV2ZW50TG9nRnJvbUxvZ3MoYW55dGhpbmcoKSkpLnRoZW5SZXR1cm4oe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbG9nSW5kZXg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDAsXHJcbiAgICAgICAgICAgICAgICB0b3BpY3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgYXJnczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRmlsbGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEyMzQpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9vbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5GaWxsZWRBbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHF1b3RlU2VydmVyQ2xpZW50OiBpbnN0YW5jZShtb2NrUXVvdGVTZXJ2ZXJDbGllbnQpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UucHJvY2Vzc0FwcHJvdmFsQW5kVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzBdLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnc1sxXS5zdGF0dXMpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3NbdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MubGVuZ3RoIC0gMV0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgIFJmcW1Kb2JTdGF0dXMuRmFpbGVkUmV2ZXJ0ZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2Iuc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLkZhaWxlZFJldmVydGVkQ29uZmlybWVkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBwcm9jZWVkIHRvIHRyYWRlIHRyYW5zYWN0aW9uIGlmIHRoZSBzdGF0dXMgb2YgYXBwcm92YWwgdHJhbnNhY3Rpb24gaXMgYFN1Y2NlZWRlZENvbmZpcm1lZGAgZm9yIGEgcmZxbSB2MiBqb2InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vd1MgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gT05FX1NFQ09ORF9NUyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKG5vd1MgKyAxMCksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIobm93UyArIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGFwcHJvdmFsOiBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTCxcclxuICAgICAgICAgICAgICAgIGFwcHJvdmFsU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1ByZXN1Ym1pdEFwcHJvdmFsVHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoMTIzMyksXHJcbiAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tQcmVzdWJtaXRUcmFkZVRyYW5zYWN0aW9uID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKDEyMzMpLFxyXG4gICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWJtaXR0ZWQsXHJcbiAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZWNlaXB0ID0ge1xyXG4gICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDEsXHJcbiAgICAgICAgICAgICAgICBieXphbnRpdW06IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlR2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGdhc1VzZWQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDAwKSxcclxuICAgICAgICAgICAgICAgIGxvZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9nc0Jsb29tOiAnJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogMSxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiAwLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogMixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja01pbmVkQmxvY2s6IHByb3ZpZGVycy5CbG9jayA9IHtcclxuICAgICAgICAgICAgICAgIF9kaWZmaWN1bHR5OiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgyKSxcclxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IDIsXHJcbiAgICAgICAgICAgICAgICBleHRyYURhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgZ2FzTGltaXQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBoYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgbWluZXI6ICcweG1pbmVyJyxcclxuICAgICAgICAgICAgICAgIG5vbmNlOiAnMHgwMDAnLFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyOiAyMSxcclxuICAgICAgICAgICAgICAgIHBhcmVudEhhc2g6ICcweHBhcmVudGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IDEyMzQ1LFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25zOiBbJzB4cHJlc3VibWl0dHJhbnNhY3Rpb25oYXNoJ10sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tOb25jZSA9IDA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayA9IG1vY2soR2FzU3RhdGlvbkF0dGVuZGFudEV0aGVyZXVtKTtcclxuICAgICAgICAgICAgd2hlbihnYXNTdGF0aW9uQXR0ZW5kYW50TW9jay5nZXRFeHBlY3RlZFRyYW5zYWN0aW9uR2FzUmF0ZUFzeW5jKCkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMCkuc2hpZnRlZEJ5KEdXRUlfREVDSU1BTFMpLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgLy8gd2hlbihtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJlc29sdmUoW21vY2tQcmVzdWJtaXRBcHByb3ZhbFRyYW5zYWN0aW9uXSk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbbW9ja1ByZXN1Ym1pdFRyYWRlVHJhbnNhY3Rpb25dKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbW9ja1ByZXN1Ym1pdFRyYWRlVHJhbnNhY3Rpb24sXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogUmZxbUpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAoam9iQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKGpvYkFyZykpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tRdW90ZVNlcnZlckNsaWVudCA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tRdW90ZVNlcnZlckNsaWVudC5zaWduVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUodmFsaWRFSVA3MTJTaWcpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmlzVmFsaWRPcmRlclNpZ25lckFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0VG9rZW5CYWxhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKV0pO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckZpbGxUYWtlclNpZ25lZE90Y09yZGVyQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmVzb2x2ZSgwKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tCbG9ja2NoYWluVXRpbHMuZ2VuZXJhdGVUYWtlclNpZ25lZE90Y09yZGVyQ2FsbERhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmV0dXJuKCcweGNhbGxkYXRhJyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZW5lcmF0ZUFwcHJvdmFsQ2FsbGRhdGFBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAnMHhjYWxsZGF0YScsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXROb25jZUFzeW5jKCcweHdvcmtlcmFkZHJlc3MnKSkudGhlblJlc29sdmUobW9ja05vbmNlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0LFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEJsb2NrQXN5bmMoJzB4YmxvY2toYXNoJykpLnRoZW5SZXNvbHZlKG1vY2tNaW5lZEJsb2NrKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEN1cnJlbnRCbG9ja0FzeW5jKCkpLnRoZW5SZXNvbHZlKDQpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0RGVjb2RlZFJmcU9yZGVyRmlsbEV2ZW50TG9nRnJvbUxvZ3MoYW55dGhpbmcoKSkpLnRoZW5SZXR1cm4oe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbG9nSW5kZXg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDAsXHJcbiAgICAgICAgICAgICAgICB0b3BpY3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgYXJnczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRmlsbGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEyMzQpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9vbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5GaWxsZWRBbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHF1b3RlU2VydmVyQ2xpZW50OiBpbnN0YW5jZShtb2NrUXVvdGVTZXJ2ZXJDbGllbnQpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UucHJvY2Vzc0FwcHJvdmFsQW5kVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzBdLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnc1sxXS5zdGF0dXMpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3NbMl0uc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLlBlbmRpbmdTdWJtaXR0ZWQpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3NbdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MubGVuZ3RoIC0gMV0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgIFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgndGhyb3dzIGlmIG5vbi1hcHByb3ZhbCBqb2IgaXMgc3VwcGxpZWQgdG8gdGhlIG1ldGhvZCBmb3IgYSBtZXRhLXRyYW5zYWN0aW9uIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iSWQgPSAnam9iSWQnO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgam9iID0gY3JlYXRlTWVhVHJzYW5jdGlvbkpvYkVudGl0eShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW46ICcweGlucHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJzB4aW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSGFzaDogTU9DS19NRVRBX1RSQU5TQUNUSU9OLmdldEhhc2goKSxcclxuICAgICAgICAgICAgICAgICAgICBtaW5PdXRwdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW46ICcweG91dHB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyQWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGpvYklkLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByb2Nlc3NBcHByb3ZhbEFuZFRyYWRlQXN5bmMoam9iLCAnMHh3b3JrZXJhZGRyZXNzJyk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKFxyXG4gICAgICAgICAgICAgICAgICAgICdOb24tYXBwcm92YWwgam9iIHNob3VsZCBub3QgYmUgcHJvY2Vzc2VkIGJ5IGBwcm9jZXNzQXBwcm92YWxBbmRUcmFkZUFzeW5jYCcsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgbm90IHByb2NlZWQgdG8gdHJhZGUgdHJhbnNhY3Rpb24gaWYgdGhlIHN0YXR1cyBvZiBhcHByb3ZhbCB0cmFuc2FjdGlvbiBpcyBub3QgYFN1Y2NlZWRlZENvbmZpcm1lZGAgZm9yIGEgbWV0YS10cmFuc2FjdGlvbiBqb2InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vd1MgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gT05FX1NFQ09ORF9NUyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gJ2pvYklkJztcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25TdWJtaXNzaW9uSWQgPSAnc3VibWlzc2lvbklkJztcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbiA9ICcweGlucHV0VG9rZW4nO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgam9iID0gY3JlYXRlTWVhVHJzYW5jdGlvbkpvYkVudGl0eShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIobm93UyArIDYwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcweGludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbjogTU9DS19NRVRBX1RSQU5TQUNUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkhhc2g6IE1PQ0tfTUVUQV9UUkFOU0FDVElPTi5nZXRIYXNoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuOiAnMHhvdXRwdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlckFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbDogTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQVBQUk9WQUwsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBqb2JJZCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uID0gY3JlYXRlTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25Kb2JJZDogam9iSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uU3VibWlzc2lvbklkLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZWNlaXB0ID0ge1xyXG4gICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDEsXHJcbiAgICAgICAgICAgICAgICBieXphbnRpdW06IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlR2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGdhc1VzZWQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDAwKSxcclxuICAgICAgICAgICAgICAgIGxvZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9nc0Jsb29tOiAnJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogMCxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiAwLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogMixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja01pbmVkQmxvY2s6IHByb3ZpZGVycy5CbG9jayA9IHtcclxuICAgICAgICAgICAgICAgIF9kaWZmaWN1bHR5OiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgyKSxcclxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IDIsXHJcbiAgICAgICAgICAgICAgICBleHRyYURhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgZ2FzTGltaXQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBoYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgbWluZXI6ICcweG1pbmVyJyxcclxuICAgICAgICAgICAgICAgIG5vbmNlOiAnMHgwMDAnLFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyOiAyMSxcclxuICAgICAgICAgICAgICAgIHBhcmVudEhhc2g6ICcweHBhcmVudGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IDEyMzQ1LFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25zOiBbJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJ10sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tOb25jZSA9IDA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayA9IG1vY2soR2FzU3RhdGlvbkF0dGVuZGFudEV0aGVyZXVtKTtcclxuICAgICAgICAgICAgd2hlbihnYXNTdGF0aW9uQXR0ZW5kYW50TW9jay5nZXRFeHBlY3RlZFRyYW5zYWN0aW9uR2FzUmF0ZUFzeW5jKCkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMCkuc2hpZnRlZEJ5KEdXRUlfREVDSU1BTFMpLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5Sm9iSWRBc3luYyhqb2JJZCwgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwpLFxyXG4gICAgICAgICAgICApLnRoZW5SZXNvbHZlKFttb2NrVHJhbnNhY3Rpb25dKTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3M6IE1ldGFUcmFuc2FjdGlvbkpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAoam9iQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKGpvYkFyZykpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5pc1ZhbGlkT3JkZXJTaWduZXJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRNaW5PZkJhbGFuY2VzQW5kQWxsb3dhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFRva2VuQmFsYW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW25ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCldKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdlbmVyYXRlQXBwcm92YWxDYWxsZGF0YUFzeW5jKGlucHV0VG9rZW4sIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICcweGNhbGxkYXRhJyxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE5vbmNlQXN5bmMoJzB4d29ya2VyYWRkcmVzcycpKS50aGVuUmVzb2x2ZShtb2NrTm9uY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0UmVjZWlwdHNBc3luYyhkZWVwRXF1YWwoWycweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCddKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG1vY2tUcmFuc2FjdGlvblJlY2VpcHQsXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0QmxvY2tBc3luYygnMHhibG9ja2hhc2gnKSkudGhlblJlc29sdmUobW9ja01pbmVkQmxvY2spO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0Q3VycmVudEJsb2NrQXN5bmMoKSkudGhlblJlc29sdmUoNCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UucHJvY2Vzc0FwcHJvdmFsQW5kVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzBdLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnc1t1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5sZW5ndGggLSAxXS5zdGF0dXMpLnRvLmVxdWFsKFxyXG4gICAgICAgICAgICAgICAgUmZxbUpvYlN0YXR1cy5GYWlsZWRSZXZlcnRlZENvbmZpcm1lZCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuRmFpbGVkUmV2ZXJ0ZWRDb25maXJtZWQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHByb2NlZWQgdG8gdHJhZGUgdHJhbnNhY3Rpb24gaWYgdGhlIHN0YXR1cyBvZiBhcHByb3ZhbCB0cmFuc2FjdGlvbiBpcyBgU3VjY2VlZGVkQ29uZmlybWVkYCBmb3IgYSBtZXRhLXRyYW5zYWN0aW9uIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgbm93UyA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyBPTkVfU0VDT05EX01TKTtcclxuICAgICAgICAgICAgY29uc3Qgam9iSWQgPSAnam9iSWQnO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvblN1Ym1pc3Npb25JZDEgPSAnc3VibWlzc2lvbklkMSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uU3VibWlzc2lvbklkMiA9ICdzdWJtaXNzaW9uSWQyJztcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbiA9ICcweGlucHV0VG9rZW4nO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgam9iID0gY3JlYXRlTWVhVHJzYW5jdGlvbkpvYkVudGl0eShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIobm93UyArIDYwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcweGludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbjogTU9DS19NRVRBX1RSQU5TQUNUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkhhc2g6IE1PQ0tfTUVUQV9UUkFOU0FDVElPTi5nZXRIYXNoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuOiAnMHhvdXRwdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlckFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbDogTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQVBQUk9WQUwsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBqb2JJZCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0FwcHJvdmFsVHJhbnNhY3Rpb24gPSBjcmVhdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkpvYklkOiBqb2JJZCxcclxuICAgICAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gxJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uU3VibWlzc2lvbklkMSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1RyYWRlVHJhbnNhY3Rpb24gPSBjcmVhdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkpvYklkOiBqb2JJZCxcclxuICAgICAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gyJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uU3VibWlzc2lvbklkMixcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0FwcHJvdmFsVHJhbnNhY3Rpb25SZWNlaXB0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZWNlaXB0ID0ge1xyXG4gICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDEsXHJcbiAgICAgICAgICAgICAgICBieXphbnRpdW06IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlR2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGdhc1VzZWQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDAwKSxcclxuICAgICAgICAgICAgICAgIGxvZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9nc0Jsb29tOiAnJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogMSxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaDEnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JbmRleDogMCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFkZVRyYW5zYWN0aW9uUmVjZWlwdDogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVjZWlwdCA9IHtcclxuICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogJzB4YmxvY2toYXNoJyxcclxuICAgICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiAxLFxyXG4gICAgICAgICAgICAgICAgYnl6YW50aXVtOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29uZmlybWF0aW9uczogMyxcclxuICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgY3VtdWxhdGl2ZUdhc1VzZWQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgZWZmZWN0aXZlR2FzUHJpY2U6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICBnYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwMCksXHJcbiAgICAgICAgICAgICAgICBsb2dzOiBbXSxcclxuICAgICAgICAgICAgICAgIGxvZ3NCbG9vbTogJycsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDEsXHJcbiAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gyJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAyLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrTWluZWRCbG9jazogcHJvdmlkZXJzLkJsb2NrID0ge1xyXG4gICAgICAgICAgICAgICAgX2RpZmZpY3VsdHk6IEV0aGVyc0JpZ051bWJlci5mcm9tKDIpLFxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eTogMixcclxuICAgICAgICAgICAgICAgIGV4dHJhRGF0YTogJycsXHJcbiAgICAgICAgICAgICAgICBnYXNMaW1pdDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBnYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGhhc2g6ICcweGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICBtaW5lcjogJzB4bWluZXInLFxyXG4gICAgICAgICAgICAgICAgbm9uY2U6ICcweDAwMCcsXHJcbiAgICAgICAgICAgICAgICBudW1iZXI6IDIxLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50SGFzaDogJzB4cGFyZW50YmxvY2toYXNoJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogMTIzNDUsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnM6IFsnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gxJywgJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoMiddLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrTm9uY2UgPSAwO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2sgPSBtb2NrKEdhc1N0YXRpb25BdHRlbmRhbnRFdGhlcmV1bSk7XHJcbiAgICAgICAgICAgIHdoZW4oZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2suZ2V0RXhwZWN0ZWRUcmFuc2FjdGlvbkdhc1JhdGVBc3luYygpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTApLnNoaWZ0ZWRCeShHV0VJX0RFQ0lNQUxTKSxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeUpvYklkQXN5bmMoam9iSWQsIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsKSxcclxuICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbbW9ja0FwcHJvdmFsVHJhbnNhY3Rpb25dKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5Sm9iSWRBc3luYyhqb2JJZCwgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUpLFxyXG4gICAgICAgICAgICApLnRoZW5SZXNvbHZlKFttb2NrVHJhZGVUcmFuc2FjdGlvbl0pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5Sm9iSWRBc3luYyhqb2JJZCkpLnRoZW5SZXNvbHZlKFttb2NrVHJhZGVUcmFuc2FjdGlvbl0pO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogTWV0YVRyYW5zYWN0aW9uSm9iRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmlzVmFsaWRPcmRlclNpZ25lckFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0VG9rZW5CYWxhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKV0pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoMCk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZW5lcmF0ZU1ldGFUcmFuc2FjdGlvbkNhbGxEYXRhKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmV0dXJuKFxyXG4gICAgICAgICAgICAgICAgJzB4Y2FsbGRhdGEnLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2VuZXJhdGVBcHByb3ZhbENhbGxkYXRhQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgJzB4Y2FsbGRhdGEnLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0Tm9uY2VBc3luYygnMHh3b3JrZXJhZGRyZXNzJykpLnRoZW5SZXNvbHZlKG1vY2tOb25jZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRSZWNlaXB0c0FzeW5jKGRlZXBFcXVhbChbJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoMSddKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG1vY2tBcHByb3ZhbFRyYW5zYWN0aW9uUmVjZWlwdCxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRSZWNlaXB0c0FzeW5jKGRlZXBFcXVhbChbJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoMiddKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG1vY2tUcmFkZVRyYW5zYWN0aW9uUmVjZWlwdCxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRCbG9ja0FzeW5jKCcweGJsb2NraGFzaCcpKS50aGVuUmVzb2x2ZShtb2NrTWluZWRCbG9jayk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRDdXJyZW50QmxvY2tBc3luYygpKS50aGVuUmVzb2x2ZSg0KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5wcm9jZXNzQXBwcm92YWxBbmRUcmFkZUFzeW5jKGpvYiwgJzB4d29ya2VyYWRkcmVzcycpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3NbMF0uc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLlBlbmRpbmdQcm9jZXNzaW5nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzFdLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nU3VibWl0dGVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzW3VwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLmxlbmd0aCAtIDFdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICBSZnFtSm9iU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdwcm9jZXNzVHJhZGVBc3luYycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHByb2Nlc3MgYSByZnFtIHYyIGpvYiB0cmFkZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vd1MgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gT05FX1NFQ09ORF9NUyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKG5vd1MgKyAxMCksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIobm93UyArIDEwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZXF1ZXN0ID0ge307XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvbiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvblJlY2VpcHQ6IHByb3ZpZGVycy5UcmFuc2FjdGlvblJlY2VpcHQgPSB7XHJcbiAgICAgICAgICAgICAgICBibG9ja0hhc2g6ICcweGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMSxcclxuICAgICAgICAgICAgICAgIGJ5emFudGl1bTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbnM6IDMsXHJcbiAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGVmZmVjdGl2ZUdhc1ByaWNlOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgbG9nczogW10sXHJcbiAgICAgICAgICAgICAgICBsb2dzQmxvb206ICcnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAyLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrTWluZWRCbG9jazogcHJvdmlkZXJzLkJsb2NrID0ge1xyXG4gICAgICAgICAgICAgICAgX2RpZmZpY3VsdHk6IEV0aGVyc0JpZ051bWJlci5mcm9tKDIpLFxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eTogMixcclxuICAgICAgICAgICAgICAgIGV4dHJhRGF0YTogJycsXHJcbiAgICAgICAgICAgICAgICBnYXNMaW1pdDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBnYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGhhc2g6ICcweGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICBtaW5lcjogJzB4bWluZXInLFxyXG4gICAgICAgICAgICAgICAgbm9uY2U6ICcweDAwMCcsXHJcbiAgICAgICAgICAgICAgICBudW1iZXI6IDIxLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50SGFzaDogJzB4cGFyZW50YmxvY2toYXNoJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogMTIzNDUsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnM6IFsnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnXSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja05vbmNlID0gMDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrID0gbW9jayhHYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0pO1xyXG4gICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwKS5zaGlmdGVkQnkoR1dFSV9ERUNJTUFMUyksXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzOiBSZnFtSm9iRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbkJ5VHJhbnNhY3Rpb25IYXNoQXN5bmMoJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJykpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKSxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tRdW90ZVNlcnZlckNsaWVudCA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tRdW90ZVNlcnZlckNsaWVudC5zaWduVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUodmFsaWRFSVA3MTJTaWcpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0RXhjaGFuZ2VQcm94eUFkZHJlc3MoKSkudGhlblJldHVybignMHhleGNoYW5nZXByb3h5YWRkcmVzcycpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLmdlbmVyYXRlVGFrZXJTaWduZWRPdGNPcmRlckNhbGxEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJldHVybignMHhjYWxsZGF0YScpO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckZpbGxUYWtlclNpZ25lZE90Y09yZGVyQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmVzb2x2ZSgwKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE5vbmNlQXN5bmMoJzB4d29ya2VyYWRkcmVzcycpKS50aGVuUmVzb2x2ZShtb2NrTm9uY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoMTAwKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tCbG9ja2NoYWluVXRpbHMudHJhbnNmb3JtVHhEYXRhVG9UcmFuc2FjdGlvblJlcXVlc3QoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSksXHJcbiAgICAgICAgICAgICkudGhlblJldHVybihtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0KTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLnN1Ym1pdFNpZ25lZFRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKCcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuc2lnblRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgIHNpZ25lZFRyYW5zYWN0aW9uOiAnc2lnbmVkVHJhbnNhY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0LFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEJsb2NrQXN5bmMoJzB4YmxvY2toYXNoJykpLnRoZW5SZXNvbHZlKG1vY2tNaW5lZEJsb2NrKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEN1cnJlbnRCbG9ja0FzeW5jKCkpLnRoZW5SZXNvbHZlKDQpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UobW9ja1F1b3RlU2VydmVyQ2xpZW50KSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByb2Nlc3NUcmFkZUFzeW5jKGpvYiwgJzB4d29ya2VyYWRkcmVzcycpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3NbMF0uc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLlBlbmRpbmdQcm9jZXNzaW5nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzFdLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nTGFzdExvb2tBY2NlcHRlZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnc1syXS5zdGF0dXMpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuUGVuZGluZ1N1Ym1pdHRlZCk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnc1t1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5sZW5ndGggLSAxXS5zdGF0dXMpLnRvLmVxdWFsKFxyXG4gICAgICAgICAgICAgICAgUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2Iuc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcHJvY2VzcyBhIG1ldGEtdHJhbnNhY3Rpb24gam9iIHRyYWRlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgbm93UyA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyBPTkVfU0VDT05EX01TKTtcclxuICAgICAgICAgICAgY29uc3Qgam9iSWQgPSAnam9iSWQnO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvblN1Ym1pc3Npb25JZCA9ICdzdWJtaXNzaW9uSWQnO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgam9iID0gY3JlYXRlTWVhVHJzYW5jdGlvbkpvYkVudGl0eShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIobm93UyArIDYwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbjogJzB4aW5wdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnMHhpbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb246IE1PQ0tfTUVUQV9UUkFOU0FDVElPTixcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04uZ2V0SGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbjogJzB4b3V0cHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJBZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgam9iSWQsXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZXF1ZXN0ID0ge307XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvbiA9IGNyZWF0ZU1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSm9iSWQ6IGpvYklkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25TdWJtaXNzaW9uSWQsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvblJlY2VpcHQ6IHByb3ZpZGVycy5UcmFuc2FjdGlvblJlY2VpcHQgPSB7XHJcbiAgICAgICAgICAgICAgICBibG9ja0hhc2g6ICcweGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMSxcclxuICAgICAgICAgICAgICAgIGJ5emFudGl1bTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbnM6IDMsXHJcbiAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGVmZmVjdGl2ZUdhc1ByaWNlOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgbG9nczogW10sXHJcbiAgICAgICAgICAgICAgICBsb2dzQmxvb206ICcnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAyLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrTWluZWRCbG9jazogcHJvdmlkZXJzLkJsb2NrID0ge1xyXG4gICAgICAgICAgICAgICAgX2RpZmZpY3VsdHk6IEV0aGVyc0JpZ051bWJlci5mcm9tKDIpLFxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eTogMixcclxuICAgICAgICAgICAgICAgIGV4dHJhRGF0YTogJycsXHJcbiAgICAgICAgICAgICAgICBnYXNMaW1pdDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICBnYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgIGhhc2g6ICcweGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICBtaW5lcjogJzB4bWluZXInLFxyXG4gICAgICAgICAgICAgICAgbm9uY2U6ICcweDAwMCcsXHJcbiAgICAgICAgICAgICAgICBudW1iZXI6IDIxLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50SGFzaDogJzB4cGFyZW50YmxvY2toYXNoJyxcclxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogMTIzNDUsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnM6IFsnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnXSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja05vbmNlID0gMDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrID0gbW9jayhHYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0pO1xyXG4gICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwKS5zaGlmdGVkQnkoR1dFSV9ERUNJTUFMUyksXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5Sm9iSWRBc3luYyhqb2JJZCkpLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3M6IE1ldGFUcmFuc2FjdGlvbkpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAoam9iQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKGpvYkFyZykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5Sm9iSWRBc3luYyhqb2JJZCwgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUpLFxyXG4gICAgICAgICAgICApLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5VHJhbnNhY3Rpb25IYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJlc29sdmUoW18uY2xvbmVEZWVwKG1vY2tUcmFuc2FjdGlvbildKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRFeGNoYW5nZVByb3h5QWRkcmVzcygpKS50aGVuUmV0dXJuKCcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZW5lcmF0ZU1ldGFUcmFuc2FjdGlvbkNhbGxEYXRhKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmV0dXJuKFxyXG4gICAgICAgICAgICAgICAgJzB4Y2FsbGRhdGEnLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoMCk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXROb25jZUFzeW5jKCcweHdvcmtlcmFkZHJlc3MnKSkudGhlblJlc29sdmUobW9ja05vbmNlKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tCbG9ja2NoYWluVXRpbHMudHJhbnNmb3JtVHhEYXRhVG9UcmFuc2FjdGlvblJlcXVlc3QoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSksXHJcbiAgICAgICAgICAgICkudGhlblJldHVybihtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0KTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLnN1Ym1pdFNpZ25lZFRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKCcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuc2lnblRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgIHNpZ25lZFRyYW5zYWN0aW9uOiAnc2lnbmVkVHJhbnNhY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0LFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEJsb2NrQXN5bmMoJzB4YmxvY2toYXNoJykpLnRoZW5SZXNvbHZlKG1vY2tNaW5lZEJsb2NrKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEN1cnJlbnRCbG9ja0FzeW5jKCkpLnRoZW5SZXNvbHZlKDQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByb2Nlc3NUcmFkZUFzeW5jKGpvYiwgJzB4d29ya2VyYWRkcmVzcycpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3NbMF0uc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLlBlbmRpbmdQcm9jZXNzaW5nKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzFdLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nU3VibWl0dGVkKTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzW3VwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLmxlbmd0aCAtIDFdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICBSZnFtSm9iU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCd2YWxpZGF0ZSBqb2IgbWV0aG9kcycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciB2YWxpZCwgdW5leHBpcmVkIHYyIGpvYnMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZha2VJbkZpdmVNaW51dGVzUyA9IGZha2VDbG9ja01zIC8gT05FX1NFQ09ORF9NUyArIDM2MDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VJbkZpdmVNaW51dGVzUyksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBleHBpcnkgKi8gbmV3IEJpZ051bWJlcihmYWtlSW5GaXZlTWludXRlc1MpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbm9uY2VCdWNrZXQgKi8gbmV3IEJpZ051bWJlcigyMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBub25jZSAqLyBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gV29ya2VyU2VydmljZS52YWxpZGF0ZVJmcW1WMkpvYihqb2IsIG5ldyBEYXRlKGZha2VDbG9ja01zKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBhIE5vIFRha2VyIFNpZ25hdHVyZSBzdGF0dXMgZm9yIHYyIGpvYnMgd2l0aCBubyB0YWtlciBzaWduYXR1cmUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZha2VJbkZpdmVNaW51dGVzUyA9IGZha2VDbG9ja01zIC8gT05FX1NFQ09ORF9NUyArIDM2MDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VJbkZpdmVNaW51dGVzUyksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBleHBpcnkgKi8gbmV3IEJpZ051bWJlcihmYWtlSW5GaXZlTWludXRlc1MpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbm9uY2VCdWNrZXQgKi8gbmV3IEJpZ051bWJlcigyMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBub25jZSAqLyBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gV29ya2VyU2VydmljZS52YWxpZGF0ZVJmcW1WMkpvYihqb2IsIG5ldyBEYXRlKGZha2VDbG9ja01zKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuRmFpbGVkVmFsaWRhdGlvbk5vVGFrZXJTaWduYXR1cmUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBhIHZhbGlkLCB1bmV4cGlyZWQgbWV0YS10cmFuc2FjdGlvbiBqb2InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZha2VJbkZpdmVNaW51dGVzUyA9IGZha2VDbG9ja01zIC8gT05FX1NFQ09ORF9NUyArIDM2MDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IGNyZWF0ZU1lYVRyc2FuY3Rpb25Kb2JFbnRpdHkoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VJbkZpdmVNaW51dGVzUyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbjogJzB4aW5wdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnMHhpbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb246IE1PQ0tfTUVUQV9UUkFOU0FDVElPTixcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04uZ2V0SGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbjogJzB4b3V0cHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJBZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJ2pvYklkJyxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFdvcmtlclNlcnZpY2UudmFsaWRhdGVNZXRhVHJhbnNhY3Rpb25Kb2Ioam9iLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50by5lcXVhbChudWxsKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYSBmYWlsZWQgZXhwaXJlZCBzdGF0dXMgZm9yIGEgbWV0YS10cmFuc2FjdGlvbiBqb2IgdGhhdCBleHBpcmVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBjcmVhdGVNZWFUcnNhbmN0aW9uSm9iRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlQ2xvY2tNcyAvIE9ORV9TRUNPTkRfTVMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW46ICcweGlucHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJzB4aW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSGFzaDogTU9DS19NRVRBX1RSQU5TQUNUSU9OLmdldEhhc2goKSxcclxuICAgICAgICAgICAgICAgICAgICBtaW5PdXRwdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW46ICcweG91dHB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyQWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICdqb2JJZCcsXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBXb3JrZXJTZXJ2aWNlLnZhbGlkYXRlTWV0YVRyYW5zYWN0aW9uSm9iKGpvYiwgbmV3IERhdGUoZmFrZUNsb2NrTXMgKyAxMDAwMDAwKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuRmFpbGVkRXhwaXJlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnc2hvdWxkUmVzdWJtaXRUcmFuc2FjdGlvbicsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBpZiBuZXcgZ2FzIHByaWNlIDwgMTAlIGdyZWF0ZXIgdGhhbiBwcmV2aW91cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ2FzRmVlcyA9IHsgbWF4RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwKSB9O1xyXG4gICAgICAgICAgICBjb25zdCBuZXdHYXNQcmljZSA9IG5ldyBCaWdOdW1iZXIoMTA1KTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChXb3JrZXJTZXJ2aWNlLnNob3VsZFJlc3VibWl0VHJhbnNhY3Rpb24oZ2FzRmVlcywgbmV3R2FzUHJpY2UpKS50by5lcXVhbChmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSBpZiBuZXcgZ2FzIHByaWNlIGlzIDEwJSBncmVhdGVyIHRoYW4gcHJldmlvdXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdhc0ZlZXMgPSB7IG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLCBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMCkgfTtcclxuICAgICAgICAgICAgY29uc3QgbmV3R2FzUHJpY2UgPSBuZXcgQmlnTnVtYmVyKDExMCk7XHJcblxyXG4gICAgICAgICAgICBleHBlY3QoV29ya2VyU2VydmljZS5zaG91bGRSZXN1Ym1pdFRyYW5zYWN0aW9uKGdhc0ZlZXMsIG5ld0dhc1ByaWNlKSkudG8uZXF1YWwodHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSBpZiBuZXcgZ2FzIHByaWNlID4gMTAlIGdyZWF0ZXIgdGhhbiBwcmV2aW91cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ2FzRmVlcyA9IHsgbWF4RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwKSB9O1xyXG4gICAgICAgICAgICBjb25zdCBuZXdHYXNQcmljZSA9IG5ldyBCaWdOdW1iZXIoMTIwKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGVjdChXb3JrZXJTZXJ2aWNlLnNob3VsZFJlc3VibWl0VHJhbnNhY3Rpb24oZ2FzRmVlcywgbmV3R2FzUHJpY2UpKS50by5lcXVhbCh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdjaGVja0pvYlByZXByb2Nlc3NpbmdBc3luYycsICgpID0+IHtcclxuICAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBqb2Igc3RhdXMgYW5kIHRocm93IGVycm9yIGlmIGpvYiB2YWxpZGF0aW9uIGZhaWxlZCBmb3IgYSByZnFtIHYyIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZU9uZU1pbnV0ZUFnb1MpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VPbmVNaW51dGVBZ29TLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5jaGVja0pvYlByZXByb2Nlc3NpbmdBc3luYyhqb2IsIG5ldyBEYXRlKGZha2VDbG9ja01zKSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKCdKb2IgZmFpbGVkIHZhbGlkYXRpb24nKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2Iuc3RhdHVzKS50by5kZWVwLmVxdWFsKFJmcW1Kb2JTdGF0dXMuRmFpbGVkRXhwaXJlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBpZiB0aGVyZSBpcyBubyB0YWtlciBzaWduYXR1cmUgZm9yIGEgcmZxbSB2MiBqb2InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlci50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UuY2hlY2tKb2JQcmVwcm9jZXNzaW5nQXN5bmMoam9iLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignSm9iIGZhaWxlZCB2YWxpZGF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZGVlcC5lcXVhbChSZnFtSm9iU3RhdHVzLkZhaWxlZFZhbGlkYXRpb25Ob1Rha2VyU2lnbmF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBqb2Igc3RhdXMgdG8gYFBlbmRpbmdQcm9jZXNzaW5nYCBpZiBqb2Igc3RhdHVzIGlzIGBQZW5kaW5nRW5xdWV1ZWRgIGZvciBhIHJmcW0gdjIgam9iJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UuY2hlY2tKb2JQcmVwcm9jZXNzaW5nQXN5bmMoam9iLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZGVlcC5lcXVhbChSZnFtSm9iU3RhdHVzLlBlbmRpbmdQcm9jZXNzaW5nKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUgam9iIHN0YXVzIGFuZCB0aHJvdyBlcnJvciBpZiBqb2IgdmFsaWRhdGlvbiBmYWlsZWQgZm9yIGEgbWV0YS10cmFuc2FjdGlvbiBqb2InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IGNyZWF0ZU1lYVRyc2FuY3Rpb25Kb2JFbnRpdHkoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VPbmVNaW51dGVBZ29TKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuOiAnMHhpbnB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcweGludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbjogTU9DS19NRVRBX1RSQU5TQUNUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkhhc2g6IE1PQ0tfTUVUQV9UUkFOU0FDVElPTi5nZXRIYXNoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuOiAnMHhvdXRwdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlckFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnam9iSWQnLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLmNoZWNrSm9iUHJlcHJvY2Vzc2luZ0FzeW5jKGpvYiwgbmV3IERhdGUoZmFrZUNsb2NrTXMpKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ0pvYiBmYWlsZWQgdmFsaWRhdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmRlZXAuZXF1YWwoUmZxbUpvYlN0YXR1cy5GYWlsZWRFeHBpcmVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBqb2Igc3RhdXMgdG8gYFBlbmRpbmdQcm9jZXNzaW5nYCBpZiBqb2Igc3RhdHVzIGlzIGBQZW5kaW5nRW5xdWV1ZWRgIGZvciBhIG1ldGEtdHJhbnNhY3Rpb24gam9iJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBjcmVhdGVNZWFUcnNhbmN0aW9uSm9iRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbjogJzB4aW5wdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnMHhpbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb246IE1PQ0tfTUVUQV9UUkFOU0FDVElPTixcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04uZ2V0SGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbjogJzB4b3V0cHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJBZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJ2pvYklkJyxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLmNoZWNrSm9iUHJlcHJvY2Vzc2luZ0FzeW5jKGpvYiwgbmV3IERhdGUoZmFrZUNsb2NrTXMpKTtcclxuICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmRlZXAuZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgncHJlcGFyZUFwcHJvdmFsQXN5bmMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBleGNlcHRpb24gaWYgdGhlcmUgYXJlIHN1Ym1pdHRlZCB0cmFuc2FjdGlvbnMgYnV0IGpvYiBtYWtlciBzaWduYXR1cmUgaXMgbnVsbCBmb3IgYSByZnFtIHYyIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoMTIzMyksXHJcbiAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJlc29sdmUoW21vY2tUcmFuc2FjdGlvbl0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2VuZXJhdGVBcHByb3ZhbENhbGxkYXRhQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQ0FMTERBVEEsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UucHJlcGFyZUFwcHJvdmFsQXN5bmMoam9iLCAnMHh0b2tlbicsIE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ0VuY291bnRlcmVkIGEgam9iIHdpdGggc3VibWlzc2lvbnMgYnV0IG5vIG1ha2VyIHNpZ25hdHVyZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGdlbmVyYXRlZCBjYWxsZGF0YSBpZiB0aGVyZSBhcmUgc3VibWl0dGVkIHRyYW5zYWN0aW9ucyBmb3IgYSByZnFtIHYyIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoMTIzMyksXHJcbiAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJlc29sdmUoW21vY2tUcmFuc2FjdGlvbl0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2VuZXJhdGVBcHByb3ZhbENhbGxkYXRhQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQ0FMTERBVEEsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYWxsZGF0YSA9IGF3YWl0IHJmcW1TZXJ2aWNlLnByZXBhcmVBcHByb3ZhbEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgam9iLFxyXG4gICAgICAgICAgICAgICAgJzB4dG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQVBQUk9WQUwsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3QoY2FsbGRhdGEpLnRvLmRlZXAuZXF1YWwoTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQ0FMTERBVEEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHRocm93IGV4Y2VwdGlvbiBpZiBldGhfY2FsbCBmYWlsZWQgZm9yIGEgcmZxbSB2MiBqb2InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlci50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZW5lcmF0ZUFwcHJvdmFsQ2FsbGRhdGFBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9DQUxMREFUQSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmVzdGltYXRlR2FzRm9yQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5UaHJvdyhuZXcgRXJyb3IoJ2Vycm9yJykpO1xyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByZXBhcmVBcHByb3ZhbEFzeW5jKGpvYiwgJzB4dG9rZW4nLCBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKCdFdGggY2FsbCBhcHByb3ZhbCB2YWxpZGF0aW9uIGZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmRlZXAuZXF1YWwoUmZxbUpvYlN0YXR1cy5GYWlsZWRFdGhDYWxsRmFpbGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0IGNhbGxkYXRhIGlmIHRoZXJlIGlzIG5vIHN1Ym1pdHRlZCB0cmFuc2FjdGlvbiBmb3IgYSByZnFtIHYyIGpvYicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwsXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICApLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdlbmVyYXRlQXBwcm92YWxDYWxsZGF0YUFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgIE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0NBTExEQVRBLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoMTApO1xyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FsbGRhdGEgPSBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlQXBwcm92YWxBc3luYyhcclxuICAgICAgICAgICAgICAgIGpvYixcclxuICAgICAgICAgICAgICAgICcweHRva2VuJyxcclxuICAgICAgICAgICAgICAgIE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNhbGxkYXRhKS50by5kZWVwLmVxdWFsKE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0NBTExEQVRBKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZ2VuZXJhdGVkIGNhbGxkYXRhIGlmIHRoZXJlIGFyZSBzdWJtaXR0ZWQgdHJhbnNhY3Rpb25zIGZvciBhIG1ldGEtdHJhbnNhY3Rpb24gam9iJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2JJZCA9ICdqb2JJZCc7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uU3VibWlzc2lvbklkID0gJ3N1Ym1pc3Npb25JZCc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBjcmVhdGVNZWFUcnNhbmN0aW9uSm9iRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbjogJzB4aW5wdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnMHhpbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb246IE1PQ0tfTUVUQV9UUkFOU0FDVElPTixcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04uZ2V0SGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbjogJzB4b3V0cHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJBZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgam9iSWQsXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb24gPSBjcmVhdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkpvYklkOiBqb2JJZCxcclxuICAgICAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uU3VibWlzc2lvbklkLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5Sm9iSWRBc3luYyhqb2JJZCwgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuQXBwcm92YWwpLFxyXG4gICAgICAgICAgICApLnRoZW5SZXNvbHZlKFttb2NrVHJhbnNhY3Rpb25dKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdlbmVyYXRlQXBwcm92YWxDYWxsZGF0YUFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgIE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0NBTExEQVRBLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FsbGRhdGEgPSBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlQXBwcm92YWxBc3luYyhcclxuICAgICAgICAgICAgICAgIGpvYixcclxuICAgICAgICAgICAgICAgICcweHRva2VuJyxcclxuICAgICAgICAgICAgICAgIE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0FQUFJPVkFMLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KGNhbGxkYXRhKS50by5kZWVwLmVxdWFsKE1PQ0tfRVhFQ1VURV9NRVRBX1RSQU5TQUNUSU9OX0NBTExEQVRBKTtcclxuICAgICAgICAgICAgdmVyaWZ5KG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkubmV2ZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBleGNlcHRpb24gaWYgZXRoX2NhbGwgZmFpbGVkIGZvciBhIG1ldGEtdHJhbnNhY3Rpb24gam9iJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2JJZCA9ICdqb2JJZCc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBjcmVhdGVNZWFUcnNhbmN0aW9uSm9iRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbjogJzB4aW5wdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnMHhpbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb246IE1PQ0tfTUVUQV9UUkFOU0FDVElPTixcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04uZ2V0SGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbjogJzB4b3V0cHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJBZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgam9iSWQsXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlKb2JJZEFzeW5jKGpvYklkLCBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5BcHByb3ZhbCksXHJcbiAgICAgICAgICAgICkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2VuZXJhdGVBcHByb3ZhbENhbGxkYXRhQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQ0FMTERBVEEsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuVGhyb3cobmV3IEVycm9yKCdlcnJvcicpKTtcclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlQXBwcm92YWxBc3luYyhqb2IsICcweHRva2VuJywgTU9DS19FWEVDVVRFX01FVEFfVFJBTlNBQ1RJT05fQVBQUk9WQUwsIHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignRXRoIGNhbGwgYXBwcm92YWwgdmFsaWRhdGlvbiBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2Iuc3RhdHVzKS50by5kZWVwLmVxdWFsKFJmcW1Kb2JTdGF0dXMuRmFpbGVkRXRoQ2FsbEZhaWxlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBjYWxsZGF0YSBpZiB0aGVyZSBpcyBubyBzdWJtaXR0ZWQgdHJhbnNhY3Rpb24gZm9yIGEgbWV0YS10cmFuc2FjdGlvbiBqb2InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gJ2pvYklkJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IGNyZWF0ZU1lYVRyc2FuY3Rpb25Kb2JFbnRpdHkoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuOiAnMHhpbnB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcweGludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbjogTU9DS19NRVRBX1RSQU5TQUNUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkhhc2g6IE1PQ0tfTUVUQV9UUkFOU0FDVElPTi5nZXRIYXNoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuOiAnMHhvdXRwdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlckFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBqb2JJZCxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeUpvYklkQXN5bmMoam9iSWQsIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLkFwcHJvdmFsKSxcclxuICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZW5lcmF0ZUFwcHJvdmFsQ2FsbGRhdGFBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9DQUxMREFUQSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmVzdGltYXRlR2FzRm9yQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKDEwKTtcclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGxkYXRhID0gYXdhaXQgcmZxbVNlcnZpY2UucHJlcGFyZUFwcHJvdmFsQXN5bmMoXHJcbiAgICAgICAgICAgICAgICBqb2IsXHJcbiAgICAgICAgICAgICAgICAnMHh0b2tlbicsXHJcbiAgICAgICAgICAgICAgICBNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9BUFBST1ZBTCxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjYWxsZGF0YSkudG8uZGVlcC5lcXVhbChNT0NLX0VYRUNVVEVfTUVUQV9UUkFOU0FDVElPTl9DQUxMREFUQSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgncHJlcGFyZXJmcW1WMlRyYWRlQXN5bmMnLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoJ3VwZGF0ZXMgdGhlIGpvYiBhbmQgdGhyb3dzIHVwb24gdmFsaWRhdGlvbiBmYWlsdXJlIHdoZW4gYHNob3VsZENoZWNrTGFzdExvb2tgIGlzIHRydWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyZWRKb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlT25lTWludXRlQWdvUyksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VPbmVNaW51dGVBZ29TLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgX2pvYiA9IF8uY2xvbmVEZWVwKGV4cGlyZWRKb2IpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYygnMHhvcmRlcmhhc2gnKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHsgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByZXBhcmVyZnFtVjJUcmFkZUFzeW5jKGV4cGlyZWRKb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignSm9iIGZhaWxlZCB2YWxpZGF0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZXhwaXJlZEpvYikudG8uZGVlcC5lcXVhbCh7IC4uLl9qb2IsIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRFeHBpcmVkIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdoYW5kbGVzIGEgYmFsYW5jZSBjaGVjayBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9qb2IgPSBfLmNsb25lRGVlcChqb2IpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYygnMHhvcmRlcmhhc2gnKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogUmZxbUpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAoam9iQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKGpvYkFyZykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtuZXcgQmlnTnVtYmVyKDEwMCldKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSA9IG1vY2soUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDUpLFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByZXBhcmVyZnFtVjJUcmFkZUFzeW5jKGpvYiwgJzB4d29ya2VyYWRkcmVzcycsIHRydWUsIG5ldyBEYXRlKGZha2VDbG9ja01zKSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKCdPcmRlciBmYWlsZWQgcHJlLXNpZ24gdmFsaWRhdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzBdKS50by5kZWVwLmVxdWFsKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5fam9iLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzFdKS50by5kZWVwLmVxdWFsKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5fam9iLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRQcmVzaWduVmFsaWRhdGlvbkZhaWxlZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYikudG8uZGVlcC5lcXVhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuRmFpbGVkUHJlc2lnblZhbGlkYXRpb25GYWlsZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnaGFuZGxlcyBhIGRlY2xpbmUgdG8gc2lnbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBfam9iID0gXy5jbG9uZURlZXAoam9iKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoJzB4b3JkZXJoYXNoJykpLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3M6IFJmcW1Kb2JFbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcChqb2JBcmcpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tRdW90ZVNlcnZlckNsaWVudCA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tRdW90ZVNlcnZlckNsaWVudC5zaWduVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UobW9ja1F1b3RlU2VydmVyQ2xpZW50KSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlcmZxbVYyVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignTWFya2V0IE1ha2VyIGRlY2xpbmVkIHRvIHNpZ24nKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2IpLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLl9qb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRMYXN0TG9va0RlY2xpbmVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ2hhbmRsZXMgYSBzaWduYXR1cmUgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBfam9iID0gXy5jbG9uZURlZXAoam9iKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoJzB4b3JkZXJoYXNoJykpLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1F1b3RlU2VydmVyQ2xpZW50ID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1F1b3RlU2VydmVyQ2xpZW50LnNpZ25WMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVqZWN0KFxyXG4gICAgICAgICAgICAgICAgbmV3IEVycm9yKCdmYWtlIHRpbWVvdXQnKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UobW9ja1F1b3RlU2VydmVyQ2xpZW50KSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlcmZxbVYyVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignSm9iIGZhaWxlZCBkdXJpbmcgbWFya2V0IG1ha2VyIHNpZ24gYXR0ZW1wdCcpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYikudG8uZGVlcC5lcXVhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuRmFpbGVkU2lnbkZhaWxlZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdoYW5kbGVzIHNpZ25lciBpcyBub3QgdGhlIG1ha2VyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3M6IFJmcW1Kb2JFbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcChqb2JBcmcpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMob3JkZXJIYXNoKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgY29uc3QgaW52YWxpZEVJUDcxMlNpZyA9IF8uY2xvbmVEZWVwKHZhbGlkRUlQNzEyU2lnKTtcclxuICAgICAgICAgICAgaW52YWxpZEVJUDcxMlNpZy5yID0gJzB4ZGMxNThmN2I1M2I5NDA4NjNiYzdiMDAxNTUyYTkwMjgyZTUxMDMzZjI5YjczZDQ0YTI3MDFiZDE2ZmFhMTlkMyc7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1F1b3RlU2VydmVyQ2xpZW50LnNpZ25WMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShpbnZhbGlkRUlQNzEyU2lnKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UobW9ja1F1b3RlU2VydmVyQ2xpZW50KSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlcmZxbVYyVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignSW52YWxpZCBvcmRlciBzaWduZXIgYWRkcmVzcycpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmRlZXAuZXF1YWwoUmZxbUpvYlN0YXR1cy5GYWlsZWRTaWduRmFpbGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnaGFuZGxlcyBhbiBldGhfY2FsbCBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBfam9iID0gXy5jbG9uZURlZXAoam9iKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMob3JkZXJIYXNoKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgd2hlbihtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuc2lnblYyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKHZhbGlkRUlQNzEyU2lnKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckZpbGxUYWtlclNpZ25lZE90Y09yZGVyQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmVqZWN0KG5ldyBFcnJvcignZmFrZSBldGggY2FsbCBmYWlsdXJlJykpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UobW9ja1F1b3RlU2VydmVyQ2xpZW50KSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlcmZxbVYyVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignRXRoIGNhbGwgdmFsaWRhdGlvbiBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2IpLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLl9qb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IHZhbGlkRUlQNzEyU2lnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRFdGhDYWxsRmFpbGVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3VwZGF0ZXMgbWFya2V0IG1ha2VyIHNpZ25hdHVyZXMgbWlzc2luZyBieXRlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgX2pvYiA9IF8uY2xvbmVEZWVwKGpvYik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tRdW90ZVNlcnZlckNsaWVudCA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tRdW90ZVNlcnZlckNsaWVudC5zaWduVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUobWlzc2luZ0J5dGVTaWcpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuaXNWYWxpZE9yZGVyU2lnbmVyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLmVzdGltYXRlR2FzRm9yRmlsbFRha2VyU2lnbmVkT3RjT3JkZXJBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICApLnRoZW5SZXNvbHZlKDApO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy5nZW5lcmF0ZVRha2VyU2lnbmVkT3RjT3JkZXJDYWxsRGF0YShcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICApLnRoZW5SZXR1cm4oJzB4dmFsaWRjYWxsZGF0YScpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UobW9ja1F1b3RlU2VydmVyQ2xpZW50KSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnByZXBhcmVyZnFtVjJUcmFkZUFzeW5jKGpvYiwgJzB4d29ya2VyYWRkcmVzcycsIHRydWUsIG5ldyBEYXRlKGZha2VDbG9ja01zKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2IpLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IHBhZFNpZ25hdHVyZShtaXNzaW5nQnl0ZVNpZyksXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2tpcHMgdGhlIGV0aF9jYWxsIGZvciBqb2JzIHdpdGggZXhpc3Rpbmcgc3VibWlzc2lvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IHZhbGlkRUlQNzEyU2lnLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgIG5vbmNlOiAyMSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgX2pvYiA9IF8uY2xvbmVEZWVwKGpvYik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogUmZxbUpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoJzB4b3JkZXJoYXNoJykpLnRoZW5SZXNvbHZlKFt0cmFuc2FjdGlvbl0pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcChqb2JBcmcpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tRdW90ZVNlcnZlckNsaWVudCA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tRdW90ZVNlcnZlckNsaWVudC5zaWduVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUodmFsaWRFSVA3MTJTaWcpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLmdlbmVyYXRlVGFrZXJTaWduZWRPdGNPcmRlckNhbGxEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJldHVybignMHh2YWxpZGNhbGxkYXRhJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHF1b3RlU2VydmVyQ2xpZW50OiBpbnN0YW5jZShtb2NrUXVvdGVTZXJ2ZXJDbGllbnQpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FsbGRhdGEgPSBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlcmZxbVYyVHJhZGVBc3luYyhcclxuICAgICAgICAgICAgICAgIGpvYixcclxuICAgICAgICAgICAgICAgICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG5ldyBEYXRlKGZha2VDbG9ja01zKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZXhwZWN0KGpvYikudG8uZGVlcC5lcXVhbCh7XHJcbiAgICAgICAgICAgICAgICAuLi5fam9iLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogdmFsaWRFSVA3MTJTaWcsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBleHBlY3QoY2FsbGRhdGEpLnRvLmVxdWFsKCcweHZhbGlkY2FsbGRhdGEnKTtcclxuICAgICAgICAgICAgdmVyaWZ5KFxyXG4gICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckZpbGxUYWtlclNpZ25lZE90Y09yZGVyQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS5uZXZlcigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnbGV0cyBleHBpcmVkIGpvYnMgd2l0aCBleGlzdGluZyBzdWJtaXNzaW9ucyBmYWxsIHRocm91Z2gnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBqb2IgaXNuJ3QgaW4gYSB0ZXJtaW5hbCBzdGF0dXMgYnV0IHRoZXJlIGFyZSBleGlzdGluZyBzdWJtaXNzaW9ucyxcclxuICAgICAgICAgICAgLy8gYHByZXBhcmVUcmFkZUFzeW5jYCB3aWxsIGxldCB0aGUgam9iIGNvbnRpbnVlIHRvIHRoZSBzdWJtaXNzaW9uIHN0ZXAgd2hpY2hcclxuICAgICAgICAgICAgLy8gd2lsbCBhbGxvdyB0aGUgd29ya2VyIHRvIGNoZWNrIHJlY2VpcHRzIGZvciB0aG9zZSBzdWJtaXNzaW9ucy5cclxuICAgICAgICAgICAgY29uc3QgZXhwaXJlZEpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VPbmVNaW51dGVBZ29TKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihmYWtlT25lTWludXRlQWdvUy50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgbWF4RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMDAwMCksXHJcbiAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgbm9uY2U6IDIxLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYygnMHhvcmRlcmhhc2gnKSkudGhlblJlc29sdmUoW3RyYW5zYWN0aW9uXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLmdlbmVyYXRlVGFrZXJTaWduZWRPdGNPcmRlckNhbGxEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJldHVybignMHh2YWxpZGNhbGxkYXRhJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UucHJlcGFyZXJmcW1WMlRyYWRlQXN5bmMoZXhwaXJlZEpvYiwgJzB4d29ya2VyYWRkcmVzcycsIHRydWUsIG5ldyBEYXRlKGZha2VDbG9ja01zKSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChleHBpcmVkSm9iLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5QZW5kaW5nU3VibWl0dGVkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3N1Y2Nlc3NmdWxseSBwcmVwYXJlcyBhIGpvYiB3aGVuIGNoZWNraW5nIGxhc3QgbG9vaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgX2pvYiA9IF8uY2xvbmVEZWVwKGpvYik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogUmZxbUpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMob3JkZXJIYXNoKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcChqb2JBcmcpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tRdW90ZVNlcnZlckNsaWVudCA9IG1vY2soUXVvdGVTZXJ2ZXJDbGllbnQpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tRdW90ZVNlcnZlckNsaWVudC5zaWduVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUodmFsaWRFSVA3MTJTaWcpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLmVzdGltYXRlR2FzRm9yRmlsbFRha2VyU2lnbmVkT3RjT3JkZXJBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICApLnRoZW5SZXNvbHZlKDApO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy5nZW5lcmF0ZVRha2VyU2lnbmVkT3RjT3JkZXJDYWxsRGF0YShcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICApLnRoZW5SZXR1cm4oJzB4dmFsaWRjYWxsZGF0YScpO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICBxdW90ZVNlcnZlckNsaWVudDogaW5zdGFuY2UobW9ja1F1b3RlU2VydmVyQ2xpZW50KSxcclxuICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGluc3RhbmNlKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGxkYXRhID0gYXdhaXQgcmZxbVNlcnZpY2UucHJlcGFyZXJmcW1WMlRyYWRlQXN5bmMoXHJcbiAgICAgICAgICAgICAgICBqb2IsXHJcbiAgICAgICAgICAgICAgICAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZShmYWtlQ2xvY2tNcyksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2IpLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IHZhbGlkRUlQNzEyU2lnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdMYXN0TG9va0FjY2VwdGVkLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KGNhbGxkYXRhKS50by5lcXVhbCgnMHh2YWxpZGNhbGxkYXRhJyk7XHJcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnc1swXSkudG8uZGVlcC5lcXVhbCh7XHJcbiAgICAgICAgICAgICAgICAuLi5fam9iLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdQcm9jZXNzaW5nLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzFdKS50by5kZWVwLmVxdWFsKHtcclxuICAgICAgICAgICAgICAgIC4uLl9qb2IsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiB2YWxpZEVJUDcxMlNpZyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nTGFzdExvb2tBY2NlcHRlZCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGl0KCdzdWNjZXNzZnVsbHkgcHJlcGFyZXMgYSBqb2IgaWYgbm8gbGFzdCBsb29rIGlzIG5lY2Vzc2FyeScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogdmFsaWRFSVA3MTJTaWcsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlci50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgX2pvYiA9IF8uY2xvbmVEZWVwKGpvYik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKG9yZGVySGFzaCkpLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTAwMDAwMDAwMCksXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckZpbGxUYWtlclNpZ25lZE90Y09yZGVyQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmVzb2x2ZSgwKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tCbG9ja2NoYWluVXRpbHMuZ2VuZXJhdGVUYWtlclNpZ25lZE90Y09yZGVyQ2FsbERhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgKS50aGVuUmV0dXJuKCcweHZhbGlkY2FsbGRhdGEnKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSA9IG1vY2soUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBzcGllZFJmcW1TZXJ2aWNlID0gc3B5KHJmcW1TZXJ2aWNlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGxkYXRhID0gYXdhaXQgcmZxbVNlcnZpY2UucHJlcGFyZXJmcW1WMlRyYWRlQXN5bmMoXHJcbiAgICAgICAgICAgICAgICBqb2IsXHJcbiAgICAgICAgICAgICAgICAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbmV3IERhdGUoZmFrZUNsb2NrTXMpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9iKS50by5kZWVwLmVxdWFsKF9qb2IpO1xyXG4gICAgICAgICAgICBleHBlY3QoY2FsbGRhdGEpLnRvLmVxdWFsKCcweHZhbGlkY2FsbGRhdGEnKTtcclxuICAgICAgICAgICAgdmVyaWZ5KHNwaWVkUmZxbVNlcnZpY2UuY2hlY2tKb2JQcmVwcm9jZXNzaW5nQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLm5ldmVyKCk7XHJcbiAgICAgICAgICAgIHZlcmlmeShzcGllZFJmcW1TZXJ2aWNlLmNoZWNrTGFzdExvb2tBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkubmV2ZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdwcmVwYXJlTWV0YVRyYW5zYWN0aW9uVHJhZGVBc3luYycsICgpID0+IHtcclxuICAgICAgICBpdCgndXBkYXRlcyB0aGUgam9iIGFuZCB0aHJvd3MgdXBvbiB2YWxpZGF0aW9uIGZhaWx1cmUgaWYgYHNob3VsZFZhbGlkYXRlSm9iYCBpcyB0cnVlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2JJZCA9ICdqb2JJZCc7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyZWRKb2IgPSBjcmVhdGVNZWFUcnNhbmN0aW9uSm9iRW50aXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlT25lTWludXRlQWdvUyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbjogJzB4aW5wdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnMHhpbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb246IE1PQ0tfTUVUQV9UUkFOU0FDVElPTixcclxuICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04uZ2V0SGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbjogJzB4b3V0cHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJBZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgam9iSWQsXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBfam9iID0gXy5jbG9uZURlZXAoZXhwaXJlZEpvYik7XHJcbiAgICAgICAgICAgIGNvbnN0IGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrID0gbW9jayhHYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0pO1xyXG4gICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwKS5zaGlmdGVkQnkoR1dFSV9ERUNJTUFMUyksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlKb2JJZEFzeW5jKGpvYklkKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIGdhc1N0YXRpb25BdHRlbmRhbnQ6IGluc3RhbmNlKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UucHJlcGFyZU1ldGFUcmFuc2FjdGlvblRyYWRlQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlZEpvYixcclxuICAgICAgICAgICAgICAgICAgICAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGZha2VDbG9ja01zKSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKCdKb2IgZmFpbGVkIHZhbGlkYXRpb24nKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChleHBpcmVkSm9iKS50by5kZWVwLmVxdWFsKHsgLi4uX2pvYiwgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLkZhaWxlZEV4cGlyZWQgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ2hhbmRsZXMgYW4gZXRoX2NhbGwgZmFpbHVyZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iSWQgPSAnam9iSWQnO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgam9iID0gY3JlYXRlTWVhVHJzYW5jdGlvbkpvYkVudGl0eShcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW46ICcweGlucHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJzB4aW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSGFzaDogTU9DS19NRVRBX1RSQU5TQUNUSU9OLmdldEhhc2goKSxcclxuICAgICAgICAgICAgICAgICAgICBtaW5PdXRwdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW46ICcweG91dHB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyQWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGpvYklkLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBfam9iID0gXy5jbG9uZURlZXAoam9iKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrID0gbW9jayhHYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0pO1xyXG4gICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwKS5zaGlmdGVkQnkoR1dFSV9ERUNJTUFMUyksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlKb2JJZEFzeW5jKGpvYklkKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVqZWN0KG5ldyBFcnJvcignZmFrZSBldGggY2FsbCBmYWlsdXJlJykpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgZ2FzU3RhdGlvbkF0dGVuZGFudDogaW5zdGFuY2UoZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2spLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5wcmVwYXJlTWV0YVRyYW5zYWN0aW9uVHJhZGVBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlLCBuZXcgRGF0ZShmYWtlQ2xvY2tNcykpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignRXRoIGNhbGwgdmFsaWRhdGlvbiBmYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2IpLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLl9qb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLkZhaWxlZEV0aENhbGxGYWlsZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnc2tpcHMgdGhlIGV0aF9jYWxsIGZvciBqb2JzIHdpdGggZXhpc3Rpbmcgc3VibWlzc2lvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gJ2pvYklkJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IGNyZWF0ZU1lYVRyc2FuY3Rpb25Kb2JFbnRpdHkoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuOiAnMHhpbnB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcweGludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbjogTU9DS19NRVRBX1RSQU5TQUNUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkhhc2g6IE1PQ0tfTUVUQV9UUkFOU0FDVElPTi5nZXRIYXNoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuOiAnMHhvdXRwdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlckFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdQcm9jZXNzaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGpvYklkLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGNyZWF0ZU1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSm9iSWQ6IGpvYklkLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJ3N1Ym1pc3Npb25JZCcsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9qb2IgPSBfLmNsb25lRGVlcChqb2IpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2sgPSBtb2NrKEdhc1N0YXRpb25BdHRlbmRhbnRFdGhlcmV1bSk7XHJcbiAgICAgICAgICAgIHdoZW4oZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2suZ2V0RXhwZWN0ZWRUcmFuc2FjdGlvbkdhc1JhdGVBc3luYygpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTApLnNoaWZ0ZWRCeShHV0VJX0RFQ0lNQUxTKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy5maW5kTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeUpvYklkQXN5bmMoam9iSWQpKS50aGVuUmVzb2x2ZShbdHJhbnNhY3Rpb25dKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdlbmVyYXRlTWV0YVRyYW5zYWN0aW9uQ2FsbERhdGEoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXR1cm4oXHJcbiAgICAgICAgICAgICAgICAnMHh2YWxpZGNhbGxkYXRhJyxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIGdhc1N0YXRpb25BdHRlbmRhbnQ6IGluc3RhbmNlKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYWxsZGF0YSA9IGF3YWl0IHJmcW1TZXJ2aWNlLnByZXBhcmVNZXRhVHJhbnNhY3Rpb25UcmFkZUFzeW5jKFxyXG4gICAgICAgICAgICAgICAgam9iLFxyXG4gICAgICAgICAgICAgICAgJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbmV3IERhdGUoZmFrZUNsb2NrTXMpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9iKS50by5kZWVwLmVxdWFsKF9qb2IpO1xyXG4gICAgICAgICAgICBleHBlY3QoY2FsbGRhdGEpLnRvLmVxdWFsKCcweHZhbGlkY2FsbGRhdGEnKTtcclxuICAgICAgICAgICAgdmVyaWZ5KG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkubmV2ZXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3N1Y2Nlc3NmdWxseSBwcmVwYXJlcyBhIGpvYiBpZiBgc2hvdWxkVmFsaWRhdGVKb2JgIGlzIHRydWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gJ2pvYklkJztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IGNyZWF0ZU1lYVRyc2FuY3Rpb25Kb2JFbnRpdHkoXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuOiAnMHhpbnB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcweGludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbjogTU9DS19NRVRBX1RSQU5TQUNUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkhhc2g6IE1PQ0tfTUVUQV9UUkFOU0FDVElPTi5nZXRIYXNoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuOiAnMHhvdXRwdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlckFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBqb2JJZCxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgX2pvYiA9IF8uY2xvbmVEZWVwKGpvYik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayA9IG1vY2soR2FzU3RhdGlvbkF0dGVuZGFudEV0aGVyZXVtKTtcclxuICAgICAgICAgICAgd2hlbihnYXNTdGF0aW9uQXR0ZW5kYW50TW9jay5nZXRFeHBlY3RlZFRyYW5zYWN0aW9uR2FzUmF0ZUFzeW5jKCkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMCkuc2hpZnRlZEJ5KEdXRUlfREVDSU1BTFMpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogTWV0YVRyYW5zYWN0aW9uSm9iRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy5maW5kTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeUpvYklkQXN5bmMoam9iSWQpKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAoam9iQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKGpvYkFyZykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmVzdGltYXRlR2FzRm9yQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKDApO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2VuZXJhdGVNZXRhVHJhbnNhY3Rpb25DYWxsRGF0YShhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJldHVybihcclxuICAgICAgICAgICAgICAgICcweHZhbGlkY2FsbGRhdGEnLFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgZ2FzU3RhdGlvbkF0dGVuZGFudDogaW5zdGFuY2UoZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2spLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGxkYXRhID0gYXdhaXQgcmZxbVNlcnZpY2UucHJlcGFyZU1ldGFUcmFuc2FjdGlvblRyYWRlQXN5bmMoXHJcbiAgICAgICAgICAgICAgICBqb2IsXHJcbiAgICAgICAgICAgICAgICAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZShmYWtlQ2xvY2tNcyksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGV4cGVjdChqb2IpLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV4cGVjdChjYWxsZGF0YSkudG8uZXF1YWwoJzB4dmFsaWRjYWxsZGF0YScpO1xyXG4gICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnY2hlY2tMYXN0TG9va0FzeW5jJywgKCkgPT4ge1xyXG4gICAgICAgIGl0KCdzaG91bGQgY2FsbCBgZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luY2Agd2hlbiBgc2hvdWxkQ2hlY2tBbGxvd2FuY2VgIGlzIHRydWUgYW5kIHRocm93cyB3aGVuIGJhbGFuY2UgY2hlY2sgZmFpbHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlci50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nUHJvY2Vzc2luZyxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBfam9iID0gXy5jbG9uZURlZXAoam9iKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzOiBSZnFtSm9iRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW25ldyBCaWdOdW1iZXIoMTAwKV0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gbW9jayhSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlOiBpbnN0YW5jZShtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UuY2hlY2tMYXN0TG9va0FzeW5jKGpvYiwgJzB4d29ya2VyYWRkcmVzcycsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignT3JkZXIgZmFpbGVkIHByZS1zaWduIHZhbGlkYXRpb24nKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnc1swXSkudG8uZGVlcC5lcXVhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuRmFpbGVkUHJlc2lnblZhbGlkYXRpb25GYWlsZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2IpLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLl9qb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLkZhaWxlZFByZXNpZ25WYWxpZGF0aW9uRmFpbGVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkobW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRNaW5PZkJhbGFuY2VzQW5kQWxsb3dhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS5vbmNlKCk7XHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkobW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRUb2tlbkJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSkpLm5ldmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBjYWxsIGBnZXRUb2tlbkJhbGFuY2VzQXN5bmNgIHdoZW4gYHNob3VsZENoZWNrQWxsb3dhbmNlYCBpcyBmYWxzZSBhbmQgdGhyb3dzIHdoZW4gYmFsYW5jZSBjaGVjayBmYWlscycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdQcm9jZXNzaW5nLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9qb2IgPSBfLmNsb25lRGVlcChqb2IpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3M6IFJmcW1Kb2JFbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcChqb2JBcmcpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRUb2tlbkJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtuZXcgQmlnTnVtYmVyKDEwMCldKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSA9IG1vY2soUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDUpLFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLmNoZWNrTGFzdExvb2tBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKCdPcmRlciBmYWlsZWQgcHJlLXNpZ24gdmFsaWRhdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzBdKS50by5kZWVwLmVxdWFsKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5fam9iLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRQcmVzaWduVmFsaWRhdGlvbkZhaWxlZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYikudG8uZGVlcC5lcXVhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuRmFpbGVkUHJlc2lnblZhbGlkYXRpb25GYWlsZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkobW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRUb2tlbkJhbGFuY2VzQXN5bmMoYW55dGhpbmcoKSkpLm9uY2UoKTtcclxuICAgICAgICAgICAgICAgIHZlcmlmeShtb2NrQmxvY2tjaGFpblV0aWxzLmdldE1pbk9mQmFsYW5jZXNBbmRBbGxvd2FuY2VzQXN5bmMoYW55dGhpbmcoKSkpLm5ldmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCB0aHJvdyB3aGVuIHRha2VyIHNpZ25hdHVyZSBpcyBub3QgcHJlc2VudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdQcm9jZXNzaW5nLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9qb2IgPSBfLmNsb25lRGVlcChqb2IpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3M6IFJmcW1Kb2JFbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcChqb2JBcmcpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRNaW5PZkJhbGFuY2VzQW5kQWxsb3dhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSA9IG1vY2soUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLmNoZWNrTGFzdExvb2tBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ09yZGVyIGZhaWxlZCBwcmUtc2lnbiB2YWxpZGF0aW9uIGR1ZSB0byBlbXB0eSB0YWtlclNpZ25hdHVyZScpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzWzBdKS50by5kZWVwLmVxdWFsKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5fam9iLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5GYWlsZWRQcmVzaWduVmFsaWRhdGlvbkZhaWxlZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYikudG8uZGVlcC5lcXVhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4uX2pvYixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuRmFpbGVkUHJlc2lnblZhbGlkYXRpb25GYWlsZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnaGFuZGxlcyBkZWNsaW5lIHRvIHNpZ24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyKSxcclxuICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJTaWduYXR1cmU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5QW5kTm9uY2U6IE90Y09yZGVyLmVuY29kZUV4cGlyeUFuZE5vbmNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlci50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgX2pvYiA9IF8uY2xvbmVEZWVwKGpvYik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKCcweG9yZGVyaGFzaCcpKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZFYyUXVvdGVCeU9yZGVySGFzaEFzeW5jKCcweG9yZGVyaGFzaCcpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgIG5ldyBSZnFtVjJRdW90ZUVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IGpvYi5jaGFpbklkLFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZTogam9iLmZlZSxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogam9iLm1ha2VyVXJpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiBqb2Iub3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzOiBSZnFtSm9iRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgd2hlbihtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuc2lnblYyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKHVuZGVmaW5lZCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtb2NrQ2FjaGVDbGllbnQgPSBtb2NrKENhY2hlQ2xpZW50KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZnFNYWtlck1hbmFnZXIgPSBtb2NrKFJmcU1ha2VyTWFuYWdlcik7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1JmcU1ha2VyTWFuYWdlci5maW5kTWFrZXJJZFdpdGhSZnFtVXJpKGpvYi5tYWtlclVyaSkpLnRoZW5SZXR1cm4oJ21ha2VySWQxJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHF1b3RlU2VydmVyQ2xpZW50OiBpbnN0YW5jZShtb2NrUXVvdGVTZXJ2ZXJDbGllbnQpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgICAgICByZnFNYWtlck1hbmFnZXI6IGluc3RhbmNlKG1vY2tSZnFNYWtlck1hbmFnZXIpLFxyXG4gICAgICAgICAgICAgICAgY2FjaGVDbGllbnQ6IGluc3RhbmNlKG1vY2tDYWNoZUNsaWVudCksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLmNoZWNrTGFzdExvb2tBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ01hcmtldCBNYWtlciBkZWNsaW5lZCB0byBzaWduJyk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoam9iKS50by5kZWVwLmVxdWFsKHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5fam9iLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuRmFpbGVkTGFzdExvb2tEZWNsaW5lZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlcmlmeShcclxuICAgICAgICAgICAgICAgICAgICBtb2NrQ2FjaGVDbGllbnQuYWRkTWFrZXJUb0Nvb2xkb3duQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdtYWtlcklkMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5jaGFpbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXIub3JkZXIubWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLm9yZGVyLm9yZGVyLnRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkub25jZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlcmlmeShcclxuICAgICAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy53cml0ZVYyTGFzdExvb2tSZWplY3Rpb25Db29sZG93bkFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWFrZXJJZDEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2IuY2hhaW5JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLm9yZGVyLm9yZGVyLm1ha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5vcmRlci5vcmRlci50YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICApLm9uY2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnaGFuZGxlcyBhIHNpZ25hdHVyZSBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0VucXVldWVkLFxyXG4gICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IF9qb2IgPSBfLmNsb25lRGVlcChqb2IpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYygnMHhvcmRlcmhhc2gnKSkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQgPSBtb2NrKFF1b3RlU2VydmVyQ2xpZW50KTtcclxuICAgICAgICAgICAgd2hlbihtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuc2lnblYyQXN5bmMoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSkpLnRoZW5SZWplY3QoXHJcbiAgICAgICAgICAgICAgICBuZXcgRXJyb3IoJ2Zha2UgdGltZW91dCcpLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0TWluT2ZCYWxhbmNlc0FuZEFsbG93YW5jZXNBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHF1b3RlU2VydmVyQ2xpZW50OiBpbnN0YW5jZShtb2NrUXVvdGVTZXJ2ZXJDbGllbnQpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLmNoZWNrTGFzdExvb2tBc3luYyhqb2IsICcweHdvcmtlcmFkZHJlc3MnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdC5mYWlsKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ0pvYiBmYWlsZWQgZHVyaW5nIG1hcmtldCBtYWtlciBzaWduIGF0dGVtcHQnKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2IpLnRvLmRlZXAuZXF1YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLl9qb2IsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLkZhaWxlZFNpZ25GYWlsZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgnaGFuZGxlcyBzaWduZXIgaXMgbm90IHRoZSBtYWtlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIpLFxyXG4gICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnJyxcclxuICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICBtYWtlclNpZ25hdHVyZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKGZha2VGaXZlTWludXRlc0xhdGVyLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiAnMTAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogJzEwMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyaWZ5aW5nQ29udHJhY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nRW5xdWV1ZWQsXHJcbiAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzOiBSZnFtSm9iRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKG9yZGVySGFzaCkpLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1F1b3RlU2VydmVyQ2xpZW50ID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRFSVA3MTJTaWcgPSBfLmNsb25lRGVlcCh2YWxpZEVJUDcxMlNpZyk7XHJcbiAgICAgICAgICAgIGludmFsaWRFSVA3MTJTaWcuciA9ICcweGRjMTU4ZjdiNTNiOTQwODYzYmM3YjAwMTU1MmE5MDI4MmU1MTAzM2YyOWI3M2Q0NGEyNzAxYmQxNmZhYTE5ZDMnO1xyXG4gICAgICAgICAgICB3aGVuKG1vY2tRdW90ZVNlcnZlckNsaWVudC5zaWduVjJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoaW52YWxpZEVJUDcxMlNpZyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRNaW5PZkJhbGFuY2VzQW5kQWxsb3dhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSA9IG1vY2soUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKTtcclxuICAgICAgICAgICAgd2hlbihtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLmdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcXVvdGVTZXJ2ZXJDbGllbnQ6IGluc3RhbmNlKG1vY2tRdW90ZVNlcnZlckNsaWVudCksXHJcbiAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgcmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlOiBpbnN0YW5jZShtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UuY2hlY2tMYXN0TG9va0FzeW5jKGpvYiwgJzB4d29ya2VyYWRkcmVzcycsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGUubWVzc2FnZSkudG8uY29udGFpbignSW52YWxpZCBvcmRlciBzaWduZXIgYWRkcmVzcycpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmRlZXAuZXF1YWwoUmZxbUpvYlN0YXR1cy5GYWlsZWRTaWduRmFpbGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpdCgndXBkYXRlcyBtYXJrZXQgbWFrZXIgc2lnbmF0dXJlcyBtaXNzaW5nIGJ5dGVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihmYWtlRml2ZU1pbnV0ZXNMYXRlciksXHJcbiAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBtYWtlclVyaTogJ2h0dHA6Ly9mb28uYmFyJyxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoZmFrZUZpdmVNaW51dGVzTGF0ZXIudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnMHh0YWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtT3JkZXJUeXBlcy5PdGMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdFbnF1ZXVlZCxcclxuICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBfam9iID0gXy5jbG9uZURlZXAoam9iKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgY29uc3QgbW9ja1F1b3RlU2VydmVyQ2xpZW50ID0gbW9jayhRdW90ZVNlcnZlckNsaWVudCk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1F1b3RlU2VydmVyQ2xpZW50LnNpZ25WMkFzeW5jKGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShtaXNzaW5nQnl0ZVNpZyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5pc1ZhbGlkT3JkZXJTaWduZXJBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRNaW5PZkJhbGFuY2VzQW5kQWxsb3dhbmNlc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwMDAwMDAwMDApLFxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgIG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JGaWxsVGFrZXJTaWduZWRPdGNPcmRlckFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJlc29sdmUoMCk7XHJcbiAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLmdlbmVyYXRlVGFrZXJTaWduZWRPdGNPcmRlckNhbGxEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBhbnl0aGluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFueXRoaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgYW55dGhpbmcoKSxcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICkudGhlblJldHVybignMHh2YWxpZGNhbGxkYXRhJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UgPSBtb2NrKFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSk7XHJcbiAgICAgICAgICAgIHdoZW4obW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZS5nZXRFUkMyME93bmVyQmFsYW5jZXNBc3luYyhhbnl0aGluZygpLCBhbnl0aGluZygpKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMDAwMDAwMDAwKSxcclxuICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHF1b3RlU2VydmVyQ2xpZW50OiBpbnN0YW5jZShtb2NrUXVvdGVTZXJ2ZXJDbGllbnQpLFxyXG4gICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIHJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZTogaW5zdGFuY2UobW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2UuY2hlY2tMYXN0TG9va0FzeW5jKGpvYiwgJzB4d29ya2VyYWRkcmVzcycsIHRydWUpO1xyXG4gICAgICAgICAgICBleHBlY3Qoam9iKS50by5kZWVwLmVxdWFsKHtcclxuICAgICAgICAgICAgICAgIC4uLl9qb2IsXHJcbiAgICAgICAgICAgICAgICBsYXN0TG9va1Jlc3VsdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1ha2VyU2lnbmF0dXJlOiBwYWRTaWduYXR1cmUobWlzc2luZ0J5dGVTaWcpLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdMYXN0TG9va0FjY2VwdGVkLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdzdWJtaXRUb0NoYWluQXN5bmMnLCAoKSA9PiB7XHJcbiAgICAgICAgZGVzY3JpYmUoJ2tpbmQgaXMgYHJmcW1fdjJfam9iYCcsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoJ3N1Ym1pdHMgYSB0cmFuc2FjdGlvbiBzdWNjZXNzZnVsbHkgd2hlbiB0aGVyZSBpcyBubyBwcmV2aW91cyB0cmFuc2FjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vd1MgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gT05FX1NFQ09ORF9NUyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIobm93UyArIDYwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihub3dTICsgNjAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uUmVxdWVzdDogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVxdWVzdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvblJlY2VpcHQ6IHByb3ZpZGVycy5UcmFuc2FjdGlvblJlY2VpcHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweHRvJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHhmcm9tJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc1VzZWQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBsb2dzQmxvb206ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogJzB4YmxvY2toYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uczogMyxcclxuICAgICAgICAgICAgICAgICAgICBjdW11bGF0aXZlR2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlR2FzUHJpY2U6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5emFudGl1bTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrTm9uY2UgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrID0gbW9jayhHYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihnYXNTdGF0aW9uQXR0ZW5kYW50TW9jay5nZXRFeHBlY3RlZFRyYW5zYWN0aW9uR2FzUmF0ZUFzeW5jKCkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTApLnNoaWZ0ZWRCeShHV0VJX0RFQ0lNQUxTKSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3M6IFJmcW1Kb2JFbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKGpvYkFyZykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3cml0ZVYyUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblRvRGJDYWxsZWRBcmdzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMud3JpdGVWMlJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25Ub0RiQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKFxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jICh0cmFuc2FjdGlvbkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZVYyUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblRvRGJDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAodHJhbnNhY3Rpb25BcmcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uY2xvbmVEZWVwKG1vY2tUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbkJ5VHJhbnNhY3Rpb25IYXNoQXN5bmMoJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKF8uY2xvbmVEZWVwKG1vY2tUcmFuc2FjdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5W11bXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAodHJhbmFjdGlvbkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKHRyYW5hY3Rpb25BcmcpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXROb25jZUFzeW5jKCcweHdvcmtlcmFkZHJlc3MnKSkudGhlblJlc29sdmUobW9ja05vbmNlKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgxMDApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLnRyYW5zZm9ybVR4RGF0YVRvVHJhbnNhY3Rpb25SZXF1ZXN0KGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmV0dXJuKG1vY2tUcmFuc2FjdGlvblJlcXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLnNpZ25UcmFuc2FjdGlvbkFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmVkVHJhbnNhY3Rpb246ICdzaWduZWRUcmFuc2FjdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0RXhjaGFuZ2VQcm94eUFkZHJlc3MoKSkudGhlblJldHVybignMHhleGNoYW5nZXByb3h5YWRkcmVzcycpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLnN1Ym1pdFNpZ25lZFRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgICAgICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1RyYW5zYWN0aW9uUmVjZWlwdCxcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEN1cnJlbnRCbG9ja0FzeW5jKCkpLnRoZW5SZXNvbHZlKDQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldERlY29kZWRSZnFPcmRlckZpbGxFdmVudExvZ0Zyb21Mb2dzKGFueXRoaW5nKCkpKS50aGVuUmV0dXJuKHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nSW5kZXg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JbmRleDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9waWNzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5GaWxsZWRBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTIzNCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvb2w6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuRmlsbGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDUpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBnYXNTdGF0aW9uQXR0ZW5kYW50OiBpbnN0YW5jZShnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayksXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gYXN5bmMgKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzOiBTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cz86IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzICE9PSBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdKb2JTdGF0dXMgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VibWlzc2lvbkNvbnRleHQudHJhZGVTdWJtaXNzaW9uQ29udGV4dFN0YXR1c1RvSm9iU3RhdHVzKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLnN0YXR1cyA9IG5ld0pvYlN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGpvYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnN1Ym1pdFRvQ2hhaW5Bc3luYyh7XHJcbiAgICAgICAgICAgICAgICAgICAga2luZDogam9iLmtpbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBjYWxsZGF0YTogJzB4Y2FsbGRhdGEnLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogam9iLmV4cGlyeSxcclxuICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25UeXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBvblN1Ym1pc3Npb25Db250ZXh0U3RhdHVzVXBkYXRlOiBjYWxsYmFjayxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmVyaWZ5KG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBldGhfY3JlYXRlQWNjZXNzTGlzdCBzaG91bGQgbm90IGJlIGNhbGxlZCB3aGVuIG5vdCBlbmFibGVkXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkobW9ja0Jsb2NrY2hhaW5VdGlscy5jcmVhdGVBY2Nlc3NMaXN0Rm9yQXN5bmMoYW55dGhpbmcoKSkpLm5ldmVyKCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHdyaXRlVjJSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVG9EYkNhbGxlZEFyZ3NbMF0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlByZXN1Ym1pdCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzWzBdWzBdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWJtaXR0ZWQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJnc1sxXVswXS5zdGF0dXMpLnRvLmVxdWFsKFxyXG4gICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdChcImlnbm9yZXMgYW4gZXhpc3RpbmcgUFJFU1VCTUlUIHRyYW5zYWN0aW9uIHdoaWNoIGlzbid0IGZvdW5kIGluIHRoZSBtZW1wb29sIG9yIG9uIGNoYWluXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vd1MgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gT05FX1NFQ09ORF9NUyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIobm93UyArIDYwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihub3dTICsgNjAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJzB4bWFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6ICcxMDAwMDAwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweG1ha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcweHRha2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiAnMTAwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4dGFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlpbmdDb250cmFjdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1PcmRlclR5cGVzLk90YyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1ByZXN1Ym1pdFRyYW5zYWN0aW9uID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgxMjMzKSxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuUHJlc3VibWl0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uUmVxdWVzdDogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVxdWVzdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uID0gbmV3IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvblJlY2VpcHQ6IHByb3ZpZGVycy5UcmFuc2FjdGlvblJlY2VpcHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc1VzZWQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBsb2dzQmxvb206ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogJzB4YmxvY2toYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uczogMyxcclxuICAgICAgICAgICAgICAgICAgICBjdW11bGF0aXZlR2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlR2FzUHJpY2U6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5emFudGl1bTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrTm9uY2UgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrID0gbW9jayhHYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihnYXNTdGF0aW9uQXR0ZW5kYW50TW9jay5nZXRFeHBlY3RlZFRyYW5zYWN0aW9uR2FzUmF0ZUFzeW5jKCkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTApLnNoaWZ0ZWRCeShHV0VJX0RFQ0lNQUxTKSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW21vY2tQcmVzdWJtaXRUcmFuc2FjdGlvbl0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3M6IFJmcW1Kb2JFbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKGpvYkFyZykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3cml0ZVYyUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblRvRGJDYWxsZWRBcmdzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMud3JpdGVWMlJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25Ub0RiQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKFxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jICh0cmFuc2FjdGlvbkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZVYyUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblRvRGJDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAodHJhbnNhY3Rpb25BcmcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uY2xvbmVEZWVwKG1vY2tUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbkJ5VHJhbnNhY3Rpb25IYXNoQXN5bmMoJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKF8uY2xvbmVEZWVwKG1vY2tUcmFuc2FjdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzOiBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlbXVtdID0gW107XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jICh0cmFuYWN0aW9uQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAodHJhbmFjdGlvbkFyZykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBtb2NrIHJlc3BvbnNlIGluZGljYXRlcyB0aGF0IHRoZSBwcmVzdWJtaXQgdHJhbnNhY3Rpb24gY2FuJ3QgYmUgZm91bmRcclxuICAgICAgICAgICAgICAgIC8vIG9uIGNoYWluIG9yIGluIHRoZSBtZW1wb29sXHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0VHJhbnNhY3Rpb25Bc3luYygnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnKSkudGhlblJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0Tm9uY2VBc3luYygnMHh3b3JrZXJhZGRyZXNzJykpLnRoZW5SZXNvbHZlKG1vY2tOb25jZSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoMTAwKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy50cmFuc2Zvcm1UeERhdGFUb1RyYW5zYWN0aW9uUmVxdWVzdChhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJldHVybihtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5zaWduVHJhbnNhY3Rpb25Bc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25lZFRyYW5zYWN0aW9uOiAnc2lnbmVkVHJhbnNhY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEV4Y2hhbmdlUHJveHlBZGRyZXNzKCkpLnRoZW5SZXR1cm4oJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5zdWJtaXRTaWduZWRUcmFuc2FjdGlvbkFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRSZWNlaXB0c0FzeW5jKGRlZXBFcXVhbChbJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJ10pKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUcmFuc2FjdGlvblJlY2VpcHQsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRDdXJyZW50QmxvY2tBc3luYygpKS50aGVuUmVzb2x2ZSg0KTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXREZWNvZGVkUmZxT3JkZXJGaWxsRXZlbnRMb2dGcm9tTG9ncyhhbnl0aGluZygpKSkudGhlblJldHVybih7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0luZGV4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja0hhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcGljczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRmlsbGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEyMzQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb29sOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkZpbGxlZEFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzU3RhdGlvbkF0dGVuZGFudDogaW5zdGFuY2UoZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGFzeW5jIChcclxuICAgICAgICAgICAgICAgICAgICBuZXdTdWJtaXNzaW9uQ29udGV4dFN0YXR1czogU3VibWlzc2lvbkNvbnRleHRTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkU3VibWlzc2lvbkNvbnRleHRTdGF0dXM/OiBTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyxcclxuICAgICAgICAgICAgICAgICk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyAhPT0gb2xkU3VibWlzc2lvbkNvbnRleHRTdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Sm9iU3RhdHVzID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1Ym1pc3Npb25Db250ZXh0LnRyYWRlU3VibWlzc2lvbkNvbnRleHRTdGF0dXNUb0pvYlN0YXR1cyhuZXdTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpvYi5zdGF0dXMgPSBuZXdKb2JTdGF0dXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhqb2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5zdWJtaXRUb0NoYWluQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IGpvYi5raW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGRhdGE6ICcweGNhbGxkYXRhJyxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IGpvYi5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uVHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25TdWJtaXNzaW9uQ29udGV4dFN0YXR1c1VwZGF0ZTogY2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBldGhfY3JlYXRlQWNjZXNzTGlzdCBzaG91bGQgbm90IGJlIGNhbGxlZCB3aGVuIG5vdCBlbmFibGVkXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkobW9ja0Jsb2NrY2hhaW5VdGlscy5jcmVhdGVBY2Nlc3NMaXN0Rm9yQXN5bmMoYW55dGhpbmcoKSkpLm5ldmVyKCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQpO1xyXG4gICAgICAgICAgICAgICAgLy8gRXhwZWN0YXRpb25zIGFyZSB0aGUgc2FtZSBhcyBpZiB0aGUgcHJlc3VibWl0IHRyYW5zYWN0aW9uIG5ldmVyIGV4aXN0ZWRcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh3cml0ZVYyUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblRvRGJDYWxsZWRBcmdzWzBdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5QcmVzdWJtaXQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJnc1swXVswXS5zdGF0dXMpLnRvLmVxdWFsKFxyXG4gICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3NbMV1bMF0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoXCJtYXJrcyBhIFBSRVNVQk1JVCBqb2IgYXMgZXhwaXJlZCB3aGVuIGV4aXN0aW5nIHRyYW5zYWN0aW9ucyBhcmVuJ3QgZm91bmQgaW4gXFxcclxuICAgICAgICAgICAgdGhlIG1lbXBvb2wgb3Igb24gY2hhaW4gYW5kIHRoZSBleHBpcmF0aW9uIHRpbWUgaGFzIHBhc3NlZFwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3dTID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIE9ORV9TRUNPTkRfTVMpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gbmV3IFJmcW1WMkpvYkVudGl0eSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYWZmaWxpYXRlQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKG5vd1MgLSA2MCksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihub3dTIC0gNjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nTGFzdExvb2tBY2NlcHRlZCxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrUHJlc3VibWl0VHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKDEyMzMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5QcmVzdWJtaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZXF1ZXN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uUmVjZWlwdDogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVjZWlwdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3NCbG9vbTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBsb2dzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgYnl6YW50aXVtOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tOb25jZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2sgPSBtb2NrKEdhc1N0YXRpb25BdHRlbmRhbnRFdGhlcmV1bSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMCkuc2hpZnRlZEJ5KEdXRUlfREVDSU1BTFMpLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbbW9ja1ByZXN1Ym1pdFRyYW5zYWN0aW9uXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogUmZxbUpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdyaXRlVjJSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVG9EYkNhbGxlZEFyZ3M6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy53cml0ZVYyUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblRvRGJBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgKHRyYW5zYWN0aW9uQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVjJSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVG9EYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcCh0cmFuc2FjdGlvbkFyZykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uQnlUcmFuc2FjdGlvbkhhc2hBc3luYygnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3M6IFJmcW1WMlRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eVtdW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKHRyYW5hY3Rpb25BcmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcCh0cmFuYWN0aW9uQXJnKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1vY2sgcmVzcG9uc2UgaW5kaWNhdGVzIHRoYXQgdGhlIHByZXN1Ym1pdCB0cmFuc2FjdGlvbiBjYW4ndCBiZSBmb3VuZFxyXG4gICAgICAgICAgICAgICAgLy8gb24gY2hhaW4gb3IgaW4gdGhlIG1lbXBvb2xcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRUcmFuc2FjdGlvbkFzeW5jKCcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcpKS50aGVuUmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXROb25jZUFzeW5jKCcweHdvcmtlcmFkZHJlc3MnKSkudGhlblJlc29sdmUobW9ja05vbmNlKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgxMDApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLnRyYW5zZm9ybVR4RGF0YVRvVHJhbnNhY3Rpb25SZXF1ZXN0KGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmV0dXJuKG1vY2tUcmFuc2FjdGlvblJlcXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLnNpZ25UcmFuc2FjdGlvbkFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmVkVHJhbnNhY3Rpb246ICdzaWduZWRUcmFuc2FjdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0RXhjaGFuZ2VQcm94eUFkZHJlc3MoKSkudGhlblJldHVybignMHhleGNoYW5nZXByb3h5YWRkcmVzcycpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLnN1Ym1pdFNpZ25lZFRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgICAgICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1RyYW5zYWN0aW9uUmVjZWlwdCxcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEN1cnJlbnRCbG9ja0FzeW5jKCkpLnRoZW5SZXNvbHZlKDQpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldERlY29kZWRSZnFPcmRlckZpbGxFdmVudExvZ0Zyb21Mb2dzKGFueXRoaW5nKCkpKS50aGVuUmV0dXJuKHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nSW5kZXg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JbmRleDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9waWNzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBhcmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5GaWxsZWRBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTIzNCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvb2w6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuRmlsbGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDUpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBnYXNTdGF0aW9uQXR0ZW5kYW50OiBpbnN0YW5jZShnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayksXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBhc3luYyAoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXM6IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzPzogU3VibWlzc2lvbkNvbnRleHRTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXMgIT09IG9sZFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0pvYlN0YXR1cyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdWJtaXNzaW9uQ29udGV4dC50cmFkZVN1Ym1pc3Npb25Db250ZXh0U3RhdHVzVG9Kb2JTdGF0dXMobmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iuc3RhdHVzID0gbmV3Sm9iU3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoam9iKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2Uuc3VibWl0VG9DaGFpbkFzeW5jKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2luZDogam9iLmtpbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZGF0YTogJzB4Y2FsbGRhdGEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnk6IGpvYi5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGpvYi5vcmRlckhhc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25UeXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWJtaXNzaW9uQ29udGV4dFN0YXR1c1VwZGF0ZTogY2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0LmZhaWwoKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QoZS5tZXNzYWdlKS50by5jb250YWluKCdFeGNlZWQgZXhwaXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXRoX2NyZWF0ZUFjY2Vzc0xpc3Qgc2hvdWxkIG5vdCBiZSBjYWxsZWQgd2hlbiBub3QgZW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgIHZlcmlmeShtb2NrQmxvY2tjaGFpblV0aWxzLmNyZWF0ZUFjY2Vzc0xpc3RGb3JBc3luYyhhbnl0aGluZygpKSkubmV2ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5GYWlsZWRFeHBpcmVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgncmVjb3ZlcnMgYSBQUkVTVUJNSVQgdHJhbnNhY3Rpb24gd2hpY2ggYWN0dWFsbHkgc3VibWl0dGVkJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm93UyA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyBPTkVfU0VDT05EX01TKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihub3dTICsgNjAwKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKG5vd1MgKyA2MDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nTGFzdExvb2tBY2NlcHRlZCxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrUHJlc3VibWl0VHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKDEyMzMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5QcmVzdWJtaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvblJlY2VpcHQ6IHByb3ZpZGVycy5UcmFuc2FjdGlvblJlY2VpcHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5emFudGl1bTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3NCbG9vbTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMixcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZXNwb25zZTogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc0xpbWl0OiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBoYXNoOiAnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEV0aGVyc0JpZ051bWJlci5mcm9tKDApLFxyXG4gICAgICAgICAgICAgICAgICAgIHdhaXQ6IChfY29uZmlybWF0aW9uczogbnVtYmVyIHwgdW5kZWZpbmVkKSA9PiBQcm9taXNlLnJlc29sdmUobW9ja1RyYW5zYWN0aW9uUmVjZWlwdCksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja01pbmVkQmxvY2s6IHByb3ZpZGVycy5CbG9jayA9IHtcclxuICAgICAgICAgICAgICAgICAgICBfZGlmZmljdWx0eTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogMixcclxuICAgICAgICAgICAgICAgICAgICBleHRyYURhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc0xpbWl0OiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBnYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBoYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmVyOiAnMHhtaW5lcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6ICcweDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiAyMSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRIYXNoOiAnMHhwYXJlbnRibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogMTIzNDUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25zOiBbJzB4cHJlc3VibWl0dHJhbnNhY3Rpb25oYXNoJ10sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja05vbmNlID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayA9IG1vY2soR2FzU3RhdGlvbkF0dGVuZGFudEV0aGVyZXVtKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2suZ2V0RXhwZWN0ZWRUcmFuc2FjdGlvbkdhc1JhdGVBc3luYygpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwKS5zaGlmdGVkQnkoR1dFSV9ERUNJTUFMUyksXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5T3JkZXJIYXNoQXN5bmMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFttb2NrUHJlc3VibWl0VHJhbnNhY3Rpb25dKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJnczogUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5W11bXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAodHJhbmFjdGlvbkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKHRyYW5hY3Rpb25BcmcpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbW9jayByZXNwb25zZSBpbmRpY2F0ZXMgdGhhdCB0aGUgdHJhbnNhY3Rpb24gaXMgcHJlc2VudCBpbiB0aGUgbWVtcG9vbFxyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFRyYW5zYWN0aW9uQXN5bmMoJzB4cHJlc3VibWl0dHJhbnNhY3Rpb25oYXNoJykpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUcmFuc2FjdGlvblJlc3BvbnNlLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXROb25jZUFzeW5jKCcweHdvcmtlcmFkZHJlc3MnKSkudGhlblJlc29sdmUobW9ja05vbmNlKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVqZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBFcnJvcignZXN0aW1hdGVHYXNGb3JBc3luYyBjYWxsZWQgZHVyaW5nIHJlY292ZXJ5JyksXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1RyYW5zYWN0aW9uUmVjZWlwdCxcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEJsb2NrQXN5bmMoJzB4YmxvY2toYXNoJykpLnRoZW5SZXNvbHZlKG1vY2tNaW5lZEJsb2NrKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRDdXJyZW50QmxvY2tBc3luYygpKS50aGVuUmVzb2x2ZSg0KTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXREZWNvZGVkUmZxT3JkZXJGaWxsRXZlbnRMb2dGcm9tTG9ncyhhbnl0aGluZygpKSkudGhlblJldHVybih7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0luZGV4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja0hhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcGljczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRmlsbGVkQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEyMzQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb29sOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkZpbGxlZEFtb3VudDogbmV3IEJpZ051bWJlcig1KSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzU3RhdGlvbkF0dGVuZGFudDogaW5zdGFuY2UoZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gYXN5bmMgKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzOiBTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cz86IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzICE9PSBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdKb2JTdGF0dXMgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VibWlzc2lvbkNvbnRleHQudHJhZGVTdWJtaXNzaW9uQ29udGV4dFN0YXR1c1RvSm9iU3RhdHVzKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLnN0YXR1cyA9IG5ld0pvYlN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGpvYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5zdWJtaXRUb0NoYWluQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IGpvYi5raW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGRhdGE6ICcweGNhbGxkYXRhJyxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IGpvYi5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uVHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25TdWJtaXNzaW9uQ29udGV4dFN0YXR1c1VwZGF0ZTogY2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBldGhfY3JlYXRlQWNjZXNzTGlzdCBzaG91bGQgbm90IGJlIGNhbGxlZCB3aGVuIG5vdCBlbmFibGVkXHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkobW9ja0Jsb2NrY2hhaW5VdGlscy5jcmVhdGVBY2Nlc3NMaXN0Rm9yQXN5bmMoYW55dGhpbmcoKSkpLm5ldmVyKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBMb2dpYyBzaG91bGQgZmlyc3QgY2hlY2sgdG8gc2VlIGlmIHRoZSB0cmFuc2FjdGlvbiB3YXMgYWN0dWFsbHkgc2VudC5cclxuICAgICAgICAgICAgICAgIC8vIElmIGl0IHdhcyAoYW5kIGl0IGlzIGJlaW5nIG1vY2sgc28gaW4gdGhpcyB0ZXN0KSB0aGVuIHRoZSBsb2dpYyBmaXJzdFxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlcyB0aGUgc3RhdHVzIG9mIHRoZSB0cmFuc2FjdGlvbiB0byBcIlN1Ym1pdHRlZFwiXHJcbiAgICAgICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzWzBdWzBdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWJtaXR0ZWQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGxvZ2ljIHRoZW4gZW50ZXJzIHRoZSB3YXRjaCBsb29wLiBPbiB0aGUgZmlyc3QgY2hlY2ssIGEgdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgIC8vIHJlY2VpcHQgZXhpc3RzIGZvciB0aGlzIHRyYW5zYWN0aW9uIGFuZCBpdCB3aWxsIGJlIG1hcmtlZCBcImNvbmZpcm1lZFwiXHJcbiAgICAgICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzWzFdWzBdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KGpvYi5zdGF0dXMpLnRvLmVxdWFsKFJmcW1Kb2JTdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnZmluYWxpemVzIGEgam9iIHRvIEZBSUxFRF9FWFBJUkVEIG9uY2UgdGhlIGV4cGlyYXRpb24gd2luZG93IGhhcyBwYXNzZWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3dTID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIE9ORV9TRUNPTkRfTVMpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmluZXR5U2Vjb25kc0FnbyA9IG5vd1MgLSAxMDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBuZXcgUmZxbVYySm9iRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBhZmZpbGlhdGVBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIobmluZXR5U2Vjb25kc0FnbyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMb29rUmVzdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiAnaHR0cDovL2Zvby5iYXInLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcnlBbmROb25jZTogT3RjT3JkZXIuZW5jb2RlRXhwaXJ5QW5kTm9uY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcihuaW5ldHlTZWNvbmRzQWdvLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvbiA9IG5ldyBSZnFtVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoMTIzMyksXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckhhc2g6ICcweG9yZGVyaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCxcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4cHJlc3VibWl0dHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrID0gbW9jayhHYXNTdGF0aW9uQXR0ZW5kYW50RXRoZXJldW0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihnYXNTdGF0aW9uQXR0ZW5kYW50TW9jay5nZXRFeHBlY3RlZFRyYW5zYWN0aW9uR2FzUmF0ZUFzeW5jKCkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMTApLnNoaWZ0ZWRCeShHV0VJX0RFQ0lNQUxTKSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrRGJVdGlscyA9IG1vY2soUmZxbURiVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kVjJUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlPcmRlckhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW21vY2tUcmFuc2FjdGlvbl0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgxMDApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzU3RhdGlvbkF0dGVuZGFudDogaW5zdGFuY2UoZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gYXN5bmMgKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzOiBTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cz86IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzICE9PSBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdKb2JTdGF0dXMgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VibWlzc2lvbkNvbnRleHQudHJhZGVTdWJtaXNzaW9uQ29udGV4dFN0YXR1c1RvSm9iU3RhdHVzKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLnN0YXR1cyA9IG5ld0pvYlN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGpvYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnN1Ym1pdFRvQ2hhaW5Bc3luYyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IGpvYi5raW5kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGRhdGE6ICcweGNhbGxkYXRhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBqb2IuZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uVHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VibWlzc2lvbkNvbnRleHRTdGF0dXNVcGRhdGU6IGNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ0V4Y2VlZCBleHBpcnknKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBldGhfY3JlYXRlQWNjZXNzTGlzdCBzaG91bGQgbm90IGJlIGNhbGxlZCB3aGVuIG5vdCBlbmFibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgdmVyaWZ5KG1vY2tCbG9ja2NoYWluVXRpbHMuY3JlYXRlQWNjZXNzTGlzdEZvckFzeW5jKGFueXRoaW5nKCkpKS5uZXZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChqb2Iuc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLkZhaWxlZEV4cGlyZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgY2FsbCBjcmVhdGVBY2Nlc3NMaXN0Rm9yQXN5bmMgYW5kIHNob3VsZCBub3QgYWZmZWN0IHRoZSBvdmVyYWxsIG1ldGhvZCB3aGVuIFJQQyByZXR1cm5zIHByb3Blcmx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm93UyA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyBPTkVfU0VDT05EX01TKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihub3dTICsgNjAwKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKG5vd1MgKyA2MDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nTGFzdExvb2tBY2NlcHRlZCxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZXF1ZXN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uUmVjZWlwdDogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVjZWlwdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3NCbG9vbTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBsb2dzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgYnl6YW50aXVtOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tOb25jZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2sgPSBtb2NrKEdhc1N0YXRpb25BdHRlbmRhbnRFdGhlcmV1bSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMCkuc2hpZnRlZEJ5KEdXRUlfREVDSU1BTFMpLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogUmZxbUpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdyaXRlVjJSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVG9EYkNhbGxlZEFyZ3M6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy53cml0ZVYyUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblRvRGJBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgKHRyYW5zYWN0aW9uQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVjJSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVG9EYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcCh0cmFuc2FjdGlvbkFyZykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uQnlUcmFuc2FjdGlvbkhhc2hBc3luYygnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3M6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlbXVtdID0gW107XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jICh0cmFuYWN0aW9uQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAodHJhbmFjdGlvbkFyZykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE5vbmNlQXN5bmMoJzB4d29ya2VyYWRkcmVzcycpKS50aGVuUmVzb2x2ZShtb2NrTm9uY2UpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmVzdGltYXRlR2FzRm9yQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKDEwMCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tCbG9ja2NoYWluVXRpbHMudHJhbnNmb3JtVHhEYXRhVG9UcmFuc2FjdGlvblJlcXVlc3QoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXR1cm4obW9ja1RyYW5zYWN0aW9uUmVxdWVzdCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuc2lnblRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduZWRUcmFuc2FjdGlvbjogJ3NpZ25lZFRyYW5zYWN0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRFeGNoYW5nZVByb3h5QWRkcmVzcygpKS50aGVuUmV0dXJuKCcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuc3VibWl0U2lnbmVkVHJhbnNhY3Rpb25Bc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0UmVjZWlwdHNBc3luYyhkZWVwRXF1YWwoWycweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCddKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0LFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0Q3VycmVudEJsb2NrQXN5bmMoKSkudGhlblJlc29sdmUoNCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0RGVjb2RlZFJmcU9yZGVyRmlsbEV2ZW50TG9nRnJvbUxvZ3MoYW55dGhpbmcoKSkpLnRoZW5SZXR1cm4oe1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBsb2dJbmRleDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMCxcclxuICAgICAgICAgICAgICAgICAgICB0b3BpY3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkZpbGxlZEFtb3VudDogbmV3IEJpZ051bWJlcigxMjM0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9vbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5GaWxsZWRBbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmNyZWF0ZUFjY2Vzc0xpc3RGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc0xpc3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzB4MTIzNCc6IFsnMHgwJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcweDEyMzQ1JzogWycweDEnXSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc0VzdGltYXRlOiAxMDAwLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzU3RhdGlvbkF0dGVuZGFudDogaW5zdGFuY2UoZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlQWNjZXNzTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBhc3luYyAoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXM6IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzPzogU3VibWlzc2lvbkNvbnRleHRTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXMgIT09IG9sZFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0pvYlN0YXR1cyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdWJtaXNzaW9uQ29udGV4dC50cmFkZVN1Ym1pc3Npb25Db250ZXh0U3RhdHVzVG9Kb2JTdGF0dXMobmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iuc3RhdHVzID0gbmV3Sm9iU3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoam9iKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnN1Ym1pdFRvQ2hhaW5Bc3luYyh7XHJcbiAgICAgICAgICAgICAgICAgICAga2luZDogam9iLmtpbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBjYWxsZGF0YTogJzB4Y2FsbGRhdGEnLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogam9iLmV4cGlyeSxcclxuICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiBqb2Iub3JkZXJIYXNoLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25UeXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBvblN1Ym1pc3Npb25Db250ZXh0U3RhdHVzVXBkYXRlOiBjYWxsYmFjayxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmVyaWZ5KG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSk7XHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkobW9ja0Jsb2NrY2hhaW5VdGlscy5jcmVhdGVBY2Nlc3NMaXN0Rm9yQXN5bmMoYW55dGhpbmcoKSkpLm9uY2UoKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2Iuc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qod3JpdGVWMlJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25Ub0RiQ2FsbGVkQXJnc1swXS5zdGF0dXMpLnRvLmVxdWFsKFxyXG4gICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuUHJlc3VibWl0LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3NbMF1bMF0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzWzFdWzBdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdzaG91bGQgY2FsbCBjcmVhdGVBY2Nlc3NMaXN0Rm9yQXN5bmMgYW5kIHNob3VsZCBub3QgYWZmZWN0IHRoZSBvdmVyYWxsIG1ldGhvZCB3aGVuIFJQQyBlcnJvcnMgb3V0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm93UyA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyBPTkVfU0VDT05EX01TKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IG5ldyBSZnFtVjJKb2JFbnRpdHkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFmZmlsaWF0ZUFkZHJlc3M6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihub3dTICsgNjAwKSxcclxuICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdExvb2tSZXN1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdodHRwOi8vZm9vLmJhcicsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeUFuZE5vbmNlOiBPdGNPcmRlci5lbmNvZGVFeHBpcnlBbmROb25jZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKG5vd1MgKyA2MDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBCaWdOdW1iZXIoMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiAnMHhtYWtlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogJzEwMDAwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlcjogJzB4dGFrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6ICcxMDAwMDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbU9yZGVyVHlwZXMuT3RjLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nTGFzdExvb2tBY2NlcHRlZCxcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJycsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZXF1ZXN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb24gPSBuZXcgUmZxbVYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVySGFzaDogJzB4b3JkZXJoYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uUmVjZWlwdDogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVjZWlwdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweGZyb20nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3NCbG9vbTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBsb2dzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgYnl6YW50aXVtOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tOb25jZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2sgPSBtb2NrKEdhc1N0YXRpb25BdHRlbmRhbnRFdGhlcmV1bSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMCkuc2hpZnRlZEJ5KEdXRUlfREVDSU1BTFMpLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRWMlRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeU9yZGVySGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnMHhvcmRlcmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogUmZxbUpvYkVudGl0eVtdID0gW107XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1Kb2JBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKGpvYkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAoam9iQXJnKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdyaXRlVjJSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVG9EYkNhbGxlZEFyZ3M6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy53cml0ZVYyUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblRvRGJBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoXHJcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgKHRyYW5zYWN0aW9uQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVjJSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVG9EYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcCh0cmFuc2FjdGlvbkFyZykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZFYyVHJhbnNhY3Rpb25TdWJtaXNzaW9uQnlUcmFuc2FjdGlvbkhhc2hBc3luYygnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3M6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlbXVtdID0gW107XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tEYlV0aWxzLnVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jICh0cmFuYWN0aW9uQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAodHJhbmFjdGlvbkFyZykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrQmxvY2tjaGFpblV0aWxzID0gbW9jayhSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldE5vbmNlQXN5bmMoJzB4d29ya2VyYWRkcmVzcycpKS50aGVuUmVzb2x2ZShtb2NrTm9uY2UpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmVzdGltYXRlR2FzRm9yQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKDEwMCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tCbG9ja2NoYWluVXRpbHMudHJhbnNmb3JtVHhEYXRhVG9UcmFuc2FjdGlvblJlcXVlc3QoYW55dGhpbmcoKSwgYW55dGhpbmcoKSwgYW55dGhpbmcoKSksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXR1cm4obW9ja1RyYW5zYWN0aW9uUmVxdWVzdCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuc2lnblRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgICAgICBzaWduZWRUcmFuc2FjdGlvbjogJ3NpZ25lZFRyYW5zYWN0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRFeGNoYW5nZVByb3h5QWRkcmVzcygpKS50aGVuUmV0dXJuKCcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuc3VibWl0U2lnbmVkVHJhbnNhY3Rpb25Bc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0UmVjZWlwdHNBc3luYyhkZWVwRXF1YWwoWycweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCddKSkpLnRoZW5SZXNvbHZlKFtcclxuICAgICAgICAgICAgICAgICAgICBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0LFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0Q3VycmVudEJsb2NrQXN5bmMoKSkudGhlblJlc29sdmUoNCk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0RGVjb2RlZFJmcU9yZGVyRmlsbEV2ZW50TG9nRnJvbUxvZ3MoYW55dGhpbmcoKSkpLnRoZW5SZXR1cm4oe1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBsb2dJbmRleDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMCxcclxuICAgICAgICAgICAgICAgICAgICB0b3BpY3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkZpbGxlZEFtb3VudDogbmV3IEJpZ051bWJlcigxMjM0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJIYXNoOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9vbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5GaWxsZWRBbW91bnQ6IG5ldyBCaWdOdW1iZXIoNSksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmNyZWF0ZUFjY2Vzc0xpc3RGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlamVjdChuZXcgRXJyb3IoJ2Vycm9yJykpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc1N0YXRpb25BdHRlbmRhbnQ6IGluc3RhbmNlKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUFjY2Vzc0xpc3Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gYXN5bmMgKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzOiBTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cz86IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzICE9PSBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdKb2JTdGF0dXMgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VibWlzc2lvbkNvbnRleHQudHJhZGVTdWJtaXNzaW9uQ29udGV4dFN0YXR1c1RvSm9iU3RhdHVzKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLnN0YXR1cyA9IG5ld0pvYlN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGpvYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5zdWJtaXRUb0NoYWluQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IGpvYi5raW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGRhdGE6ICcweGNhbGxkYXRhJyxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IGpvYi5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogam9iLm9yZGVySGFzaCxcclxuICAgICAgICAgICAgICAgICAgICBzdWJtaXNzaW9uVHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgb25TdWJtaXNzaW9uQ29udGV4dFN0YXR1c1VwZGF0ZTogY2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZlcmlmeShtb2NrQmxvY2tjaGFpblV0aWxzLmVzdGltYXRlR2FzRm9yQXN5bmMoYW55dGhpbmcoKSkpO1xyXG4gICAgICAgICAgICAgICAgdmVyaWZ5KG1vY2tCbG9ja2NoYWluVXRpbHMuY3JlYXRlQWNjZXNzTGlzdEZvckFzeW5jKGFueXRoaW5nKCkpKS5vbmNlKCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHdyaXRlVjJSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVG9EYkNhbGxlZEFyZ3NbMF0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlByZXN1Ym1pdCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QodXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzWzBdWzBdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5TdWJtaXR0ZWQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJnc1sxXVswXS5zdGF0dXMpLnRvLmVxdWFsKFxyXG4gICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VjY2VlZGVkQ29uZmlybWVkLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE5vdCBhbGwgdGVzdHMgZnJvbSB0ZXN0IGJsb2NrICdraW5kIGlzIGByZnFtX3YyX2pvYmAnIGlzIGluY2x1ZGVkIGhlcmUgYXMgbW9zdCBvZiB0aGUgdGVzdHMgYXJlIHNpbWlsaWFyLlxyXG4gICAgICAgIC8vIFRoZSB0ZXN0cyBiZWxvdyBzcGVjaWZpY2FsbHkgdGVzdCBpZiBjb3JyZXNwb25kaW5nIG1ldGhvZHMgYXJlIGNhbGxlZCBmb3Igam9iIGtpbmQgYG1ldGFfdHJhbnNhY3Rpb25fam9iYC5cclxuICAgICAgICBkZXNjcmliZSgna2luZCBpcyBgbWV0YV90cmFuc2FjdGlvbl9qb2JgJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdCgnc3VibWl0cyBhIHRyYW5zYWN0aW9uIHN1Y2Nlc3NmdWxseSB3aGVuIHRoZXJlIGlzIG5vIHByZXZpb3VzIHRyYW5zYWN0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm93UyA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyBPTkVfU0VDT05EX01TKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYklkID0gJ2pvYklkJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uU3VibWlzc2lvbklkID0gJ3N1Ym1pc3Npb25JZCc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2IgPSBjcmVhdGVNZWFUcnNhbmN0aW9uSm9iRW50aXR5KFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIobm93UyArIDYwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbjogJzB4aW5wdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9ySWQ6ICcweGludGVncmF0b3InLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb246IE1PQ0tfTUVUQV9UUkFOU0FDVElPTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSGFzaDogTU9DS19NRVRBX1RSQU5TQUNUSU9OLmdldEhhc2goKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluT3V0cHV0VG9rZW5BbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbjogJzB4b3V0cHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFkZHJlc3M6ICcweHRha2VyQWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyU2lnbmF0dXJlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUeXBlOiBTaWduYXR1cmVUeXBlLkV0aFNpZ24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtSm9iU3RhdHVzLlBlbmRpbmdMYXN0TG9va0FjY2VwdGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXJBZGRyZXNzOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGpvYklkLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZXF1ZXN0ID0ge307XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb24gPSBjcmVhdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5KFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkpvYklkOiBqb2JJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g6ICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25TdWJtaXNzaW9uSWQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uUmVjZWlwdDogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVjZWlwdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0bzogJzB4dG8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweGZyb20nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3NCbG9vbTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICBsb2dzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja051bWJlcjogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgYnl6YW50aXVtOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tOb25jZSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2sgPSBtb2NrKEdhc1N0YXRpb25BdHRlbmRhbnRFdGhlcmV1bSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrLmdldEV4cGVjdGVkVHJhbnNhY3Rpb25HYXNSYXRlQXN5bmMoKSkudGhlblJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IEJpZ051bWJlcigxMCkuc2hpZnRlZEJ5KEdXRUlfREVDSU1BTFMpLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tEYlV0aWxzID0gbW9jayhSZnFtRGJVdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tEYlV0aWxzLmZpbmRNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0J5Sm9iSWRBc3luYyhqb2JJZCwgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUpLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJnczogTWV0YVRyYW5zYWN0aW9uSm9iRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAoam9iQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmZxbUpvYkNhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcChqb2JBcmcpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd3JpdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uQXN5bmNDYWxsZWRBcmdzOiBNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5W10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMud3JpdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jICh0cmFuc2FjdGlvbkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbkFzeW5jQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKHRyYW5zYWN0aW9uQXJnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uY2xvbmVEZWVwKG1vY2tUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlUcmFuc2FjdGlvbkhhc2hBc3luYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJlc29sdmUoW18uY2xvbmVEZWVwKG1vY2tUcmFuc2FjdGlvbildKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJnczogTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eVtdW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKHRyYW5hY3Rpb25BcmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcCh0cmFuYWN0aW9uQXJnKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0Tm9uY2VBc3luYygnMHh3b3JrZXJhZGRyZXNzJykpLnRoZW5SZXNvbHZlKG1vY2tOb25jZSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoMTAwKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0Jsb2NrY2hhaW5VdGlscy50cmFuc2Zvcm1UeERhdGFUb1RyYW5zYWN0aW9uUmVxdWVzdChhbnl0aGluZygpLCBhbnl0aGluZygpLCBhbnl0aGluZygpKSxcclxuICAgICAgICAgICAgICAgICkudGhlblJldHVybihtb2NrVHJhbnNhY3Rpb25SZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5zaWduVHJhbnNhY3Rpb25Bc3luYyhhbnl0aGluZygpKSkudGhlblJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25lZFRyYW5zYWN0aW9uOiAnc2lnbmVkVHJhbnNhY3Rpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEV4Y2hhbmdlUHJveHlBZGRyZXNzKCkpLnRoZW5SZXR1cm4oJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5zdWJtaXRTaWduZWRUcmFuc2FjdGlvbkFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRSZWNlaXB0c0FzeW5jKGRlZXBFcXVhbChbJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJ10pKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUcmFuc2FjdGlvblJlY2VpcHQsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRDdXJyZW50QmxvY2tBc3luYygpKS50aGVuUmVzb2x2ZSg0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcW1TZXJ2aWNlID0gYnVpbGRXb3JrZXJTZXJ2aWNlRm9yVW5pdFRlc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgIGRiVXRpbHM6IGluc3RhbmNlKG1vY2tEYlV0aWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBnYXNTdGF0aW9uQXR0ZW5kYW50OiBpbnN0YW5jZShnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayksXHJcbiAgICAgICAgICAgICAgICAgICAgcmZxQmxvY2tjaGFpblV0aWxzOiBpbnN0YW5jZShtb2NrQmxvY2tjaGFpblV0aWxzKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gYXN5bmMgKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzOiBTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cz86IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzICE9PSBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdKb2JTdGF0dXMgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VibWlzc2lvbkNvbnRleHQudHJhZGVTdWJtaXNzaW9uQ29udGV4dFN0YXR1c1RvSm9iU3RhdHVzKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLnN0YXR1cyA9IG5ld0pvYlN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGpvYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcW1TZXJ2aWNlLnN1Ym1pdFRvQ2hhaW5Bc3luYyh7XHJcbiAgICAgICAgICAgICAgICAgICAga2luZDogam9iLmtpbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICBjYWxsZGF0YTogJzB4Y2FsbGRhdGEnLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogam9iLmV4cGlyeSxcclxuICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiBqb2IuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VibWlzc2lvblR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uU3VibWlzc2lvbkNvbnRleHRTdGF0dXNVcGRhdGU6IGNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2ZXJpZnkobW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKTtcclxuICAgICAgICAgICAgICAgIC8vIGV0aF9jcmVhdGVBY2Nlc3NMaXN0IHNob3VsZCBub3QgYmUgY2FsbGVkIHdoZW4gbm90IGVuYWJsZWRcclxuICAgICAgICAgICAgICAgIHZlcmlmeShtb2NrQmxvY2tjaGFpblV0aWxzLmNyZWF0ZUFjY2Vzc0xpc3RGb3JBc3luYyhhbnl0aGluZygpKSkubmV2ZXIoKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChqb2Iuc3RhdHVzKS50by5lcXVhbChSZnFtSm9iU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qod3JpdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uQXN5bmNDYWxsZWRBcmdzWzBdLnN0YXR1cykudG8uZXF1YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblN0YXR1cy5QcmVzdWJtaXQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJnc1swXVswXS5zdGF0dXMpLnRvLmVxdWFsKFxyXG4gICAgICAgICAgICAgICAgICAgIFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25TdGF0dXMuU3VibWl0dGVkLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3NbMV1bMF0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ3JlY292ZXJzIGEgUFJFU1VCTUlUIHRyYW5zYWN0aW9uIHdoaWNoIGFjdHVhbGx5IHN1Ym1pdHRlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vd1MgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gT05FX1NFQ09ORF9NUyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBqb2JJZCA9ICdqb2JJZCc7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvblN1Ym1pc3Npb25JZCA9ICdzdWJtaXNzaW9uSWQnO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iID0gY3JlYXRlTWVhVHJzYW5jdGlvbkpvYkVudGl0eShcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBuZXcgQmlnTnVtYmVyKG5vd1MgKyA2MDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW46ICcweGlucHV0VG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnMHhpbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbkhhc2g6IE1PQ0tfTUVUQV9UUkFOU0FDVElPTi5nZXRIYXNoKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbk91dHB1dFRva2VuQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW46ICcweG91dHB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlckFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclNpZ25hdHVyZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmF0dXJlVHlwZTogU2lnbmF0dXJlVHlwZS5FdGhTaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdjogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHI6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgczogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogUmZxbUpvYlN0YXR1cy5QZW5kaW5nTGFzdExvb2tBY2NlcHRlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyQWRkcmVzczogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBqb2JJZCxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja1ByZXN1Ym1pdFRyYW5zYWN0aW9uID0gY3JlYXRlTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eShcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25Kb2JJZDogam9iSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub25jZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlByZXN1Ym1pdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG86ICcweGV4Y2hhbmdlcHJveHlhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uU3VibWlzc2lvbklkLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvblJlY2VpcHQ6IHByb3ZpZGVycy5UcmFuc2FjdGlvblJlY2VpcHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tIYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ5emFudGl1bTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogJzB4ZXhjaGFuZ2Vwcm94eWFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVHYXNQcmljZTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzVXNlZDogRXRoZXJzQmlnTnVtYmVyLmZyb20oMTAwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3NCbG9vbTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMixcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZXNwb25zZTogcHJvdmlkZXJzLlRyYW5zYWN0aW9uUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25zOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc0xpbWl0OiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBoYXNoOiAnMHhwcmVzdWJtaXR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEV0aGVyc0JpZ051bWJlci5mcm9tKDApLFxyXG4gICAgICAgICAgICAgICAgICAgIHdhaXQ6IChfY29uZmlybWF0aW9uczogbnVtYmVyIHwgdW5kZWZpbmVkKSA9PiBQcm9taXNlLnJlc29sdmUobW9ja1RyYW5zYWN0aW9uUmVjZWlwdCksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja01pbmVkQmxvY2s6IHByb3ZpZGVycy5CbG9jayA9IHtcclxuICAgICAgICAgICAgICAgICAgICBfZGlmZmljdWx0eTogRXRoZXJzQmlnTnVtYmVyLmZyb20oMiksXHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZmljdWx0eTogMixcclxuICAgICAgICAgICAgICAgICAgICBleHRyYURhdGE6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc0xpbWl0OiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBnYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBoYXNoOiAnMHhibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmVyOiAnMHhtaW5lcicsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9uY2U6ICcweDAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiAyMSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRIYXNoOiAnMHhwYXJlbnRibG9ja2hhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogMTIzNDUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25zOiBbJzB4cHJlc3VibWl0dHJhbnNhY3Rpb25oYXNoJ10sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja05vbmNlID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayA9IG1vY2soR2FzU3RhdGlvbkF0dGVuZGFudEV0aGVyZXVtKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2suZ2V0RXhwZWN0ZWRUcmFuc2FjdGlvbkdhc1JhdGVBc3luYygpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwKS5zaGlmdGVkQnkoR1dFSV9ERUNJTUFMUyksXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlKb2JJZEFzeW5jKGpvYklkLCBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFttb2NrUHJlc3VibWl0VHJhbnNhY3Rpb25dKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJnczogTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbkVudGl0eVtdW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0RiVXRpbHMudXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNBc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKHRyYW5hY3Rpb25BcmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3MucHVzaChfLmNsb25lRGVlcCh0cmFuYWN0aW9uQXJnKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tCbG9ja2NoYWluVXRpbHMgPSBtb2NrKFJmcUJsb2NrY2hhaW5VdGlscyk7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1vY2sgcmVzcG9uc2UgaW5kaWNhdGVzIHRoYXQgdGhlIHRyYW5zYWN0aW9uIGlzIHByZXNlbnQgaW4gdGhlIG1lbXBvb2xcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRUcmFuc2FjdGlvbkFzeW5jKCcweHByZXN1Ym1pdHRyYW5zYWN0aW9uaGFzaCcpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICBtb2NrVHJhbnNhY3Rpb25SZXNwb25zZSxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0Tm9uY2VBc3luYygnMHh3b3JrZXJhZGRyZXNzJykpLnRoZW5SZXNvbHZlKG1vY2tOb25jZSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZXN0aW1hdGVHYXNGb3JBc3luYyhhbnl0aGluZygpKSkudGhlblJlamVjdChcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRXJyb3IoJ2VzdGltYXRlR2FzRm9yQXN5bmMgY2FsbGVkIGR1cmluZyByZWNvdmVyeScpLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRSZWNlaXB0c0FzeW5jKGRlZXBFcXVhbChbJzB4cHJlc3VibWl0dHJhbnNhY3Rpb25oYXNoJ10pKSkudGhlblJlc29sdmUoW1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUcmFuc2FjdGlvblJlY2VpcHQsXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXRCbG9ja0FzeW5jKCcweGJsb2NraGFzaCcpKS50aGVuUmVzb2x2ZShtb2NrTWluZWRCbG9jayk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0Q3VycmVudEJsb2NrQXN5bmMoKSkudGhlblJlc29sdmUoNCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnFtU2VydmljZSA9IGJ1aWxkV29ya2VyU2VydmljZUZvclVuaXRUZXN0KHtcclxuICAgICAgICAgICAgICAgICAgICBkYlV0aWxzOiBpbnN0YW5jZShtb2NrRGJVdGlscyksXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FzU3RhdGlvbkF0dGVuZGFudDogaW5zdGFuY2UoZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIHJmcUJsb2NrY2hhaW5VdGlsczogaW5zdGFuY2UobW9ja0Jsb2NrY2hhaW5VdGlscyksXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gYXN5bmMgKFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzOiBTdWJtaXNzaW9uQ29udGV4dFN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cz86IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgKTogUHJvbWlzZTx2b2lkPiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzICE9PSBvbGRTdWJtaXNzaW9uQ29udGV4dFN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdKb2JTdGF0dXMgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3VibWlzc2lvbkNvbnRleHQudHJhZGVTdWJtaXNzaW9uQ29udGV4dFN0YXR1c1RvSm9iU3RhdHVzKG5ld1N1Ym1pc3Npb25Db250ZXh0U3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgam9iLnN0YXR1cyA9IG5ld0pvYlN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbW9ja0RiVXRpbHMudXBkYXRlUmZxbUpvYkFzeW5jKGpvYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnFtU2VydmljZS5zdWJtaXRUb0NoYWluQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IGpvYi5raW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4d29ya2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGRhdGE6ICcweGNhbGxkYXRhJyxcclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IGpvYi5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogam9iLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pc3Npb25UeXBlOiBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICBvblN1Ym1pc3Npb25Db250ZXh0U3RhdHVzVXBkYXRlOiBjYWxsYmFjayxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGV0aF9jcmVhdGVBY2Nlc3NMaXN0IHNob3VsZCBub3QgYmUgY2FsbGVkIHdoZW4gbm90IGVuYWJsZWRcclxuICAgICAgICAgICAgICAgIHZlcmlmeShtb2NrQmxvY2tjaGFpblV0aWxzLmNyZWF0ZUFjY2Vzc0xpc3RGb3JBc3luYyhhbnl0aGluZygpKSkubmV2ZXIoKTtcclxuICAgICAgICAgICAgICAgIC8vIExvZ2ljIHNob3VsZCBmaXJzdCBjaGVjayB0byBzZWUgaWYgdGhlIHRyYW5zYWN0aW9uIHdhcyBhY3R1YWxseSBzZW50LlxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQgd2FzIChhbmQgaXQgaXMgYmVpbmcgbW9jayBzbyBpbiB0aGlzIHRlc3QpIHRoZW4gdGhlIGxvZ2ljIGZpcnN0XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVzIHRoZSBzdGF0dXMgb2YgdGhlIHRyYW5zYWN0aW9uIHRvIFwiU3VibWl0dGVkXCJcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3NbMF1bMF0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Ym1pdHRlZCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgbG9naWMgdGhlbiBlbnRlcnMgdGhlIHdhdGNoIGxvb3AuIE9uIHRoZSBmaXJzdCBjaGVjaywgYSB0cmFuc2FjdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gcmVjZWlwdCBleGlzdHMgZm9yIHRoaXMgdHJhbnNhY3Rpb24gYW5kIGl0IHdpbGwgYmUgbWFya2VkIFwiY29uZmlybWVkXCJcclxuICAgICAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0NhbGxlZEFyZ3NbMV1bMF0uc3RhdHVzKS50by5lcXVhbChcclxuICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uU3RhdHVzLlN1Y2NlZWRlZENvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3Qoam9iLnN0YXR1cykudG8uZXF1YWwoUmZxbUpvYlN0YXR1cy5TdWNjZWVkZWRDb25maXJtZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCd0aHJvd3MgZXhjZXB0aW9uIGlmIHRoZXJlIGFyZSBtb3JlIHRoYW4gMSB0cmFuc2FjdGlvbiBzdWJtaXNzaW9ucyB3aXRoIHRoZSBzYW1lIHRyYW5zYWN0aW9uIGhhc2gnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3dTID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIE9ORV9TRUNPTkRfTVMpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgam9iSWQgPSAnam9iSWQnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25TdWJtaXNzaW9uSWQgPSAnc3VibWlzc2lvbklkJztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvYiA9IGNyZWF0ZU1lYVRyc2FuY3Rpb25Kb2JFbnRpdHkoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeTogbmV3IEJpZ051bWJlcihub3dTICsgNjAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IG5ldyBCaWdOdW1iZXIoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuOiAnMHhpbnB1dFRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJzB4aW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFUcmFuc2FjdGlvbjogTU9DS19NRVRBX1RSQU5TQUNUSU9OLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhVHJhbnNhY3Rpb25IYXNoOiBNT0NLX01FVEFfVFJBTlNBQ1RJT04uZ2V0SGFzaCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5PdXRwdXRUb2tlbkFtb3VudDogbmV3IEJpZ051bWJlcigxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuOiAnMHhvdXRwdXRUb2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJBZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJTaWduYXR1cmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRXRoU2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHM6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFJmcW1Kb2JTdGF0dXMuUGVuZGluZ0xhc3RMb29rQWNjZXB0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlckFkZHJlc3M6ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgam9iSWQsXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvblJlcXVlc3Q6IHByb3ZpZGVycy5UcmFuc2FjdGlvblJlcXVlc3QgPSB7fTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvbiA9IGNyZWF0ZU1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHkoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiAnMHh3b3JrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YVRyYW5zYWN0aW9uSm9iSWQ6IGpvYklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IG5ldyBCaWdOdW1iZXIoMTAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9uY2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogJzB4c2lnbmVkdHJhbnNhY3Rpb25oYXNoJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvblR5cGUuVHJhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblN1Ym1pc3Npb25JZCxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2NrVHJhbnNhY3Rpb25SZWNlaXB0OiBwcm92aWRlcnMuVHJhbnNhY3Rpb25SZWNlaXB0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvOiAnMHh0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJzB4ZnJvbScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25JbmRleDogMCxcclxuICAgICAgICAgICAgICAgICAgICBnYXNVc2VkOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nc0Jsb29tOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBibG9ja0hhc2g6ICcweGJsb2NraGFzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3M6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbnM6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VtdWxhdGl2ZUdhc1VzZWQ6IEV0aGVyc0JpZ051bWJlci5mcm9tKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdGl2ZUdhc1ByaWNlOiBFdGhlcnNCaWdOdW1iZXIuZnJvbSgxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBieXphbnRpdW06IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMixcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDEsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja05vbmNlID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBnYXNTdGF0aW9uQXR0ZW5kYW50TW9jayA9IG1vY2soR2FzU3RhdGlvbkF0dGVuZGFudEV0aGVyZXVtKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oZ2FzU3RhdGlvbkF0dGVuZGFudE1vY2suZ2V0RXhwZWN0ZWRUcmFuc2FjdGlvbkdhc1JhdGVBc3luYygpKS50aGVuUmVzb2x2ZShcclxuICAgICAgICAgICAgICAgICAgICBuZXcgQmlnTnVtYmVyKDEwKS5zaGlmdGVkQnkoR1dFSV9ERUNJTUFMUyksXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja0RiVXRpbHMgPSBtb2NrKFJmcW1EYlV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0RiVXRpbHMuZmluZE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25zQnlKb2JJZEFzeW5jKGpvYklkLCBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSksXHJcbiAgICAgICAgICAgICAgICApLnRoZW5SZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVJmcW1Kb2JDYWxsZWRBcmdzOiBNZXRhVHJhbnNhY3Rpb25Kb2JFbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5DYWxsKGFzeW5jIChqb2JBcmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZnFtSm9iQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKGpvYkFyZykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3cml0ZU1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25Bc3luY0NhbGxlZEFyZ3M6IE1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25FbnRpdHlbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy53cml0ZU1ldGFUcmFuc2FjdGlvblN1Ym1pc3Npb25Bc3luYyhhbnl0aGluZygpKSkudGhlbkNhbGwoYXN5bmMgKHRyYW5zYWN0aW9uQXJnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uQXN5bmNDYWxsZWRBcmdzLnB1c2goXy5jbG9uZURlZXAodHJhbnNhY3Rpb25BcmcpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBtb2NrRGJVdGlscy5maW5kTWV0YVRyYW5zYWN0aW9uU3VibWlzc2lvbnNCeVRyYW5zYWN0aW9uSGFzaEFzeW5jKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uVHlwZS5UcmFkZSxcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmVzb2x2ZShbXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKSwgXy5jbG9uZURlZXAobW9ja1RyYW5zYWN0aW9uKV0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlUmZxbVRyYW5zYWN0aW9uU3VibWlzc2lvbnNDYWxsZWRBcmdzOiBNZXRhVHJhbnNhY3Rpb25TdWJtaXNzaW9uRW50aXR5W11bXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrRGJVdGlscy51cGRhdGVSZnFtVHJhbnNhY3Rpb25TdWJtaXNzaW9uc0FzeW5jKGFueXRoaW5nKCkpKS50aGVuQ2FsbChhc3luYyAodHJhbmFjdGlvbkFyZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25zQ2FsbGVkQXJncy5wdXNoKF8uY2xvbmVEZWVwKHRyYW5hY3Rpb25BcmcpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9ja0Jsb2NrY2hhaW5VdGlscyA9IG1vY2soUmZxQmxvY2tjaGFpblV0aWxzKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5nZXROb25jZUFzeW5jKCcweHdvcmtlcmFkZHJlc3MnKSkudGhlblJlc29sdmUobW9ja05vbmNlKTtcclxuICAgICAgICAgICAgICAgIHdoZW4obW9ja0Jsb2NrY2hhaW5VdGlscy5lc3RpbWF0ZUdhc0ZvckFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSgxMDApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihcclxuICAgICAgICAgICAgICAgICAgICBtb2NrQmxvY2tjaGFpblV0aWxzLnRyYW5zZm9ybVR4RGF0YVRvVHJhbnNhY3Rpb25SZXF1ZXN0KGFueXRoaW5nKCksIGFueXRoaW5nKCksIGFueXRoaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgKS50aGVuUmV0dXJuKG1vY2tUcmFuc2FjdGlvblJlcXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLnNpZ25UcmFuc2FjdGlvbkFzeW5jKGFueXRoaW5nKCkpKS50aGVuUmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2lnbmVkVHJhbnNhY3Rpb246ICdzaWduZWRUcmFuc2FjdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiAnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB3aGVuKG1vY2tCbG9ja2NoYWluVXRpbHMuZ2V0RXhjaGFuZ2VQcm94eUFkZHJlc3MoKSkudGhlblJldHVybignMHhleGNoYW5nZXByb3h5YWRkcmVzcycpO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLnN1Ym1pdFNpZ25lZFRyYW5zYWN0aW9uQXN5bmMoYW55dGhpbmcoKSkpLnRoZW5SZXNvbHZlKFxyXG4gICAgICAgICAgICAgICAgICAgICcweHNpZ25lZHRyYW5zYWN0aW9uaGFzaCcsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldFJlY2VpcHRzQXN5bmMoZGVlcEVxdWFsKFsnMHhzaWduZWR0cmFuc2FjdGlvbmhhc2gnXSkpKS50aGVuUmVzb2x2ZShbXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1RyYW5zYWN0aW9uUmVjZWlwdCxcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgd2hlbihtb2NrQmxvY2tjaGFpblV0aWxzLmdldEN1cnJlbnRCbG9ja0FzeW5jKCkpLnRoZW5SZXNvbHZlKDQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxbVNlcnZpY2UgPSBidWlsZFdvcmtlclNlcnZpY2VGb3JVbml0VGVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGJVdGlsczogaW5zdGFuY2UobW9ja0RiVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGdhc1N0YXRpb25BdHRlbmRhbnQ6IGluc3RhbmNlKGdhc1N0YXRpb25BdHRlbmRhbnRNb2NrKSxcclxuICAgICAgICAgICAgICAgICAgICByZnFCbG9ja2NoYWluVXRpbHM6IGluc3RhbmNlKG1vY2tCbG9ja2NoYWluVXRpbHMpLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBhc3luYyAoXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXM6IFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzPzogU3VibWlzc2lvbkNvbnRleHRTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICApOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXMgIT09IG9sZFN1Ym1pc3Npb25Db250ZXh0U3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0pvYlN0YXR1cyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdWJtaXNzaW9uQ29udGV4dC50cmFkZVN1Ym1pc3Npb25Db250ZXh0U3RhdHVzVG9Kb2JTdGF0dXMobmV3U3VibWlzc2lvbkNvbnRleHRTdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqb2Iuc3RhdHVzID0gbmV3Sm9iU3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBtb2NrRGJVdGlscy51cGRhdGVSZnFtSm9iQXN5bmMoam9iKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmZxbVNlcnZpY2Uuc3VibWl0VG9DaGFpbkFzeW5jKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2luZDogam9iLmtpbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAnMHhleGNoYW5nZXByb3h5YWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206ICcweHdvcmtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZGF0YTogJzB4Y2FsbGRhdGEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnk6IGpvYi5leHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGpvYi5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VibWlzc2lvblR5cGU6IFJmcW1UcmFuc2FjdGlvblN1Ym1pc3Npb25UeXBlLlRyYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN1Ym1pc3Npb25Db250ZXh0U3RhdHVzVXBkYXRlOiBjYWxsYmFjayxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QuZmFpbCgpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChlLm1lc3NhZ2UpLnRvLmNvbnRhaW4oJ1RyYW5zYWN0aW9uIGhhc2ggaGF2ZSBiZWVuIHN1Ym1pdHRlZCBub3QgZXhhY3RseSBvbmNlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=
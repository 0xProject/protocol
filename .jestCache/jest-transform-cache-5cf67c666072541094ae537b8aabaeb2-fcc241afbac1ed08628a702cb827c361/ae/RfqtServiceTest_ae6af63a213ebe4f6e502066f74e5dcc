80f47817fa130c103ae47a40348ef8e5
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
jest.mock('../../src/utils/rfq_maker_manager', () => ({
    RfqMakerManager: jest.fn().mockImplementation(() => {
        return {
            getRfqtV2MakersForPair: jest.fn(),
        };
    }),
}));
jest.mock('../../src/quoteRequestor/QuoteRequestor', () => ({
    QuoteRequestor: jest.fn().mockImplementation(() => {
        return {
            requestRfqtIndicativeQuotesAsync: jest.fn().mockResolvedValue([]),
            requestRfqtFirmQuotesAsync: jest.fn().mockResolvedValue([]),
        };
    }),
}));
jest.mock('../../src/utils/quote_server_client', () => ({
    QuoteServerClient: jest.fn().mockImplementation(() => {
        return {
            batchGetPriceV2Async: jest.fn().mockResolvedValue([]),
        };
    }),
}));
jest.mock('../../src/services/rfq_maker_balance_cache_service', () => ({
    RfqMakerBalanceCacheService: jest.fn().mockImplementation(() => {
        return {
            getERC20OwnerBalancesAsync: jest.fn().mockResolvedValue([]),
        };
    }),
}));
const contract_addresses_1 = require("@0x/contract-addresses");
const protocol_utils_1 = require("@0x/protocol-utils");
const signature_utils_1 = require("@0x/protocol-utils/lib/src/signature_utils");
const types_1 = require("@0x/types");
const utils_1 = require("@0x/utils");
const constants_1 = require("../../src/core/constants");
const entities_1 = require("../../src/entities");
const QuoteRequestor_1 = require("../../src/quoteRequestor/QuoteRequestor");
const fee_service_1 = require("../../src/services/fee_service");
const RfqtService_1 = require("../../src/services/RfqtService");
const rfq_maker_balance_cache_service_1 = require("../../src/services/rfq_maker_balance_cache_service");
const quote_server_client_1 = require("../../src/utils/quote_server_client");
const rfq_maker_manager_1 = require("../../src/utils/rfq_maker_manager");
const TokenMetadataManager_1 = require("../../src/utils/TokenMetadataManager");
// TODO (rhinodavid): Find a better way to initialize mocked classes
const mockQuoteRequestor = jest.mocked(new QuoteRequestor_1.QuoteRequestor({}, {}));
const mockRfqMakerManager = jest.mocked(new rfq_maker_manager_1.RfqMakerManager({}, {}, 0));
const mockQuoteServerClient = jest.mocked(new quote_server_client_1.QuoteServerClient({}));
const mockFeeService = jest.mocked(new fee_service_1.FeeService(1337, {}, {}, {}, {}, {}, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS));
const mockRfqBlockchainUtils = jest.mocked({});
const mockTokenMetadataManager = jest.mocked(new TokenMetadataManager_1.TokenMetadataManager(1337, {}));
// tslint:enable: no-object-literal-type-assertion
const mockContractAddresses = (0, contract_addresses_1.getContractAddressesForChainOrThrow)(1337);
const mockRfqMakerBalanceCacheService = jest.mocked(new rfq_maker_balance_cache_service_1.RfqMakerBalanceCacheService({}, {}));
describe('Rfqt Service', () => {
    beforeEach(() => {
        mockQuoteRequestor.requestRfqtFirmQuotesAsync.mockClear();
        mockQuoteRequestor.requestRfqtIndicativeQuotesAsync.mockClear();
        mockQuoteServerClient.batchGetPriceV2Async.mockClear();
        mockRfqMakerManager.getRfqtV2MakersForPair.mockClear();
        mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync.mockClear();
    });
    describe('v1', () => {
        describe('getV1PricesAsync', () => {
            it('passes through calls to QuoteRequestor::requestRfqtIndicativeQuotesAsync', async () => {
                const rfqtService = new RfqtService_1.RfqtService(0, mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                await rfqtService.getV1PricesAsync({
                    altRfqAssetOfferings: {
                        'alt-mm': [
                            {
                                id: 'id',
                                baseAsset: '0xbaseasset',
                                quoteAsset: '0xquoteasset',
                                baseAssetDecimals: 420,
                                quoteAssetDecimals: 69,
                            },
                        ],
                    },
                    assetFillAmount: new utils_1.BigNumber(111),
                    comparisonPrice: new utils_1.BigNumber(666),
                    makerToken: '0xmakertoken',
                    marketOperation: types_1.MarketOperation.Buy,
                    takerAddress: '0xtakeraddress',
                    takerToken: '0xtakertoken',
                    intentOnFilling: false,
                    integrator: {
                        apiKeys: [],
                        allowedChainIds: [],
                        integratorId: 'uuid-integrator',
                        plp: false,
                        rfqm: false,
                        rfqt: true,
                        label: 'Scam Integrator 1',
                    },
                    txOrigin: '0xtxorigin',
                });
                const args = mockQuoteRequestor.requestRfqtIndicativeQuotesAsync.mock.calls[0];
                expect(args).toMatchInlineSnapshot(`
                    Array [
                      "0xmakertoken",
                      "0xtakertoken",
                      "111",
                      "Buy",
                      "666",
                      Object {
                        "altRfqAssetOfferings": Object {
                          "alt-mm": Array [
                            Object {
                              "baseAsset": "0xbaseasset",
                              "baseAssetDecimals": 420,
                              "id": "id",
                              "quoteAsset": "0xquoteasset",
                              "quoteAssetDecimals": 69,
                            },
                          ],
                        },
                        "integrator": Object {
                          "allowedChainIds": Array [],
                          "apiKeys": Array [],
                          "integratorId": "uuid-integrator",
                          "label": "Scam Integrator 1",
                          "plp": false,
                          "rfqm": false,
                          "rfqt": true,
                        },
                        "intentOnFilling": false,
                        "isIndicative": true,
                        "isLastLook": false,
                        "makerEndpointMaxResponseTimeMs": 600,
                        "takerAddress": "0xtakeraddress",
                        "txOrigin": "0xtxorigin",
                      },
                    ]
                `);
            });
        });
        describe('getV1QuotesAsync', () => {
            it('passes through calls to QuoteRequestor::requestRfqtFirmQuotesAsync', async () => {
                mockQuoteRequestor.requestRfqtFirmQuotesAsync.mockResolvedValue([]);
                const rfqtService = new RfqtService_1.RfqtService(0, mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                await rfqtService.getV1QuotesAsync({
                    altRfqAssetOfferings: {
                        'alt-mm': [
                            {
                                id: 'id',
                                baseAsset: '0xbaseasset',
                                quoteAsset: '0xquoteasset',
                                baseAssetDecimals: 420,
                                quoteAssetDecimals: 69,
                            },
                        ],
                    },
                    assetFillAmount: new utils_1.BigNumber(111),
                    comparisonPrice: new utils_1.BigNumber(666),
                    makerToken: '0xmakertoken',
                    marketOperation: types_1.MarketOperation.Buy,
                    takerAddress: '0xtakeraddress',
                    takerToken: '0xtakertoken',
                    intentOnFilling: false,
                    integrator: {
                        allowedChainIds: [],
                        apiKeys: [],
                        integratorId: 'uuid-integrator',
                        plp: false,
                        rfqm: false,
                        rfqt: true,
                        label: 'Scam Integrator 1',
                    },
                    txOrigin: '0xtxorigin',
                });
                const args = mockQuoteRequestor.requestRfqtFirmQuotesAsync.mock.calls[0];
                expect(args).toMatchInlineSnapshot(`
                    Array [
                      "0xmakertoken",
                      "0xtakertoken",
                      "111",
                      "Buy",
                      "666",
                      Object {
                        "altRfqAssetOfferings": Object {
                          "alt-mm": Array [
                            Object {
                              "baseAsset": "0xbaseasset",
                              "baseAssetDecimals": 420,
                              "id": "id",
                              "quoteAsset": "0xquoteasset",
                              "quoteAssetDecimals": 69,
                            },
                          ],
                        },
                        "integrator": Object {
                          "allowedChainIds": Array [],
                          "apiKeys": Array [],
                          "integratorId": "uuid-integrator",
                          "label": "Scam Integrator 1",
                          "plp": false,
                          "rfqm": false,
                          "rfqt": true,
                        },
                        "intentOnFilling": false,
                        "isIndicative": false,
                        "isLastLook": false,
                        "makerEndpointMaxResponseTimeMs": 600,
                        "takerAddress": "0xtakeraddress",
                        "txOrigin": "0xtxorigin",
                      },
                    ]
                `);
            });
        });
    });
    describe('v2', () => {
        const maker = new entities_1.RfqMaker({
            makerId: 'maker-id',
            chainId: 1337,
            updatedAt: new Date(),
            pairs: [['0x1', '0x2']],
            rfqmUri: null,
            rfqtUri: 'maker.uri',
        });
        const integrator = {
            allowedChainIds: [1337],
            apiKeys: [],
            integratorId: 'integrator-id',
            label: 'test integrator',
            plp: false,
            rfqm: false,
            rfqt: true,
        };
        describe('getV2PricesAsync', () => {
            it('transforms the API request into a quote server client request for buys', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken: '0x1',
                    isSelling: false,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                await rfqtService.getV2PricesAsync(quoteContext);
                expect(mockQuoteServerClient.batchGetPriceV2Async.mock.calls[0]).toMatchInlineSnapshot(`
                  Array [
                    Array [
                      "maker.uri",
                    ],
                    Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "integrator-id",
                      "label": "test integrator",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    Object {
                      "buyAmountBaseUnits": "1000",
                      "buyTokenAddress": "0x1",
                      "chainId": "1337",
                      "feeAmount": "100",
                      "feeToken": "0x0b1ba0af832d7c05fd64161e0db78e85978e8082",
                      "gasless": "false",
                      "integratorId": "integrator-id",
                      "protocolVersion": "4",
                      "sellTokenAddress": "0x2",
                      "takerAddress": "0x0",
                      "txOrigin": "0xtakeraddress",
                    },
                    [Function],
                  ]
                `);
            });
            it('transforms the API request into a quote server client request for sells', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken: '0x1',
                    isSelling: true,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                await rfqtService.getV2PricesAsync(quoteContext);
                expect(mockQuoteServerClient.batchGetPriceV2Async.mock.calls[0]).toMatchInlineSnapshot(`
                  Array [
                    Array [
                      "maker.uri",
                    ],
                    Object {
                      "allowedChainIds": Array [
                        1337,
                      ],
                      "apiKeys": Array [],
                      "integratorId": "integrator-id",
                      "label": "test integrator",
                      "plp": false,
                      "rfqm": false,
                      "rfqt": true,
                    },
                    Object {
                      "buyTokenAddress": "0x1",
                      "chainId": "1337",
                      "feeAmount": "100",
                      "feeToken": "0x0b1ba0af832d7c05fd64161e0db78e85978e8082",
                      "gasless": "false",
                      "integratorId": "integrator-id",
                      "protocolVersion": "4",
                      "sellAmountBaseUnits": "1000",
                      "sellTokenAddress": "0x2",
                      "takerAddress": "0x0",
                      "txOrigin": "0xtakeraddress",
                    },
                    [Function],
                  ]
              `);
            });
            it('gets prices', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken: '0x1',
                    isSelling: true,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                const price = {
                    // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
                    // eslint-disable-next-line @typescript-eslint/no-loss-of-precision
                    expiry: new utils_1.BigNumber(9999999999999999),
                    maker: '0xmakeraddress',
                    makerAmount: new utils_1.BigNumber(1000),
                    makerToken: '0x1',
                    makerUri: 'maker.uri',
                    takerAmount: new utils_1.BigNumber(1001),
                    takerToken: '0x2',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([price]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                const result = await rfqtService.getV2PricesAsync(quoteContext);
                expect(result.length).toEqual(1);
                expect(result[0].makerId).toEqual('maker-id');
                expect(result[0]).toMatchInlineSnapshot(`
                  Object {
                    "expiry": "10000000000000000",
                    "makerAddress": "0xmakeraddress",
                    "makerAmount": "1000",
                    "makerId": "maker-id",
                    "makerToken": "0x1",
                    "makerUri": "maker.uri",
                    "takerAmount": "1001",
                    "takerToken": "0x2",
                  }
                `);
            });
            it('gets prices from whitelisted makers only', async () => {
                const quoteContext = {
                    isFirm: false,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator: {
                        ...integrator,
                        whitelistMakerIds: ['maker1'],
                    },
                    makerToken: '0x1',
                    isSelling: true,
                    takerAddress: '0x0',
                    takerToken: '0x2',
                    txOrigin: '0xtakeraddress',
                };
                const price = {
                    // $eslint-fix-me https://github.com/rhinodavid/eslint-fix-me
                    // eslint-disable-next-line @typescript-eslint/no-loss-of-precision
                    expiry: new utils_1.BigNumber(9999999999999999),
                    maker: '0xmakeraddress',
                    makerAmount: new utils_1.BigNumber(1000),
                    makerToken: '0x1',
                    makerUri: 'maker.uri',
                    takerAmount: new utils_1.BigNumber(1001),
                    takerToken: '0x2',
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([
                    {
                        ...maker,
                        makerId: 'maker1',
                    },
                    {
                        ...maker,
                        makerId: 'maker2',
                    },
                ]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([price]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                const result = await rfqtService.getV2PricesAsync(quoteContext);
                expect(result.length).toEqual(1);
                expect(result[0].makerId).toEqual('maker1');
                expect(result[0]).toMatchInlineSnapshot(`
                  Object {
                    "expiry": "10000000000000000",
                    "makerAddress": "0xmakeraddress",
                    "makerAmount": "1000",
                    "makerId": "maker1",
                    "makerToken": "0x1",
                    "makerUri": "maker.uri",
                    "takerAmount": "1001",
                    "takerToken": "0x2",
                  }
                `);
            });
        });
        describe('getV2QuotesAsync', () => {
            const makerToken = '0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE';
            const makerAddress = '0x79b7a69d90c82E014Bf0315e164208119B510FA0';
            const takerToken = '0x42d6622deCe394b54999Fbd73D108123806f6a18';
            const takerAddress = '0xE06fFA8146bBdECcBaaF72B6043b29091071AEB8';
            const fakeNow = new Date(1657069278103);
            const expiry = new utils_1.BigNumber(fakeNow.getTime() + 1000000).dividedBy(constants_1.ONE_SECOND_MS).decimalPlaces(0);
            mockRfqBlockchainUtils.isValidOrderSignerAsync = jest.fn().mockResolvedValue(true);
            it('filters out quotes with no signatures', async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(undefined);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                const result = await rfqtService.getV2QuotesAsync(quoteContext);
                expect(result.length).toEqual(0);
            });
            it("doesn't blow up if a sign request fails", async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                mockQuoteServerClient.signV2Async = jest.fn().mockRejectedValue(new Error('EXPLODE'));
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                const result = await rfqtService.getV2QuotesAsync(quoteContext);
                expect(result.length).toEqual(0);
            });
            it('gets creates orders with unique nonces', async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(900),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync = jest
                    .fn()
                    .mockResolvedValue([new utils_1.BigNumber(10000), new utils_1.BigNumber(10000)]);
                const signature = { r: 'r', v: 21, s: 's', signatureType: signature_utils_1.SignatureType.EIP712 };
                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(signature);
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                const result = await rfqtService.getV2QuotesAsync(quoteContext, fakeNow);
                const [{ nonce: nonce1 }, { nonce: nonce2 }] = [
                    protocol_utils_1.OtcOrder.parseExpiryAndNonce(result[0].order.expiryAndNonce),
                    protocol_utils_1.OtcOrder.parseExpiryAndNonce(result[1].order.expiryAndNonce),
                ];
                expect(nonce1.toString()).not.toEqual(nonce2.toString());
            });
            it('gets a signed quote', async () => {
                const quoteContext = {
                    isFirm: true,
                    workflow: 'rfqt',
                    isUnwrap: false,
                    originalMakerToken: '0x1',
                    takerTokenDecimals: 18,
                    makerTokenDecimals: 18,
                    feeModelVersion: 1,
                    assetFillAmount: new utils_1.BigNumber(1000),
                    chainId: 1337,
                    integrator,
                    makerToken,
                    isSelling: false,
                    takerAddress: constants_1.NULL_ADDRESS,
                    trader: takerAddress,
                    takerToken,
                    txOrigin: takerAddress,
                };
                mockRfqMakerManager.getRfqtV2MakersForPair = jest.fn().mockReturnValue([maker]);
                mockQuoteServerClient.batchGetPriceV2Async = jest.fn().mockResolvedValue([
                    {
                        maker: makerAddress,
                        makerUri: maker.rfqtUri,
                        makerToken,
                        takerToken,
                        makerAmount: new utils_1.BigNumber(999),
                        takerAmount: new utils_1.BigNumber(1000),
                        expiry,
                    },
                ]);
                const signature = { r: 'r', v: 21, s: 's', signatureType: signature_utils_1.SignatureType.EIP712 };
                mockQuoteServerClient.signV2Async = jest.fn().mockResolvedValue(signature);
                mockFeeService.calculateFeeAsync = jest.fn().mockResolvedValue({
                    feeWithDetails: {
                        token: '0x0b1ba0af832d7c05fd64161e0db78e85978e8082',
                        amount: new utils_1.BigNumber(100),
                        type: 'fixed',
                    },
                });
                mockRfqMakerBalanceCacheService.getERC20OwnerBalancesAsync = jest
                    .fn()
                    .mockResolvedValue([new utils_1.BigNumber(10000)]);
                const rfqtService = new RfqtService_1.RfqtService(1337, // tslint:disable-line: custom-no-magic-numbers
                mockRfqMakerManager, mockQuoteRequestor, mockQuoteServerClient, constants_1.DEFAULT_MIN_EXPIRY_DURATION_MS, mockRfqBlockchainUtils, mockTokenMetadataManager, mockContractAddresses, mockFeeService, 1, mockRfqMakerBalanceCacheService);
                const result = await rfqtService.getV2QuotesAsync(quoteContext, fakeNow);
                expect(result.length).toEqual(1);
                expect(result[0]).toMatchObject({
                    fillableMakerAmount: new utils_1.BigNumber(999),
                    fillableTakerAmount: new utils_1.BigNumber(1000),
                    fillableTakerFeeAmount: new utils_1.BigNumber(0),
                    makerId: maker.makerId,
                    makerUri: maker.rfqtUri,
                    signature,
                });
                expect(result[0].order).toMatchInlineSnapshot(`
                OtcOrder {
                  "chainId": 1337,
                  "expiry": "1657070278",
                  "expiryAndNonce": "10401598717691489530826623925864187439861993812812831231287826374366",
                  "maker": "0x79b7a69d90c82E014Bf0315e164208119B510FA0",
                  "makerAmount": "999",
                  "makerToken": "0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE",
                  "nonce": "1657069278",
                  "nonceBucket": "0",
                  "taker": "0x0000000000000000000000000000000000000000",
                  "takerAmount": "1000",
                  "takerToken": "0x42d6622deCe394b54999Fbd73D108123806f6a18",
                  "txOrigin": "0xE06fFA8146bBdECcBaaF72B6043b29091071AEB8",
                  "verifyingContract": "0x5315e44798395d4a952530d131249fe00f554565",
                }
              `);
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rhdmlkd2Fsc2gvY29kZS1sb2NhbC8weC1yZnEtYXBpL3Rlc3Qvc2VydmljZXMvUmZxdFNlcnZpY2VUZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBOEJBLElBQUksQ0FBQyxJQUFJLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNsRCxlQUFlLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRTtRQUMvQyxPQUFPO1lBQ0gsc0JBQXNCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNwQyxDQUFDO0lBQ04sQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDeEQsY0FBYyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUU7UUFDOUMsT0FBTztZQUNILGdDQUFnQyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUM7WUFDakUsMEJBQTBCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsQ0FBQztTQUM5RCxDQUFDO0lBQ04sQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDcEQsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRTtRQUNqRCxPQUFPO1lBQ0gsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsQ0FBQztTQUN4RCxDQUFDO0lBQ04sQ0FBQyxDQUFDO0NBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLENBQUMsSUFBSSxDQUFDLG9EQUFvRCxFQUFFLEdB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Q0FBQyxDQUFDLHFCQUFxQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7O2VBZ0IvQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvZGF2aWR3YWxzaC9jb2RlLWxvY2FsLzB4LXJmcS1hcGkvdGVzdC9zZXJ2aWNlcy9SZnF0U2VydmljZVRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdHNsaW50OmRpc2FibGUgY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnMgbWF4LWZpbGUtbGluZS1jb3VudFxyXG5pbXBvcnQgeyBSZnFNYWtlckFzc2V0T2ZmZXJpbmdzIH0gZnJvbSAnQDB4L2Fzc2V0LXN3YXBwZXIvbGliL3NyYy90eXBlcyc7XHJcbmltcG9ydCB7IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93IH0gZnJvbSAnQDB4L2NvbnRyYWN0LWFkZHJlc3Nlcyc7XHJcbmltcG9ydCB7IE90Y09yZGVyIH0gZnJvbSAnQDB4L3Byb3RvY29sLXV0aWxzJztcclxuaW1wb3J0IHsgU2lnbmF0dXJlLCBTaWduYXR1cmVUeXBlIH0gZnJvbSAnQDB4L3Byb3RvY29sLXV0aWxzL2xpYi9zcmMvc2lnbmF0dXJlX3V0aWxzJztcclxuaW1wb3J0IHsgVG9rZW5NZXRhZGF0YSB9IGZyb20gJ0AweC90b2tlbi1tZXRhZGF0YSc7XHJcbmltcG9ydCB7IE1hcmtldE9wZXJhdGlvbiB9IGZyb20gJ0AweC90eXBlcyc7XHJcbmltcG9ydCB7IEJpZ051bWJlciB9IGZyb20gJ0AweC91dGlscyc7XHJcbmltcG9ydCB7IEF4aW9zSW5zdGFuY2UgfSBmcm9tICdheGlvcyc7XHJcblxyXG5pbXBvcnQgeyBJbnRlZ3JhdG9yIH0gZnJvbSAnLi4vLi4vc3JjL2NvbmZpZyc7XHJcbmltcG9ydCB7IERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUywgTlVMTF9BRERSRVNTLCBPTkVfU0VDT05EX01TIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvY29uc3RhbnRzJztcclxuaW1wb3J0IHsgUmZxTWFrZXIgfSBmcm9tICcuLi8uLi9zcmMvZW50aXRpZXMnO1xyXG5pbXBvcnQgeyBRdW90ZVJlcXVlc3RvciB9IGZyb20gJy4uLy4uL3NyYy9xdW90ZVJlcXVlc3Rvci9RdW90ZVJlcXVlc3Rvcic7XHJcbmltcG9ydCB7IEZlZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvZmVlX3NlcnZpY2UnO1xyXG5pbXBvcnQgeyBSZnF0U2VydmljZSB9IGZyb20gJy4uLy4uL3NyYy9zZXJ2aWNlcy9SZnF0U2VydmljZSc7XHJcbmltcG9ydCB7IFJmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSB9IGZyb20gJy4uLy4uL3NyYy9zZXJ2aWNlcy9yZnFfbWFrZXJfYmFsYW5jZV9jYWNoZV9zZXJ2aWNlJztcclxuaW1wb3J0IHsgRmlybVF1b3RlQ29udGV4dCwgUXVvdGVDb250ZXh0IH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL3R5cGVzJztcclxuaW1wb3J0IHsgSW5kaWNhdGl2ZVF1b3RlIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvdHlwZXMnO1xyXG5pbXBvcnQgeyBDYWNoZUNsaWVudCB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9jYWNoZV9jbGllbnQnO1xyXG5pbXBvcnQgeyBDb25maWdNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL2NvbmZpZ19tYW5hZ2VyJztcclxuaW1wb3J0IHsgR2FzU3RhdGlvbkF0dGVuZGFudCB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9HYXNTdGF0aW9uQXR0ZW5kYW50JztcclxuaW1wb3J0IHsgUXVvdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvcXVvdGVfc2VydmVyX2NsaWVudCc7XHJcbmltcG9ydCB7IFJmcUJhbGFuY2VDaGVja1V0aWxzLCBSZnFCbG9ja2NoYWluVXRpbHMgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvcmZxX2Jsb2NrY2hhaW5fdXRpbHMnO1xyXG5pbXBvcnQgeyBSZnFNYWtlckRiVXRpbHMgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvcmZxX21ha2VyX2RiX3V0aWxzJztcclxuaW1wb3J0IHsgUmZxTWFrZXJNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL3JmcV9tYWtlcl9tYW5hZ2VyJztcclxuaW1wb3J0IHsgVG9rZW5NZXRhZGF0YU1hbmFnZXIgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvVG9rZW5NZXRhZGF0YU1hbmFnZXInO1xyXG5pbXBvcnQgeyBUb2tlblByaWNlT3JhY2xlIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL1Rva2VuUHJpY2VPcmFjbGUnO1xyXG5pbXBvcnQgeyBaZXJvRXhBcGlDbGllbnQgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvWmVyb0V4QXBpQ2xpZW50JztcclxuXHJcbmplc3QubW9jaygnLi4vLi4vc3JjL3V0aWxzL3JmcV9tYWtlcl9tYW5hZ2VyJywgKCkgPT4gKHtcclxuICAgIFJmcU1ha2VyTWFuYWdlcjogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0UmZxdFYyTWFrZXJzRm9yUGFpcjogamVzdC5mbigpLFxyXG4gICAgICAgIH07XHJcbiAgICB9KSxcclxufSkpO1xyXG5cclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvcXVvdGVSZXF1ZXN0b3IvUXVvdGVSZXF1ZXN0b3InLCAoKSA9PiAoe1xyXG4gICAgUXVvdGVSZXF1ZXN0b3I6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RSZnF0SW5kaWNhdGl2ZVF1b3Rlc0FzeW5jOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pLFxyXG4gICAgICAgICAgICByZXF1ZXN0UmZxdEZpcm1RdW90ZXNBc3luYzogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcclxuICAgICAgICB9O1xyXG4gICAgfSksXHJcbn0pKTtcclxuXHJcbmplc3QubW9jaygnLi4vLi4vc3JjL3V0aWxzL3F1b3RlX3NlcnZlcl9jbGllbnQnLCAoKSA9PiAoe1xyXG4gICAgUXVvdGVTZXJ2ZXJDbGllbnQ6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJhdGNoR2V0UHJpY2VWMkFzeW5jOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pLFxyXG4gICAgICAgIH07XHJcbiAgICB9KSxcclxufSkpO1xyXG5cclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvc2VydmljZXMvcmZxX21ha2VyX2JhbGFuY2VfY2FjaGVfc2VydmljZScsICgpID0+ICh7XHJcbiAgICBSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2U6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGdldEVSQzIwT3duZXJCYWxhbmNlc0FzeW5jOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pLFxyXG4gICAgICAgIH07XHJcbiAgICB9KSxcclxufSkpO1xyXG5cclxuLy8gVE9ETyAocmhpbm9kYXZpZCk6IEZpbmQgYSBiZXR0ZXIgd2F5IHRvIGluaXRpYWxpemUgbW9ja2VkIGNsYXNzZXNcclxuY29uc3QgbW9ja1F1b3RlUmVxdWVzdG9yID0gamVzdC5tb2NrZWQobmV3IFF1b3RlUmVxdWVzdG9yKHt9IGFzIFJmcU1ha2VyQXNzZXRPZmZlcmluZ3MsIHt9IGFzIEF4aW9zSW5zdGFuY2UpKTtcclxuY29uc3QgbW9ja1JmcU1ha2VyTWFuYWdlciA9IGplc3QubW9ja2VkKG5ldyBSZnFNYWtlck1hbmFnZXIoe30gYXMgQ29uZmlnTWFuYWdlciwge30gYXMgUmZxTWFrZXJEYlV0aWxzLCAwKSk7XHJcbmNvbnN0IG1vY2tRdW90ZVNlcnZlckNsaWVudCA9IGplc3QubW9ja2VkKG5ldyBRdW90ZVNlcnZlckNsaWVudCh7fSBhcyBBeGlvc0luc3RhbmNlKSk7XHJcbmNvbnN0IG1vY2tGZWVTZXJ2aWNlID0gamVzdC5tb2NrZWQoXHJcbiAgICBuZXcgRmVlU2VydmljZShcclxuICAgICAgICAxMzM3LFxyXG4gICAgICAgIHt9IGFzIFRva2VuTWV0YWRhdGEsXHJcbiAgICAgICAge30gYXMgQ29uZmlnTWFuYWdlcixcclxuICAgICAgICB7fSBhcyBHYXNTdGF0aW9uQXR0ZW5kYW50LFxyXG4gICAgICAgIHt9IGFzIFRva2VuUHJpY2VPcmFjbGUsXHJcbiAgICAgICAge30gYXMgWmVyb0V4QXBpQ2xpZW50LFxyXG4gICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcclxuICAgICksXHJcbik7XHJcbmNvbnN0IG1vY2tSZnFCbG9ja2NoYWluVXRpbHMgPSBqZXN0Lm1vY2tlZCh7fSBhcyBSZnFCbG9ja2NoYWluVXRpbHMpO1xyXG5jb25zdCBtb2NrVG9rZW5NZXRhZGF0YU1hbmFnZXIgPSBqZXN0Lm1vY2tlZChuZXcgVG9rZW5NZXRhZGF0YU1hbmFnZXIoMTMzNywge30gYXMgUmZxQmxvY2tjaGFpblV0aWxzKSk7XHJcbi8vIHRzbGludDplbmFibGU6IG5vLW9iamVjdC1saXRlcmFsLXR5cGUtYXNzZXJ0aW9uXHJcbmNvbnN0IG1vY2tDb250cmFjdEFkZHJlc3NlcyA9IGdldENvbnRyYWN0QWRkcmVzc2VzRm9yQ2hhaW5PclRocm93KDEzMzcpO1xyXG5jb25zdCBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlID0gamVzdC5tb2NrZWQoXHJcbiAgICBuZXcgUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlKHt9IGFzIENhY2hlQ2xpZW50LCB7fSBhcyBSZnFCYWxhbmNlQ2hlY2tVdGlscyksXHJcbik7XHJcblxyXG5kZXNjcmliZSgnUmZxdCBTZXJ2aWNlJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLnJlcXVlc3RSZnF0RmlybVF1b3Rlc0FzeW5jLm1vY2tDbGVhcigpO1xyXG4gICAgICAgIG1vY2tRdW90ZVJlcXVlc3Rvci5yZXF1ZXN0UmZxdEluZGljYXRpdmVRdW90ZXNBc3luYy5tb2NrQ2xlYXIoKTtcclxuICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuYmF0Y2hHZXRQcmljZVYyQXN5bmMubW9ja0NsZWFyKCk7XHJcbiAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlci5nZXRSZnF0VjJNYWtlcnNGb3JQYWlyLm1vY2tDbGVhcigpO1xyXG4gICAgICAgIG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMubW9ja0NsZWFyKCk7XHJcbiAgICB9KTtcclxuICAgIGRlc2NyaWJlKCd2MScsICgpID0+IHtcclxuICAgICAgICBkZXNjcmliZSgnZ2V0VjFQcmljZXNBc3luYycsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoJ3Bhc3NlcyB0aHJvdWdoIGNhbGxzIHRvIFF1b3RlUmVxdWVzdG9yOjpyZXF1ZXN0UmZxdEluZGljYXRpdmVRdW90ZXNBc3luYycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcXRTZXJ2aWNlID0gbmV3IFJmcXRTZXJ2aWNlKFxyXG4gICAgICAgICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlcixcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVSZXF1ZXN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxQmxvY2tjaGFpblV0aWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUb2tlbk1ldGFkYXRhTWFuYWdlcixcclxuICAgICAgICAgICAgICAgICAgICBtb2NrQ29udHJhY3RBZGRyZXNzZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgMSxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnF0U2VydmljZS5nZXRWMVByaWNlc0FzeW5jKHtcclxuICAgICAgICAgICAgICAgICAgICBhbHRSZnFBc3NldE9mZmVyaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnYWx0LW1tJzogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnaWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VBc3NldDogJzB4YmFzZWFzc2V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZUFzc2V0OiAnMHhxdW90ZWFzc2V0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlQXNzZXREZWNpbWFsczogNDIwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlQXNzZXREZWNpbWFsczogNjksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDExMSksXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyaXNvblByaWNlOiBuZXcgQmlnTnVtYmVyKDY2NiksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4bWFrZXJ0b2tlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0T3BlcmF0aW9uOiBNYXJrZXRPcGVyYXRpb24uQnV5LFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHh0YWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlbnRPbkZpbGxpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpS2V5czogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93ZWRDaGFpbklkczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncmF0b3JJZDogJ3V1aWQtaW50ZWdyYXRvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBscDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJmcW06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZnF0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1NjYW0gSW50ZWdyYXRvciAxJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiAnMHh0eG9yaWdpbicsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcmdzID0gbW9ja1F1b3RlUmVxdWVzdG9yLnJlcXVlc3RSZnF0SW5kaWNhdGl2ZVF1b3Rlc0FzeW5jLm1vY2suY2FsbHNbMF07XHJcbiAgICAgICAgICAgICAgICBleHBlY3QoYXJncykudG9NYXRjaElubGluZVNuYXBzaG90KGBcclxuICAgICAgICAgICAgICAgICAgICBBcnJheSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICBcIjB4bWFrZXJ0b2tlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCIweHRha2VydG9rZW5cIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiMTExXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcIkJ1eVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCI2NjZcIixcclxuICAgICAgICAgICAgICAgICAgICAgIE9iamVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYWx0UmZxQXNzZXRPZmZlcmluZ3NcIjogT2JqZWN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImFsdC1tbVwiOiBBcnJheSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImJhc2VBc3NldFwiOiBcIjB4YmFzZWFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFzZUFzc2V0RGVjaW1hbHNcIjogNDIwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6IFwiaWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZUFzc2V0XCI6IFwiMHhxdW90ZWFzc2V0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicXVvdGVBc3NldERlY2ltYWxzXCI6IDY5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JcIjogT2JqZWN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImFsbG93ZWRDaGFpbklkc1wiOiBBcnJheSBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImFwaUtleXNcIjogQXJyYXkgW10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnRlZ3JhdG9ySWRcIjogXCJ1dWlkLWludGVncmF0b3JcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCI6IFwiU2NhbSBJbnRlZ3JhdG9yIDFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInBscFwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInJmcW1cIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZnF0XCI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZW50T25GaWxsaW5nXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzSW5kaWNhdGl2ZVwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzTGFzdExvb2tcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWFrZXJFbmRwb2ludE1heFJlc3BvbnNlVGltZU1zXCI6IDYwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0YWtlckFkZHJlc3NcIjogXCIweHRha2VyYWRkcmVzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR4T3JpZ2luXCI6IFwiMHh0eG9yaWdpblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVzY3JpYmUoJ2dldFYxUXVvdGVzQXN5bmMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KCdwYXNzZXMgdGhyb3VnaCBjYWxscyB0byBRdW90ZVJlcXVlc3Rvcjo6cmVxdWVzdFJmcXRGaXJtUXVvdGVzQXN5bmMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVSZXF1ZXN0b3IucmVxdWVzdFJmcXRGaXJtUXVvdGVzQXN5bmMubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxdFNlcnZpY2UgPSBuZXcgUmZxdFNlcnZpY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVJlcXVlc3RvcixcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9NSU5fRVhQSVJZX0RVUkFUSU9OX01TLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFCbG9ja2NoYWluVXRpbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1Rva2VuTWV0YWRhdGFNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tDb250cmFjdEFkZHJlc3NlcyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZSxcclxuICAgICAgICAgICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGF3YWl0IHJmcXRTZXJ2aWNlLmdldFYxUXVvdGVzQXN5bmMoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFsdFJmcUFzc2V0T2ZmZXJpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdhbHQtbW0nOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdpZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZUFzc2V0OiAnMHhiYXNlYXNzZXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlQXNzZXQ6ICcweHF1b3RlYXNzZXQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VBc3NldERlY2ltYWxzOiA0MjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGVBc3NldERlY2ltYWxzOiA2OSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTExKSxcclxuICAgICAgICAgICAgICAgICAgICBjb21wYXJpc29uUHJpY2U6IG5ldyBCaWdOdW1iZXIoNjY2KSxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHhtYWtlcnRva2VuJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRPcGVyYXRpb246IE1hcmtldE9wZXJhdGlvbi5CdXksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHh0YWtlcmFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweHRha2VydG9rZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVudE9uRmlsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvd2VkQ2hhaW5JZHM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlLZXlzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAndXVpZC1pbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmZxbTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJmcXQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnU2NhbSBJbnRlZ3JhdG9yIDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHR4b3JpZ2luJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBtb2NrUXVvdGVSZXF1ZXN0b3IucmVxdWVzdFJmcXRGaXJtUXVvdGVzQXN5bmMubW9jay5jYWxsc1swXTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChhcmdzKS50b01hdGNoSW5saW5lU25hcHNob3QoYFxyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5IFtcclxuICAgICAgICAgICAgICAgICAgICAgIFwiMHhtYWtlcnRva2VuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcIjB4dGFrZXJ0b2tlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCIxMTFcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiQnV5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcIjY2NlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgT2JqZWN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhbHRSZnFBc3NldE9mZmVyaW5nc1wiOiBPYmplY3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWx0LW1tXCI6IEFycmF5IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFzZUFzc2V0XCI6IFwiMHhiYXNlYXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiYXNlQXNzZXREZWNpbWFsc1wiOiA0MjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCJpZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInF1b3RlQXNzZXRcIjogXCIweHF1b3RlYXNzZXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJxdW90ZUFzc2V0RGVjaW1hbHNcIjogNjksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvclwiOiBPYmplY3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWxsb3dlZENoYWluSWRzXCI6IEFycmF5IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXBpS2V5c1wiOiBBcnJheSBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImludGVncmF0b3JJZFwiOiBcInV1aWQtaW50ZWdyYXRvclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwibGFiZWxcIjogXCJTY2FtIEludGVncmF0b3IgMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicGxwXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwicmZxbVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBcInJmcXRcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnRlbnRPbkZpbGxpbmdcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNJbmRpY2F0aXZlXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzTGFzdExvb2tcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWFrZXJFbmRwb2ludE1heFJlc3BvbnNlVGltZU1zXCI6IDYwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0YWtlckFkZHJlc3NcIjogXCIweHRha2VyYWRkcmVzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInR4T3JpZ2luXCI6IFwiMHh0eG9yaWdpblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGRlc2NyaWJlKCd2MicsICgpID0+IHtcclxuICAgICAgICBjb25zdCBtYWtlciA9IG5ldyBSZnFNYWtlcih7XHJcbiAgICAgICAgICAgIG1ha2VySWQ6ICdtYWtlci1pZCcsXHJcbiAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgcGFpcnM6IFtbJzB4MScsICcweDInXV0sXHJcbiAgICAgICAgICAgIHJmcW1Vcmk6IG51bGwsXHJcbiAgICAgICAgICAgIHJmcXRVcmk6ICdtYWtlci51cmknLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGludGVncmF0b3I6IEludGVncmF0b3IgPSB7XHJcbiAgICAgICAgICAgIGFsbG93ZWRDaGFpbklkczogWzEzMzddLCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICBhcGlLZXlzOiBbXSxcclxuICAgICAgICAgICAgaW50ZWdyYXRvcklkOiAnaW50ZWdyYXRvci1pZCcsXHJcbiAgICAgICAgICAgIGxhYmVsOiAndGVzdCBpbnRlZ3JhdG9yJyxcclxuICAgICAgICAgICAgcGxwOiBmYWxzZSxcclxuICAgICAgICAgICAgcmZxbTogZmFsc2UsXHJcbiAgICAgICAgICAgIHJmcXQ6IHRydWUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBkZXNjcmliZSgnZ2V0VjJQcmljZXNBc3luYycsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoJ3RyYW5zZm9ybXMgdGhlIEFQSSByZXF1ZXN0IGludG8gYSBxdW90ZSBzZXJ2ZXIgY2xpZW50IHJlcXVlc3QgZm9yIGJ1eXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZUNvbnRleHQ6IFF1b3RlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpc0Zpcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93OiAncmZxdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNVbndyYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWFrZXJUb2tlbjogJzB4MScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMSxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW46ICcweDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHgwJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHgyJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlci5nZXRSZnF0VjJNYWtlcnNGb3JQYWlyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbbWFrZXJdKTtcclxuICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLmNhbGN1bGF0ZUZlZUFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcclxuICAgICAgICAgICAgICAgICAgICAxMzM3LCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudCxcclxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrVG9rZW5NZXRhZGF0YU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmZxdFNlcnZpY2UuZ2V0VjJQcmljZXNBc3luYyhxdW90ZUNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuYmF0Y2hHZXRQcmljZVYyQXN5bmMubW9jay5jYWxsc1swXSkudG9NYXRjaElubGluZVNuYXBzaG90KGBcclxuICAgICAgICAgICAgICAgICAgQXJyYXkgW1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5IFtcclxuICAgICAgICAgICAgICAgICAgICAgIFwibWFrZXIudXJpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgXCJhbGxvd2VkQ2hhaW5JZHNcIjogQXJyYXkgW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwiYXBpS2V5c1wiOiBBcnJheSBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvcklkXCI6IFwiaW50ZWdyYXRvci1pZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJsYWJlbFwiOiBcInRlc3QgaW50ZWdyYXRvclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJwbHBcIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInJmcW1cIjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInJmcXRcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBcImJ1eUFtb3VudEJhc2VVbml0c1wiOiBcIjEwMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiYnV5VG9rZW5BZGRyZXNzXCI6IFwiMHgxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImNoYWluSWRcIjogXCIxMzM3XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImZlZUFtb3VudFwiOiBcIjEwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJmZWVUb2tlblwiOiBcIjB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJnYXNsZXNzXCI6IFwiZmFsc2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvcklkXCI6IFwiaW50ZWdyYXRvci1pZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJwcm90b2NvbFZlcnNpb25cIjogXCI0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInNlbGxUb2tlbkFkZHJlc3NcIjogXCIweDJcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwidGFrZXJBZGRyZXNzXCI6IFwiMHgwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInR4T3JpZ2luXCI6IFwiMHh0YWtlcmFkZHJlc3NcIixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFtGdW5jdGlvbl0sXHJcbiAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaXQoJ3RyYW5zZm9ybXMgdGhlIEFQSSByZXF1ZXN0IGludG8gYSBxdW90ZSBzZXJ2ZXIgY2xpZW50IHJlcXVlc3QgZm9yIHNlbGxzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVDb250ZXh0OiBRdW90ZUNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNGaXJtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvdzogJ3JmcXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1ha2VyVG9rZW46ICcweDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuOiAnMHgxJyxcclxuICAgICAgICAgICAgICAgICAgICBpc1NlbGxpbmc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiAnMHgwJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuOiAnMHgyJyxcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogJzB4dGFrZXJhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLmdldFJmcXRWMk1ha2Vyc0ZvclBhaXIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFttYWtlcl0pO1xyXG4gICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UuY2FsY3VsYXRlRmVlQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnMHgwYjFiYTBhZjgzMmQ3YzA1ZmQ2NDE2MWUwZGI3OGU4NTk3OGU4MDgyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcXRTZXJ2aWNlID0gbmV3IFJmcXRTZXJ2aWNlKFxyXG4gICAgICAgICAgICAgICAgICAgIDEzMzcsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlcixcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVSZXF1ZXN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxQmxvY2tjaGFpblV0aWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUb2tlbk1ldGFkYXRhTWFuYWdlcixcclxuICAgICAgICAgICAgICAgICAgICBtb2NrQ29udHJhY3RBZGRyZXNzZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgMSxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZnF0U2VydmljZS5nZXRWMlByaWNlc0FzeW5jKHF1b3RlQ29udGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwZWN0KG1vY2tRdW90ZVNlcnZlckNsaWVudC5iYXRjaEdldFByaWNlVjJBc3luYy5tb2NrLmNhbGxzWzBdKS50b01hdGNoSW5saW5lU25hcHNob3QoYFxyXG4gICAgICAgICAgICAgICAgICBBcnJheSBbXHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkgW1xyXG4gICAgICAgICAgICAgICAgICAgICAgXCJtYWtlci51cmlcIixcclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBcImFsbG93ZWRDaGFpbklkc1wiOiBBcnJheSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJhcGlLZXlzXCI6IEFycmF5IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJpbnRlZ3JhdG9ySWRcIjogXCJpbnRlZ3JhdG9yLWlkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCI6IFwidGVzdCBpbnRlZ3JhdG9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInBscFwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxbVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwicmZxdFwiOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0IHtcclxuICAgICAgICAgICAgICAgICAgICAgIFwiYnV5VG9rZW5BZGRyZXNzXCI6IFwiMHgxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImNoYWluSWRcIjogXCIxMzM3XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImZlZUFtb3VudFwiOiBcIjEwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJmZWVUb2tlblwiOiBcIjB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJnYXNsZXNzXCI6IFwiZmFsc2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiaW50ZWdyYXRvcklkXCI6IFwiaW50ZWdyYXRvci1pZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJwcm90b2NvbFZlcnNpb25cIjogXCI0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInNlbGxBbW91bnRCYXNlVW5pdHNcIjogXCIxMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInNlbGxUb2tlbkFkZHJlc3NcIjogXCIweDJcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwidGFrZXJBZGRyZXNzXCI6IFwiMHgwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInR4T3JpZ2luXCI6IFwiMHh0YWtlcmFkZHJlc3NcIixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFtGdW5jdGlvbl0sXHJcbiAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGl0KCdnZXRzIHByaWNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlQ29udGV4dDogUXVvdGVDb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRmlybTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3c6ICdyZnF0JyxcclxuICAgICAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYWtlclRva2VuOiAnMHgxJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MScsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNTZWxsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4MCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4MicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHRha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbG9zcy1vZi1wcmVjaXNpb25cclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoOTk5OTk5OTk5OTk5OTk5OSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MScsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdtYWtlci51cmknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDInLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLmdldFJmcXRWMk1ha2Vyc0ZvclBhaXIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFttYWtlcl0pO1xyXG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LmJhdGNoR2V0UHJpY2VWMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtwcmljZV0pO1xyXG4gICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UuY2FsY3VsYXRlRmVlQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZlZVdpdGhEZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiAnMHgwYjFiYTBhZjgzMmQ3YzA1ZmQ2NDE2MWUwZGI3OGU4NTk3OGU4MDgyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaXhlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJmcXRTZXJ2aWNlID0gbmV3IFJmcXRTZXJ2aWNlKFxyXG4gICAgICAgICAgICAgICAgICAgIDEzMzcsIC8vIHRzbGludDpkaXNhYmxlLWxpbmU6IGN1c3RvbS1uby1tYWdpYy1udW1iZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlcixcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVSZXF1ZXN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIERFRkFVTFRfTUlOX0VYUElSWV9EVVJBVElPTl9NUyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxQmxvY2tjaGFpblV0aWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tUb2tlbk1ldGFkYXRhTWFuYWdlcixcclxuICAgICAgICAgICAgICAgICAgICBtb2NrQ29udHJhY3RBZGRyZXNzZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0ZlZVNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgMSxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJCYWxhbmNlQ2FjaGVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZnF0U2VydmljZS5nZXRWMlByaWNlc0FzeW5jKHF1b3RlQ29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9FcXVhbCgxKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHRbMF0ubWFrZXJJZCkudG9FcXVhbCgnbWFrZXItaWQnKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHRbMF0pLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChgXHJcbiAgICAgICAgICAgICAgICAgIE9iamVjdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJleHBpcnlcIjogXCIxMDAwMDAwMDAwMDAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWFrZXJBZGRyZXNzXCI6IFwiMHhtYWtlcmFkZHJlc3NcIixcclxuICAgICAgICAgICAgICAgICAgICBcIm1ha2VyQW1vdW50XCI6IFwiMTAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWFrZXJJZFwiOiBcIm1ha2VyLWlkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlclRva2VuXCI6IFwiMHgxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlclVyaVwiOiBcIm1ha2VyLnVyaVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGFrZXJBbW91bnRcIjogXCIxMDAxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0YWtlclRva2VuXCI6IFwiMHgyXCIsXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaXQoJ2dldHMgcHJpY2VzIGZyb20gd2hpdGVsaXN0ZWQgbWFrZXJzIG9ubHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZUNvbnRleHQ6IFF1b3RlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpc0Zpcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93OiAncmZxdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNVbndyYXA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsTWFrZXJUb2tlbjogJzB4MScsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIGZlZU1vZGVsVmVyc2lvbjogMSxcclxuICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGxBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogMTMzNyxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlZ3JhdG9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmludGVncmF0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlbGlzdE1ha2VySWRzOiBbJ21ha2VyMSddLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MScsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNTZWxsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzczogJzB4MCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbjogJzB4MicsXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46ICcweHRha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlOiBJbmRpY2F0aXZlUXVvdGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJGVzbGludC1maXgtbWUgaHR0cHM6Ly9naXRodWIuY29tL3JoaW5vZGF2aWQvZXNsaW50LWZpeC1tZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbG9zcy1vZi1wcmVjaXNpb25cclxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6IG5ldyBCaWdOdW1iZXIoOTk5OTk5OTk5OTk5OTk5OSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXI6ICcweG1ha2VyYWRkcmVzcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbjogJzB4MScsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6ICdtYWtlci51cmknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDEpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW46ICcweDInLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLmdldFJmcXRWMk1ha2Vyc0ZvclBhaXIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm1ha2VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcklkOiAnbWFrZXIxJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubWFrZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VySWQ6ICdtYWtlcjInLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudC5iYXRjaEdldFByaWNlVjJBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbcHJpY2VdKTtcclxuICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLmNhbGN1bGF0ZUZlZUFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcclxuICAgICAgICAgICAgICAgICAgICAxMzM3LCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudCxcclxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrVG9rZW5NZXRhZGF0YU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmZxdFNlcnZpY2UuZ2V0VjJQcmljZXNBc3luYyhxdW90ZUNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5sZW5ndGgpLnRvRXF1YWwoMSk7XHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0WzBdLm1ha2VySWQpLnRvRXF1YWwoJ21ha2VyMScpO1xyXG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdFswXSkudG9NYXRjaElubGluZVNuYXBzaG90KGBcclxuICAgICAgICAgICAgICAgICAgT2JqZWN0IHtcclxuICAgICAgICAgICAgICAgICAgICBcImV4cGlyeVwiOiBcIjEwMDAwMDAwMDAwMDAwMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlckFkZHJlc3NcIjogXCIweG1ha2VyYWRkcmVzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWFrZXJBbW91bnRcIjogXCIxMDAwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlcklkXCI6IFwibWFrZXIxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlclRva2VuXCI6IFwiMHgxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtYWtlclVyaVwiOiBcIm1ha2VyLnVyaVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGFrZXJBbW91bnRcIjogXCIxMDAxXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0YWtlclRva2VuXCI6IFwiMHgyXCIsXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZXNjcmliZSgnZ2V0VjJRdW90ZXNBc3luYycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWFrZXJUb2tlbiA9ICcweDk1YUQ2MWIwYTE1MGQ3OTIxOWRDRjY0RTFFNkNjMDFmMEI2NEM0Y0UnO1xyXG4gICAgICAgICAgICBjb25zdCBtYWtlckFkZHJlc3MgPSAnMHg3OWI3YTY5ZDkwYzgyRTAxNEJmMDMxNWUxNjQyMDgxMTlCNTEwRkEwJztcclxuICAgICAgICAgICAgY29uc3QgdGFrZXJUb2tlbiA9ICcweDQyZDY2MjJkZUNlMzk0YjU0OTk5RmJkNzNEMTA4MTIzODA2ZjZhMTgnO1xyXG4gICAgICAgICAgICBjb25zdCB0YWtlckFkZHJlc3MgPSAnMHhFMDZmRkE4MTQ2YkJkRUNjQmFhRjcyQjYwNDNiMjkwOTEwNzFBRUI4JztcclxuICAgICAgICAgICAgY29uc3QgZmFrZU5vdyA9IG5ldyBEYXRlKDE2NTcwNjkyNzgxMDMpO1xyXG4gICAgICAgICAgICBjb25zdCBleHBpcnkgPSBuZXcgQmlnTnVtYmVyKGZha2VOb3cuZ2V0VGltZSgpICsgMV8wMDBfMDAwKS5kaXZpZGVkQnkoT05FX1NFQ09ORF9NUykuZGVjaW1hbFBsYWNlcygwKTtcclxuXHJcbiAgICAgICAgICAgIG1vY2tSZnFCbG9ja2NoYWluVXRpbHMuaXNWYWxpZE9yZGVyU2lnbmVyQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XHJcbiAgICAgICAgICAgIGl0KCdmaWx0ZXJzIG91dCBxdW90ZXMgd2l0aCBubyBzaWduYXR1cmVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVDb250ZXh0OiBGaXJtUXVvdGVDb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRmlybTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvdzogJ3JmcXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1ha2VyVG9rZW46ICcweDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYWRlcjogdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdHhPcmlnaW46IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyTWFuYWdlci5nZXRSZnF0VjJNYWtlcnNGb3JQYWlyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbbWFrZXJdKTtcclxuICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudC5iYXRjaEdldFByaWNlVjJBc3luYyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlcjogbWFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogbWFrZXIucmZxdFVyaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoOTk5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuc2lnblYyQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLmNhbGN1bGF0ZUZlZUFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcclxuICAgICAgICAgICAgICAgICAgICAxMzM3LCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudCxcclxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrVG9rZW5NZXRhZGF0YU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmZxdFNlcnZpY2UuZ2V0VjJRdW90ZXNBc3luYyhxdW90ZUNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQubGVuZ3RoKS50b0VxdWFsKDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KFwiZG9lc24ndCBibG93IHVwIGlmIGEgc2lnbiByZXF1ZXN0IGZhaWxzXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlQ29udGV4dDogRmlybVF1b3RlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpc0Zpcm06IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3c6ICdyZnF0JyxcclxuICAgICAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYWtlclRva2VuOiAnMHgxJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBpc1NlbGxpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFkZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIuZ2V0UmZxdFYyTWFrZXJzRm9yUGFpciA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW21ha2VyXSk7XHJcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuYmF0Y2hHZXRQcmljZVYyQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6IG1ha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IG1ha2VyLnJmcXRVcmksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDk5OSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LnNpZ25WMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRVhQTE9ERScpKTtcclxuICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLmNhbGN1bGF0ZUZlZUFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcclxuICAgICAgICAgICAgICAgICAgICAxMzM3LCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudCxcclxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrVG9rZW5NZXRhZGF0YU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmZxdFNlcnZpY2UuZ2V0VjJRdW90ZXNBc3luYyhxdW90ZUNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQubGVuZ3RoKS50b0VxdWFsKDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdnZXRzIGNyZWF0ZXMgb3JkZXJzIHdpdGggdW5pcXVlIG5vbmNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlQ29udGV4dDogRmlybVF1b3RlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpc0Zpcm06IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3c6ICdyZnF0JyxcclxuICAgICAgICAgICAgICAgICAgICBpc1Vud3JhcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxNYWtlclRva2VuOiAnMHgxJyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuRGVjaW1hbHM6IDE4LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgZmVlTW9kZWxWZXJzaW9uOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsbEFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBpc1NlbGxpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFkZXI6IHRha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4T3JpZ2luOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIuZ2V0UmZxdFYyTWFrZXJzRm9yUGFpciA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW21ha2VyXSk7XHJcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuYmF0Y2hHZXRQcmljZVYyQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXI6IG1ha2VyQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJVcmk6IG1ha2VyLnJmcXRVcmksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDk5OSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcnksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiBtYWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBtYWtlci5yZnF0VXJpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcig5MDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLmNhbGN1bGF0ZUZlZUFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMgPSBqZXN0XHJcbiAgICAgICAgICAgICAgICAgICAgLmZuKClcclxuICAgICAgICAgICAgICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWUoW25ldyBCaWdOdW1iZXIoMTAwMDApLCBuZXcgQmlnTnVtYmVyKDEwMDAwKV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZTogU2lnbmF0dXJlID0geyByOiAncicsIHY6IDIxLCBzOiAncycsIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRUlQNzEyIH07XHJcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuc2lnblYyQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoc2lnbmF0dXJlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZnF0U2VydmljZSA9IG5ldyBSZnF0U2VydmljZShcclxuICAgICAgICAgICAgICAgICAgICAxMzM3LCAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOiBjdXN0b20tbm8tbWFnaWMtbnVtYmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlck1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1F1b3RlUmVxdWVzdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVNlcnZlckNsaWVudCxcclxuICAgICAgICAgICAgICAgICAgICBERUZBVUxUX01JTl9FWFBJUllfRFVSQVRJT05fTVMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcUJsb2NrY2hhaW5VdGlscyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrVG9rZW5NZXRhZGF0YU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja0NvbnRyYWN0QWRkcmVzc2VzLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgICAgIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1JmcU1ha2VyQmFsYW5jZUNhY2hlU2VydmljZSxcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmZxdFNlcnZpY2UuZ2V0VjJRdW90ZXNBc3luYyhxdW90ZUNvbnRleHQsIGZha2VOb3cpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IFt7IG5vbmNlOiBub25jZTEgfSwgeyBub25jZTogbm9uY2UyIH1dID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIE90Y09yZGVyLnBhcnNlRXhwaXJ5QW5kTm9uY2UocmVzdWx0WzBdLm9yZGVyLmV4cGlyeUFuZE5vbmNlKSxcclxuICAgICAgICAgICAgICAgICAgICBPdGNPcmRlci5wYXJzZUV4cGlyeUFuZE5vbmNlKHJlc3VsdFsxXS5vcmRlci5leHBpcnlBbmROb25jZSksXHJcbiAgICAgICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4cGVjdChub25jZTEudG9TdHJpbmcoKSkubm90LnRvRXF1YWwobm9uY2UyLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdnZXRzIGEgc2lnbmVkIHF1b3RlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVDb250ZXh0OiBGaXJtUXVvdGVDb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRmlybTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvdzogJ3JmcXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzVW53cmFwOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1ha2VyVG9rZW46ICcweDEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2VyVG9rZW5EZWNpbWFsczogMTgsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJUb2tlbkRlY2ltYWxzOiAxOCxcclxuICAgICAgICAgICAgICAgICAgICBmZWVNb2RlbFZlcnNpb246IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxsQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDEzMzcsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRvcixcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsbGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJBZGRyZXNzOiBOVUxMX0FERFJFU1MsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhZGVyOiB0YWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZXJUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICB0eE9yaWdpbjogdGFrZXJBZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLmdldFJmcXRWMk1ha2Vyc0ZvclBhaXIgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFttYWtlcl0pO1xyXG4gICAgICAgICAgICAgICAgbW9ja1F1b3RlU2VydmVyQ2xpZW50LmJhdGNoR2V0UHJpY2VWMkFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyOiBtYWtlckFkZHJlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyVXJpOiBtYWtlci5yZnF0VXJpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlckFtb3VudDogbmV3IEJpZ051bWJlcig5OTkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlckFtb3VudDogbmV3IEJpZ051bWJlcigxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZTogU2lnbmF0dXJlID0geyByOiAncicsIHY6IDIxLCBzOiAncycsIHNpZ25hdHVyZVR5cGU6IFNpZ25hdHVyZVR5cGUuRUlQNzEyIH07XHJcbiAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQuc2lnblYyQXN5bmMgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoc2lnbmF0dXJlKTtcclxuICAgICAgICAgICAgICAgIG1vY2tGZWVTZXJ2aWNlLmNhbGN1bGF0ZUZlZUFzeW5jID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgICAgICAgICAgICAgICBmZWVXaXRoRGV0YWlsczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogJzB4MGIxYmEwYWY4MzJkN2MwNWZkNjQxNjFlMGRiNzhlODU5NzhlODA4MicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudDogbmV3IEJpZ051bWJlcigxMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZml4ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UuZ2V0RVJDMjBPd25lckJhbGFuY2VzQXN5bmMgPSBqZXN0XHJcbiAgICAgICAgICAgICAgICAgICAgLmZuKClcclxuICAgICAgICAgICAgICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWUoW25ldyBCaWdOdW1iZXIoMTAwMDApXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmZxdFNlcnZpY2UgPSBuZXcgUmZxdFNlcnZpY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgMTMzNywgLy8gdHNsaW50OmRpc2FibGUtbGluZTogY3VzdG9tLW5vLW1hZ2ljLW51bWJlcnNcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUmZxTWFrZXJNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tRdW90ZVJlcXVlc3RvcixcclxuICAgICAgICAgICAgICAgICAgICBtb2NrUXVvdGVTZXJ2ZXJDbGllbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9NSU5fRVhQSVJZX0RVUkFUSU9OX01TLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFCbG9ja2NoYWluVXRpbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9ja1Rva2VuTWV0YWRhdGFNYW5hZ2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tDb250cmFjdEFkZHJlc3NlcyxcclxuICAgICAgICAgICAgICAgICAgICBtb2NrRmVlU2VydmljZSxcclxuICAgICAgICAgICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vY2tSZnFNYWtlckJhbGFuY2VDYWNoZVNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJmcXRTZXJ2aWNlLmdldFYyUXVvdGVzQXN5bmMocXVvdGVDb250ZXh0LCBmYWtlTm93KTtcclxuXHJcbiAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9FcXVhbCgxKTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHRbMF0pLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlTWFrZXJBbW91bnQ6IG5ldyBCaWdOdW1iZXIoOTk5KSxcclxuICAgICAgICAgICAgICAgICAgICBmaWxsYWJsZVRha2VyQW1vdW50OiBuZXcgQmlnTnVtYmVyKDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGxhYmxlVGFrZXJGZWVBbW91bnQ6IG5ldyBCaWdOdW1iZXIoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFrZXJJZDogbWFrZXIubWFrZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBtYWtlclVyaTogbWFrZXIucmZxdFVyaSxcclxuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHRbMF0ub3JkZXIpLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChgXHJcbiAgICAgICAgICAgICAgICBPdGNPcmRlciB7XHJcbiAgICAgICAgICAgICAgICAgIFwiY2hhaW5JZFwiOiAxMzM3LFxyXG4gICAgICAgICAgICAgICAgICBcImV4cGlyeVwiOiBcIjE2NTcwNzAyNzhcIixcclxuICAgICAgICAgICAgICAgICAgXCJleHBpcnlBbmROb25jZVwiOiBcIjEwNDAxNTk4NzE3NjkxNDg5NTMwODI2NjIzOTI1ODY0MTg3NDM5ODYxOTkzODEyODEyODMxMjMxMjg3ODI2Mzc0MzY2XCIsXHJcbiAgICAgICAgICAgICAgICAgIFwibWFrZXJcIjogXCIweDc5YjdhNjlkOTBjODJFMDE0QmYwMzE1ZTE2NDIwODExOUI1MTBGQTBcIixcclxuICAgICAgICAgICAgICAgICAgXCJtYWtlckFtb3VudFwiOiBcIjk5OVwiLFxyXG4gICAgICAgICAgICAgICAgICBcIm1ha2VyVG9rZW5cIjogXCIweDk1YUQ2MWIwYTE1MGQ3OTIxOWRDRjY0RTFFNkNjMDFmMEI2NEM0Y0VcIixcclxuICAgICAgICAgICAgICAgICAgXCJub25jZVwiOiBcIjE2NTcwNjkyNzhcIixcclxuICAgICAgICAgICAgICAgICAgXCJub25jZUJ1Y2tldFwiOiBcIjBcIixcclxuICAgICAgICAgICAgICAgICAgXCJ0YWtlclwiOiBcIjB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICBcInRha2VyQW1vdW50XCI6IFwiMTAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICBcInRha2VyVG9rZW5cIjogXCIweDQyZDY2MjJkZUNlMzk0YjU0OTk5RmJkNzNEMTA4MTIzODA2ZjZhMThcIixcclxuICAgICAgICAgICAgICAgICAgXCJ0eE9yaWdpblwiOiBcIjB4RTA2ZkZBODE0NmJCZEVDY0JhYUY3MkI2MDQzYjI5MDkxMDcxQUVCOFwiLFxyXG4gICAgICAgICAgICAgICAgICBcInZlcmlmeWluZ0NvbnRyYWN0XCI6IFwiMHg1MzE1ZTQ0Nzk4Mzk1ZDRhOTUyNTMwZDEzMTI0OWZlMDBmNTU0NTY1XCIsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=